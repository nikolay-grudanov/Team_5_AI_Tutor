---
source_image: docs_tutorials-evolution_list_topics_notebooks__low-code-rag.jpg
page_number: 0
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 234.48
tokens: 19180
characters: 8699
timestamp: 2025-12-24T06:16:16.161529
finish_reason: stop
---

<h2>Создание Telegram-бота для поиска информации из Jira на основе Notebooks</h2>
<p>С помощью этого руководства вы настроите парсинг Jira, создадите базу знаний в сервисе Managed RAG и разработаете Telegram-бота для интерактивной работы с данными. В результате вы получите готовое решение для поиска информации в задачах Jira базе образа N8N в сервисе Notebooks.</p>
<p>Вы будете использовать следующие сервисы:</p>
<ul>
<li>Notebooks — сервис для запуска сред ML и работы DS-специалистов в ноутбуках на платформе Evolution.</li>
<li>Object Storage — объективное 53-хранилище с бесплатным хранением файлов, объемом до 15 ГБ.</li>
<li>Managed RAG — сервис для создания и управления базами знаний, используемыми при генерации ответов языковыми моделями.</li>
<li>Jira — инструмент управления проектами для планирования и отслеживания работы в команде.</li>
<li>Telegram — чат-платформа.</li>
<li>N8N — платформа для автоматизации рабочих процессов и интеграции сервисов.</li>
</ul>
<p>Шаги:</p>
<ol>
<li>Подготовьте среду.</li>
<li>Настройте воркфлоу в N8N для парсинга Jira.</li>
<li>Создайте базу знаний и получите токен доступа.</li>
<li>Настройте Telegram-бота для взаимодействия с RAG.</li>
</ol>
<h3>Перед началом работы</h3>
<ol>
<li>Зарегистрируйтесь в личном кабинете Cloud.ru.<br>Если вы уже зарегистрированы, войдите под своей учетной записью.</li>
<li>На верхней панели слева нажмите и убедитесь в том, что сервис Notebooks в разделе AI Factory подключен. Если сервис Notebooks не подключен, оставьте заявку на подключение.</li>
</ol>
<h4>1. Подготовьте среду</h4>
<ol>
<li>Создайте сервисный аккаунт.</li>
<li>Сгенерируйте API-ключ.</li>
<li>Для хранения данных создайте бакет в Object Storage. Укажите класс хранения Стандартный.</li>
<li>Создайте ноутбук со следующими параметрами:
<ul>
<li>Конфигурация — nscr.medium.4.</li>
<li>Образ — Cloud.ru Jupyter N8n.</li>
</ul>
<p>После создания ноутбука на главной странице сервиса Notebooks в строке нужного ноутбука нажмите JupyterLab.</p>
</li>
</ol>
<h4>2. Настройте воркфлоу в N8N для парсинга Jira</h4>
<p>На этом шаге вы настроите воркфлоу в N8N для извлечения данных из Jira и преобразования их в текстовый файл.</p>
<ol>
<li>На главной странице JupyterLab в разделе Other нажмите на N8N.</li>
<li>Дождитесь загрузки сервиса.</li>
<li>Пройдите регистрацию и нажмите Next.</li>
<li>(Опционально) Заполните следующую форму и нажмите Get started.</li>
<li>Нажмите Create Workflow.</li>
<li>Нажмите Add first step.</li>
<li>Выберите триггер Trigger manually.</li>
<li>Добавьте ноду HTTP Request со следующими параметрами:
<ul>
<li>Method: GET</li>
<li>URL: http://<jira>rest/api/2/search?ql=&maxResults=1000<br>Где <jira> — IP-адрес вашего Jira-сервера.</jira></jira></li>
<li>Authentication: Authentication</li>
<li>Generic Auth Type: Basic Auth</li>
<li>Добавьте credentials — логин и пароль от аккаунта в Jira.</li>
<li>Добавьте справа ноду Code, указав Language — JavaScript.</li>
<li>В ноду Code добавьте код:</li>
</ul>
<pre><code>let rows = [];
for (const item of items) {
    if (!item.json || !Array.isArray(item.json.issues)) continue;
    for (const issue of item.json.issues) {
        let id = issue.id ?? '';
        let key = issue.key ?? '';
        let desc = issue.fields.description ?? '';
        let creator = issue.fields.creator.name ?? '';
        rows.push([id, key, desc, creator].join(','));
    }
}
return { item: { text: rows.join('\n') } });
</code></pre>
<li>Добавьте справа ноду Aggregate.</li>
<li>Добавьте ноду Convert to File со следующими параметрами:
<ul>
<li>Operation: Convert to Text File</li>
<li>Text Input Field: text</li>
<li>Put Output File in Field: data</li>
</ul>
<p>В результате вы получите файл, в котором будет находиться текстовая выжимка из полей description, id, key, creator.</p>
<li>Добывьте полученный файл в бакет Object Storage, созданный при подготовке среды.</li>
</li>
</ol>
<p>Вы можете продумать, какие поля вам нужны, как лучше расположить данные в файле. В этом практическом руководстве приведен пример для реализации быстрого стarta.</p>
<h4>3. Создайте базу знаний и получите токен доступа</h4>
<p>На этом шаге вы создадите базу знаний в сервисе Managed RAG на основе данных, полученных из Jira.</p>
<ol>
<li>В личном кабинете перейдите в сервис AI → Managed RAG.</li>
<li>Нажмите Создать базу знаний.</li>
<li>Укажите путь к папке в бакете Object Storage, созданном при подготовке среды. Для обработки ваших файлов будет создан сервисный аккаунт.</li>
<li>Выберите расширение загруженных файлов.</li>
<li>Активируйте опцию Вручную настроить обработку документов и модель.</li>
<li>Включите аутентификацию и выберите сервисный аккаунт, созданный при подготовке среды.</li>
<li>Нажмите Продолжить.</li>
<li>Укажите настройки для экстракторов — парсеры, которые извлекают содержимое из файлов выбранного типа.</li>
</ol>
<h5>Экстракторы</h5>
<p>Simple file<br>.txt, .log, .rtf и другие текстовые файлы</p>
<p>Расширения документов<br>txt</p>
<p>Splitter<br>RecursiveCharacterTextSplitter</p>
<p>Chunk size<br>450</p>
<p>Chunk overlap<br>500</p>
<p>Separators<br>["\n\n", "\n", " "]</p>
<p>Разделители являются регулярным выражением</p>
<p>Keep separator<br>Не добавлять</p>
<li>Нажмите Продолжить.</li>
<li>Выберите модель, которая преобразует содержимое документов в векторное представление, например, Qwen/Qwen3-Embedding-0.6B .</li>
<li>Нажмите Создать.</li>
<p>Вы будете перенаправлены на страницу сервиса Managed RAG. База знаний будет создана и запущена в течение нескольких минут. Дождитесь, когда база знаний перейдет в статус «Активная» и появится публичный URL-адрес.</p>
<li>Создайте токен доступа для запросов к версии базы знаний.</li>
<li>Скопируйте полученный токен — значение из поля access token.</li>
<h4>4. Настройте Telegram-бота для взаимодействия с RAG</h4>
<p>На этом шаге вы создадите Telegram-бота и настроите его взаимодействие с базой знаний через Managed RAG.</p>
<ol>
<li>Зарегистрируйте бота в Telegram:
<ul>
<li>В Telegram найдите бота BotFather.</li>
<li>Выполните команду /newbot .</li>
<li>Задайте имя (name) и имя пользователя (username) для бота. Имя пользователя должно заканчиваться на «Bot» или «_bot».</li>
<li>Сохраните токен бота, который предоставит BotFather.</li>
<li>Убедитесь, что в Telegram созданный бот отображается в результатах поиска по имени.</li>
</ul>
</li>
<li>Вернитесь в N8N и в том же воркфлоу выберите Telegram Trigger: Updates message.</li>
<li>Создайте credentials, вставив токен вашего бота.</li>
<li>Проверьте работоспособность webhook.</li>
<li>Добавьте ноду HTTP Request со следующими параметрами:
<ul>
<li>Method: POST</li>
<li>URL: перейдите в Managed RAG → Название вашей базы знаний → API и скопируйте URL после слова «POST».</li>
<li>Выберите один из методов:
<ul>
<li>retrieve — если нужны только ссылки.</li>
<li>retrieve_generate — если нужен быстрый ответ и точность не важна.</li>
<li>retrieve_rerank — когда важна точность ранжирования.</li>
<li>retrieve_rerank_generate — точность ранжирования + готовый ответ.</li>
</ul>
<p>Пример</p>
<ul>
<li>Добавьте код в формате JSON:</li>
</ul>
<pre><code>{
  "project_id": "<project_id>",
  "query": "{!json.message.text }",
  "llm_settings": {
    "model_name": "qwen/qwen3-120b"
  },
  "system_prompt": "Вы позиционируете, который отвечает на вопросы, основываясь на предоставленной информации.",
  "retrieve_limit": 5,
  "chunk_size": 100,
  "rag_version": "your_rag_version"
}
</code></pre>
<p>Где:</p>
<ul>
<li>&lt;project_id&gt; — идентификатор вашего проекта.</li>
<li>&lt;your_access_token&gt; — токен доступа, полученный ранее.</li>
<li>&lt;your_rag_version&gt; — версия RAG из вкладки Информация о версии.</li>
</ul>
<p>Подробнее о параметрах — в документации Managed RAG.</p>
</li>
</ul>
<li>Отправьте запрос и убедитесь, что получаете корректный ответ от сервиса.</li>
<li>Добавьте ноду Telegram send message.</li>
<li>В правом верхнем углу установите переключатель в положение Activate.</li>
</ol>
<p>Теперь вы можете получать релевантные ответы по своей базе знаний интерактивно прямо в Telegram.</p>
<p>Например, нас интересует информация о деятельности Ирины Сидоровой. Такой правильный ответ мы получаем.</p>
<p>Ирина Сидорова — менеджер по работе с клиентами в компании FinPulse. Она участвовала в встрече 30 мая 2024 года, где обсуждались вопросы, связанные с SLA, миграцией баз данных и стратегией репликации.</p>
<p>This message was sent automatically with n8n</p>
<p>Результат</p>
<p>В ходе лабораторной работы вы создали LOW-Code RAG-систему на базе данных из Jira, настроили воркфлоу в N8N для извлечения данных, создали базу знаний в Managed RAG и разработали Telegram-бота для интерактивного взаимодействия с информацией.</p>