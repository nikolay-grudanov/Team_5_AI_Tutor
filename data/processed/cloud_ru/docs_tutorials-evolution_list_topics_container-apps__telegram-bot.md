---
source_image: docs_tutorials-evolution_list_topics_container-apps__telegram-bot.jpg
page_number: 0
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 80.44
tokens: 17704
characters: 4825
timestamp: 2025-12-24T05:33:22.860091
finish_reason: stop
---

Запуск Telegram-бота на Python в контейнере

С помощью этого руководства вы запустите Telegram-бота на Python в контейнере.

Вы будете использовать следующие сервисы:

• Artifact registry для хранения, совместного использования и управления Docker-образами и Helm-чартами.
• Container Apps — сервис для запуска контейнерных приложений в облаке. Не требует знания Kubernetes и создания виртуальных машин.
• Систему контроля версий GitVerse. В GitVerse находится готовый образ Telegram-бота.

Шаги:
1. Подготовьте среду.
2. Клонируйте или скачайте репозиторий кода с GitVerse.
3. Зарегистрируйте Telegram-бота.
4. Соберите образ и присвойте тег.
5. Загрузите Docker-образ в реестр.
6. Создайте и запустите контейнер.
7. Добавьте вебхук в Telegram.
8. Проверьте работу Telegram-бота.

Перед началом работы
Зарегистрируйтесь в личном кабинете Cloud.ru.
Если вы уже зарегистрированы, войдите под своей учетной записью.

1. Подготовьте среду
Подготовьте среду, если не сделали этого ранее.

2. (Опционально) Клонируйте или скачайте репозиторий кода с GitVerse
Вы можете зарегистрироваться в GitVerse, если у вас еще нет аккаунта, и познакомиться с новой системой контроля версий. Этот шаг необязательный и не влияет на дальнейшее прохождение сценария.

В этом репозитории находится готовый образ Telegram-бота на языке Python.

git clone https://gitverse.ru/cloudru/evo-containerapp-telegrambot-webhook-python-sample

3. Зарегистрируйте Telegram-бота
1. В Telegram найдите BotFather.

2. Выполните команду /newbot .

3. Задайте имя (name) и имя пользователя (username) для бота.
Имя пользователя должно оканчиваться на ...Bot или ...bot .
В нашем случае:
• name: new-bot
• username: botforlabbot
В результате вы получите токен. Сохраните его — он потребуется на следующих этапах.

4. Соберите образ и присвойте тег
Соберите образ и присвойте ему тег, выполнив следующую команду:

docker build --tag <registry_name>.cr.cloud.ru/telegram-bot-example https://gitverse.ru/cloudru/evo-conta:

Где <registry_name> — название реестра, которое вы указывали при его создании в Artifact Registry.

Для создания контейнера Docker-образ должен быть собран под платформу linux/amd64, поэтому в команде используется флаг platform со значением linux/amd64 .

5. Загрузите Docker-образ в реестр
1. Загрузите образ в реестр Artifact Registry, выполнив команду:

docker push <registry_name>.cr.cloud.ru/telegram-bot-example

Где:
• <registry_name> — название реестра, которое вы указывали при его создании в Artifact Registry.
• telegram-bot-example — название будущего репозитория в Artifact Registry. Название репозитория соответствует имени Docker-образа.
2. В личном кабинете перейдите в раздел с Реестры → Репозитории → Артефакты сервиса Artifact Registry и убедитесь, что образ загружен.

6. Создайте и запустите контейнер
1. Перейдите в сервис Container Apps через меню в левом верхнем углу экрана.

2. Выберите Container Services и нажмите Создать.

3. Укажите название контейнера и активируйте опцию Публичный адрес.
4. Нажмите Продолжить.

Создание Container App и первой ревизии

5. Выберите реестр, репозиторий и тег Docker-образа, который вы загрузили в Artifact Registry.
6. Укажите порт контейнера — 5000.

Общие параметры Переменные Health-пробы
Ключ * 1 Значение * 2
BOT_TOKEN 6829552352:AAGJ6f1Q3zBx_ae6gbv8pOU3J10ghWly1tE
Добавить переменную +

7. Перейдите на вкладку Переменные и добавьте переменную окружения BOT_TOKEN .
В значение переменной укажите токен, полученный при регистрации бота в BotFather.
8. Нажмите Продолжить.

9. Задайте количество ресурсов:
• vCPU и RAM: 0.5 vCPU — 1024 МБ
• Минимальное количество экземпляров: 0
• Максимальное количество экземпляров: 1
10. Нажмите Создать.

11. Дождитесь, когда контейнер и ревизия перейдут в статус «Выполняется».

7. Добавьте вебхук в Telegram
Чтобы бот получал сообщения из Telegram, добавьте вебхук:
1. Откройте любой браузер.
2. В адресной строке введите по очереди запросы.
   а. Проверьте, существуют ли вебхуки:
      https://api.telegram.org/bot{BOT_TOKEN}/getWebhookInfo
   {BOT_TOKEN} здесь и далее — токен, который был сгенерирован при регистрации бота в BotFather.
   б. Удалите существующие вебхуки:
      https://api.telegram.org/bot{BOT_TOKEN}/deleteWebhook
   с. Добавьте новый вебхук:
      https://api.telegram.org/bot{BOT_TOKEN}/setWebhook?url={PUBLIC_URL}/{BOT_TOKEN}
   {PUBLIC_URL} — публичный URL-адрес, который был сгенерирован при создании контейнера в Container Apps.

8. Проверьте работу Telegram-бота
Вызовите бота в Telegram по имени пользователя (username) и проверьте его работу, выполнив команду /start .

Привет! Давай сыграем в игру Я загадаю число от 1 до 100 включительно, а ты попробуйешь его угадать
Введи загаданное число:
Загаданное число меньше. Попробуйте еще раз:

Результат
Вы научились разворачивать Telegram-бота в контейнере.