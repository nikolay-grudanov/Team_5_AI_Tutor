---
source_image: docs_tutorials-evolution_list_topics_managed-kubernetes__automatic-scaling.jpg
page_number: 0
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.14
tokens: 5967
characters: 3067
timestamp: 2025-12-24T05:51:39.043581
finish_reason: stop
---

### Настройка автоматического масштабирования группы узлов

В сценарии рассмотрим, как настраивать и управлять автоматическим масштабированием через API:

1. Создадим группу узлов с поддержкой автоматического масштабирования.
2. Отредактируем минимальное и максимальное количество узлов.
3. Изменим политику масштабирования на фиксированную.
4. Изменим политику масштабирования с фиксированной на автоматическую.

Перед началом работы

1. Создайте кластер по инструкции.
2. Пройдите аутентификацию в API.

Создайте группу узлов с поддержкой автоматического масштабирования

Выполните HTTP-запрос:

```http
POST https://mk8n.api.cloud.ru/v2/clusters/{clusterId}/node-pools
```

Где `clusterId` — идентификатор кластера, для которого нужно создать группу узлов.

В теле запроса передайте параметры:

```json
{
    "displayName": "cloudru-node-pool-scale",
    "scalePolicy": {
        "autoScale": {
            "minCount": 2,
            "maxCount": 5,
            "initialCount": 3
        }
    },
    "machineConfiguration": {
        "diskSize": 10,
        "flavorId": "f3e8e57c-0004-4f44-bad6-1a0f3c09a128"
    },
    "networkConfiguration": {
        "nodesSubnetCidr": "10.0.0.0/24"
    }
}
```

В примере вы можете использовать указанные значения параметров `displayName`, `diskSize`, `nodesSubnetCidr` или заменить их на свои.

В результате выполнения запроса будет создана группа узлов с тремя рабочими узлами. Размер группы узлов может масштабироваться в зависимости от нагрузки от двух до пяти узлов.

Отредактируйте параметры автоматического масштабирования

Выполните HTTP-запрос:

```http
PATCH https://mk8n.api.cloud.ru/v2/node-pools/{nodePoolId}
```

Где `nodePoolId` — идентификатор созданной группы узлов.

В теле запроса передайте параметры:

```json
{
    "data": {
        "scalePolicy": {
            "autoScale": {
                "minCount": 1,
                "maxCount": 6
            }
        }
    }
}
```

Параметры масштабирования изменятся. Теперь размер группы узлов может масштабироваться в зависимости от нагрузки от одного до шести узлов.

Измените политику масштабирования на фиксированную

Выполните HTTP-запрос:

```http
PATCH https://mk8n.api.cloud.ru/v2/node-pools/{nodePoolId}
```

Где `nodePoolId` — идентификатор группы узлов.

В теле запроса передайте следующие параметры:

```json
{
    "data": {
        "scalePolicy": {
            "fixedScale": {
                "count": 4
            }
        }
    }
}
```

В результате размер группы узлов будет постоянным.

Измените политику масштабирования на автоматическую

Выполните HTTP-запрос:

```http
PATCH https://mk8n.api.cloud.ru/v2/node-pools/{nodePoolId}
```

В теле запроса передайте параметры:

```json
{
    "data": {
        "scalePolicy": {
            "autoScale": {
                "minCount": 0,
                "maxCount": 6
            }
        }
    }
}
```

После выполнения запроса группа узлов будет состоять из четырех рабочих узлов. Размер группы может масштабироваться в зависимости от нагрузки, уменьшаясь до нуля или увеличиваясь до шести узлов.