---
source_image: page_122.png
page_number: 122
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.64
tokens: 6232
characters: 1515
timestamp: 2025-12-24T10:05:01.699774
finish_reason: stop
---

callback(! exists: DB.exists(username) );
}, { type: 'unicast' });
Вы можете завершить работу любых других слушателей широковещательных событий:
    // завершает работу всех слушателей, кроме текущего
    hub.emit('eventClient:done', 'user:addUser');
Чтобы это все работало, как нужно, вы должны прослушивать следующее событие:
hub.on('eventClient:done', function(event) {
    console.log('Завершаю слушать событие ' + event);
    hub.removeAllListeners(event);
});
Данное событие может быть отправлено коммутатором событий, когда стал доступен новый слушатель одноадресного события, или же пользовательским модулем, когда происходит обновление широковещательных модулей.

Сессии (Сеансы)

Доверенные одноадресные слушатели получают данные сессии из порожденных событий. «Доверенный» клиент подсоединяется к коммутатору событий, используя разделяемый пароль:
eventHub = require('EventHub/clients/server/eventClient.js')
    .getClientHub('http://localhost:5883?token=secret')
Теперь этот клиент может прослушивать одноадресные события. Все одноадресные события получают дополнительные данные сессии в обратных вызовах событий:
eventHub.on('user', function(obj) {
    var sessionID = obj['eventHub:session'];
});
Ключ eventHub:session — уникальная строка (UUID), которая идентифицирует сессию. Доверенные слушатели могут использовать этот ключ при сохранении данных сессии и при доступе к ним. Ключи сессии полностью прозрачны для недоверенных клиентов. И клиенты jQuery, и клиенты YUI3 хранят ключи сессии в Cookie.