---
source_image: page_308.png
page_number: 308
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.95
tokens: 6332
characters: 1804
timestamp: 2025-12-24T10:08:48.752421
finish_reason: stop
---

Сложность

Мы добавим еще один полезный плагин Jenkins. Ранее мы обсуждали npm-пакет jscheckstyle, который может вывести свой отчет в формате Checkstyle. Вы бы и не знали об этом формате, если бы в Jenkins не было специального плагина, поддерживающего данный формат. Объединив jscheckstyle и Jenkins, вы сможете видеть информацию о сложности вашего проекта в панели инструментов Jenkins, что очень удобно.

Процесс стандартный: нужно установить плагин Jenkins, обновить make-файл для генерации требуемых файлов, а затем настроить ваш проект на использование установленного плагина и в настройках плагина указать каталог, в котором будут находиться сгенерированные файлы. Вроде бы все ясно, так давайте приступим к настройке!

Первым делом установите Jenkins-плагин Checkstyle, а затем добавьте следующие цели в ваш make-файл, чтобы генерировать информацию о сложности с помощью jscheckstyle:

CHECKSTYLE=checkstyle
STYLE := $(patsubst %.js,%..xml,$(SRC))
%.xml : %.js
    -mkdir -p $(CHECKSTYLE)/$(@D)
    -jscheckstyle --checkstyle $< > $(CHECKSTYLE)/$(*D)/$(*F).xml

Все очень подобно коду для UglifyJS, приведенному ранее. Мы преобразуем JavaScript-файлы из каталога src в XML-файлы в каталоге, зеркально отображенном Checkstyle. Обратите внимание, что jscheckstyle завершит работу, если найдет какие-либо нарушения, но это остановит сборку! В случае с предварительной фиксацией это было полезно, но останавливать сборку из-за сбоя создания отчета сложности — не самое хорошее решение.

Добавьте $(STYLE) к цели prod:

prod: unit_tests $(OBJS) $(STYLE)

После этого все эти файлы будут сгенерированы при следующей сборке. Теперь расскажем об этом Jenkins: на экране Configure вашего проекта добавьте действие после сборки Publish Checkstyle analysis results и настройте его, как показано на рис. 8.16.