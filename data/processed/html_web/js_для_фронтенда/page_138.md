---
source_image: page_138.png
page_number: 138
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.69
tokens: 6197
characters: 1424
timestamp: 2025-12-24T10:05:20.623594
finish_reason: stop
---

Заглушки

Заглушки (stub) используются для возврата фиксированных значений/объектов в тестируемую функцию в местах вызова внешних методов. Заглушку не интересует, как был вызван метод внешнего объекта, заглушка просто возвращает фиксированный объект, заданный вами заранее. Обычно в качестве такого объекта выступает какое-либо ожидаемое вызывающей стороной значение, если у нас с вами позитивное тестирование, или какое-то неожиданное/нетривиальное значение, если мы проводим негативное тестирование.

Тестирование с заглушками подразумевает, что вы заменяете ваши реальные объекты заглушками, которые будут возвращать фиксированные значения, заданные вами при написании тестового сценария.

Рассмотрим следующий код функции добавления в «Корзину»:

function addToShoppingCart(item) {
    if (item.inStock()) {
        this.cart.push(item);
        return item;
    } else {
        return null;
    }
}

Один из способов протестировать этот код — заглушить метод item.inStock и протестировать два возможных пути развития ситуации добавления в Корзину (успешный и неуспешный):

testAddOk: function() {
    var shoppingCart = new ShoppingCart()
        , item = { inStock: function() { return true; } }
        , back = shoppingCart.addToShoppingCart(item)
        ;
    Y.Assert.areSame(back, item, "Элемент не возвращен");
    Y.ArrayAssert.contains(item, "Элемент не помещен в корзину!");
}
    , testAddNok: function() {