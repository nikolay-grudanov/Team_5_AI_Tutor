---
source_image: page_119.png
page_number: 119
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.82
tokens: 6236
characters: 1614
timestamp: 2025-12-24T10:04:58.883825
finish_reason: stop
---

+ event);
    eventHub.removeAllListeners(event);
});
Обратите внимание на то, что коммутатор событий достаточно сообразителен, чтобы не позволить всем подряд подсоединенным клиентам отправлять события eventClient:done, и отбрасывает их (события) в случае получения. Таким образом, в случае чего, клиент злоумышленника не может узурпировать полномочия коммутатора события.

Реализация

EventHub (https://github.com/zzo/EventHub) — простая реализация коммутатора событий, имеющая клиенты для Node.js, YUI3, jQuery. Основан EventHub на библиотеке socket.io, может быть установлен при помощи npm:

% npm install EventHub

Построенная на базе socket.io, данная реализация представляет собой централизованный концентратор, работающий под Node.js и предоставляющий функции обратного вызова для прямых ответов. Большинство событий не требуют прямых ответов, поэтому не перестарайтесь с использованием этой функции.

После установки EventHub запустить коммутатор можно так:

% npm start EventHub

В результате будет запущен коммутатор событий, по умолчанию прослушивающий порт 5883. Всех клиентов нужно настроить на использование этого порта и компьютера, на котором установлен коммутатор. Пример настройки клиента Node.js:

var EventHub = require('EventHub/clients/server/eventClient.js');
    , eventHub = EventHub.getClientHub('http://localhost:5883');
eventHub.on('ADD_USER', function(user) {
    // Добавляем логику пользователя
    eventHub.fire('ADD_USER_DONE', { success: true, user: user });
});
Эти строки инстанцируют клиент коммутатора события, соединяющийся с ранее запущенным коммутатором события (коммутатор