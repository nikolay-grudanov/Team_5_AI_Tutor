---
source_image: page_179.png
page_number: 179
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.73
tokens: 6341
characters: 1955
timestamp: 2025-12-24T10:06:19.106958
finish_reason: stop
---

Что касается развертывания файлов покрытия для интеграционного/Selenium-тестирования, в этом случае решение не может быть простым. В этом случае весь код должен быть инструментован и затем развернут, как обычно. Обратите внимание на то, что инструментированный код будет работать более медленно, потому что у него в два раза больше операторов, поэтому не нужно проводить тесты производительности на таком коде.

Как только вы развернете код, то запустите свои тесты, при этом напоминаю, что информация о покрытии не сохраняется при перезагрузках. Перед перезапуском браузера или переходом на другую страницу необходимо сначала извлечь и сохранить информацию о покрытии кода.

К счастью, Selenium упрощает эту задачу, поскольку у каждого тестового сценария или набора тестов есть функция tearDown, подходящая для нашей задачи.

Кроме того, развернутая инструментированная сборка будет вам очень полезна при ручном тестирования. Загрузите страницу в своем браузере и щелкните где-нибудь. После этого вы сможете вывести информацию о покрытии на консоль (просмотрите глобальную переменную _yuitest_coverage), затем скопируйте и вставьте ее в файл для преобразования в HTML. Таким образом вы точно сможете увидеть, какой код был выполнен во время вашего случайного щелчка.

Важно отметить, что при этом щелчке вы по сути ничего не тестируете в обычном понимании этого слова. Вы просто узнаете, какой код был выполнен.

Развертывание JavaScript сервера

Имитация (mock) загрузчика Node.js — не слишком плохой способ динамически вводить код со счетчиками покрытия в тестируемый JavaScript. Если такой способ оказывается слишком страшным для вас (он включает переопределение приватного метода), есть другой способ.

Сейчас мы будем говорить о методе module_load (Node.js) и его переопределении. Это внутренний метод (что, вообще говоря, призывает к осторожности), который отличается большой прозрачностью и тем самым будет нам очень полезен в рамках нашей задачи.