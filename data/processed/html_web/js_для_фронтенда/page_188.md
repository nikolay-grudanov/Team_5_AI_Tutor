---
source_image: page_188.png
page_number: 188
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.50
tokens: 6374
characters: 1724
timestamp: 2025-12-24T10:06:30.183032
finish_reason: stop
---

<table>
  <tr>
    <th>Branch data</th>
    <th>Line data</th>
    <th>Source code</th>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>: function sum(a, b) {</td>
  </tr>
  <tr>
    <td>2</td>
    <td>1</td>
    <td>: return a + b;</td>
  </tr>
  <tr>
    <td>3</td>
    <td>:</td>
    <td>:</td>
  </tr>
  <tr>
    <td>4</td>
    <td>:</td>
    <td>:</td>
  </tr>
</table>

Рис. 5.2. Покрытие кода для sum.js

Мы видим, что каждая строка выполнялась один раз, что дает нам 100%-ое покрытие кода.

5.7. Агрегация

В случае с модульным и интеграционным тестированием мы смогли сохранить информацию о покрытии для отдельных тестов или наборов тестов. Но как увидеть полную картину? Для этого на помощь приходит команда lcov.

Команда lcov -a агрегирует множество файлов в формате LCOV в один большой файл. Так, следующая команда:

% lcov -a test.lcov -a test1.lcov -a test2.lcov ... -o total.lcov

объединяет набор LCOV-файлов. Причем данная команда может использоваться для соединения всех тестов как модульного, так и интеграционного тестирования вместе.

Чтобы быть объединенными, все LCOV-файлы должны совместно использовать один и тот же корневой каталог. Это не является проблемой при объединении всех результатов покрытия модульного тестирования или всех результатов покрытия интеграционного тестирования независимо друг от друга, но может стать большой проблемой, когда нужно объединить вместе результаты покрытия модульного и интеграционного тестирований.

Посмотрите на формат LCOV. Первая строка каждого нового раздела файла покрытия начинается с полного пути к исходному файлу (в нашем случае к JavaScript-файлу). Если встречаются два несовпадающих корневых каталога, lcov будет не в состоянии объединить их.