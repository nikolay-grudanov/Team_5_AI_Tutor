---
source_image: page_160.png
page_number: 160
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.49
tokens: 6291
characters: 1794
timestamp: 2025-12-24T10:05:58.915796
finish_reason: stop
---

Тест пройден! Матчиры Jasmine (в предыдущем примере — toEqual) эквивалентны утверждениям YUI Test. И вы можете сами писать свои матчиры.

Ключевое слово expect используется для задания ожиданий, которые будут проверяться по ходу тестирования. Конструкция describe предназначена для определения набора тестов, наборы могут быть вложенными (для определения теста внутри любого набора тестов используется конструкция it). Ключевые слова describe и it являются обычными вызовами функций, которым передаются два параметра. Первый — название группы или теста, второй — функция, содержащая код. Простой пример для ясности:

describe "Набор тестов", ->
    it "проверка ожиданий", ->
        expect(1 + 2).toBe(3)

Jasmine также поддерживает функции beforeEach и afterEach, которые выполняются до и после каждого тестового случая, аналогично функциям setUp и tearDown в YUI Test.

Зависимости

Факторинг зависимых объектов testируемого Node.js6-кода может стать более требовательным, если зависимости помещаются посредством функции require. Вам нужно или изменить ваш исходный код для тестирования (что не очень хорошо), или имитировать (mock) функцию require (что очень сложно). К счастью, у нас есть отличный npm-пакет Mockery (http://bit.ly/XUdM0I). Пакет Mockery перехватывает все вызовы require, позволяя вставку имитированных версий зависимостей вашего кода вместо реальных.

Далее приведено описание нашей модифицированной функции sum, которая теперь читает JSON-строку из файла и добавляет свойства a и b, найденные в ней:

var fs = require('fs');
exports.sum = function(file) {
    var data = JSON.parse(fs.readFileSync(file, 'utf8'));
    return data.a + data.b;
};

6 Node.js — это асинхронная JavaScript библиотека для построения серверных приложений, которые используют конвенцию CommonJS.