---
source_image: page_137.png
page_number: 137
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.63
tokens: 6226
characters: 1523
timestamp: 2025-12-24T10:05:21.536130
finish_reason: stop
---

ты. Тестовый дубль, который захватывает и записывает информацию о том, как вызывались методы, называется шпионом.

Моск-объекты (имитации)

Моск-объекты (объекты-имитации) используются для проверки того, что ваша функция корректно вызывает внешние API. Тесты с использованием имитаций (моск-объектов) позволяют проверить, что тестируемая функция передает корректные параметры (по типу или по значению) внешнему объекту. В случае консольных приложений (работающих в режиме командной строки), имитации testируют команды. В мире событийно-ориентированных архитектур имитации позволяют тестировать генерируемые события.

Давайте рассмотрим такой пример:

// производственный код:
function buyNowClicked(event) {
    hub.fire('addToShoppingCart', { item: event.target.id });
}
Y.one('#products').delegate('click', buyNowClicked, '.buy-now-button');
/* ... в коде теста: */
testAddToShoppingCart: function() {
    var hub = Y.Mock();
    Y.Mock.expect(hub,
    {
        method: "fire"
        , args: [ "addToShoppingCart" , Y.Mock.Value.String]
    }
    );
    Y.one('.buy-now-button').simulate('click');
    Y.Mock.verify(hub);
}

Данный код тестирует поток кнопки Купить сейчас (Buy Now!) (элемент, который содержит CSS-класс buy-now-button). При нажатии данной кнопки ожидается событие addToShoppingCart, которому должен быть передан строковой параметр. Для этого в нашем примере производится имитация концентратора событий, и метод fire, как и ожидалось, запускается с одним строковым параметром (ID кнопки Купить сейчас).