---
source_image: page_136.png
page_number: 136
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.13
tokens: 6325
characters: 1800
timestamp: 2025-12-24T10:05:20.679872
finish_reason: stop
---

единственная. В главе 5 будет показано, как изменить и визуализировать покрытие кода.

Важно, чтобы информация о покрытии кода была сгенерирована автоматически без малейшего вмешательства человека. Процесс вычисления покрытия кода должен быть бесшовным.

4.6. Практическое тестирование

К сожалению, далеко не все функции так компактны, как функция sum. Но прошу заметить, что даже такая короткая функция с нулевой зависимостью оказалась не так проста в тестировании, как могло бы показаться на первый взгляд. Это снова демонстрирует сложность модульного тестирования в целом и модульного тестирования JavaScript в частности: если у простой надуманной функции есть столько «глюков», то что говорить о реальных функциях?

4.6.1. Работа с зависимостями

Ранее проблема зависимостей была уже затронута в этой книге. Почти у каждой функции есть внешние зависимости, которые нельзя протестировать модульным тестированием. Модульное тестирование может «купировать» зависимости, используя имитации и заглушки. Здесь речь идет именно о средствах модульного тестирования и временном «купировании» зависимостей, в то же время у автора тестируемого кода тоже есть средства извлечения зависимостей, так сказать, на постоянной основе, описанные в главе 2.

Прежде чем продолжить, давайте разберемся, в чем разница между имитациями (mock) и заглушками (stub). Имитации используются для команд, а заглушки используются для запросов (данных).

Дубли

Тестовые дубли — общее название для объектов (по аналогии с дублерами в кино), используемых тестами для имитации или заглушивания зависимостей. Дубли могут действовать как заглушки и как имитации одновременно, гарантируя, что внешние методы и API будут вызваны, задавая, сколько раз они были вызваны, перехватывая запрашиваемые параметры и возвращая требуемые отве-