---
source_image: page_175.png
page_number: 175
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.61
tokens: 6268
characters: 1588
timestamp: 2025-12-24T10:06:09.233911
finish_reason: stop
---

ние о количестве выполненных строк кода можно извлечь из глобальной переменной _yuitest_coverage.

Процесс получения информации о покрытии кода состоит из следующих этапов: инструментирование кода, выполнение тестов и извлечение информации о покрытии.

Извлечение информации о покрытии кода от интеграционных тестов требует инструментирования всех JavaScript-файлов приложения, развертывания пакета файлов, запуска тестов Selenium (или выполнения их вручную, но надеюсь, что у нас все это автоматизировано) и извлечения информации о покрытии.

Инструментировать весь код можно с помощью одной команды (вся эта команда должна быть введена в одну строку):

% find build_dir -name "*.js" -exec echo "Покрытие {}" \;
-exec java -jar yuitest-coverage.jar -o /tmp/o {} \;
-exec mv /tmp/o {} \;

Разберемся, что делает данная команда. Мы начинаем поиск всех JavaScript-файлов с корневого каталога развертывания, затем инструментируем все найденные JavaScript-файлы (заменяем изначальные версии файлов на инструментированные). При желании мы можем упаковать и развернуть приложение как обычно. Однако поскольку покрытие кода работает со строками кода, а не с операторами, убедитесь, что вы этого не сделали и используете инструменты определения покрытия на несжатом JavaScript-коде.

Анатомия файла покрытия

Инструмент покрытия YUI принимает JavaScript-файл и превращает его в файл, отслеживающий, какие строки и функции в нем выполняются, тем самым инструментируя его. Чтобы увидеть это преобразование в действии, давайте еще раз обратимся к функции sum:

function sum(a, b) {
    return a + b;