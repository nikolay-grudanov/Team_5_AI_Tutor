---
source_image: page_189.png
page_number: 189
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.05
tokens: 6349
characters: 1717
timestamp: 2025-12-24T10:06:29.866096
finish_reason: stop
---

Таким образом, нам нужен простой shell-сценарий (сценарий оболочки), гарантирующий, что корневые каталоги будут одинаковыми (у машины, где происходит слияние, должно быть исходное корневое дерево). Наиболее вероятно, что один из наборов корневых каталогов будет правильным, а другой — нет. Поскольку LCOV-файлы — это обычные текстовые файлы, дело сводится к изменению корневого каталога некорректного LCOV-файла: новый каталог должен указывать на расположение, в котором фактически находится код.

Если ваш исходный код находится в каталоге /a/b/c, но в LCOV-файле интеграционного тестирования указано, что исходный код находится в каталоге /d/e/f, просто напишите на любимом языке сценариев, преобразовывающий строку /d/e/f в строку /a/b/c. На Perl сценарий будет таким:

    my $old = '/a/b/c';
    my $new = '/d/e/f';
    open(F, "wrong.lcov");
    open(G, ">right.lcov");
    while(<F>) {
        s#^$old#$new#;
        print G;
    }
    close(G);
    close(F);

В приведенном коде wrong.lcov конвертируется так, чтобы быть соединенным с другим LCOV-файлом, находящимся в каталоге /d/e/f. Как только у вас будет итоговый файл total.lcov, получить привлекательный HTML-код очень просто:

% genhtml -o /path/to/docRoot/coverage total.lcov

Теперь направьте ваш браузер в каталог /coverage на вашем сервере и посмотрите общий отчет о покрытии.

Сгенерированный вывод — или одиночный файл, или агрегированный LCOV-файл — может быть передан в автоматизированный инструмент сборки, такой как Hudson/Jenkins. Старые версии Hudson (до 2011 г.) понимают LCOV-отформатированные файлы, и все, что вам нужно сделать для работы с ними в старых версиях Hudson, — это указать, где находится ваш агрегированный файл, который бу-