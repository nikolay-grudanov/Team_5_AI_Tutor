---
source_image: page_213.png
page_number: 213
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.46
tokens: 6290
characters: 1776
timestamp: 2025-12-24T10:06:55.680557
finish_reason: stop
---

HAR мобильных устройств требуется пакетный снiffer (подробнее об этом можно почитать на странице https://code.google.com/p/pcaphar/wiki/CaptureMobileTraffics).

Использование прокси

Чтобы понять, как работает прокси, мы будем использовать программируемый прокси с открытым исходным кодом browsermob (https://github.com/webmetrics/browsermob-proxy). Написанный на Java, этот прокси легко интегрируется в сценарии Selenium WebDriver и обладает некоторыми превосходными программируемыми функциями, а также интерфейсом REST2. Далее мы разберемся, как использовать browsermob для захвата HTTP и создания HAR-файла.

Примечание.

Не нужно рассматривать browsermob только как средство получения HAR. Это полнофункциональный прокси, среди функций которого есть и черные/белые списки сайтов, ограничение скорости загрузки и даже установка пользовательского DNS.

По умолчанию browsermob запускается на порту 8080. Это не только порт прокси, это также порт взаимодействия REST-интерфейса, поэтому не изменяйте его, если вы не понимаете, что делаете.

После загрузки browsermob-proxy вы можете запустить его так:

% /bin/sh bin/browsermob-proxy

Теперь вы можете взаимодействовать с ним, запускать, останавливать и т.д. Я установил привязку JavaScript для browsermob-прокси, которая доступна как npm-пакет:

% npm install browsermob-proxy

Теперь мы готовы к созданию HAR-файлов на JavaScript! Для начала рекомендуется использовать браузеры Firefox и Internet Explorer, поскольку это единственные браузеры, настройки прокси которых Selenium WebDriver может изменить программно. У вас должен быть запущен Selenium Server для запуска Firefox или Internet Explorer (автономно или в сетке).

2 К сожалению, на момент написания этих строк далеко не все функции доступны через интерфейс REST.