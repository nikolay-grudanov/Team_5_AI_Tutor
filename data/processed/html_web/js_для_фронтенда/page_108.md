---
source_image: page_108.png
page_number: 108
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.79
tokens: 6222
characters: 1767
timestamp: 2025-12-24T10:04:43.782248
finish_reason: stop
---

eventHub.on('CREATE_USER', addUser);
function addUser(user) {
    var result = dbHandle.addRow('user', user);
    eventHub.fire('USER_CREATED',
        {
            success: result.success
            , message: result.message
            , user: user
        }
    );
}

В этом коде есть несколько любопытных вещей, на которые нужно обратить ваше внимание. Во-первых, здесь нет никаких обратных вызовов, а вместо них используются события для широковещательного оповещения об успешном или неудачном завершении этой операции.

Возможно, вы захотите использовать обратный вызов, чтобы только вызывающая сторона знала, как (успешно или нет) завершилась эта операция, поскольку при передаче результата выполнения этой операции широковещательно другие заинтересованные стороны тоже смогут узнать, успешно ли создан пользователь или нет.

С другой стороны, широковещательный режим может быть очень полезен, поскольку таким образом можно проинформировать множество разных клиентов о том, создан ли новый пользователь или нет. В этом случае любой браузер или клиент стороны сервера будут уведомлены относительно этого события (то есть о создании нового пользователя). Также это позволит отдельному модулю обрабатывать результаты события создания пользователя вместо того, чтобы заключать код обработки результата операции в функцию addUser (то есть можно установить обработчик события создания пользователя вместо того, чтобы добавлять код в функцию addUser).

Конечно, код, получающий уведомление о создании пользователя, может быть в одном файле с функцией addUser, но обычно в этом нет смысла. На практике уведомление о событии получает модуль на стороне сервера или клиента, находящийся в отдельном файле, — таким модулям нужно знать, создался ли пользователь или нет, и