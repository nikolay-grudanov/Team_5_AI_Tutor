---
source_image: page_103.png
page_number: 103
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.18
tokens: 6268
characters: 1818
timestamp: 2025-12-24T10:04:38.004748
finish_reason: stop
---

// где-то на сервере
eventHub.on('REGISTER_USER', function(obj) {
    // заносим obj.name в БД пользователей
    eventHub.fire('USER_REGISTERED', { name: obj.name });
});
// где-то в глобальной области
eventHub.on('USER_REGISTERED', function(user) {
    console.log(user.name + ' зарегистрирован!');
});
// где-то в определенном месте (порождаем событие)
eventHub.fire('REGISTER_USER', { name: 'mark' });

В этом примере обработчик события REGISTER_USER находится где-то на сервере, его задача — записать имя пользователя в базу данных. После регистрации пользователя путем его добавления в базу данных обработчик порождает другое событие — универсальный ответ USER_REGISTERED. Другой слушатель ждет данное событие. Что будет делать этот обработчик события, зависит от логики приложения, например, он может обновить интерфейс пользователя. Конечно, у вас может быть несколько слушателей для каждого события, например, один обработчик события USER_REGISTERED может обновлять панель управления, другой может обновлять интерфейс конкретного пользователя, а третий — отправлять администраторам электронное сообщение с информацией о пользователе.

Наконец, в некоторых случаях нужен определенный ответ, отправляемый непосредственно создателю события. Если нужен прямой ответ, концентратор событий предоставляет обратные вызовы (callback) для создателя события. Callback-функция передается в качестве параметра создателем события в концентратор событий, например:

// где-то на сервере
eventHub.on('ADD_TO_CART'
    , function(userId, itemId, callback) {
        d.cart.push(itemId);
        callback(null, { items: userId.cart.length });
});
// Тем временем, где-то в другом месте (возможно, в браузере)
function addItemToCart(userId, itemId) {
    eventHub.fire('ADD_TO_CART'
        , { user_id: userId, item_id: itemId }