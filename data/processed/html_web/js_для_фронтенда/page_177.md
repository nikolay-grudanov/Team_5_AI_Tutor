---
source_image: page_177.png
page_number: 177
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.54
tokens: 6304
characters: 1815
timestamp: 2025-12-24T10:06:14.899353
finish_reason: stop
---

определены в шаблоне, и все их предназначение состоит в том, чтобы увеличивать счетчик строк или функций соответственно.

Итак, в нашем примере, как только этот файл будет загружен, будет вызвана функция yuitest_coverline("sum.js", 1), поскольку была выполнена первая строка. Когда будет вызвана функция sum, впервые будет запущена функция _yuitest_coverfunc, затем будет вызвана _yuitest_coverline, увеличивающая счетчик строк, и, наконец, будет вызвана инструкция return a + b.

Таким образом, в начале каждого файла, между каждым оператором и в начале каждой функции YUI Test Coverage отслеживает строки и вызываемые функции.

Важно отметить, что при каждой новой загрузке страницы счетчики сбрасываются. Кэширование может предотвратить это, но, тем не менее, если файл был загружен несколько раз, предыдущая информация о покрытии кода все равно будет потеряна. Всегда лучше извлекать результаты покрытия сразу после выполнения каждого теста.

5.4. Развертывание

Для создания файлов покрытия клиентского и серверного кода используются различные стратегии. HTTP-сервер может динамически обрабатывать файлы покрытия на основе строки запроса или другого метода. Далее мы рассмотрим стратегии создания файлов покрытия для клиентского и серверного кода.

Развертывание JavaScript-клиента

В рамках модульного тестирования клиентского JavaScript-кода в связующем HTML-файле мы должны указать версию файла со счетчиками покрытия вместо обычной версии. Сделать это можно несколькими способами, в том числе и автоматизированным методом, который будет рассмотрен нами в главе 6. Самый простой способ заключается в том, чтобы инструментировать весь ваш код перед выполнением модульного тестирования. При выполнении теста HTML «подхватит» инструментированную версию вашего кода, поскольку имена файлов остались неизменными.