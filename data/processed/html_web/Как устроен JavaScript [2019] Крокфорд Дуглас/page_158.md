---
source_image: page_158.png
page_number: 158
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.74
tokens: 7360
characters: 1526
timestamp: 2025-12-24T09:57:49.708927
finish_reason: stop
---

19.4 Как работает чистота

существенно улучшены по сравнению с другими моделями ООП. Они представляют собой примеры возможности управления границей чистоты.

Одно из определений чистоты: это свобода от присваиваний и других средств внесения изменений. Тогда чист ли этот код?

function repeat(generator) {
    if (generator() !== undefined) {
        return repeat(generator);
    }
}

Функция repeat получает функцию-генератор и вызывает ее, пока не будет возвращено значение undefined. Она чиста телом, но не духом. Собственных нечистых действий она не совершает, но допускает нечистоту генератора. На этом среднем уровне находятся многие функции высшего порядка.

Функция может выполнять присваивание и при этом считаться чистой. Если она объявляет локальные переменные и использует циклы и присваивания для изменения этих переменных, это может выглядеть нечистым. Но мы могли бы присвоить такую функцию параллельной функции map, и она бы отлично работала. Это было бы чистотой духа, но не тела. Если смотреть на это как на черный ящик, то все будет чисто. Нечисто окажется, только если заглянуть внутрь.

Итак, существует некий континуум чистоты, где на самом верху находятся математические функции, ниже располагаются функции, чистоты которых достаточно для параллельных приложений, затем чистые функции более высокого порядка, после них функции более высокого порядка с состоянием, а затем мили разного хлама, загрязняющего сеть: применение классов, процедур и в самом низу все, в чем используются глобальные переменные.