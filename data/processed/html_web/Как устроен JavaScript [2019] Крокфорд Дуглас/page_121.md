---
source_image: page_121.png
page_number: 121
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.16
tokens: 7454
characters: 1830
timestamp: 2025-12-24T09:56:48.293052
finish_reason: stop
---

Глава 13

Как работают генераторы

Современные композиторы отказываются умирать.

Эдгар Варез (Edgard Varèse)

В соответствии со стандартом ES6 в языке JavaScript появилась новая особенность — генераторы (generators). Это произошло на волне серьезной зависти составителей стандарта к возможностям языка Python. Я не могу рекомендовать использование ES6-генераторов по нескольким причинам.

То, что делает код, сильно отличается от того, как этот код выглядит. Генераторы похожи на обыкновенные функции, но работают совершенно иначе. Они создают функциональный объект, в свою очередь создающий объект, содержащий метод next, сделанный из тела function*. В этом теле имеется оператор yield, напоминающий оператор return, но он не дает ожидаемого значения. Вместо этого он создает объект, в котором имеется свойство value, содержащее ожидаемое значение. Крошечная звездочка (*) способна сильно изменить поведение.

У генераторов вероятен очень сложный поток управления. В Structured Revolution утверждалось, что потоки управления должны быть абсолютно понятными и предсказуемыми. Потоки управления генераторов могут быть сложными, поскольку они способны приостанавливаться и возобновляться. Также они могут иметь запутанные взаимодействия с finally и return.

Они вынуждают к использованию циклов. Поскольку мы отходим от применения объектов и стремимся работать с функциями, нужно избавляться от циклов. А генераторы вместо этого требуют большего количества циклов. Для создания значений основная часть генераторов содержит цикл с инструкцией yield. Большинство пользователей таких генераторов для получения значений берут цикл for. Получаются два цикла там, где они вообще не нужны.

В генераторах применяется весьма неуклюжий интерфейс ООП. Фабрика создает объект, и генератор создает объект. (В функциональной конструкции фабрика