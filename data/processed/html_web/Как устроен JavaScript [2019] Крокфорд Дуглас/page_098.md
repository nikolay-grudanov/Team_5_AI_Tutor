---
source_image: page_098.png
page_number: 98
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.04
tokens: 7524
characters: 2081
timestamp: 2025-12-24T09:56:15.101376
finish_reason: stop
---

9.6 Как работают строки

Опасность с обеих сторон в том, что контент может быть чем-то угрожающим, например:

fear = "<script src=themostevilserverintheworld.com/yourworstnightmare.js/>";

В веб-технологиях существует масса способов внедрения вредоносного материала. И шаблоны, похоже, усиливают уязвимость. Большинство инструментов работы с шаблонами предоставляют механизмы уменьшения опасности, но все же позволяют проявляться вредоносному коду. И что хуже всего, средства, подобные шаблонным строковым литералам с возможностью применения вставок, изначально небезопасны.

В этом случае возможность смягчения последствий выражается в особой функции, называемой функцией отличительного признака (тег-функцией). Функциональное выражение, предшествующее шаблонному строковому литералу, инициирует вызов функции с шаблонной строкой и значениями выражений в качестве ее аргументов. Смысл заключается в том, что тег-функции передаются все части, которые затем ею фильтруются, декодируются, собираются и возвращаются.

Функция dump — это тег-функция, которая просто возвращает все введенные в нее материалы в удобочитаемой форме:

function dump(strings, ...values) {
    return JSON.stringify({
        strings,
        values
    }, undefined, 4);
}

const what = "ram";
const where = "rama lama ding dong";

`Who put the ${what} in the ${where}?`
    // "Who put the ram in the rama lama ding dong?"

const result = dump`Who put the ${what} in the ${where}?`;
    // result имеет значение `{{
    //     "strings": [
    //         "Who put the ",
    //         " in the ",
    //         "?"
    //     ],
    //     "values": [
    //         "ram",
    //         "rama lama ding dong"
    //     ]
    // }`;

Странно, что строки передаются вместе в виде массива, а значения — в виде отдельных аргументов. При должной разработке тег-функции способны смягчить угрозы со стороны XSS и других уязвимостей безопасности, конечно, если эти функции действительно применяются. Но напомню еще раз: шаблонные строковые литералы с возможностью использования вставок изначально небезопасны.