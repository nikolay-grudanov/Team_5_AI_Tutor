---
source_image: page_128.png
page_number: 128
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.44
tokens: 7484
characters: 1893
timestamp: 2025-12-24T09:57:06.923040
finish_reason: stop
---

Глава 14

Как работают исключения

Нет! Пытаться нельзя. Делай или не делай. Попыток нет.

Йода

Программисты всегда полны оптимизма. Они думают, что все в их программах всегда будет работать правильно, но даже оптимистам известно, что иногда что-то способно пойти не так.

Вызываемая функция может засбоить совершенно неожиданным образом. Особенно характерно это для использования кода сторонних разработчиков. Взаимосвязанность с ним выражается в появлении режимов сбоев. Итак, что же может произойти в результате сбоя такого кода? Приведет ли это к нарушению работы всей программы? Нужно ли предпринимать попытки повторных вызовов функции в надежде на лучший исход? И как следует сообщать о сбое?

Самый популярный подход к решению данной проблемы — обработка исключений, которая пытается вселить в нас прежний оптимизм при программировании. Отпадает необходимость в проверке наличия непонятных кодов ошибок в каждом возвращаемом значении. Не нужно опрашивать глобальный регистр defcon, чтобы выяснить, не стала ли программа нестабильной. Вместо этого мы предполагаем, что все работает правильно. Если случится что-то неожиданное, текущая деятельность остановится и обработчик исключений определит, что программе делать дальше.

Идея управления исключениями JavaScript была позаимствована у Java. А для Java эту идею взяли у C++. У языка C++ нет надлежащего управления памятью, поэтому, когда что-то идет не так, каждой функции в цепочке вызовов нужно явным образом высвободить любую распределенную ею память. В JavaScript очень качественное управление памятью, но этот язык страдает от последствий несовершенства модели памяти языка C++.

О сбое сигнализирует инструкция throw. В языке C++ применялась бы инструкция raise, как в языке Ada, но слово raise уже использовалось в библиотеках C, поэтому вместо него в C++ было зарезервировано слово, с которым никто никогда не хотел иметь дела.