---
source_image: page_091.png
page_number: 91
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.86
tokens: 7331
characters: 1544
timestamp: 2025-12-24T09:56:04.198506
finish_reason: stop
---

будет открыть. Этот контейнер может быть отдан работнику. Чтобы получить обратно исходный объект, нужно отдать контейнер соответствующему съемщику пломбы (unsealer). Все эти функции довольно легко создаются с помощью WeakMap:

function sealer_factory() {
    const weakmap = new WeakMap();
    return {
        sealer(object) {
            const box = Object.freeze(Object.create(null));
            weakmap.set(box, object);
            return box;
        },
        unsealer(box) {
            return weakmap.get(box);
        }
    };
}

Объект weakmap не позволяет проверять свое содержимое. Из него невозможно извлечь значение, пока не будет ключа. WeakMap хорошо взаимодействует со сборщиком мусора JavaScript. Если копий ключа все еще не существует, свойство этого ключа в weakmap автоматически удаляется. Это помогает избежать утечек памяти.

В JavaScript имеется нечто похожее под названием Map, но там не обеспечены безопасность и защита от утечек памяти, имеющиеся у WeakMap. И хотя WeakMap (слабое отображение) далеко не самое подходящее название, Map (отображение) вносит еще большую путаницу. Это название никак не связано с Array-методом map, и его нетрудно спутать с функцией картографии. Поэтому я не рекомендую использовать Map. Но мне нравятся WeakMap и Array-функция map.

В JavaScript имеется также функция под названием Symbol, способная выполнять одно из действий, присущих WeakMap. Пользоваться Symbol не стоит, поскольку в этом нет необходимости. Я стремлюсь к упрощению, избавляясь от ненужных мне избыточных функций.