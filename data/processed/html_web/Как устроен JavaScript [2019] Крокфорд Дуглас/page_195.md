---
source_image: page_195.png
page_number: 195
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.56
tokens: 7543
characters: 2069
timestamp: 2025-12-24T09:58:48.413189
finish_reason: stop
---

Ситуация изменилась, когда набрала популярность практика загрузки JSON с других серверов с тегами сценариев. Сценарии вычислялись с помощью функции eval, и не было никакой гарантии, что информационное наполнение состояло из чистого JSON, а не из кода XSS-атаки. Пользоваться этим было удобно, но легкомысленно.

Текст JSON ни в коем случае не должен создаваться путем объединения, поскольку фрагмент вредоносной строки может содержать символы кавычек и обратный слеш, из-за чего вероятна неправильная интерпретация текста. Текст JSON непременно должен создаваться с помощью таких кодировщиков, как JSON.stringify, или аналогичных инструментов, не допускающих подобного смешивания.

Именно поэтому результат работы метода toJSON и функции заменитель обрабатывается методом JSON.stringify. Если бы возвращаемые значения этих функций были вставлены в текст в чистом виде, то этими функциями можно было бы манипулировать, упрощая задачу подмешивания в строку вредоносного кода. Было бы лучше, если бы строки не начинались и не заканчивались одним и тем же символом, но такое случается. И это дает нам еще один повод для разумного подхода к программированию.

Форма Маккимана

Форма Маккимана представляет собой систему записи для выражения грамматики. Она была предложена Биллом Маккиманом (Bill McKeeman) из Дартмутского колледжа. Это упрощенная форма Бэккуса — Наура (Backus — Naur Form) с широким применением пробельных символов и минимальным использованием метасимволов. Мне она нравится, поскольку обладает полноценной минимальной адекватностью.

Грамматику в форме Маккимана можно выразить в самой форме Маккимана.

Элемент Юникода U+0020 используется в качестве пробела. А элемент Юникода U+000A применяется в качестве символа перевода строки:

    пробел
        '0020'
    перевод_строки
        '000A'

Имя — это последовательность букв:

    имя
        последовательность_букв
        последовательность_букв имя
    последовательность_букв
        'a' . 'z'
        'A' . 'Z'

Отступ состоит из четырех пробелов:

    отступ
        пробел пробел пробел пробел