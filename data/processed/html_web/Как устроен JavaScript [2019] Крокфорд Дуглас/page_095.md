---
source_image: page_095.png
page_number: 95
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 50.24
tokens: 7865
characters: 2690
timestamp: 2025-12-24T09:56:33.439483
finish_reason: stop
---

ницу, или кодовое значение (code unit), и кодовую точку, или позицию (code point). Кодовая единица — это один из 16-битных символов. А кодовая точка — это число, соответствующее символу. Кодовая точка формируется из одной и более кодовых единиц.

В Юникоде определены 1 114 112 кодовых точек, разделенных на 17 плоскостей (planes) из 65 536 кодовых точек. Исходная плоскость называется основной многоязычной плоскостью — Basic Multilingual Plane (BMP). Остальные 16 плоскостей — дополнительные. JavaScript способен без каких-либо трудностей использовать символы в BMP, поскольку там кодовая точка может быть идентифицирована с одной кодовой единицей. Работать с дополнительными символами труднее.

JavaScript обращается к дополнительным символам, применяя суррогатные пары. Такие пары составляются из двух специализированных кодовых единиц. Существуют 1024 старшие суррогатные кодовые единицы и 1024 младшие суррогатные кодовые единицы. У старших суррогатных кодовых единиц коды ниже, чем у младших:

• от 0xD800 до 0xDBFF — старшие суррогатные кодовые единицы;
• от 0xDC00 до 0xDFFF — младшие суррогатные кодовые единицы.

Когда пары составлены правильно, каждая суррогатная кодовая единица вносит 10 бит для формирования 20-разрядного смещения, к которому добавляется 65 536 для формирования кодовой точки. (Дополнение было сделано, чтобы избавиться от путаницы, вызванной наличием двух разных последовательностей кодовых единиц, которые могли бы создавать одну и ту же кодовую точку. Полагаю, что это решение привнесло еще больше путаницы, чем та, которой удалось избежать. Более простым решением было бы запрещение использования суррогатных пар для представления кодовых точек в BMP. Это дало бы не 21-битный, а 20-битный набор символов.)

Рассмотрим кодовую точку U+1F4A9 (или в десятичном представлении 128169). Вычтем 65 536, что даст 62 633, или 0xF4A9. Старшие 10 бит — 0x03D. Младшие 10 бит — 0xA9. Прибавим 0xD800 к старшим битам и 0xDC00 к младшим битам и получим суррогатную пару. Таким образом, JavaScript хранит U+1F4A9 как U+D83D U+DCA9. С точки зрения JavaScript U+1F4A9 — это два 16-битных символа. Если операционная система в курсе, то они будут отображаться как один символ. Фактически JavaScript ничего не знает о дополнительных плоскостях, но не проявляет по отношению к ним открытой враждебности.

Существует два способа записи кодовой точки U+1F4A9 в строковом литерале с применением эскейп-символа:

"\uD83D\uDCA9" === "\u{1F4A9}"                // true

Оба они приводят к созданию одной и той же строки длиной 2.

Есть функция String.fromCharCode, способная создавать суррогатные пары:

String.fromCharCode(55357, 56489) === String.fromCodePoint(128169)   // true