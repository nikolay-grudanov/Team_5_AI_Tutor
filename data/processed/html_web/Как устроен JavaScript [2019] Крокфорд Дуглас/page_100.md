---
source_image: page_100.png
page_number: 100
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.72
tokens: 7620
characters: 2553
timestamp: 2025-12-24T09:56:27.640566
finish_reason: stop
---

9.8 Как работают строки

Может быть и еще хуже. Эти выражения могут также содержать функции, которые, в свою очередь, могут содержать литералы регулярных выражений и вместо точек с запятыми еще какие-нибудь шаблонные строковые литералы.

Инструментальные средства, такие как редакторы, станут предполагать, что с программами все в порядке. Имеется поднабор JavaScript, который можно разобрать на лексемы без сопутствующего полного парсинга. Если от всего этого у вас наступает помрачение рассудка, то нужно ожидать, что ваш инструментарий не сработает.

Надеюсь, что следующий язык не создаст проблем с разбором на лексемы. А пока он не появился, я рекомендую не использовать вставки с шаблонными строковыми литералами.

Функция fulfill

Рассмотрим альтернативу шаблонным строковым литералам — функцию fulfill. Она получает строку, в которую могут включаться символические переменные, и объект или массив, содержащий значения, которые требуется заменить символическими переменными. Она также может принимать либо функцию, либо объект, состоящий из функций и способный кодировать замены.

Потенциальная проблема с шаблонными строками заключается в том, что все находящееся в области видимости доступно для включения кода. Это очень удобно, но одновременно угрожает безопасности. Функция fulfill имеет доступ только к контейнеру значений, переданных ей в явном виде, поэтому безопасна. Исходный кодировщик удаляет из определенного контекста символы, известные как источники угроз, поэтому контекст HTML изначально безопасен, в отличие от изначально небезопасных шаблонных строк. Но, как и включение шаблонных строк, такое включение способно стать опасным при неправильном использовании кодировщиков.

Строка может поступать из любого источника, такого как информационное наполнение JSON или строковый литерал. Ей не нужно находиться в том же самом файле JavaScript, что и программа. Это лучше вписывается в потребности локализованных приложений.

Символическая переменная заключается в фигурные скобки ({ }). Она не может содержать пробелов или скобок. В ней могут быть путь и дополнительно двоеточие, за которым следует название системы кодирования. Путь состоит из одного или нескольких имен или чисел, разделенных точками ( . ):

{a.very.long.path:hexify}

Контейнер является объектом или массивом, содержащим значения, заменяющие символические переменные. В нем могут содержаться вложенные объекты и массивы. Значения будут найдены с использованием пути. Если заменяемым значением является функция, она вызывается и ее возвращаемое значение становится