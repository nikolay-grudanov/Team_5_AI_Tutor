---
source_image: page_163.png
page_number: 163
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.09
tokens: 7603
characters: 2325
timestamp: 2025-12-24T09:58:06.124557
finish_reason: stop
---

Цикл обработки поддерживает очередь, известную как очередь событий или очередь сообщений, которая содержит входящие события или сообщения. События или сообщения могут быть инициированы функциями обратного вызова как часть их ответов. Скорее всего, события или сообщения поступают из вспомогательных потоков, управляющих пользовательским вводом данных, сетью, системой ввода-вывода и взаимодействием между процессами. Обмен данными с основным потоком, в котором выполняется ваша JavaScript-программа, осуществляется посредством очереди. Взаимное исключение ограничено этой единственной точкой контакта, поэтому событийные системы, как правило, очень эффективны и надежны.

Неожиданное преимущество этой модели заключается в том, что программы JavaScript в веб-браузере обладают удивительной устойчивостью. Если открыть отладчик, а затем выйти в Интернет, можно увидеть практически постоянный поток исключений и сбоев. Причиной может стать низкая квалификация веб-разработчиков. Однако практически все, похоже, работает.

В системах с потоками, если в одном потоке выдается исключение, его стек опустошается. И теперь этот поток может оказаться несогласованным с другими потоками, что способно привести к сбою каскадных потоков.

В JavaScript используется один поток. Основная часть его жизненного состояния находится в замыкании его функций, а не в стеке. Так что все, как правило, продолжает работать. Пока есть работоспособная кнопка, пользователи по-прежнему могут что-то делать, не подозревая о множестве ошибок, происходящих за кулисами.

Закон ходов

Каждая итерация в цикле обработки называется ходом. Это название пришло из таких игр, как шахматы и покер, где в каждый момент времени играть может только один игрок. Он делает ход, который после перемещения заканчивается, и, пока игра не завершена, начинается ход другого игрока.

У игр есть правила, и у событийной модели тоже есть правило — закон ходов.

Не ждать. Не блокировать. Быстро завершать

Закон ходов как прямо, так и косвенно применяется к функциям обратного вызова, вызываемым циклом обработки, и к каждой вызываемой ими функции. Функциям не разрешается зациклываться в ожидании, что что-то произойдет. Функция не имеет права блокировать основной поток. В браузере такие функции, как alert, запрещены. В Node.js функции, имена которых содержат неприятный