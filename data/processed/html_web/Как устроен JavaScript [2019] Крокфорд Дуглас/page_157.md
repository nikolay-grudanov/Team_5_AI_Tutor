---
source_image: page_157.png
page_number: 157
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.32
tokens: 7609
characters: 2371
timestamp: 2025-12-24T09:57:55.507337
finish_reason: stop
---

Задача инструкции for — изменение индуктивной переменной, поэтому ее тоже не стоит употреблять. Нужно отказаться и от while и do. Самая чистая форма итерации — это концевая рекурсия.

Следует отказаться от конструктора Date. При каждом его вызове мы получаем разные значения. Это не сообразуется с чистотой. Также нужно отказаться от Math.random. Неизвестно, какой результат всякий раз выдаст вам этот метод.

Нужно отказаться и от пользователей. Каждое взаимодействие с человеком может возвращать разные результаты. Такое общение невозможно признать чистым.

И наконец, нужно отказаться от сети. У лямбда-исчисления нет способа выражения информации, существующей на одной машине и отсутствующей на другой. По аналогии с этим у универсальной машины Тьюринга (Universal Turing Machine) нет связи по Wi-Fi.

Проблемы со Вселенной

Наша Вселенная не отличается чистотой. Она конечна, полностью распределена и в высокой степени параллельна. Наша модель программирования должна считаться с этой истиной. Если программы взаимодействуют со Вселенной, в частности с ее людскими агентами, то некоторые части программ могут быть нечистыми.

Нужно стремиться делать программы как можно более чистыми, поскольку это дает явные преимущества. Объекты по-прежнему ценны, даже если они обладают состоянием, а состояние представляет интерес, только если оно способно изменяться. Нужно конструировать объекты так, чтобы изменение их состояния было под строжайшим контролем.

Континуум

О чистоте было бы проще рассуждать, если бы она была бинарной: функция либо чистая, либо нечистая. К сожалению, все не так просто. Есть несколько способов представления чистоты.

Изменения не сообразуются с чистотой, но в конечном счете в глубинах даже самых чистых систем кроется что-то нечистое. Функциональная система всегда создает новые объекты активации, и процесс перемещения объектов из доступной памяти в активную и обратно требует изменений. В этом нет ничего плохого. В общем-то, хочется добиться как можно большего распространения чистоты, а то, что невозможно сделать чистым, следует спрятать.

Генераторы, рассмотренные в главе 13, и объекты из главы 17 хорошо скрывают свои состояния. Внешний код способен изменить состояние только через порядок, установленный функцией-генератором и методами. Генераторы и объекты нельзя изменить внешним присваиванием. Они не абсолютно чистые, но все же