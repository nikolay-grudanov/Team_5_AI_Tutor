---
source_image: page_296.png
page_number: 296
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 19.78
tokens: 7495
characters: 2149
timestamp: 2025-12-24T10:01:16.033383
finish_reason: stop
---

30.3 Как работают нелепости, или Что такое Wat!

Эти функции содержат дефекты. Когда им ничего не передается, они должны возвращать undefined или NaN или, возможно, выдавать исключение. Вместо этого Math.min() возвращает Infinity, а Math.max() возвращает -Infinity.

WAT!

Math instanceof Math                // выдача исключения
NaN instanceof NaN                  // выдача исключения
"wat" instanceof String             // false

Применение оператора instanceof в Java обычно свидетельствует о неспособности понять порядок использования полиморфизма. Оператор instanceof, принадлежащий JavaScript, отличается от оператора instanceof, принадлежащего Java. Я советую воздержаться от instanceof, работая с любым из этих языков.

WAT!

isNaN("this string is not NaN")      // true

Глобальные функции isNaN и isFinite имеют дефекты. Вместо них следует использовать Number.isNaN и Number.isFinite.

WAT!

((name) => [name])("wat")            // ["wat"]
((name) => {name})("wat")            // undefined

В первом случае показан пример функции жирной стрелки (или fart-функции). Fart-функции являются сокращенным способом записи функций. Все, что слева от fart-функции, — это список параметров, а все, что справа, — выражение. Возвращаемым значением функции является значение выражения. Не нужно набирать слово function или return. В данном случае возвращаемым значением будет массив, состоящий из аргумента функции. И это хорошо.

По идее, во втором случае должно быть возвращено значение {name: "wat"}, а не undefined. К сожалению, JavaScript полагает, что левая фигурная скобка после fart-функции является блоком, а не литералом объекта. В этом блоке содержится имя переменной. Автоматически точка с запятой помещается после имени, превращая его в бесполезное выражение, которое ничего не делает. В отсутствие оператора функция возвращает значение по умолчанию, то есть undefined.

Именно поэтому я рекомендую избегать применения fart-функций. К тому же их легко перепутать с операторами сравнения <= и >=. Несущественная экономия при наборе текста этого не стоит.

WAT!

function first(w, a, t) {
    return {
        w,
        a,
        t
    };