---
source_image: page_293.png
page_number: 293
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.00
tokens: 7489
characters: 1712
timestamp: 2025-12-24T10:01:15.453319
finish_reason: stop
---

Глава 30

Как работают нелепости, или Что такое Wat!

Хватит высмеивать отстойные языки. Давайте поговорим о JavaScript.

Гэри Бернхардт (Gary Bernhardt)

Двенадцатого января 2012 года на конференции CodeMash, проходившей в аквапарке города Сандаски (штат Огайо), Гэри Бернхардт сделал блиц-доклад под названием Wat.

Бернхардт продемонстрировал ряд абсурдных аномалий в Ruby и JavaScript. После каждого примера он показывал забавную картинку с надписью WAT («Нелепость»). Присутствующим это понравилось. Это был классический ход. Слово Wat просто приклеилось к JavaScript.

Краткое выступление Бернхардта до сих пор можно найти на просторах Интернета. Подобные шоу стали проводить многие подражатели. Некоторые из них просто повторяли материал Бернхардта, а некоторые расширили представление, добавив новые нелепости. Кому-то, как Бернхардту, удалось вызвать смех аудитории. Кто-то просто напустил едкого туману.

В этой книге я постарался обойти стороной большинство неудачных мест JavaScript, но в данной главе собираюсь открыть неприглядную истину. Хочу показать вам некоторые нелепости из разряда Wat и подобных и объяснить, как они работают. Смешного или приятного здесь будет мало.

Многие насмешки связаны с алгоритмами приведения типов в JavaScript-операторах == и +. Используемые правила приведения типов сложны, трудны для запоминания, а в некоторых случаях, как будет показано далее, и работают неверно. Именно поэтому я не рекомендовал задействовать оператор ==. В нем применяется регламентированный ECMAScript-стандартом алгоритм под названием Abstract Equality Comparison Algorithm (алгоритм абстрактного сравнительного метода). Это банка червей, которую не стоит открывать. Вместо этого оператора