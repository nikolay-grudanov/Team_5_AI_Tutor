---
source_image: page_156.png
page_number: 156
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.88
tokens: 7684
characters: 2713
timestamp: 2025-12-24T09:57:59.992132
finish_reason: stop
---

19.2 Как работает чистота

Чистые функции способны придать потокам безопасность и эффективность. Поскольку такие функции не вызывают изменений, совместное использование памяти не создает никакого риска. Метод массива map при условии применения чистой функции может распределять элементы массива по всем доступным ядрам. Вычисление способно выполняться очень быстро. Повышение производительности может иметь линейную зависимость. Чем больше ядер, тем быстрее идет вычисление. От этого выигрывает весьма обширный класс программ.

С целью включения в JavaScript рассматривается множество весьма нелепых компонентов. И многие из них входят в язык, отвлекая внимание на всякую чепуху. А нам, в частности, нужно распараллеливание чистых функций.

Как добиться чистоты

Понятно, что чистота дает огромные преимущества. Так можно ли добавить ее в язык? Нет. Чистота не является той самой характерной особенностью, которую можно было бы добавить. Она сродни надежности и безопасности. Добавить в систему надежность невозможно, реально лишь устранить ненадежность. Нельзя добавить в нее и безопасность. Нужно избавляться от опасности. Также нельзя добавить чистоту. Следует избавляться от нечистого кода. Он вносит искажения, допускающие отступление от математической модели функций.

ЕСМА не в состоянии удалить из JavaScript его неудачные составляющие, поэтому их количество продолжает расти, но ведь можно просто отказаться от них. Можно сделать язык чистым для себя, более дисциплинированно подходя к процессу программирования. Если отказаться от применения нечистой функции, она больше не сможет своей нечистотой искажать сущность используемых нами тел функций.

Итак, сделаем краткий обзор всех нечистых компонентов языка.

Разумеется, нужно избавиться от всех операторов присваивания, а также от инструкций var и let. Инструкцию const можно оставить. Она создает и инициализирует переменную, но не позволяет ей изменяться.

Следует избавиться от операторов и методов, изменяющих объекты, включая оператор delete и методы, подобные Object.assign. Нужно также избавиться от методов изменения массивов, таких как splice и sort. Метод работы с массивами sort мог бы быть чистой функцией, но его реализация изменяет исходный массив, поэтому решение отказаться от его использования остается в силе.

Нужно избавиться и от методов получения и установки значений (get- и set-методов). Set-методы, несомненно, являются инструментами внесения изменений и, как и get-методы, существуют для создания побочных эффектов. Все побочные эффекты разрушительны и должны быть устранены.

RegExp-метод exec изменяет свойство lastIndex, поэтому от него нужно отказаться. Его конструкция могла бы быть более удачной, но этого не произошло.