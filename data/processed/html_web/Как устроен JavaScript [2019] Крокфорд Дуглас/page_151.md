---
source_image: page_151.png
page_number: 151
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.02
tokens: 7412
characters: 1736
timestamp: 2025-12-24T09:57:44.690233
finish_reason: stop
---

А концевая рекурсивная функция может иметь следующий вид:

```javascript
(function loop() {
    выполнение каких-либо действий
    if (done) {
        return;
    }
    выполнение дополнительных действий
    return loop();                // <-- концевой вызов
})();
```

Здесь показано соотношение между циклами и рекурсивными функциями. В целом рекурсивные функции будут выглядеть более элегантно, передавая обновленное состояние в параметрах и возвращая значения вместо реализации присваивания.

Итак, у нас есть рекурсия, чтобы дойти до любой глубины, не опасаясь исчерпания памяти или искусственно созданных ошибок переполнения стека. Теперь качественные рекурсивные функции будут работать правильно. Правильные концевые вызовы (Proper Tail Calls) — это не какая-то особенность, это исправление дефекта. Стандарт требует реализации данной оптимизации, поскольку важно предотвращать сбои хороших программ.

Концевая позиция

Вызов концевой, если функцией возвращается не что иное, как ее возвращаемое значение. Следовательно:

```javascript
return (
    typeof any === "function"
    ? any()                // <-- концевой вызов
    : undefined
);
```

является концевым вызовом. Концевыми вызовами могут также быть выражения, составленные из логического И (&&) и логического ИЛИ (||), но:

```javascript
return 1 + any();                // <-- не концевой вызов
```

не концевой вызов. Последним действием функции было возвращение результата сложения.

```javascript
any();                            // <-- не концевой вызов
return;
```

Это был не концевой вызов, поскольку им возвращается undefined, а не возвращаемое значение функции.

```javascript
const value = any();                // <-- не концевой вызов
return value;
```