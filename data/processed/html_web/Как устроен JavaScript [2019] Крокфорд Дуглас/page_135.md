---
source_image: page_135.png
page_number: 135
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.25
tokens: 7619
characters: 2433
timestamp: 2025-12-24T09:57:26.070369
finish_reason: stop
---

включает в себя также переменные window и self, содержащие ссылки на область видимости страницы. Все переменные в области видимости страницы были видны всем блокам исходного кода, имеющимся на ней.

Ничего хорошего в этом не было. Это подталкивало к применению такого стиля программирования, при котором использовались общие глобальные переменные. Получались ненадежные, дефектные программы. Когда два независимых друг от друга блока исходного кода случайно брали одно и то же имя переменной, возникали непредвиденные ошибки. Кроме того, это серьезно снижало уровень безопасности и способствовало проведению вредоносных XSS-атак.

Глобальные переменные — несомненное зло.

К счастью, сейчас ситуация существенно выправилась.

Модуль

Лучше было бы все объявления переменных вне функции добавлять к области видимости модуля, и тогда их видели бы все функции, находящиеся в блоке исходного кода. Это правильный подход, поскольку конструкции в результате получаются более строгие, безопасные и более надежно защищенные.

Теперь взаимодействие с другими блоками исходного кода станет осуществляться явным образом с помощью инструкций import и export. Они могут применяться для создания высококачественных программ. Но используются и для написания плохих программ. Я сосредоточусь на создании качественных программ.

При экспортации модуль открывает доступ к экспортируемому другим модулям. Модуль должен экспортировать что-либо одно — обычно функцию или объект, наполненный функциями. Экспортируемое может использоваться несколькими другими модулями, поэтому вполне логично заморозить экспорт, чтобы не допустить случайных неприятностей или взаимного перемешивания важных данных. Экспортация, по сути, является интерфейсом. Интерфейсы должны быть простыми и понятными.

Тело блока исходного кода выполняется только один раз, а это значит, что все импортеры совместно используют одни и те же экспортованные данные. Если экспорт зависит от предыстории, а каждый импортер ожидает чего-то незатронутого и неразделяемого, может сложиться проблемная ситуация. В таком случае следует экспортить фабричную функцию, способную создавать незатронутые и не прошедшие разделяемость экземпляры. Инструкция export не создает экземпляры.

Эта инструкция имеет следующий вид:

export default экспортируемое;

Жаль только, что присутствие слова default все здесь портит. Экспортируемое — это замороженный объект или функция, являющаяся предметом экспорта.