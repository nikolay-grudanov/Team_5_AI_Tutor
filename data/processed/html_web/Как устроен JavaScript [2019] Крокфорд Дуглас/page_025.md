---
source_image: page_025.png
page_number: 25
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.48
tokens: 7700
characters: 2625
timestamp: 2025-12-24T09:54:38.757418
finish_reason: stop
---

видеть возникающие погрешности в получаемых результатах и не хотим показывать их своим клиентам. Это выставило бы напоказ всю нашу некомпетентность. Лучше сделать вид, что все хорошо.

Первыми использовать двоичное представление чисел с плавающей точкой начали математики и ученые. Математики хорошо понимали, что компьютеры, будучи конечными устройствами, не могут точно представлять действительные числа, поэтому они полагались на методы численного анализа, чтобы получать от конечных систем полезные результаты. Ученые работали над экспериментальными данными, не лишенными погрешностей, поэтому неточность представления двоичных чисел с плавающей точкой не создавала для них существенных проблем. Но первые бизнес-пользователи отказались от двоичного представления с плавающей точкой, потому что их клиенты и закон требуют точных десятичных значений. По закону при подсчете денег вы должны получить правильную сумму.

Это было более полувека назад. С тех пор мы, похоже, забыли о компромиссах, связанных с двоичным представлением чисел с плавающей точкой. К настоящему времени мы должны были перейти к чему-то более подходящему. Непростительно, что в XXI веке мы не можем с достаточной степенью надежности сложить 0.1 и 0.2, чтобы получить 0.3. Я надеюсь, что язык, который придет на смену JavaScript, будет иметь один числовой тип, способный точно выражать десятичные дроби. Такая система до сих пор не способна точно представлять вещественные числа. И никакая конечная система не сделает этого. Но она сможет точно представлять числа, наиболее важные для человечества, — числа, состоящие из десятичных цифр.

А пока нужно стремиться как можно больше работать в безопасном целочисленном диапазоне. Я рекомендую переводить все денежные значения в центы, чтобы они могли быть точно обработаны как целые числа. Опасность такого подхода заключается во взаимодействии с кодом или системами, которые не делают того же самого. Подобные ошибки в организации взаимодействия могут привести к результатам, стократно отличающимся от правильных в ту или иную сторону. Конечно, это никуда не годилось бы. Возможно, здесь нас спасет инфляция, обесценивающая центы и позволяющая их просто проигнорировать.

Когда работа протекает вне безопасного целочисленного диапазона, числа, содержащие десятичную точку (.) или десятичную экспоненту e, могут не получать истинного числового значения. Сложение одинаковых чисел дает меньшую ошибку, чем сложение разных чисел. Поэтому вычисление общего итога из предварительно вычисленных промежуточных итогов дает более точный результат, чем вычисление общего итога на основе отдельно взятых значений.