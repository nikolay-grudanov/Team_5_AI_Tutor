---
source_image: page_165.png
page_number: 165
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.15
tokens: 7624
characters: 1971
timestamp: 2025-12-24T08:35:10.482718
finish_reason: stop
---

хеш РКН₁. Аналогично во вход 1 добавляется открытый ключ, соответствующий РКН₂.

Лиза подтверждает транзакцию

Транзакция готова к отправке Лизе. Кошелек Джона отправляет ее во вложении в электронном письме. Лиза извлекает транзакцию и убеждается, что:

★ Транзакция расходует средства транзакций, которые действительно существуют в электронной таблице и еще не были потрачены какой-либо другой транзакцией в электронной таблице.

★ Сумма выходов транзакции не превышает сумму входов. Если это правило не соблюсти, транзакция создаст новые деньги из воздуха.

★ Подписи Джона верны.

Лизе больше не нужно вычислять баланс РКН, но она должна убедиться, что деньги, которые предполагается потратить, действительно существуют и еще не были потрачены.

Как она проверит, что средства, указанные в выходе транзакции, не израсходованы? Может быть, она должна попытаться отыскать в электронной таблице транзакции, которые тратят эти средства? Именно так она и поступает. Этот поиск кажется таким же обременительным, как поиск для расчета баланса. Не волнуйтесь: у Лизы есть свой план.

Множество неизрасходованных входящих выходов

Чтобы упростить проверку неизрасходованных средств, она создает новую закрытую базу данных, которую она называет множеством UTXO (рис. 5.6). Это набор всех UTXO.

Запись в множество UTXO включает идентификатор транзакции txid, индекс и фактический выход транзакции. Лиза хранит свое множество UTXO для проверки транзакций. Прежде чем добавить транзакцию Джона

<table>
  <tr>
    <th>ТРАНЗАКЦИЯ ДЖОНА</th>
    <th></th>
  </tr>
  <tr>
    <td>☑ Создание (Джон)</td>
    <td></td>
  </tr>
  <tr>
    <td>☐ Подтверждение (Лиза)</td>
    <td></td>
  </tr>
  <tr>
    <td>☐ Проверка (любой желающий)</td>
    <td></td>
  </tr>
</table>

<table>
  <tr>
    <th>МНОЖЕСТВО UTXO</th>
    <th></th>
  </tr>
  <tr>
    <td>Все узлы в сети Биткоин поддерживают закрытое множество UTXO, чтобы ускорить проверку транзакций.</td>
    <td></td>
  </tr>
</table>