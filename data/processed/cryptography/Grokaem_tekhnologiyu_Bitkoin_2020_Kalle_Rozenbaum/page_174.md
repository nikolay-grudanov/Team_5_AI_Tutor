---
source_image: page_174.png
page_number: 174
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.61
tokens: 7397
characters: 1485
timestamp: 2025-12-24T08:35:15.500748
finish_reason: stop
---

Далее следует еще один оператор, OP_EQUALVERIFY. Он означает «Снять два верхних элемента со стека и сравнить их. Если они равны, перейти к следующей инструкции; иначе завершить программу с признаком ошибки». Лиза снимает два элемента РКН с вершины стека и сравнивает их. Они равны, а значит, открытый ключ, который передал Джон в сценарии подписи в своей транзакции, соответствует РКН, заданному в качестве получателя выхода.

![Проверка подписи с использованием транзакции Джона и остальных элементов в стеке](https://i.imgur.com/3Q5z5QG.png)

Рис. 5.15. Проверка подписи с использованием транзакции Джона и остальных элементов в стеке

Последний оператор в программе, OP_CHECKSIG (рис. 5.15), означает «Проверить, что открытый ключ на вершине стека и лежащая ниже подпись правильно подписывают транзакцию. Поместить true или false на вершину стека, в зависимости от результата проверки». Лиза берет транзакцию Джона и удаляет из нее сценарий подписи из всех входов. Затем использует два верхних элемента из стека — открытый ключ Джона и его подпись, — чтобы убедиться, что подпись соответствует транзакции. Когда Джон подписывал эту транзакцию, в ней не было подписей во входах. Вот почему Лиза должна сначала удалить сценарий подписи перед проверкой. Подпись определена как верная, поэтому Лиза вернула в стек значение true, то есть признак ОК.

На этом программа заканчивается! Больше ничего не нужно делать. Верхний элемент на стеке, оставшийся после выполнения программы, показы-