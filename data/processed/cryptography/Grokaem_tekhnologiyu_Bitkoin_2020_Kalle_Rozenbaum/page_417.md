---
source_image: page_417.png
page_number: 417
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.33
tokens: 7551
characters: 1680
timestamp: 2025-12-24T08:41:55.771367
finish_reason: stop
---

Увеличение максимального размера блока

Старое правило, ограничивающее размер блока 1 000 000 байт, продолжает действовать, поэтому старые узлы могут продолжать работать, как раньше. Новые узлы будут считать размер блока иначе, но совместимым способом. Байты в структуре свидетеля будут учитываться со «скидкой», в отличие от других байтов, таких как заголовок блока или выходы транзакции. В действие вводится новая мера — вес блока. Максимальный вес блока составляет 4 000 000 весовых единиц (weight units, WU; см. рис. 10.36).

Старое правило:
размер блока ≤ 1 000 000 байт

Новое правило:
вес блока ≤ 4 000 000 весовых единиц

3000 байт
Структура свидетеля не учитывается старым правилом

3000 байт = 4*3000 весовых единиц = 12 000 весовых единиц
5000 байт в структуре свидетеля = 5000 весовых единиц
Вес блока: 17 000 весовых единиц

Рис. 10.36. Байты в структуре свидетеля и байты, не имеющие к ней отношения, учитываются по-разному. Байты в структуре свидетеля вносят меньший вклад в вес блока и вообще не включаются в традиционный размер блока

Будем далее называть блок без свидетеля базовым блоком:

★ 1 байт базового блока эквивалентен 4 весовым единицам;
★ 1 байт в структуре свидетеля эквивалентен 1 весовой единице.

В результате старое ограничение размера 1 000 000 байт остается, потому что в отношении базового блока новое и старое правила фактически совпадают. Но чем шире используется решение segwit, тем больше данных можно переместить из базового блока в структуру свидетеля и таким способом увеличить общий размер блока.

Пусть r — доля блока, занимаемая структурой свидетеля. Тогда, с учетом максимального веса блока 4 000 000, получаем общий размер блока T: