---
source_image: page_360.png
page_number: 360
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.82
tokens: 7536
characters: 1740
timestamp: 2025-12-24T08:40:20.514479
finish_reason: stop
---

**Атомарный обмен**

Под цифровыми контрактами часто подразумевается атомарный обмен, или swap (atomic swap), когда две стороны хотят обменяться монетами из разных блокчейнов.

Предположим, что Джон общается с Фатимой на публичном форуме в Интернете. Они не знают друг друга и не имеют причин доверять друг другу. Но оба хотят торговаться.

Они решают обменять 2 BTC, принадлежащих Джону, на 100 монет Namecoin (NMC), принадлежащих Фатиме. Namecoin — это альтернативная криптовалюта, используемая в качестве децентрализованной системы имен, подобной DNS. Об альтернативных криптовалютах мы уже говорили в главе 1. В этом примере совершенно неважно, для чего используется Namecoin; отметим лишь, что это совершенно другая криптовалюта с собственным блокчейном, отличным от блокчейна Биткоин.

Вот как начинается диалог между Джоном и Фатимой:

Джон: Давай обменяем твои 100 NMC на мои 2 BTC? Мой открытый ключ Namecoin: 02381efd...88ca7f23. Я создал секретное случайное число, имеющее хеш SHA256h. Но пока не скажу его тебе.

Фатима: Хорошо, давай обменяем! Мой открытый ключ в Биткоин: 02b0c907...df854ee8.

Обозначим секретное число как S. Только Джон знает S, но он может передать Фатиме его хеш H. Теперь у обоих достаточно информации, чтобы начать.

Каждый из них создает свою транзакцию (рис. 9.11). Джон создает транзакцию Биткоин, которая тратит 2 BTC. Фатима создает транзакцию Namecoin, которая тратит 100 NMC. Пока они не отправляют свои транзакции.

**АТОМАРНЫЙ**

В информатике словом атомарный обозначаются процессы, которые выполняются полностью, от начала до конца, или не выполняются вовсе. Атомарный обмен — это обмен, который либо совершается, либо обе стороны остаются при своих деньгах. Никакие другие исходы невозможны.