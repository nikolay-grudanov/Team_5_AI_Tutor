---
source_image: page_211.png
page_number: 211
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.93
tokens: 7422
characters: 1490
timestamp: 2025-12-24T08:36:18.089709
finish_reason: stop
---

Новая версия похожа на старую, но не содержит транзакции Лизы. Поскольку она вмешивается в транзакции в блоке, она должна заменить корень дерева Меркла в заголовке новым значением, соответствующим новому набору транзакций в блоке. Когда она меняет заголовок, подпись становится недействительной, поэтому заголовок требуется подписать заново. Чтобы сделать измененный блок доступным для проверяющих, Лиза должна поместить блок в общую папку, например в файле с именем block_21b.dat.

В кафе уже загрузили первую версию блока 21. Когда Лиза добавит новый файл с блоком, в кафе обнаружат, что в общей папке появилась другая версия блока (рис. 6.12).

![Рис. 6.12. В кафе увидят две версии блока 21, один с транзакцией Лизы и другой без нее](../images/chapter6/fig6-12.png)

Теперь в кафе видят два разных блока на высоте 21, один из которых содержит перевод 10 СТ в кафе, а другой — нет. Оба блока одинаково действительны, и ни один не является более точным с точки зрения проверки. Но теперь кафе может доказать, что Лиза играет в грязные игры, потому что она создала две разные подписанные версии блока. Подписи доказывают, что Лиза пошла на обман и это уже не та ситуация «слово против слова». Лиза будет уволена или, по крайней мере, отстранена от своей важной должности обработчика транзакций.

А что, если после 21 блока имелись другие блоки, когда Лиза пустилась на обман? Предположим, что в момент, когда Лиза решила удалить свою транзакцию, уже были созданы блоки 22 и 23 (рис. 6.13).