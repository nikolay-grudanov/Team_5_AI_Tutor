---
source_image: page_304.png
page_number: 304
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.78
tokens: 7516
characters: 1685
timestamp: 2025-12-24T08:38:54.953288
finish_reason: stop
---

Узел использует сообщение inv — сокращенно от inventory (опись), — чтобы сообщить другим узлам, что у него есть. На рис. 8.9 узел Тома сообщает узлу Лизы, что может предложить две транзакции и блок. Сообщение содержит идентификаторы всех трех элементов.

Джон посылает транзакцию

Давайте проследим путь транзакции по сети от начала до конца и посмотрим, какие сетевые сообщения используются. Предположим, что одноранговая сеть уже инициализирована. К вопросу инициализации сети мы вернемся позже в этой главе.

В разделе «Легкие кошельки» в главе 6 говорилось, что кошельки могут подключаться к полным узлам и получать информацию обо всех заголовках блоков и транзакциях, интересующих их, используя фильтры Блума и доказательства Меркла (рис. 8.10).

![Рис. 8.10. Легкие кошельки взаимодействуют с узлами, используя сетевой протокол Биткоин](../images/chapter8/fig8_10.png)

Рис. 8.10. Легкие кошельки взаимодействуют с узлами, используя сетевой протокол Биткоин

Не буду вдаваться в детали, как протекает это общение, но отмечу, что при этом используется тот же протокол, который используют узлы для общения друг с другом. Кошельки и полные узлы (включая майнеров) говорят на одном «языке».

Предположим, что Джон решил купить булочку в кафе. Кошелек Джона имеет установленное TCP-соединение с узлом Тома. Он сканирует платежный URI из кошелька кафе, после чего создает и подписывает транзакцию. Как это делается, вы уже знаете. Затем он отправляет транзакцию узлу Тома (рис. 8.11).

Вся эта процедура выполняется в три этапа. Кошелек Джона не просто отправляет транзакцию без спросу: он сначала сообщает узлу Тома, что у него есть транзакция, которую хотел бы отправить (рис. 8.12).