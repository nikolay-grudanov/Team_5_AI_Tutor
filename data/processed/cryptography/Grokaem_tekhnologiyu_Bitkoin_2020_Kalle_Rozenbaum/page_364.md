---
source_image: page_364.png
page_number: 364
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.31
tokens: 7293
characters: 1038
timestamp: 2025-12-24T08:40:15.321957
finish_reason: stop
---

Рис. 9.13. Фатима завершает атомарный обмен, посылая свою обменную транзакцию в сеть Биткоин

Она извлекает исходный образ S из обменной транзакции Джона и вставляет в свою обменную транзакцию, которая переводит 2 ВТС на хеш открытого ключа Фатимы РКН_F. После подтверждения обеих обменных транзакций атомарный обмен завершается. Суть всего этого процесса сводится к тому, что Джон отправляет 2 ВТС Фатиме с условием, что та отправит ему 100 NMC, а Фатима отправляет 100 NMC Джону с условием, что тот отправит ей 2 ВТС.

Неудачное завершение атомарного обмена

Последовательность событий, описанная в примере атомарного обмена выше, иллюстрирует случай, когда обе стороны, Джон и Фатима, играют по правилам. В действительности никто не был обязан использовать в выходах контрактных транзакций ветви с временными блокировками. В этом подразделе мы рассмотрим несколько случаев безуспешного завершения обмена:

★ Фатима не отправила свою контрактную транзакцию. Вследствие этого Джон не сможет потратить выход контрактной транзакции Фатимы,