---
source_image: page_234.png
page_number: 234
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.80
tokens: 7604
characters: 2204
timestamp: 2025-12-24T08:37:03.942025
finish_reason: stop
---

Полные узлы проверяют всю историю блокчейна и точно знают, что деньги, которые расходует транзакция, действительно существуют и подписи действительно.

Легкий кошелек знает всю цепочку заголовков блоков. Он проверит правильность подписания каждого заголовка Лизой. Когда кошелек получает транзакцию и доказательство Меркла, он может проверить присутствие транзакции в блоке и подпись Лизы. Но не может проверить многое другое. Например:

★ что все программы на языке Script в транзакции возвращают признак «ОК», который обычно проверяет подписи во входах;
★ что средства, расходуемые выходами, еще не израсходованы;
★ что получены все релевантные транзакции.

Легкий кошелек также не знает, какими правилами руководствуется полный узел. Полный узел может использовать правило, которое выплачивает двойную награду Лизе. Типичный полный узел будет рассматривать любой блок, выплачивающий Лизе слишком много, как недействительный, потому что это противоречит его правилам, и будет отбрасывать блок.

Легкий кошелек должен доверять полному узлу проверку всего этого от его имени и верить, что полный узел следует тем ожидаемым правилам.

Полный узел может скрывать релевантные транзакции от кошелька и не уведомлять о некоторых входящих или исходящих транзакциях.

Легкий кошелек перекладывает ответственность за проверку на полный узел, к которому подключен. Предположим, что Лиза создала недопустимый блок, например блок, содержащий транзакцию, которая расходует несуществующий выход. Получив такой блок, полный узел должен проверить и удалить его, потому что он недействителен. Но может так случиться, что полный узел, преднамеренно или случайно, не обнаружит ошибку. Может быть, в кафе сговорились с Лизой обмануть Джона — кто знает? Кафе и Лиза могут, хотя бы на время, заставить Джона поверить, что он получил деньги, которые в действительности не получил.

Джон может предпринять две основные меры, чтобы уменьшить риск быть одураченным полным узлом:

★ Подключиться к нескольким полным узлам одновременно. Большинство легких кошельков в Биткоин делают это автоматически. Все полные узлы, к которым подключен кошелек Джона, должны принять активное участие в заговоре, чтобы обмануть Джона (рис. 6.31).