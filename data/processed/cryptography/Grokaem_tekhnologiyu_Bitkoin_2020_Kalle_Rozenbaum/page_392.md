---
source_image: page_392.png
page_number: 392
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.00
tokens: 7536
characters: 1742
timestamp: 2025-12-24T08:41:14.525052
finish_reason: stop
---

Вот как выглядит сценарий открытого ключа для этого выхода:

<1 may 2019 00:00:00> OP_CHECKLOCKTIMEVERIFY OP_DROP
OP_DUP OP_HASH160 <PKHD> OP_EQUALVERIFY OP_CHECKSIG

Вот как новый узел — который знает о новом значении байта b1 — интерпретирует сценарий:

1. Положить на стек отметку времени <1 may 2019 00:00:00>.

2. Сравнить время блокировки в расходующей транзакции с отметкой времени на вершине стека, и если время в транзакции меньше времени на стеке, немедленно завершится с ошибкой.

3. Вытолкнуть значение времени со стека.

4. Продолжить обычную процедуру проверки подписи.

Старый узел интерпретирует тот же сценарий иначе:

<1 may 2019 00:00:00> OP_NOP2 OP_DROP
OP_DUP OP_HASH160 <PKHD> OP_EQUALVERIFY OP_CHECKSIG

1. Положить на стек отметку времени <1 may 2019 00:00:00>.

2. Ничего не делать.

3. Вытолкнуть значение со стека.

4. Продолжить обычную процедуру проверки подписи.

Старые узлы интерпретируют OP_NOP2 как пустую операцию и движутся дальше. Они не знают новых правил, связанных с байтом b1.

Старый и новый узлы будут действовать одинаково, если проверка OP_CLTV на новом узле завершится успехом. Но если на новом узле OP_CLTV потерпит неудачу, то старый узел продолжит выполнение как ни в чем не бывало, потому что операция «ничего не делать» никогда не завершается ошибкой. Новые узлы будут чаще отказываться подтверждать транзакции, потому что следуют более строгим правилам. На старых узлах сценарий всегда будет завершаться успехом, если успехом завершается на новых узлах. Такое обновление системы, не требующее обновления всех узлов, называется soft-форком (soft fork). Подробнее о форках (ветвлениях), обновлениях системы и альтернативных валютах, появившихся из блокчейна Биткоина, мы поговорим в главе 11.