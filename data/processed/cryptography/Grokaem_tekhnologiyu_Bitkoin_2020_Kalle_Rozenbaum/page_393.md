---
source_image: page_393.png
page_number: 393
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.33
tokens: 7501
characters: 1858
timestamp: 2025-12-24T08:41:14.526148
finish_reason: stop
---

Возможно, вам интересно, для чего предназначена инструкция OP_DROP. Она просто снимает элемент с вершины стека и отбрасывает его. Инструкция OP_CLTV специально разрабатывалась так, чтобы соответствовать инструкции OP_NOP2 в случае успешного выполнения. Если бы OP_CLTV разрабатывалась без учета старых узлов, она, вероятно, удаляла бы верхний элемент со стека. Но из-за необходимости учитывать особенности работы старых узлов OP_CLTV этого не делает. Мы должны добавить дополнительный оператор OP_DROP после OP_CLTV, чтобы удалить элемент со значением времени из стека.

Это был пример того, как старые операторы могут перепрофилироваться для наложения дополнительных ограничений без нарушения работы всей сети.

До настоящего времени этот метод расширения языка сценариев применялся дважды:

<table>
  <tr>
    <th>Байт</th>
    <th>Старый код</th>
    <th>Новый код</th>
    <th>Новое значение</th>
  </tr>
  <tr>
    <td>b1</td>
    <td>OP_NOP2</td>
    <td>OP_CLTV</td>
    <td>Убедиться, что расходующая транзакция имеет достаточно большое значение абсолютной временной блокировки</td>
  </tr>
  <tr>
    <td>b2</td>
    <td>OP_NOP3</td>
    <td>OP_CSV</td>
    <td>Убедиться, что расходующий вход имеет достаточно большое значение относительной временной блокировки</td>
  </tr>
</table>

Для расширения языка сценариев доступно всего 10 операторов OP_NOP, и такие расширения должны точно имитировать поведение OP_NOP в случаях, когда завершаются успехом.

Рано или поздно свободные операторы OP_NOP закончатся, и понадобится другой механизм расширения языка сценариев, потому что новые операторы должны будут действовать иначе, чем OP_NOP, когда завершаются успехом.

Решения

На конференции 2015 года было предложено решение всех этих проблем: вынести сценарии подписей из транзакций.

Давайте посмотрим, как устроена обычная транзакция (рис. 10.10).