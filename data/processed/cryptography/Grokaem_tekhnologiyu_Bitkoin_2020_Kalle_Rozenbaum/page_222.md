---
source_image: page_222.png
page_number: 222
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.98
tokens: 7600
characters: 1921
timestamp: 2025-12-24T08:36:41.532035
finish_reason: stop
---

Определим несколько обозначений:

\( t = \) количество проверок, выполняемых с одной транзакцией (9);

\( p = \) вероятность, что транзакция будет признана неинтересной;

\( r = \) отношение количества единиц к размеру фильтра Блума.

Теперь вычисления, произведенные выше, можно представить в виде следующей формулы:

\[
(1 - r^3)^t = p \Rightarrow 1 - r^3 = p^{\frac{1}{t}} \Rightarrow r^3 = 1 - p^{\frac{1}{t}} \Rightarrow r = \sqrt[3]{1 - p^{\frac{1}{t}}}.
\]

Допустим, вы хотите получить только \( 1/10 \) всех транзакций (при условии, что все транзакции похожи на предыдущую, то есть имеют по два входа и два выхода). Насколько большим должен быть фильтр Блума в этом случае?

\[
t = 9, \quad p = \frac{9}{10}
\]
\[
r = \sqrt[3]{1 - p^{\frac{1}{t}}} = \sqrt[3]{1 - (\frac{9}{10})^{\frac{1}{9}}} \approx 0,23.
\]

Согласно полученному результату, фильтр Блума должен иметь длину около \( 6/0,23 \approx 26 \) бит, чтобы получить только \( 1/10 \) всех транзакций. Длина фильтра должна быть кратна 8 битам, поэтому 26 бит следует округлить до 32.

Имейте в виду, что это довольно грубый расчет, основанный на нескольких, не всегда верных предположениях относительно характеристик транзакций. Мы также не учитываем, что число единиц в примере не всегда строго равно шести, а может изменяться в диапазоне от трех до шести, учитывая, что оба адреса Джона могут генерировать одинаковые наборы индексов. Тем не менее этот пример помогает получить представление о том, насколько большим должен быть фильтр Блума.

Проблемы с фильтром Блума

Фильтры Блума широко используются многими легкими кошельками, но они страдают некоторыми специфическими проблемами:

★ Конфиденциальность — узел, который получает фильтры Блума от облегченного клиента, может с высокой точностью определить, какие адреса принадлежат кошельку. Чем больше фильтров, тем выше точность. Подробнее об этом рассказывается на веб-ресурсе 14 (приложение В).