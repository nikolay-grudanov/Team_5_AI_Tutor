---
source_image: page_219.png
page_number: 219
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 43.12
tokens: 7714
characters: 2267
timestamp: 2025-12-24T08:36:41.731902
finish_reason: stop
---

и 0. Биты с индексами 5 и 0 имеют значение 1, но бит с индексом 1 имеет значение 0. Значение 0 указывает, что РКН_L определенно не представляет интереса для кошелька Джона. Если бы кошелек Джона интересовался адресом РКН_L, он добавил бы его в фильтр, установив бит 1 в значение 1. Поскольку РКН_L — единственный РКН в Tx_1, эта транзакция неинтересна кошельку Джона.

Далее проверяется транзакция Tx_2. Она содержит два РКН: РКН_b и РКН_x. Первым проверяется РКН_b. Хеш-функции возвращают для этого РКН индексы 5, 0 и 3. Все три бита с этими индексами имеют значение 1. В этом случае узел не может с уверенностью утверждать, что эта транзакция будет интересна кошельку, но он не может утверждать, что она точно не интересна. Проверять другие РКН в этой транзакции не имеет смысла, поскольку узел уже определил, что транзакция Tx_2 должна быть отправлена в кошелек.

Последняя транзакция имеет два выхода: с адресами РКН_y и РКН_z. Первым проверяется РКН_y, который указывает на биты с индексами 2, 7 и 4. Биты 4 и 7 имеют значение 0, а значит, РКН_y определенно не интересен кошельку. Далее проверяется РКН_z, для которого хеш-функции возвращают 2, 3 и 0. Все три бита с этими индексами в фильтре имеют значение 1. Это опять же означает, что транзакция Tx_3 может быть интересна кошельку, поэтому узел отправит и эту транзакцию. На самом деле кошелек Джона не содержит РКН_z, но фильтр Блума стремится соответствовать более широкому кругу адресов, чем нужно, чтобы обеспечить некоторую степень конфиденциальности. Мы называем это ложным срабатыванием.

В результате фильтрации Блума узел отправит в кошелек транзакции Tx_2 и Tx_3. Как отправляются транзакции — это совершенно другая история, описанная в разделе «Деревья Меркла».

ВНИМАНИЕ

Далее следуют сложные рассуждения. Вы можете смело пропустить их и перейти к разделу «На чем мы остановились?».

Предыдущее описание дает лишь упрощенное представление о происходящем в действительности. Выше мы проверили только РКН, указанные в выходах транзакций. То есть таким способом будут выявлены транзакции, соответствующие платежам по любому из адресов Джона. А как быть с транзакциями, которые расходуют средства с адресов Джона? Можно было бы подумать, что полный узел не должен отправлять эти транзакции в кошелек,