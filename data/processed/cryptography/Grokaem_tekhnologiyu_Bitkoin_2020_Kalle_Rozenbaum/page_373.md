---
source_image: page_373.png
page_number: 373
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.24
tokens: 7623
characters: 2163
timestamp: 2025-12-24T08:40:39.776152
finish_reason: stop
---

Проблема в том, что большинством узлов новая транзакция, скорее всего, будет воспринята как попытка повторного расходования и отброшена. Они посчитают верной первую транзакцию и игнорируют любые другие транзакции, расходующие тот же выход. Обрабатывать или не обрабатывать вторую транзакцию, узлы решают сами, но большинство из них, следуя общепринятым правилам, просто отбросят ее. Именно так работает Bitcoin Core, а это наиболее широко используемое программное обеспечение в системе Биткоин. Это правило называется правилом первой встреченной транзакции.

Вы можете обойти это правило, отправив вторую транзакцию напрямую одному или нескольким майнерам. Майнеры движимы другими стимулами, нежели полные узлы. Полные узлы, осуществляемые майнинг, хотят получать вознаграждение — субсидию плюс комиссионные — за найденное доказательство работы, в то время как полные узлы, не занимающиеся майнингом, стремятся снизить потребление памяти и вычислительных ресурсов. Получив вторую транзакцию с высокой комиссией, майнер может решить включить ее в блок, несмотря на то что первой встреченной была транзакция с низкой комиссией. Замена транзакций таким способом нецелесообразна, поскольку вы не знаете IP-адреса майнеров, если они не опубликованы каким-либо образом. Кроме того, вам придется сообщить майнеру свой IP-адрес, а майнер может стать объектом интереса для различных компаний или надзорных организаций, желающих купить информацию о вас.

Согласие на замену за плату

В 2016 году было принято правило замены транзакций. Обычно его называют согласием на замену за плату (opt-in replace-by-fee, или opt-in RBF), см. рис. 9.20. Оно основано на использовании порядковых номеров входов транзакций.

Предположим еще раз, что вы решили купить книгу в онлайн-магазине. Создавая транзакцию, вы должны убедиться, что один из входов (в этом примере он единственный) имеет порядковый номер меньше, чем ffffffff. Этот номер сигнализирует узлам, что транзакция является заменяемой.

ПОДСКАЗКА ДЛЯ УПРАЖНЕНИЙ
Запомните эту информацию, она пригодится вам в упражнении 11.

BIP125
В этом предложении по улучшению описывается, как транзакции могут объявлять себя заменяемыми.