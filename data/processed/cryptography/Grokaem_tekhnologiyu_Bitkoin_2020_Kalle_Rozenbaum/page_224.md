---
source_image: page_224.png
page_number: 224
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.14
tokens: 7446
characters: 1511
timestamp: 2025-12-24T08:36:38.338159
finish_reason: stop
---

В примере в этой главе Джон отправлял фильтр Блума полному узлу в кафе, чтобы получать информацию, касающуюся только его. Полный узел получил блок, содержащий две транзакции, которые могут заинтересовать Джона, по крайней мере, если судить по фильтру, который указал Джон.

Затем заголовок нового блока и потенциально интересные транзакции посылаются в кошелек Джона.

Деревья Меркла

Теперь, определив транзакции для отправки в кошелек, полный узел должен послать заголовок нового блока и все транзакции, которые могут заинтересовать кошелек Джона.

![Полный узел пересылает в кошелек заголовок блока и потенциально релевантные транзакции](../images/ch6_22.png)

Рис. 6.22. Полный узел пересылает в кошелек заголовок блока и потенциально релевантные транзакции

Полный узел определил, что в кошелек следует отправить транзакции Tx₂ и Tx₃. Однако по заголовку и двум транзакциям кошелька Джона не сможет проверить принадлежность транзакций блоку. Корень дерева Меркла зависит от трех транзакций — Tx₁, Tx₂ и Tx₃, — а кошелек получает от полного узла только Tx₂ и Tx₃. Кошелек не сможет воссоздать корень дерева Меркла в заголовке блока. Ему нужно больше информации, чтобы убедиться, что транзакции действительно включены в блок. Как вы помните, наша цель — сэкономить трафик, поэтому отправка всех транзакций в блоке — не лучшее решение.

Создание корня дерева Меркла

Пришло время показать, как Лиза создавала корень дерева Меркла. Предположим, Лиза создает заголовок блока, показанный на рис. 6.22. Она должна