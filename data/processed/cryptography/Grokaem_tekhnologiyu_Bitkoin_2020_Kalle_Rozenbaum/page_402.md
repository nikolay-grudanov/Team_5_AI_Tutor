---
source_image: page_402.png
page_number: 402
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.07
tokens: 7383
characters: 1350
timestamp: 2025-12-24T08:41:22.565975
finish_reason: stop
---

Включение segwit-транзакции в блок

Ваша segwit-транзакция распространилась по сети, и все узлы проверили ее. Теперь майнер собирается включить ее в новый блок. Предположим, что он использует современное программное обеспечение и поэтому знает о segwit. Давайте посмотрим, как он включит транзакцию в блок (рис. 10.17).

![Включение segwit-транзакции в блок](https://i.imgur.com/3Q5z5QG.png)

Рис. 10.17. Ваша segwit-транзакция включается в блок. Блок удостоверяет свидетельство, помещая свидетеля в выход монетарной транзакции

Блок конструируется так же, как и раньше, но с одним важным отличием. Решение segwit вводит новое правило: если в блоке есть segwit-транзакции, монетарная транзакция должна содержать выход со свидетельством (witness commitment), которое представляет собой объединенный хеш из корневого хеша свидетельства (witness root hash) и зарезервированного значения свидетеля (witness reserved value). Корневой хеш свидетельства — это корень Меркла segwit-идентификаторов (wtxids) всех транзакций в блоке. Segwit-идентификатор — это хеш транзакции с ее свидетелем, если он есть. Исключением является монетарная транзакция, чей segwit-идентификатор всегда определяется как 32 нулевых байта. Зарезервированное значение свидетеля предназначено для будущих обновлений системы.

Свидетельство записывается в выход OP_RETURN (рис. 10.18).