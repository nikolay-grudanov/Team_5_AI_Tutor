---
source_image: page_276.png
page_number: 276
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.43
tokens: 7663
characters: 2140
timestamp: 2025-12-24T08:38:05.153356
finish_reason: stop
---

В результате транзакция C, переводящая деньги в кафе, фактически будет отменена. Она больше не является частью цепочки с наибольшим доказательством работы. Кафе потеряло 10 СТ, которые, как думали его сотрудники, были получены, когда выдавали булочку Лизе.

С этого момента новые блоки будут добавляться в ветвь Лизы, и все продолжится как обычно. Блок с транзакцией C потеряет актуальность.

Защита от атак двойного расходования

Хотя все шансы против Лизы, ей может повезти в атаке с двойным расходованием, как было показано выше. Попытка дважды потратить 10 СТ экономически нецелесообразна с точки зрения Лизы. Она рискует потратить много электроэнергии и в конечном итоге получить неактуальные блоки, если ее попытка не увенчается успехом. Она недополучит вознаграждение за эти неактуальные блоки.

Но что, если она попытается удвоить расходы, превышающие 10 СТ, скажем, 100 000 СТ? Тогда Лизе стоит попытаться удвоить расходы. Только представьте, она может купить все кафе и успешно провести атаку двойного расходования. После этого она получит кафе и по-прежнему будет иметь 100 000 СТ.

Владелец кафе готов продать его Лизе за 100 000 СТ. Но он, конечно же, знает об атаках двойного расходования. Итак, владелец кафе говорит Лизе, что продаст ей кафе за эти большие деньги после шести подтверждений.

Что это значит? Лиза должна заплатить владельцу кафе 100 000 СТ и дождаться, пока транзакция будет включена в блок и после этого блока будет построено еще 5 блоков. Только после этого владелец передаст кафе Лизе.

Чтобы провести атаку двойного расходования в этих условиях, Лиза должна тайно построить альтернативную ветку, как и в предыдущей атаке, пока владелец кафе ожидает появления шести подтверждений. Когда он увидит шесть подтверждений и передаст кафе Лизе, она должна в какой-то момент выгрузить в общую папку более сильную ветку с повторным расходом. Это значит, что Лизе должно везти дольше, чем в предыдущем примере.

Давайте посмотрим, как мог бы развиваться этот сценарий (рис. 7.27).

Как и ожидалось, в долгосрочной перспективе Лиза не смогла произвести больше блоков, чем честные майнеры. Она сдалась со счетом 7–4.