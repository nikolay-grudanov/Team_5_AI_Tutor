---
source_image: page_250.png
page_number: 250
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.32
tokens: 7601
characters: 1991
timestamp: 2025-12-24T08:37:24.534275
finish_reason: stop
---

ветвь. Это правило изменится далее в главе, но пока мы будем следовать за самой длинной ветвью.

Ци, попытавшаяся начать свою ветвь, замечает, что другая ветвь длиннее, потому что Лиза опубликовала свой блок в той ветви. Ци знает, что все остальные будут выбирать более длинную ветвь, и если она продолжит свою ветвь, то, скорее всего, ее ветвь никогда не догонит другую ветвь и не станет длиннее ее. Поэтому Ци лучше отказаться от своей короткой ветви и перейти к более длинной. Теперь все снова работают над одной ветвью, и конфликт разрешен.

Переключаясь на новую ветвь, Ци помечает все транзакции в своей старой ветви (которые пока отсутствуют в новой ветви) как ожидающие. В будущем они попадут в новые блоки в новой ветви. Узлы поддерживают пул ожидающих транзакций, обычно называемый пулом памяти. Пометить транзакцию как ожидающую означает положить ее в пул памяти.

ПРИМЕЧАНИЕ

Множество UTXO конструируется на основе единственной цепочки. Оно не может строиться на основе сразу нескольких ветвей. Полным узлам придется выбирать, за какой ветвью следовать.

Поскольку Ци отказалась продолжать свою ветвь, она также отказалась от награды за блок. Ее блок никогда не станет частью самой длинной цепочки, поэтому она никогда не сможет потратить награду за блок в своем блоке. Только блоки в самой длинной цепочке влияют на содержимое множества UTXO.

Отложенное разрешение конфликта

Но что случится, если в одну и ту же секунду счастливое число выпадет Лизе и Ци (рис. 7.6)? В такой ситуации обе ветви удлинятся на 1 блок каждая. В этом случае нельзя сказать, какая ветка правильная. Майнеры выберут каждый свою сторону и попытаются продолжить свои ветви.

Допустим, следующее счастливое число выпало Тому. Он добавит следующий блок в конец своей ветви, в которой теперь находятся 3 блока, и она станет длиннее другой ветви, в которой всего 2 блока (рис. 7.7).

Все остальные майнеры заметят это и переключатся на ветку Тома. У нас снова есть выигравшая ветвь, и снова Ци не повезло.