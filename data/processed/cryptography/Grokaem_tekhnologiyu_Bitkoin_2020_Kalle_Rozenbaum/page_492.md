---
source_image: page_492.png
page_number: 492
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 15.19
tokens: 7590
characters: 1942
timestamp: 2025-12-24T08:44:00.657367
finish_reason: stop
---

10.10. Корень дерева Меркла комиссионных отчислений можно поместить в правую ветвь под обязательством. Но вам также необходимо поместить корень дерева Меркла комиссионных в структуру свидетеля для входа монетарной транзакции, чтобы старые segwit-узлы смогли проверить корневой хеш свидетеля.

10.11. Старый segwit-узел будет проверять блоки точно так же, как раньше. Зарезервированное значение свидетеля будет взято из свидетеля для входа монетарной транзакции. Хеш в свидетеле позволит старому узлу создать свидетельство и сравнить его с хешем в выходе OP_RETURN, но он не будет знать, что зарезервированное значение свидетеля является корнем дерева Меркла для комиссионных. То есть старые узлы не будут проверять дерево Меркла для комиссионных.

Новый узел выполнит ту же проверку, что и старый, а также вычислит корень Меркла для комиссионных и сравнит его с хешем в свидетеле монетарной транзакции.

Глава 11

11.1. Софт-форк ужесточает правила согласования. Это означает, что блоки, созданные новыми узлами, гарантированно будут приняты старыми узлами.

11.2. (а) Новая ветвь будет стерта старой ветвью.

(б) Потому что это произойдет не сразу, но обязательно произойдет, когда старая ветвь догонит новую и превзойдет ее. Для этого может потребоваться создать довольно много блоков, в зависимости от первоначального дефицита.

(в) В новую версию Биткоин можно добавить защиту от стирания — например, потребовав, чтобы первый блок после расщепления имел определенное свойство, делающее его недействительным в старой цепочке. Например, Bitcoin Cash требует, чтобы первый блок имел размер ≥1 000 000 байт.

11.3. Недолго, новая ветвь быстро превзойдет старую, и та будет стерта или реорганизована.

11.4. 2016 блоков. Состояние LOCKED_IN всегда длится один период ретаргетинга.

11.5. И те и другие. Старые узлы могут создавать блоки, недопустимые для новых узлов. Аналогично новые узлы могут создавать блоки, недопустимые для старых узлов.