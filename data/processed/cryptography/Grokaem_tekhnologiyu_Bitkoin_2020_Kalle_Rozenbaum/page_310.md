---
source_image: page_310.png
page_number: 310
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.65
tokens: 7520
characters: 1726
timestamp: 2025-12-24T08:38:58.568930
finish_reason: stop
---

знает, есть ли транзакция в кошельке, но не будет сразу отправлять ему сообщение inv.

Кошелек в кафе — это легкий кошелек, использующий фильтры Блума, описанные в разделе «Фильтры Блума маскируют адреса» в главе 6. Полный узел проверит транзакцию на соответствие фильтру Блума и, если они совпадут, отправит в кошелек сообщение inv. Если транзакция не соответствует фильтру, сообщение не будет отправлено.

Транзакция Джона предназначена для кафе, поэтому она будет соответствовать фильтру Блума, и полный узел отправит inv. Кошелек запросит фактическую транзакцию с помощью getdata, как показано на рис. 8.17.

![Рис. 8.17. Кошелек кафе получает транзакцию Джона от доверенного узла в кафе после ее сопоставления с фильтром Блума](../images/chapter8/fig8_17.png)

Рис. 8.17. Кошелек кафе получает транзакцию Джона от доверенного узла в кафе после ее сопоставления с фильтром Блума

Получив транзакцию, кошелек может показать сообщение владельцу кафе, что транзакция ожидает подтверждения. У владельца кафе есть выбор: понадеяться, что транзакция — так называемая транзакция с нулевым числом подтверждений — будет в конечном счете подтверждена, или подождать ее фактического подтверждения. Если кафе примет транзакцию с нулевым числом подтверждений, значит, оно верит, что Джон заплатил достаточно высокую комиссию за транзакцию и средства не будут потрачены дважды.

Но давайте представим, что на этот раз в кафе решили подождать включения транзакции в действительный блок. Это подводит нас к следующему этапу: включению транзакции в блок в блокчейне.

Включение транзакции в блок

Давайте вспомним некоторых майнеров, участвовавших в работе этой системы. В конце раздела «Ограничение централизации майнинга» в главе 7 у нас