---
source_image: page_413.png
page_number: 413
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.83
tokens: 7463
characters: 1514
timestamp: 2025-12-24T08:41:47.782370
finish_reason: stop
---

Нина выполняет перевод на адрес 3KsJCgA6...k2G6C1Be — старый адрес p2sh, который содержит хеш сценария погашения 00 bb4d4977...75ff02d1. Этот сценарий, в свою очередь, состоит из байта версии 00, за которым следует 20-байтная программа свидетеля. Это шаблон p2wpkh, с которым мы познакомились выше. Кошелек Нины ничего не знает об этом. Он видит только адрес p2sh и производит оплату на хеш этого сценария.

Позднее, когда вы решите потратить этот выход, вы создадите транзакцию, подобную той, что показана на рис. 10.29.

![Рис. 10.29. Вы расходуете деньги, полученные от Нины, включив байт версии и программу свидетеля в сценарии погашения в сценарий подписи в своем входе](https://i.imgur.com/10.29.png)

Вы создаете свидетеля так же, как для обычного входа p2wpkh, но дополнительно записываете сценарий погашения как отдельный элемент данных в сценарий подписи. Сценарий погашения включает байт версии, за которым следует 20-байтный хеш вашего открытого ключа. Используя этот сценарий подписи, старые узлы смогут проверить соответствие хеша сценария в расходуемом выходе хешу сценария погашения в сценарии подписи. Новые узлы определяют, что сценарий погашения состоит из байта версии и программы свидетеля и соответствующим образом проверят свидетеля.

Этот способ вложения segwit-платежа в платеж p2sh также можно использовать для платежей p2wsh: вкладывая p2wsh в p2sh.

Еще раз о типах платежей

Мы познакомились с несколькими типами платежей. На рис. 10.30–10.35 показаны наиболее распространенные из них.