---
source_image: page_325.png
page_number: 325
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.64
tokens: 7554
characters: 1982
timestamp: 2025-12-24T08:39:23.364482
finish_reason: stop
---

версию 70012, потому что это самая высокая версия, которую понимает узел Qi. Селма знает все версии протокола вплоть до собственной (70015).

★ Пользовательский агент — на рис. 8.31 эта информация обозначена как «идентификатор программного обеспечения», потому что название «пользовательский агент» выглядит малопонятным. Эта информация используется, чтобы подсказать другому узлу, какое программное обеспечение использует данный узел, но вообще это может быть что угодно.

★ Высота — высота последнего блока в сильнейшей цепочке, полученного узлом.

Также сообщение version включает другую полезную информацию:

★ Службы — список возможностей, поддерживаемых узлом, таких как фильтрация Блума для легких кошельков.

★ Мой адрес — IP-адрес и номер порта узла, отправившего сообщение version. Без этого Ци не узнала бы адрес узла для повторного подключения, если бы решила перезагрузить компьютер и вновь соединиться с узлом Селмы.

Получив сообщение version от узла Селмы, узел Ци ответит своим сообщением version. Он также отправит сообщение verack сразу после сообщения version. Сообщение verack не содержит никакой информации — оно используется для подтверждения, что Ци получила сообщение version.

Получив сообщение version от узла Ци, узел Селмы ответит своим сообщением verack. На этом этап рукопожатия завершается. Далее узел Селмы повторяет процедуру рукопожатия с узлом Рашида.

Поиск соседей соседей

Соединившись с узлом Рашида, узел Селмы запросит у него адреса других узлов для подключения. Так Селма может расширить свой круг соседей (рис. 8.32).

Селма установила связь только с двумя соседями: узлами Ци и Рашида. Но ей хотелось бы связаться с большим числом узлов. Связь лишь с двумя узлами может иметь некоторые неприятные последствия:

★ Ци и Рашид могут договориться скрывать транзакции и блоки от Селмы.

★ Узел Ци может выключиться, и тогда у Селмы останется связь только с узлом Рашида. В этом случае Рашид сможет самостоятельно скрывать информацию от Селмы.