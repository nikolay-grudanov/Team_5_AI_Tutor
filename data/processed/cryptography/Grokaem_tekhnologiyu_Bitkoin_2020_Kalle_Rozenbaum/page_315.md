---
source_image: page_315.png
page_number: 315
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.76
tokens: 7395
characters: 1325
timestamp: 2025-12-24T08:39:00.687437
finish_reason: stop
---

★ корень дерева Меркла в заголовке можно восстановить, используя частичное дерево Меркла;
★ идентификатор транзакции Джона включен в частичное дерево Меркла; его не интересуют транзакции, не имеющие отношения к кошельку и присланные для маскировки транзакции, принадлежащей Джону.

Убедившись, что транзакция включена в новый блок, кошелек Джона сможет отобразить сообщение Джону: «Ваша транзакция получила 1 подтверждение».

Легкий кошелек кафе выведет похожее уведомление.

Кошелек в кафе использует доверенный узел, поэтому сохранение конфиденциальности для него не является большой проблемой (рис. 8.23). Он может использовать большой фильтр для уменьшения мобильного трафика. Чем точнее фильтр Блума, тем меньше маскирующего трафика будет отправляться в кошелек.

Доверенный полный узел в кафе
headers
01000000a96...418e
getdata
merkleblock=0000...13e3
merkleblock
Идентификатор транзакции Джона
Легкий кошелек в кафе
Входящая транзакция подтверждена OK

Рис. 8.23. Кошелек посылает запрос merkleblock доверенному полному узлу

Владелец кафе получает чувство уверенности и с удовольствием вручает булочку Джону. Джон кушает булочку. Сделка завершена.

Большее число подтверждений

С течением времени майнеры будут создавать новые блоки, которые распространятся по сети и, в конце концов, попадут на все полные узлы. Лег-