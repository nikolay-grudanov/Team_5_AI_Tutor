---
source_image: page_221.png
page_number: 221
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.05
tokens: 7610
characters: 1993
timestamp: 2025-12-24T08:36:38.712313
finish_reason: stop
---

Управление конфиденциальностью и объемом трафика

Цель фильтра Блума — повысить конфиденциальность пользователей. Уровнем конфиденциальности можно управлять, настраивая соотношение между количеством единиц в фильтре и размером фильтра. Чем больше отношение количества единиц в фильтре к его размеру, тем больше ложных срабатываний, а значит, полный узел будет отправлять в кошелек больше транзакций, не имеющих к нему отношения. Чем больше транзакций отправляется, тем больший объем трафика будет потрачен впустую и тем выше уровень конфиденциальности.

Давайте выполним некоторые несложные вычисления для иллюстрации. Фильтр Блума в предыдущем примере имеет 8 бит, пять из которых равны 1. Вероятность, что каждая хеш-функция вернет индекс, соответствующий биту со значением 1, равна 5/8. Отсюда вероятность, что все три хеш-функции в одной проверке вернут индексы битов со значением 1, равна (5/8)^3. Вероятность, что проверка даст отрицательный результат — по крайней мере, одна из трех хеш-функций вернет индекс бита со значением 0, — составляет 1 — (5/8)^3. Полный узел будет выполнять несколько проверок для каждой транзакции, обычно девять для транзакции с двумя входами и двумя выходами. Проверим это по списку элементов, проверяемых полным узлом:

★ идентификатор (txid) транзакции (1);
★ все ссылки TXO во входах (2);
★ все элементы данных в сценариях подписи (открытый ключ и подпись × × 2 = 4);
★ все элементы данных в выходах (2).

Вероятность того, что все девять проверок дадут отрицательный результат, составляет (1 — (5/8)^3)^9 ≈ 0,08. То есть в кошелек будут отправляться почти все — 92/100 — транзакции. Эти расчеты наглядно показывают, что присутствие всего трех нулей в 8-битном фильтре Блума не поможет значительно уменьшить объем передаваемых данных, но лучше защищает вашу конфиденциальность.

Чтобы получить меньше ложных срабатываний, кошелек Джона должен использовать фильтр Блума большего размера, чтобы уменьшить отношение (количество единиц/размер фильтра Блума).