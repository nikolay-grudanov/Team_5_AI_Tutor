---
source_image: page_352.png
page_number: 352
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.14
tokens: 7421
characters: 1470
timestamp: 2025-12-24T08:40:02.450229
finish_reason: stop
---

352 Глава 9. И снова о транзакциях

![Рис. 9.2. Отмена транзакции Tx1 повторным расходованием того же выхода, который расходует Tx1, и создание новой транзакции с блокировкой по времени](https://i.imgur.com/352.png)

Рис. 9.2. Отмена транзакции Tx1 повторным расходованием того же выхода, который расходует Tx1, и создание новой транзакции с блокировкой по времени

Вы должны:

1. Создать и подписать транзакцию Tx2, расходующую хотя бы один из выходов, расходуемых транзакцией Tx1. Tx2 — это обычная транзакция без временной блокировки. Но пока не отправляйте эту транзакцию.

2. Создайте новую транзакцию с временной блокировкой, Tx3, расходующей все выходы, как если бы транзакция Tx2 была подтверждена. Tx3 включает временную блокировку еще на один год. Передайте ее своей дочери.

3. Отправьте транзакцию Tx2. Когда Tx2 будет включена в блок, Tx1 станет недействительной, потому что один из входов Tx1 уже израсходован транзакцией Tx2.

Обратите внимание: порядок действий играет важную роль. Если Tx2 послать перед передачей Tx3 дочери, есть шанс, что вы умрете раньше, чем успеете передать ей транзакцию Tx3. Тогда

ПЛАСТИЧНОСТЬ ТРАНЗАКЦИЙ
Здесь есть одна проблема. Идентификатор транзакции Tx2 можно изменить во время распространения и сделать Tx3 недействительной. Эта проблема называется пластичностью транзакции (transaction malleability) и устраняется выделением подписей и сценариев в отдельную структуру SegWit (segregated witness), как описано в главе 10.