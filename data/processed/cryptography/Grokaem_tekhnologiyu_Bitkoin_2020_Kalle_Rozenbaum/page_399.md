---
source_image: page_399.png
page_number: 399
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.24
tokens: 7525
characters: 1634
timestamp: 2025-12-24T08:41:28.361802
finish_reason: stop
---

использует новейшее программное обеспечение, он знает, как обращаться с segwit-транзакциями.

![Рис. 10.15. Полный узел проверяет свидетеля вашей транзакции. Байт 00 и следующие за ним 20 байт интерпретируются особым образом](https://i.imgur.com/3Q5z5QG.png)

Рис. 10.15. Полный узел проверяет свидетеля вашей транзакции.
Байт 00 и следующие за ним 20 байт интерпретируются особым образом

Полный узел с поддержкой segwit просматривает шаблон в сценарии открытого ключа, начиная с байта версии, за которым следует программа свидетеля, от 2 до 40 байт. В данном случае шаблон соответствует, то есть это segwit-выход.

На следующем шаге полный узел должен определить тип, или версию, этого segwit-выхода. На момент написания этих строк существовала только одна версия segwit-выхода: версия 00. Эта версия имеет две разновидности:

★ Платеж на хеш открытого ключа свидетеля (pay-to-witness-public-key-hash, p2wpkh) определяется 20-байтной программой свидетеля, как в этом примере.

★ Платеж на хеш сценария свидетеля (pay-to-witness-script-hash, p2wsh) определяется 32-байтной программой свидетеля. Версию p2wsh мы рассмотрим далее в этой главе.

В этом случае у нас есть байт версии 00, за которым следуют ровно 20 байт. Значит, это платеж p2wpkh. Если узел не опознает байт версии, он просто примет этот вход без дальнейшей обработки. Такое отношение к неизвестным номерам версий пригодится для будущих обновлений языка сценариев, поддерживающих прямую совместимость. Все segwit-узлы распознают версию 00.

ВСПОМНИТЕ P2SH
Segwit-выход идентифицируется по соответствуя шаблону, в точности как выход p2sh, о котором говорилось в главе 5.