---
source_image: page_431.png
page_number: 431
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 19.47
tokens: 7261
characters: 1030
timestamp: 2025-12-24T08:42:07.481410
finish_reason: stop
---

со списком индексов недостающих транзакций. В ответ Рашид вернет сообщение blocktxn, содержащее запрошенные транзакции.

Сначала происходит рассылка транзакции… … затем рассылается блок

Ци получает транзакцию
Ци снова получает транзакцию в составе блока

Рис. 11.3. Ци получает транзакцию дважды: сначала в процессе рассылки транзакции, а затем в процессе рассылки блока

cmpctblock
blockHeader, txids

getblocktxn
отсутствующие индексы

blocktxn
отсутствующие транзакции

Рис. 11.4. Поддержка компактных блоков в действии.
Рашид посылает Ци только действительно необходимые данные

Имейте в виду, что это упрощенное описание, как все на самом деле работает. Основные отличия заключаются в следующем:

★ Сообщение cmpctblock может также включать в себя некоторые полные транзакции — например, монетарную транзакцию блока.

★ Поддержка компактных блоков может работать в двух разных режимах:
• в режиме большой пропускной способности сообщения cmpctblock отправляются без предварительного запроса с использованием inv или headers;