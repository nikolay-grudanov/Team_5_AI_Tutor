---
source_image: page_218.png
page_number: 218
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.33
tokens: 7530
characters: 1595
timestamp: 2025-12-24T08:36:28.089871
finish_reason: stop
---

218 Глава 6. Блокчейн

Как полный узел использует фильтр Блума, чтобы выбрать транзакции для отправки?

Блок содержит три транзакции: Tx₁, Tx₂ и Tx₃ (рис. 6.18).

Tx₁
-1 «Здесь была Лиза» 50 PKH_L
Монетарная транзакция, не имеет отношения к Джону

Tx₂
1 10 PKH_b 3 PKH_x
Возможно, сдача

Tx₃
1 1 PKH_Y 30 PKH_z
Платеж Джону
Не имеет отношения к Джону

Рис. 6.18. Блок, выбранный для отправки, содержит три транзакции, но только одна имеет отношение к Джону

Транзакции Tx₁ и Tx₃ не имеют ничего общего с адресами Джона, но Tx₂ — это платеж на адрес Джона @b. Давайте посмотрим, как полный узел использует фильтр Блума (рис. 6.19).

Tx₁
-1 "Здесь была Лиза" 50 PKH_L
Указывают только на биты со значением 1: Tx₂ может заинтересовать кошелек Джона

Tx₂
1 10 PKH_b 3 PKH_x
Указывают на биты со значением 0: Tx₁ не представляет интереса
Хеш PKH_x не проверяется, потому что транзакция уже определена, как представляющая интерес

Tx₃
1 1 PKH_Y 30 PKH_z
Указывают на биты со значением 0: пока что Tx₃ не представляет интереса
Указывают только на биты со значением 1: Tx₃ может заинтересовать кошелек Джона
Ошибочно определяется как представляющая интерес

Рис. 6.19. Полный узел использует фильтр Блума для определения транзакций, которые «заинтересуют» кошелек

Полный узел проверяет каждый выход в транзакции, сопоставляя PKH с фильтром. Он начинает с транзакции Tx₁, которая имеет один выход с адресом PKH_L. Чтобы проверить соответствие PKH_L фильтру, он пропускает PKH_L через те же три хеш-функции, которые использовались кошельком Джона для создания фильтра. Хеш-функции возвращают индексы 5, 1