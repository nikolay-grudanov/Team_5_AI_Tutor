---
source_image: page_232.png
page_number: 232
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.48
tokens: 7533
characters: 1691
timestamp: 2025-12-24T08:36:52.664124
finish_reason: stop
---

и Tx_2. С таким же успехом можно отправить идентификаторы всех трех транзакций вместо частичного дерева Меркла — это было бы намного проще. Тем не менее доказательство Меркла позволяет получить существенный выигрыш с увеличением числа транзакций в блоке.

Предположим, что полный узел только что проверил блок, содержащий 12 транзакций. Сопоставив транзакции с фильтром Блума кошелька, он установил, что две транзакции могут быть ему интересны. Этот случай показан на рис. 6.30.

![Конструирование частичного дерева Меркла для 12 транзакций, две из которых представляют интерес](https://i.imgur.com/3Q5z5QG.png)

Рис. 6.30. Конструирование частичного дерева Меркла для 12 транзакций, две из которых представляют интерес

Полный узел должен отправить только заголовок блока, число 12, 14 флагов и 7 хешей. Это составит около 240 байт, что намного меньше, чем заголовок блока и все 12 идентификаторов транзакций (около 464 байт).

Давайте прикинем, какой выигрыш дает отправка доказательства Меркла по сравнению с упрощенным решением, когда отправляется полный блок и все идентификаторы транзакций, с увеличением количества транзакций (табл. 6.1).

В табл. 6.1 предполагается, что все транзакции имеют длину 250 байт, и требуется доказать включение только одной транзакции. Размер блока вычисляется как 80 байт заголовка блока плюс количество транзакций, умноженное на 250. Упрощенное доказательство вычисляется как 80 байт заголовка блока плюс количество транзакций, умноженное на 32. Размер доказательства Меркла вычисляется как 80 байт заголовка блока плюс длина списка хешей, умноженная на 32. Здесь не учитываются флаги и количество транзакций, потому что они дают незначительный прирост.