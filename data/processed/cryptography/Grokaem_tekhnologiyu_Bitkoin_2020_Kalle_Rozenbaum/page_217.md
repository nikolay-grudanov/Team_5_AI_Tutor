---
source_image: page_217.png
page_number: 217
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.54
tokens: 7433
characters: 1380
timestamp: 2025-12-24T08:36:22.063159
finish_reason: stop
---

число интерпретируется как индекс бита в фильтре Блума, и бит с индексом 2 (третий слева) устанавливается в значение 1. Затем РКН_a пропускается через вторую хеш-функцию, которая возвращает 0, и соответствующий бит (первый слева на рис. 6.17) устанавливается в значение 1. Наконец, третья хеш-функция возвращает 6, и бит с индексом 6 (седьмой слева) устанавливается в 1.

![Рис. 6.17. Легкий кошелек создает фильтр Блума для отправки полному узлу. В фильтр Блума добавляются все адреса, имеющиеся в кошельке](https://i.imgur.com/3Q5z5QG.png)

Рис. 6.17. Легкий кошелек создает фильтр Блума для отправки полному узлу. В фильтр Блума добавляются все адреса, имеющиеся в кошельке

Далее приходит черед хеша РКН_b, который обрабатывается точно так же. Три хеш-функции возвращают 5, 0 и 3. Все эти три бита устанавливаются в значение 1. Обратите внимание, что бит с индексом 0 уже был установлен в ходе обработки РКН_a, поэтому его значение не изменяется.

На этом создание фильтра Блума завершается, и он отправляется полному узлу.

Использование фильтра Блума

Полный узел получает фильтр Блума от кошелька и использует его для фильтрации транзакций, отправляемых в кошелек.

Предположим, что Лиза только что опубликовала новый блок в общей папке и полный узел проверил его. Теперь полный узел должен отправить в кошелек заголовок нового блока и все соответствующие транзакции в нем.