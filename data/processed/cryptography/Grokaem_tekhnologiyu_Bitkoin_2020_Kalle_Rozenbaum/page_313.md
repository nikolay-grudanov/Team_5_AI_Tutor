---
source_image: page_313.png
page_number: 313
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.19
tokens: 7375
characters: 1404
timestamp: 2025-12-24T08:38:55.003461
finish_reason: stop
---

Ци и Том одновременно отправят друг другу свои сообщения headers. Это не вызовет никаких проблем — поскольку оба узла уже получили блок, они просто проигнорируют эти сообщения. Лиза запросит блок у одного из своих соседей, точно так же как Ци запросила блок у Рашида.

![Рис. 8.20. Все, кроме Лизы, получили блок. Том, кафе и Ци посылают сообщение headers](../images/chapter8/fig_8_20.png)

Рис. 8.20. Все, кроме Лизы, получили блок. Том, кафе и Ци посылают сообщение headers

На этом распространение блока завершается... почти. Осталось лишь проинформировать легкие кошельки о новом блоке.

Вывод уведомлений в кошельках

Узел Тома подключен к кошельку Джона, поэтому Том отправляет Джону сообщение headers. Аналогично полный узел кафе отправляет сообщение headers легкому кошельку кафе. Полные узлы Тома и кафе никак не проверяют блок на соответствие фильтру Блума. Сообщение headers отправляется безоговорочно, но легкие кошельки не будут запрашивать полные блоки.

Как рассказывалось в главе 6, легкие кошельки не загружают полные блоки. Чтобы проверить доказательство работы в блокчейне, кошельку Джона достаточно заголовка блока. Но иногда, когда транзакции, имеющие отношение к кошельку Джона, включаются в блоки, он должен получить доказательство такого включения. Чтобы выяснить наличие релевантных транзакций, кошелек посылает Тому сообщение getdata, запрашивая сообщение merkleblock для блока.