---
source_image: page_231.png
page_number: 231
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.01
tokens: 7390
characters: 1332
timestamp: 2025-12-24T08:36:46.150479
finish_reason: stop
---

Теперь кошелек имеет достаточное количество хешей (3, 4 и 5), прикрепленных к дереву Меркла, чтобы заполнить пробелы вверх, к корню частичного дерева Меркла. Сначала вычисляется хеш на шаге 2 из 3 и 4; затем вычисляется корень из 2 и 5.

Потом вычисленный корень Меркла сравнивается с фактическим корнем Меркла в заголовке блока, чтобы убедиться, что они совпадают, и проверяется присутствие хеша Tx_2 в списке хешей, полученных от полного узла (рис. 6.29).

![Дерево Меркла и процесс проверки](https://i.imgur.com/3Q5z5QG.png)

Рис. 6.29. Кошелек проверяет совпадение корней Меркла и присутствие Tx_2 в списке хешей. Успешность проверок доказывает, чтоTx_2 включена в блок

Если среди хешей в частичном дереве Меркла обнаружится совпадение с транзакцией и если корень частичного дерева Меркла совпадет с корнем Меркла в заголовке блока, можно считать, что полный узел доказал включение Tx_2 в блок.

Но полный узел должен отправить две транзакции из этого блока. Как будет выглядеть доказательство Меркла с двумя транзакциями? Ему придется послать несколько доказательств Меркла? Конечно нет, но мы обсудим этот случай в конце главы, в разделе с упражнениями.

Обработка тысяч транзакций в блоке

Блок в предыдущем примере содержал всего три транзакции. Мы не получили большой экономии, отправляя заголовок, частичное дерево Меркла