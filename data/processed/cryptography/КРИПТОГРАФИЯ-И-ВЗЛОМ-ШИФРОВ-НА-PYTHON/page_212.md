---
source_image: page_212.png
page_number: 212
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.53
tokens: 7473
characters: 2081
timestamp: 2025-12-24T08:51:16.906858
finish_reason: stop
---

Создание строки, объединяющей буквы

По завершении цикла for список lettersOnly будет содержать список всех буквенных и пробельных символов из оригинальной строки message. Поскольку список, состоящий из односимвольных строк, не очень полезен для обнаружения английских слов, в строке 44 строки символов, хранящиеся в списке lettersOnly, объединяются в одну возвращаемую строку.

44. return ''.join(lettersOnly)

Чтобы конкатенировать список элементов lettersOnly в одну большую строку, мы вызываем строковый метод join() для пустой строки ''. В результате будет получена объединенная строка без разделителей. После этого результирующее строковое значение возвращается функцией removeNonLetters().

Распознавание английских слов

Попытки дешифровать сообщение с использованием неверного ключа будут часто приводить к получению намного большего количества небуквенных и непробельных символов, чем в типичном сообщении на английском языке. Кроме того, получаемые слова часто будут представлять собой случайные сочетания символов, отсутствующие в словаре английских слов. Оба этих момента проверяются в функции isEnglish().

47. def isEnglish(message, wordPercentage=20, letterPercentage=85):
48. # По умолчанию 20% слов должны быть в файле словаря,
49. # а 85% символов сообщения должны быть буквами или
50. # пробелами (а не знаками препинания или числами)

В строке 47 создается функция isEnglish(), которая получает строковый аргумент и возвращает True, если строка представляет собой текст на английском языке, и False в противном случае. Функция имеет три параметра: message, wordPercentage=20 и letterPercentage=85. Первый параметр содержит строку, подлежащую проверке, тогда как второй и третий параметры задают значения по умолчанию для процентных долей слов и букв, которые должна содержать строка, чтобы считаться текстом на английском языке. (Процент — это число в интервале от 0 до 100, которое характеризует долю определенных элементов по отношению к общему количеству элементов.) Использование аргументов по умолчанию и расчет процентов обсуждаются в следующих разделах.