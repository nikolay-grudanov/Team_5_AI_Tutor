---
source_image: page_330.png
page_number: 330
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.32
tokens: 7534
characters: 2136
timestamp: 2025-12-24T08:54:22.357791
finish_reason: stop
---

Остальной код функции translateMessage() напоминает код, который применялся для реализации шифра Цезаря.

40. for symbol in message: # цикл по символам строки message
41. num = LETTERS.find(symbol.upper())
42. if num != -1: # symbol.upper() найден в строке LETTERS
43.     if mode == 'encrypt':
44.         num += LETTERS.find(key[keyIndex]) # добавить в случае шифрования
45.     elif mode == 'decrypt':
46.         num -= LETTERS.find(key[keyIndex]) # вычесть в случае дешифрования

В цикле for, который начинается в строке 40, символы сообщения присваиваются переменной symbol на каждой итерации цикла. В строке 41 определяется индекс текущего символа, переведенного в верхний регистр, в строке LETTERS, в результате чего буква преобразуется в число.

Если значение num не равно -1, то это означает, что символ в верхнем регистре был найден в строке LETTERS (т.е. данный символ является буквой). Переменная keyIndex позволяет отслеживать текущий подключ, который является результатом вычисления выражения key[keyIndex].

Конечно, это всего лишь однобуквенная строка. Чтобы преобразовать подключ в число, нужно найти индекс данной буквы в строке LETTERS. Затем это число суммируется (в случае шифрования) с числовым кодом символа в строке 44 или вычитается (в случае дешифрования) из него в строке 46.

При работе с шифром Цезаря мы проверяли, не является ли новое значение num отрицательным (в этом случае мы прибавляли к нему число len(LETTERS)) или же превышающим значение len(LETTERS) (в таком случае мы вычитали из него число len(LETTERS)). Это позволяет учесть случаи "завертывания".

Однако существует более простой способ. Те же самые вычисления можно уместить в одной строке кода, разделив значение num на len(LETTERS) с остатком:

48. num %= len(LETTERS) # обработка "завертывания"

Например, если бы значение num было равно -8, то к нему нужно было бы прибавить 26 (т.е. значение len(LETTERS)), чтобы получить 18, но это же число является результатом операции -8 % 26. Или же, если бы значение num было равно 31, то из него требовалось бы вычесть 26, чтобы получить 5, но результатом операции 31 % 26 тоже является число 5.