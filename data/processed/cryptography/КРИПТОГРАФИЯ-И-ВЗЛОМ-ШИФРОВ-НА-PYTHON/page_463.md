---
source_image: page_463.png
page_number: 463
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 17.57
tokens: 7246
characters: 1238
timestamp: 2025-12-24T08:57:46.595812
finish_reason: stop
---

Далее мы передаем переменные filename и privKeyFilename функции readFromFileAndDecrypt(), которая возвращает дешифрованное сообщение, сохраняемое в переменной decryptedText (строка 30). В строке 33 дешифрованное сообщение выводится на экран, и на этом работа программы завершается.

Теперь рассмотрим, как реализуются основные этапы шифрования с открытым ключом и, в частности, как сообщения преобразуются в блоки.

Преобразование строк в блоки с помощью функции getBlocksFromText()

Функция getBlocksFromText() преобразует сообщение в 128-байтовые блоки. Она получает строку сообщения и размер блока в качестве параметров и возвращает список блоков, т.е. список больших целых чисел, замещающих сообщение.

Код в строках 38–41 позволяет убедиться в том, что строка message содержит лишь символы из набора, хранящегося в переменной SYMBOLS. Параметр blockSize необязательный, и в нем может быть указан любой размер блока. Приступая к созданию блоков, мы прежде всего преобразуем строку в байты.

Блок создается путем объединения всех индексов символьного набора, соответствующих символам сообщения, в одно большое число, как это делалось в разделе “Преобразование строки в блок”. Для хранения блоков создается список blockInts (строка 42).