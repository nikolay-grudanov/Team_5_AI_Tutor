---
source_image: page_466.png
page_number: 466
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.94
tokens: 7431
characters: 1794
timestamp: 2025-12-24T08:57:59.070796
finish_reason: stop
---

48. blockInts.append(blockInt)
49. return blockInts

В итоге мы получаем список целочисленных значений блоков, blockInts, который возвращается функцией в строке 49.

На данном этапе мы преобразовали всю строку сообщения в целочисленные блоки, но необходимо понять, как выполнить обратное преобразование целочисленных блоков в исходное сообщение в процессе дешифрования.

Дешифрование блоков с помощью функции getTextFromBlocks()

Функция getTextFromBlocks() решает задачу, противоположную той, которую решает функция getBlocksFromText(). Она имеет параметр blockInts, содержащий список целочисленных блоков, параметр messageLength, задающий длину сообщения, и параметр blockSize, определяющий размер блока, и возвращает строку, соответствующую данному списку блоков. Параметр messageLength нужен для того, чтобы функция могла обработать последний блок в тех случаях, когда он содержит менее blockSize символов. Этот процесс был описан в разделе “Преобразование блока в строку”.

52. def getTextFromBlocks(blockInts, messageLength, blockSize):
53. # Преобразует список целочисленных блоков в строку исходного
54. # сообщения. Необходимо задать длину исходного сообщения, чтобы
55. # корректно преобразовать последний блок.
56. message = []

Список message, создаваемый в строке 56, будет хранить все символы, получаемые в результате обработки списка целочисленных блоков blockInts.

В цикле for, который начинается в строке 57, мы проходим по всем целочисленным блокам, хранящимся в списке blockInts. В строках 58–65 вычисляются буквы, закодированные в текущем блоке.

57. for blockInt in blockInts:
58. blockMessage = []
59. for i in range(blockSize - 1, -1, -1):

Функция getTextFromBlocks() разбивает блок на blockSize целых чисел, каждое из которых соответствует индексу символа в символьном