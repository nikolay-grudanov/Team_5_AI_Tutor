---
source_image: page_175.png
page_number: 175
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.19
tokens: 7456
characters: 2016
timestamp: 2025-12-24T08:50:19.635738
finish_reason: stop
---

Проверка корректности результата и завершение программы

После того как мы зашифровали и дешифровали сообщение, нужно проверить, действительно ли обе функции отработали корректно. Для этого достаточно проверить, что дешифрованное сообщение совпадает с исходным.

27. # Если дешифрованный текст не совпадает с оригинальным,
28. # вывести сообщение об ошибке и завершиться
29. if message != decrypted:
30.     print('Mismatch with key %s and message %s.' %
            (key, message))
31.     print('Decrypted as: ' + decrypted)
32.     sys.exit()
33.
34. print('Transposition cipher test passed.')

В строке 29 проверяется, равны ли переменные message и decrypted. Если это не так, программа отобразит соответствующую информацию. В строках 30 и 31 выводятся значения key, message и decrypted в качестве обратной связи, чтобы можно было определить, где именно возникла проблема. Затем программа завершается.

Обычно выход из программы осуществляется по достижении конца файла, когда больше не остается строк кода, подлежащих выполнению. Но как только встречается вызов sys.exit(), работа программы сразу же завершается, и новые сообщения не тестируются. (Программа нуждается в исправлении, если хотя бы один из тестов завершился ошибкой!)

Но если значения переменных message и decrypted равны, то программа игнорирует блок кода if, в том числе и вызов sys.exit(). Программа продолжит выполнение цикла до тех пор, пока не исчерпает все тесты. По завершении цикла выполняется строка 34, которая, как вы уже знаете, находится вне цикла, запускаемого в строке 9, поскольку имеет другой отступ. В строке 34 выводится текст 'Transposition cipher test passed.', указывающий на успешное завершение тестирования.

Вызов функции main()

Как и в случае других программ, мы проверяем, импортируется ли файл как модуль или выполняется как основная программа.

37. # Если файл transpositionTest.py выполняется как программа
38. # (а не импортируется как модуль), вызвать функцию main()
39. if __name__ == '__main__':
40.     main()