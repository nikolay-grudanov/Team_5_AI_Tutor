---
source_image: page_214.png
page_number: 214
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 52.21
tokens: 7830
characters: 2571
timestamp: 2025-12-24T08:51:40.455263
finish_reason: stop
---

Вычисление процентной доли

Как только программе становятся известны процентные доли, которые следует использовать в качестве критериев, она должна вычислить реальные процентные доли для строки message. Например, строка 'Hello cat MOOSE fsdkl ewpin' содержит пять "слов", но только три из них являются реальными английскими словами. Чтобы вычислить процентную долю английских слов в этой строке, мы делим их количество на общее количество слов и умножаем результат на 100. Процентная доля английских слов в данной строке равна \(3 / 5 * 100\), что составляет 60%. Другие примеры вычисления процентных долей приведены в табл. 11.2.

Таблица 11.2. Вычисление процентной доли английских слов

<table>
  <tr>
    <th>Количество английских слов</th>
    <th>Общее количество слов</th>
    <th>Доля английских слов</th>
    <th>* 100</th>
    <th>=</th>
    <th>Процентная доля</th>
  </tr>
  <tr>
    <td>3</td>
    <td>5</td>
    <td>0,6</td>
    <td>* 100</td>
    <td>=</td>
    <td>60</td>
  </tr>
  <tr>
    <td>6</td>
    <td>10</td>
    <td>0,6</td>
    <td>* 100</td>
    <td>=</td>
    <td>60</td>
  </tr>
  <tr>
    <td>300</td>
    <td>500</td>
    <td>0,6</td>
    <td>* 100</td>
    <td>=</td>
    <td>60</td>
  </tr>
  <tr>
    <td>32</td>
    <td>87</td>
    <td>0,3678</td>
    <td>* 100</td>
    <td>=</td>
    <td>36,78</td>
  </tr>
  <tr>
    <td>87</td>
    <td>87</td>
    <td>1,0</td>
    <td>* 100</td>
    <td>=</td>
    <td>100</td>
  </tr>
  <tr>
    <td>0</td>
    <td>10</td>
    <td>0</td>
    <td>* 100</td>
    <td>=</td>
    <td>0</td>
  </tr>
</table>

Значение процентной доли всегда будет заключено в пределах от 0 (отсутствие английских слов) до 100 (все слова — английские). Наша функция isEnglish() будет рассматривать строку как состоящую из английских слов, если по крайней мере 20% слов включены в словарь и 85% символов являются буквами или пробелами. Это означает, что сообщение все равно будет считаться текстом, состоящим из английских слов, даже если файл словаря не совершенен или некоторые слова в сообщении имеют другое написание, чем то, которое зафиксировано в словаре.

В строке 51 процентная доля распознанных английских слов вычисляется путем передачи аргумента message функции getEnglishCount(), которая возвращает вещественное значение в интервале от 0.0 до 1.0.

51. wordsMatch = getEnglishCount(message) * 100 >= wordPercentage

Процентная доля получается умножением этого вещественного числа на 100. Если результат равен или превышает значение параметра wordPercentage, то в переменной wordsMatch сохраняется значение