---
source_image: page_473.png
page_number: 473
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.53
tokens: 7479
characters: 1993
timestamp: 2025-12-24T08:58:15.802032
finish_reason: stop
---

Строка, содержащаяся в переменной encryptedContent, записывается в файл посредством вызова метода write() в строке 125. Далее файловый объект fo закрывается (строка 126).

Наконец, содержимое переменной encryptedContent возвращается функцией encryptAndWriteToFile() в строке 128. Это делается для того, чтобы программа, вызвавшая данную функцию, могла, к примеру, вывести строку на экран.

Теперь, когда вы узнали, как функция encryptAndWriteToFile() шифрует строку сообщения и записывает результаты в файл, мы можем перейти к рассмотрению того, как функция readFromFileAndDecrypt() дешифрует зашифрованное сообщение.

Дешифрование содержимого файла

Как и функция encryptAndWriteToFile(), функция readFromFileAndDecrypt() имеет параметры, задающие имя файла зашифрованного сообщения и имя файла ключа. Убедитесь в том, что функции передается имя файла закрытого, а не открытого ключа.

131. def readFromFileAndDecrypt(messageFilename, keyFilename):
132.     # Считывает ключ из файла, считывает зашифрованное сообщение из входного файла и дешифрует его, возвращая дешифрованную строку
134.     keySize, n, d = readKeyFile(keyFilename)

Первым этапом процедуры дешифрования становится вызов функции readKeyFile() для считывания значений переменных keySize, n и d из файла ключа (аналогично тому, как это происходило в процессе шифрования сообщения).

Второй этап — чтение содержимого файла. В строке 138 файл, заданный в параметре messageFilename, открывается для чтения.

137.     # Считываем размер сообщения и зашифрованное сообщение из файла
138.     fo = open(messageFilename)
139.     content = fo.read()
140.     messageLength, blockSize, encryptedMessage = content.split('_')
141.     messageLength = int(messageLength)
142.     blockSize = int(blockSize)

Метод read() (строка 139) возвращает содержимое файла в виде одной строки, которую вы увидели бы, если бы открыли файл в текстовом редакторе, таком как Блокнот или TextEdit, скопировали все его содержимое и вставили в программу.