---
source_image: page_472.png
page_number: 472
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.79
tokens: 7486
characters: 2075
timestamp: 2025-12-24T08:58:15.433879
finish_reason: stop
---

Далее мы преобразуем зашифрованные блоки в строку, которую можно записать в файл. Все блоки объединяются в одну строку и разделяются запятыми. Использовать для этого инструкцию ','.'join(encryptedBlocks) напрямую нельзя, поскольку метод join() применим только к спискам со строковыми значениями. На данный момент список encryptedBlock содержит целые числа, следовательно, их необходимо преобразовать в строки.

117. # Преобразование больших целочисленных значений в единую строку
118. for i in range(len(encryptedBlocks)):
119.     encryptedBlocks[i] = str(encryptedBlocks[i])
120. encryptedContent = ','.'join(encryptedBlocks)

В цикле for, который начинается в строке 118, мы проходим по всем индексам списка encryptedBlocks, преобразуя целое число encryptedBlocks[i] в строку. По завершении цикла список encryptedBlocks будет содержать строки, а не целые числа.

Только после этого список строк, содержащихся в переменной encryptedBlocks, можно передать методу join(), который объединяет их в строку, используя запятые в качестве разделителей. Объединенная строка сохраняется в переменной encryptedContent (строка 120).

Кроме зашифрованных целочисленных блоков, в файл записываются также длина сообщения и размер блока.

122. # Запись зашифрованной строки в выходной файл
123. encryptedContent = '%s_%s_%s' % (len(message), blockSize, encryptedContent)

В строке 123 содержимое переменной encryptedContent преобразуется таким образом, чтобы она включала размер сообщения в виде целого числа (len(message)), за которым следуют символ подчеркивания, размер блока (blockSize), еще один символ подчеркивания и строка зашифрованных блоков (encryptedContent).

Последним этапом процесса шифрования становится запись содержимого в файл. В строке 124 вызывается функция open(), которой передается имя файла, хранящееся в параметре messageFilename. Учтите, что если файл с таким именем уже существует, то он будет перезаписан.

124. fo = open(messageFilename, 'w')
125. fo.write(encryptedContent)
126. fo.close()
127. # Возвращаем зашифрованную строку
128. return encryptedContent