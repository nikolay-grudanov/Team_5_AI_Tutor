---
source_image: page_331.png
page_number: 331
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.79
tokens: 7461
characters: 1843
timestamp: 2025-12-24T08:54:18.876707
finish_reason: stop
---

Операция деления с остатком в строке 48 справляет с обоими случаями "завертывания".

Зашифрованным (или дешифрованным) символом является буква LETTERS[num]. Но мы хотим, чтобы регистр полученного символа совпадал с регистром исходного символа.

50.    # Добавить зашифрованный/дешифрованный символ в конец
51.    if symbol.isupper():
52.        translated.append(LETTERS[num])
53.    elif symbol.islower():
54.        translated.append(LETTERS[num].lower())

Поэтому, если переменная symbol содержит букву в верхнем регистре, условие в строке 51 выполняется, и тогда в строке 52 символ LETTERS[num] присоединяется к списку translated, поскольку все символы в строке LETTERS уже переведены в верхний регистр.

Если же в переменной symbol хранится буква в нижнем регистре, то выполняется условие в строке 53, и тогда в строке 54 к списку translated присоединяется буква LETTERS[num], преобразованная ее в нижний регистр. Тем самым мы обеспечиваем согласование регистра букв в исходном и зашифрованном (дешифрованном) сообщениях.

После преобразования символа мы хотим убедиться в том, что на следующей итерации цикла for будет выбран очередной подключ. Для этого в строке 56 значение keyIndex увеличивается на единицу.

56.    keyIndex += 1   # перейти к следующей букве ключа
57.    if keyIndex == len(key):
58.        keyIndex = 0

Но если в данный момент уже задействован последний из подключей, то значение keyIndex станет равно длине ключа. Это условие проверяется в строке 57, и если оно соблюдается, то в строке 58 значение keyIndex сбрасывается в 0, чтобы выражение key[keyIndex] вновь указывало на первый подключ.

Выделение отступом инструкции else в строке 59 указывает на то, что она связана с инструкцией if в строке 42.

59.    else:
60.        # Присоединить символ без шифрования/дешифрования
61.        translated.append(symbol)