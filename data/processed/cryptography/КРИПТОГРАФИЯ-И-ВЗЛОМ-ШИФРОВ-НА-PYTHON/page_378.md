---
source_image: page_378.png
page_number: 378
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.48
tokens: 7931
characters: 2926
timestamp: 2025-12-24T08:55:50.635262
finish_reason: stop
---

строку 'PPQCAXQ', то на первой итерации (seqStart = 0) извлекаются первые три символа строки, и мы получаем подстроку 'PPQ'. Следующим значением seqStart будет 1, и мы извлекаем подстроку 'PQC'. Эти действия повторяются для всех последующих индексов, пока не будут извлечены последние три символа строки, для которых индекс начала среза определяется выражением len(message) - seqLen. В результате мы получаем последовательности, приведенные на рис. 20.2.

Цикл выполняется для всех индексов вплоть до len(message) - seqLen, а текущий индекс начала среза присваивается переменной seqStart. В строке 41 полученный срез записывается в переменную seq.

В строке 44 начинается еще один вложенный цикл for, в котором в строке сообщения ищутся повторные вхождения данного среза.

<table>
  <tr>
    <th>Индексы message</th>
    <th>0</th>
    <th>1</th>
    <th>2</th>
    <th>3</th>
    <th>4</th>
  </tr>
  <tr>
    <td>seqStart = 0</td>
    <td>P</td>
    <td>P</td>
    <td>P</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>seqStart = 1</td>
    <td>P</td>
    <td>P</td>
    <td>O</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>seqStart = 2</td>
    <td>P</td>
    <td>O</td>
    <td>C</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>seqStart = 3</td>
    <td>O</td>
    <td>C</td>
    <td>A</td>
    <td>X</td>
    <td></td>
  </tr>
  <tr>
    <td>seqStart = 4</td>
    <td>C</td>
    <td>A</td>
    <td>X</td>
    <td>X</td>
    <td>Q</td>
  </tr>
</table>

Рис. 20.2. Значения переменной seq в зависимости от значения seqStart

43. # Поиск этой последовательности в остальной части сообщения
44. for i in range(seqStart + seqLen, len(message) - seqLen):
45. if message[i:i + seqLen] == seq:

Переменная i поочередно принимает значения индексов всех возможных последовательностей длиной seqLen, содержащихся в строке message. Индексы изменяются в диапазоне от seqStart + seqLen (позиция сразу за концом текущей последовательности seq) и до len(message) - seqLen (последний индекс, при котором еще может быть обнаружена последовательность длиной seqLen). Например, если параметр message содержит строку 'PPQCAXQVEKGYBNKMAZUYBN', переменная seqStart равна 11, а переменная seqLen равна 3, то в строке 41 в переменную seq будет записано значение 'YBN', и в цикле for сообщение будет просматриваться начиная с индекса 14.

Выражение message[i:i + seqLen] в строке 45 возвращает подстроку, которая сравнивается с переменной seq, чтобы выяснить, не является ли она ее повторением. Если обнаружен повтор, то в строках 46–52 вычисляется интервал повторения, который добавляется в словарь seqSpacings. На первой итерации цикла переменная seq в строке 45 сравнивается с подстрокой 'КМА', на второй — с подстрокой 'МАЗ', затем — с подстрокой 'АЗУ' и т.д. Когда переменная i достигнет значения 19, в строке 45 обнаружится, что подстрока 'YBN' совпадает с переменной seq, и тогда будут выполнены строки с 46 по 52.