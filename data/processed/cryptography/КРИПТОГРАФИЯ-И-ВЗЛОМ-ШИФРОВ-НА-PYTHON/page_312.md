---
source_image: page_312.png
page_number: 312
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.73
tokens: 7551
characters: 2259
timestamp: 2025-12-24T08:53:46.559511
finish_reason: stop
---

выполнены все подобные замены. В нашем случае метод sub() просматривает строку сообщения в верхнем регистре и заменяет все небуквенные символы в ней пустыми строками (''). В результате возвращается строка, из которой удалены все знаки препинания и цифры, и эта строка разбивается на слова с помощью метода split().

Переменная cipherwordList, создаваемая в строке 115, будет содержать список шифрослов в верхнем регистре, ранее хранившихся в параметре message.

В строке 116 запускается цикл for, в котором переменная cipherword пробегает по всем строкам списка cipherwordList. В теле цикла создается пустой словарь, после чего запрашивается список слов-кандидатов для текущего шифрослова, буквы каждого слова-кандидата добавляются в словарь шифробукв и строится пересечение этого словаря со словарем intersectedMap.

116.    for cipherword in cipherwordList:
117.        # Получить новый дешифровальный словарь для каждого шифрослова
118.        candidateMap = getBlankCipherletterMapping()
119.
120.        wordPattern = makeWordPatterns.getWordPattern(cipherword)
121.        if wordPattern not in wordPatterns.allPatterns:
122.            continue  # этого слова нет в словаре, продолжаем
123.
124.        # Добавить буквы каждого слова-кандидата в словарь
125.        for candidate in wordPatterns.allPatterns[wordPattern]:
126.            addLettersToMapping(candidateMap, cipherword, candidate)
127.
128.        # Найти пересечение нового словаря с существующим пересечением
129.        intersectedMap = intersectMappings(intersectedMap,
130.            candidateMap)

В строке 118 с помощью функции getBlankCipherletterMapping() создается новый пустой словарь шифробукв, который сохраняется в переменной candidateMap.

Чтобы найти слова-кандидаты для текущего шифрослова, в строке 120 мы вызываем функцию getWordPattern() из модуля makeWordPatterns. В некоторых случаях шифрословом может оказаться имя или редко употребляемое слово, отсутствующее в нашем английском словаре, и тогда вполне вероятно, что его шаблон тоже будет отсутствовать в файле wordPatterns.py. Если шаблон шифрослова не встречается среди ключей словаря wordPatterns.allPatterns, значит, слово исходного текста отсутствует в файле словаря. В таком случае дешифровальный словарь для