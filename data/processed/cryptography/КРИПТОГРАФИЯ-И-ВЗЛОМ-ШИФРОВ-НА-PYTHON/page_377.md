---
source_image: page_377.png
page_number: 377
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.98
tokens: 7581
characters: 2266
timestamp: 2025-12-24T08:55:36.884511
finish_reason: stop
---

28. def findRepeatSequencesSpacings(message):
    --опущено--
33. # Используем регулярное выражение для удаления небуквенных символов
34. message = NONLETTERS_PATTERN.sub('', message.upper())
35.
36. # Получение списка последовательностей, найденных в сообщении
37. seqSpacings = {} # ключи - последовательности, значения - списки интервалов повторения

В строке 34 сообщение преобразуется в верхний регистр, и с помощью метода sub() из него удаляются любые небуквенные символы.

Словарь seqSpacings, создаваемый в строке 37, предназначен для хранения повторяющихся последовательностей в качестве ключей. Значениями словаря являются списки целочисленных значений, соответствующих количеству букв между повторными вхождениями данной последовательности. Например, если в параметре message будет передана наша тестовая строка 'PPQCAHAXQV...', то функция findRepeatSequenceSpacings() вернет словарь {'VRA': [8, 24, 32], 'AZU': [48], 'YBN': [8]}.

В цикле for, который начинается в строке 38, перебираются все последовательности, встречающиеся в строке, и выявляются повторы.

38. for seqLen in range(3, 6):
39.     for seqStart in range(len(message) - seqLen):
40.         # Получение очередной последовательности
41.         seq = message[seqStart:seqStart + seqLen]

На первой итерации цикла ищутся повторяющиеся последовательности, которые содержат ровно три буквы. На следующей итерации ищутся последовательности из четырех букв и т.д. Изменяя границы диапазона (3, 6) в строке 38, вы сможете управлять тем, последовательности какой длины будет проверять программа. В то же время в большинстве шифротекстов вполне можно ограничиться поиском повторяющихся последовательностей длиной три, четыре и пять букв. Дело в том, что, с одной стороны, такие последовательности достаточно длинные для того, чтобы не считать повторения случайными, а с другой стороны — достаточно короткие, что увеличивает вероятность их повторений. Текущая длина последовательности, проверяемая в цикле for, хранится в переменной seqLen.

Во вложенном цикле for, который начинается в строке 39, с помощью срезов из строки message извлекаются все возможные подстроки длиной seqLen. Начало среза хранится в переменной seqStart. Например, если переменная seqLen равна 3, а параметр message содержит