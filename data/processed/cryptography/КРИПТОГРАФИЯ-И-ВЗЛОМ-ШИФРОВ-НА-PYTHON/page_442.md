---
source_image: page_442.png
page_number: 442
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.45
tokens: 7473
characters: 1977
timestamp: 2025-12-24T08:57:16.255107
finish_reason: stop
---

В строке 42 функция generateKey() возвращает кортеж, содержащий значения publicKey и privateKey.

Сгенерировав открытый и закрытый ключи, мы должны сохранить их в файлах, чтобы программа шифрования с открытым ключом могла впоследствии использовать их для шифрования и дешифрования сообщений. Польза от сохранения ключей в файлах состоит в том, что оба целочисленных значения, образующих каждый из ключей, насчитывают сотни цифр, поэтому их невозможно запомнить и слишком неудобно записывать на бумаге.

Создание файлов ключей с помощью функции makeKeyFiles()

Функция makeKeyFiles() сохраняет ключи в файлах, получая префикс имени файла и длину ключа в качестве параметров.

45. def makeKeyFiles(name, keySize):
46.     # Создает два файла, 'x_pubkey.txt' и 'x_privkey.txt' (где
47.     # x - значение параметра name), записывая в них целые числа
48.     # keySize, n и e, разделенные запятыми.

Данная функция создает два файла с именами <name>_pubkey.txt и <name>_privkey.txt, в которых сохраняются открытый и закрытый ключи соответственно. Передаваемый функции параметр name определяет часть <name> имен файлов.

Чтобы избежать случайного удаления файлов ключей вследствие повторного запуска программы, в строке 51 проверяется существование файлов открытого или закрытого ключей с заданными именами. Если такие файлы существуют, то программа завершает работу с выводом предупреждающего сообщения.

50.     # Проверка, предотвращающая перезапись старых файлов ключей
51.     if os.path.exists('%s_pubkey.txt' % (name)) or
52.         os.path.exists('%s_privkey.txt' % (name)):
53.             sys.exit('WARNING: The file %s_pubkey.txt or %s_privkey.txt already exists! Use a different name or delete these files and rerun this program.' % (name, name))

В случае успешного прохождения проверки в строке 54 вызывается функция generateKey(), которой передается параметр keySize, задающий длину открытого и закрытого ключей.

54.     publicKey, privateKey = generateKey(keySize)