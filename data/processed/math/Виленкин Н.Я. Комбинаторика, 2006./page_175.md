---
source_image: page_175.png
page_number: 175
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.06
tokens: 6364
characters: 2174
timestamp: 2025-12-24T07:45:27.347382
finish_reason: stop
---

вправо \( m - q - 1 \), число неблагоприятных перестановок будет \( P(k + q + 1, m - q - 1) \), а число благоприятных равно

\[
C_{m+k}^m - C_{m+k}^{m-q-1}.
\] (6)

Если при этом \( m \leq q \), то очередь наверняка пройдет без задержки — полтинников, которые были в кассе с самого начала, хватит, чтобы удовлетворить всех владельцев рублей. Если же \( m > k + q \), то очередь наверняка задержится — общего числа полтинников в кассе и в очереди не хватит, чтобы дать сдачу всем владельцам рублей.

В процессе прохождения очереди могли быть моменты, когда в кассе не оставалось ни одного полтинника, и очередь не останавливалась лишь потому, что покупавший в этот момент билет был как раз обладателем полтинника. Подсчитаем число расстановок, при которых ни разу не будет такого критического момента. Иными словами, решим такую задачу.

Сколькими способами можно расставить обладателей \( m \) рублей и \( k \) полтинников так, чтобы в любой момент (исключая, быть может, начальный и конечный) в кассе был хотя бы один полтинник?

Эта задача тоже решается методом подсчета ломанных. Но теперь надо искать ломаные, пересекающие прямую \( x = 0 \) лишь в начале координат и (при \( m = k \)) в точке \( A(0; 2k) \). Поскольку из условия задачи ясно, что впереди должны стоять два обладателя полтинника, то первого из них можно отвести в сторону, и тогда получим решенную выше задачу, но для случая, когда на \( m \) рублей приходится \( k - 1 \) полтинник. Поэтому число благоприятных расстановок при \( m < k \) равно

\[
C_{m+k-1}^m - C_{m+k-1}^{m-1} = \frac{k - m}{k} C_{m+k-1}^m.
\]

Если же \( m = k \), то надо отвести в сторону и замыкающего очередь обладателя рубля (проверьте сами, что в этом случае в конце не может находиться обладатель полтинника). Мы получим ответ \( \frac{1}{k} C_{2k-2}^{k-1} \).

Важное следствие. Обозначим через \( T_n \) число \( \frac{1}{n+1} C_{2n}^n \), показывающее, во скольких случаях проходит без задержки очередь из обладателей \( n \) рублей и \( n \) полтинников. Мы докажем сейчас, что эти числа удовлетворяют рекуррентному соотношению

\[
T_n = T_0 T_{n-1} + T_1 T_{n-2} + \ldots + T_{s-1} T_{n-s} + \ldots + T_{n-1} T_0.
\] (7)