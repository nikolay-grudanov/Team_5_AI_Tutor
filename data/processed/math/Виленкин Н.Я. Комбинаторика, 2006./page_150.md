---
source_image: page_150.png
page_number: 150
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.77
tokens: 6371
characters: 2123
timestamp: 2025-12-24T07:44:48.633142
finish_reason: stop
---

места Это можно сделать \( D_{n-r} \) способами. По правилу произведения получаем (3).

Разобьем все перестановки на классы в зависимости от того, сколько элементов остаются неподвижными при данной перестановке. Так как общее число перестановок равно \( n! \), то получаем следующее тождество:

\[
n! = \sum_{r=0}^{n} D_{n,r} = \sum_{r=0}^{n} C_n^r D_{n-r}.
\] (4)

Другое тождество, связывающее \( n! \) и числа \( D_{n,r} \), получается следующим образом. Возьмем все \( n! \) перестановок элементов \( a_1, ..., a_n \) и подсчитаем, сколько всего чисел во всех этих перестановках осталось на своих местах. Этот расчет можно сделать двумя способами. Во-первых, заметим, что если, например, элемент \( a_1 \) находится на своем месте, то остальные элементы можно переставлять \( P_{n-1} = (n-1)! \) способами. Поэтому в \( (n-1)! \) перестановках элемент \( a_1 \) находится на первом месте. Точно так же в \( (n-1)! \) перестановках элемент \( a_2 \) находится на втором месте и т. д. Всего получаем \( n(n-1)! = n! \) элементов, находящихся на своих местах. Но число этих элементов можно подсчитать и иначе. Число перестановок \( r \)-го класса, т. е. таких, что в них \( r \) элементов находится на своих местах, равно \( D_{n,r} \). Каждая такая перестановка дает нам \( r \) неподвижных элементов. Поэтому общее число неподвижных элементов в перестановках \( r \)-го класса равно \( r D_{n,r} \) и всего получаем \( \sum_{r=0}^{n} r D_{n,r} \) неподвижных элементов. Тем самым доказано тождество

\[
n! = \sum_{r=0}^{n} r D_{n,r} = \sum_{r=0}^{n} r C_n^r D_{n-r}.
\] (5)

Формула включений и исключений позволяет решить и такую задачу: найти число перестановок из \( n \) элементов, при которых данные \( r \) элементов смещены (а остальные могут быть как смещены, так и оставаться на старых местах). Ответ дается формулой

\[
n! - C_r^1 (n-1)! + C_r^2 (n-2)! - ... + (-1)^r (n-r)!.
\] (6)

71. Субфакториалы

Некоторые авторы называют числа \( D_n \) субфакториалами. Эти числа имеют много общих свойств с обычными факториалами. Например, для факториалов выполняется равенство

\[
n! = (n-1)[(n-1)! + (n-2)!].
\] (7)