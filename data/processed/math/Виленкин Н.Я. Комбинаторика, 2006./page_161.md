---
source_image: page_161.png
page_number: 161
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.89
tokens: 6520
characters: 2101
timestamp: 2025-12-24T07:45:10.076859
finish_reason: stop
---

Мы получим, что

\[
E_n = n! \left[ 1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^{n-1}}{(n-1)!} + \frac{(-1)^n}{n!} \right] +
\]
\[
+ (n-1)! \left[ 1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^{n-2}}{(n-2)!} + \frac{(-1)^{n-1}}{(n-1)!} \right].
\]

В обе скобки мы добавили по одному (последнему) члену; очевидно, что эти члены взаимно уничтожаются, так как после раскрытия скобок превращаются соответственно в \((-1)^n\) и \((-1)^{n-1}\). Но первая скобка — это не что иное, как \(D_n\), а вторая — не что иное, как \(D_{n-1}\). Поэтому

\[
E_n = D_n + D_{n-1}.
\] (18)

Итак, число перестановок из \(n\) чисел 1, 2, 3, ..., \(n\), в которые не входит ни одна из пар (1; 2), (2; 3), ..., (\(n-1\); \(n\)), равно \(D_n + D_{n-1}\).

Совершенно так же доказывается, что количество перестановок из \(n\) элементов, в которые не входят заданные \(r \leq n-1\) пар, равно

\[
P_n - C_r^1 P_{n-1} + C_r^2 P_{n-2} - ... + (-1)^r C_r^r P_{n-r}.
\] (19)

Иной ответ получится, если число запрещенных пар больше, чем \(n-1\). Пусть, например, кроме пар (1; 2), (2; 3), ..., (\(n-1\); \(n\)), в перестановки не должна входить и пара (\(n\); 1). Рассуждая точно так же, как и выше, получим, что ответ выражается формулой

\[
F_n = P_n - C_n^1 P_{n-1} + C_n^2 P_{n-2} - ... + (-1)^k C_n^k P_{n-k} + ... + (-1)^{n-1} C_n^{n-1} P_1 =
\]
\[
= n! \left[ 1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^{n-1}}{(n-1)!} \right] = n D_{n-1}.
\] (20)

В самом деле, в этом случае число запрещенных пар равно \(n\), а случаи, когда в перестановку входят все \(n\) пар, быть не может. Ведь, например, если в перестановку входят пары (1; 2), (2; 3), ..., (\(n-1\); \(n\)), то первым элементом является 1, а последним \(n\), и поэтому пара (\(n\); 1) в перестановку не входит. Поэтому последний член в формуле (20) равен \((-1)^{n-1} C_n^{n-1} P_1\), а не \((-1)^n C_n^n P_0 = (-1)^n\).

77. Катание на карусели

На карусели катаются \(n\) ребят. Они решили пересесть — так, чтобы у каждого из них сменился впереди сидящий. Сколькими способами они могут это сделать?