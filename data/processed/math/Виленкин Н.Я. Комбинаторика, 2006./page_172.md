---
source_image: page_172.png
page_number: 172
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.99
tokens: 6207
characters: 1782
timestamp: 2025-12-24T07:45:20.232504
finish_reason: stop
---

20 рублей и 20 полтинников равно \( P(20, 20) = \frac{(40)!}{20!20!} \), а это число больше ста миллиардов.

Итак, нам надо решить следующую комбинаторную задачу.
Найти число перестановок с повторениями из \( m \) рублей и \( k \) полтинников, таких что для любого \( r, 1 \leq r \leq m + k \), число полтинников среди первых \( r \) элементов перестановки не меньше числа рублей.

Ясно, что искомое число отлично от нуля лишь при условии, что \( m \leq k \) — иначе полтинников заведомо не хватит, чтобы дать сдачу всем владельцам рублей.

Как и во многих комбинаторных задачах, здесь полезно использовать геометрическую иллюстрацию. Возьмем координатную сетку и будем изображать каждую перестановку рублей и полтинников ломаной, соединяющей узлы сетки по следующим правилам: ломаная начинается в начале координат \( O(0; 0) \); каждому полтиннику соответствует звено ломаной, идущее вверх направо, а каждому рублю — звено, идущее вверх налево (звено соединяет противоположные точки одного из квадратов координатной сетки). Например, последовательности пппррпппп соответствует ломаная, изображенная на рис. 41.

Ясно, что если в последовательности имеется \( m \) рублей и \( k \) полтинников, то концом ломаной окажется точка \( A(k - m; k + m) \). Число ломанных, ведущих из точки \( O \) в точку \( A \), равно числу перестановок с повторениями из \( m \) рублей и \( k \) полтинников, т. е. \( P(m, k) \). Выясним теперь, чем характеризуются ломанные, удовлетворяющие условию задачи. Если очередь в какой-то момент времени застопорилась, то это значит, что число рублей к этому моменту оказалось на 1 больше числа полтинников. Но тогда точка, движущаяся по ломаной, сделает влево на один шаг больше, чем вправо, и окажется на прямой \( x = -1 \) (для ломаной на рис. 41 на этой