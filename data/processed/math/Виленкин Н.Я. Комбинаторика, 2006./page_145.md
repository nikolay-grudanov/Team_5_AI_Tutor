---
source_image: page_145.png
page_number: 145
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.74
tokens: 6303
characters: 1939
timestamp: 2025-12-24T07:44:37.478490
finish_reason: stop
---

Глава V

СМЕЩЕНИЯ, СУБФАКТОРИАЛЫ И ЗАПРЕТНЫЕ ЗОНЫ

68. Девушка спешит на свидание

Когда-то на экранах страны шла кинокомедия под таким названием. В ней рассказывалось о злоключениях двух курортников, забывших дома паспорта. Им выслали паспорта по почте, но девушка из почтового отделения спешила на свидание и в спешке перепутала конверты — паспорт одного попал в конверт с адресом другого, а паспорт другого — в конверт с адресом первого. Хорошо, что ей не пришлось одновременно обрабатывать 5 конвертов — тогда не двоим, а пятерым пришлось бы ночевать на жестких скамейках курортного парка...

Впрочем, это не совсем так: ведь случайно она могла бы положить некоторые из паспортов в нужные конверты. Возникает вопрос, во скольких же случаях произошла бы полная путаница, т. е. никто не получил бы своего паспорта.

Так как адресатов и соответственно их паспорта можно занумеровать числами от 1 до 5, то распределение паспортов можно задать такой схемой:

\[
\begin{array}{ccccc}
a_1 & a_2 & a_3 & a_4 & a_5 \\
\downarrow & \downarrow & \downarrow & \downarrow & \downarrow \\
1 & 2 & 3 & 4 & 5
\end{array}
\]

где \( a_1, a_2, a_3, a_4, a_5 \) — те же числа 1, 2, 3, 4, 5, но взятые в ином порядке.

Эта схема означает, что первый человек получает паспорт человека с номером \( a_1 \), второй — паспорт \( a_2 \) и т. д. Поскольку нижняя строка во всех схемах одна и та же, ее можно опустить, а тогда каждый способ распределения паспортов окажется задан некоторой перестановкой \( (a_1, a_2, a_3, a_4, a_5) \) чисел 1, 2, 3, 4, 5. Если, например, второй человек получил свой паспорт, то \( a_2 = 2 \), т. е. число 2 в этой перестановке стоит на своем месте.

Теперь задачу можно сформулировать в общем виде так: найти число перестановок \( n \) элементов, при которых ни один из элементов не стоит на своем месте. Такие перестановки называют смещениями, а их число обозначают \( D_n \).

Решение проводится с помощью формулы включений и