---
source_image: page_164.png
page_number: 164
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.71
tokens: 6563
characters: 2466
timestamp: 2025-12-24T07:45:17.703154
finish_reason: stop
---

N(a_1 a_2 ... a_k) = 2^{k+1} \cdot n \cdot (2n - k - 1)!. Мы хотим найти, во скольких случаях ни одна пара врагов не окажется соседями, т. е. вычислить \( N(\overline{a}_1 \overline{a}_2 ... \overline{a}_n) \). Принимая во внимание, что \( k \) пар можно выбрать \( C_n^k \) способами, получаем по формуле включений и исключений, что

\[
A_n = N(\overline{a}_1 \overline{a}_2 ... \overline{a}_n) = 2n \left[ (2n - 1)! - 2C_n^1 (2n - 2)! + 2^2 C_n^2 (2n - 3)! - \right.
\]
\[
\left. - ... + (-1)^k 2^k C_n^k (2n - k - 1)! + ... + (-1)^n 2^n (n - 1)! \right].
\]

При \( n = 2 \) получаем \( A_2 = 4 \cdot 2 = 8 \). Здесь множитель 4 соответствует возможности повернуть всю рассадку, т. е. произвольно выбрать место одного рыцаря (скажем, самого старшего), напротив него должен сидеть враждующий с ним рыцарь, а по правую и по левую руку от него — рыцари из другой враждующей пары, их можно посадить 2 симметричными способами. Так что с точностью до поворотов и симметрии рассадка рыцарей единственна.

При \( n = 3 \) получаем \( A_3 = 6 \cdot 32 = 192 \). Здесь множитель 6 — повороты, 2 — симметрия, остается 16 существенно различных способов рассадить рыцарей.

При \( n = 6 \) получаем \( A_6 = 12 \cdot 12\ 771\ 840 \).

Задачи

1. Надо отгадать, какие пять монет держит в руке партнер. Выбор монет такой: 1, 2, 3, 5, 10, 15, 20, 50 копеек, 1 рубль. Сколько может быть дано неверных ответов?
   А если все монеты в руке различного достоинства?
2. Сколькими способами можно посадить рядом 3 англичан, 3 французов и 3 турок так, чтобы
   а) никакие три соотечественника не сидели рядом;
   б) никакие два соотечественника не сидели рядом?
3. Сколькими способами можно посадить за один круглый стол 3 англичан, 3 французов и 3 турок так, чтобы никакие два соотечественника не сидели рядом?
4. Сколькими способами можно расставить в ряд 6 англичан, 7 французов и 10 турок так, чтобы каждый англичанин стоял между французом и турком, но никакие француз и турок не стояли рядом? Решите ту же задачу для 5 англичан, 7 французов и 10 турок.
5. а) Сколькими способами можно построить в ряд \( n \) супружеских пар так, чтобы ни одна пара не стояла рядом?
   б) Даны \( n \) наборов, в каждый из которых входит \( q \) одинаковых элементов, причем элементы различных наборов различны. Во скольких перестановках этих \( nq \) элементов нет ни одного набора, все элементы которого идут подряд?
   в) Решите ту же задачу при условии, что элементы располагаются по окружности.