---
source_image: page_272.png
page_number: 272
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.07
tokens: 6506
characters: 2367
timestamp: 2025-12-24T07:47:57.951352
finish_reason: stop
---

Глава X

ВОЗМОЖНОЕ И НЕВОЗМОЖНОЕ В КОМБИНАТОРИКЕ

В предыдущих главах мы рассмотрели ряд типовых комбинаторных задач. Теперь расскажем еще о некоторых задачах, в которых главный вопрос — разрешима эта задача или нет.

128. Магические квадраты

Магическим квадратом называется квадратная таблица натуральных чисел с одинаковыми суммами по каждой строке, столбце и диагонали. Чаще всего рассматривают таблицу n×n, в которой размещены числа от 1 до \( n^2 \). Подобное расположение чисел вызывало интерес с древнейших времен.

Попробуем найти магический квадрат 3×3 комбинаторными методами, т. е. решить следующую задачу.
Расположить числа 1, 2, 3, 4, 5, 6, 7, 8, 9 в виде квадрата так, чтобы суммы чисел по каждому столбцу, строке и диагоналям были одинаковы.

Методом прямого перебора решить эту задачу без компьютера немыслимо — 9 чисел можно расположить в виде квадрата 362880 способами. Поэтому проведем математический анализ задачи. Выясним сначала, какой должна быть искомая сумма. Так как \( 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 45 \), то в каждой из 3 строк сумма чисел должна равняться 15. Это значительно уменьшает необходимый перебор — выбрать 3 слагаемых из данных чисел так, чтобы их сумма равнялась 15, можно лишь 8 способами: \( 9 + 5 + 1, 9 + 4 + 2, 8 + 6 + 1, 8 + 5 + 2, 8 + 4 + 3, 7 + 6 + 2, 7 + 5 + 3, 6 + 5 + 4 \). А число строк, столбцов и диагоналей в квадрате тоже равно 8. Значит, каждая из написанных комбинаций должна ровно один раз войти в искомый квадрат. Далее замечаем, что только число 5 входит в эти тройки 4 раза. Поэтому оно и должно стоять в центре таблицы — на пересечении центральных строки, столбца и двух диагоналей. Числа 8, 2, 6 и 4, входящие в тройки по 3 раза, должны занять углы — они стоят на пересечении строки, столбца и диагонали. Оставшиеся числа 1, 3, 7 и 9 занимают места сверху, снизу, слева и справа от центра. Диагональные тройки (8, 5, 2) и (6, 5, 4) можно расположить 8 различными способами (у нас 2 диагонали, на каждой из которых можно еще переставлять крайние элементы). После выбора положения чисел 8, 2, 6, 4 положение остальных чисел однозначно определено (рис. 70). Мы не только нашли один магический квадрат 3-го порядка но и описали все такие квадраты из чисел 1, 2, 3, 4, 5, 6, 7, 8, 9.

Эта задача, разумеется, очень проста. Гораздо труднее найти все магические квадраты 4-го порядка. Один из магических