---
source_image: page_151.png
page_number: 151
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.28
tokens: 6450
characters: 2146
timestamp: 2025-12-24T07:44:52.903780
finish_reason: stop
---

В самом деле,

\[(n - 1)[(n - 1)! + (n - 2)!] = (n - 1)(n - 2)!(n - 1 + 1) = n!.\]

Покажем, что это же равенство верно и для субфакториалов \(D_n\), т. е., что

\[
D_n = (n - 1)(D_{n-1} + D_{n-2}).
\] (8)

Для этого заменим \(D_{n-1}\) и \(D_{n-2}\) их разложениями по формуле (2). Мы получим, отделяя в выражении \(D_{n-1}\) последнее слагаемое, что

\[(n - 1)(D_{n-1} + D_{n-2}) = (n - 1)[(n - 1)! + (n - 2)!] \times \]
\[\times \left[1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^{n-2}}{(n - 2)!}\right] + (-1)^{n-1}(n - 1).\]

Но по формуле (7) \((n - 1)[(n - 1)! + (n - 2)!] = n!\). Кроме того,

\[(-1)^{n-1}(n - 1) = n! \left[\frac{(-1)^{n-1}}{(n - 1)!} + \frac{(-1)^n}{n!}\right].\]

Поэтому

\[(n - 1)(D_{n-1} + D_{n-2}) = \]
\[= n! \left[1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + ... + \frac{(-1)^{n-2}}{(n - 2)!} + \frac{(-1)^{n-1}}{(n - 1)!} + \frac{(-1)^n}{n!}\right] = D_n.\]

Доказанное соотношение (8) можно, следуя Эйлеру, вывести с помощью чисто комбинаторных рассуждений. Рассмотрим все перестановки, в которых все элементы смещены. Первое место в таких перестановках может занять любой элемент, кроме первого. Так как число оставшихся элементов равно \(n - 1\), то \(D_n\) перестановок разбивается на \(n - 1\) групп в зависимости от того, какой элемент занял первое место. Ясно, что во всех группах будет поровну элементов!

Сосчитаем, сколько элементов в одной из этих групп, скажем в той, где первое место занял второй элемент. Эта группа разбивается на две части: те, в которых первый элемент стоит на втором месте, и все остальные. Если первый элемент занял второе место (а второй, как мы помним, — первое место), то оставшиеся \(n - 2\) элементов можно переставлять любым образом, лишь бы ни один из них не занял своего места. Это можно сделать \(D_{n-2}\) способами. Значит, первая часть состоит из \(D_{n-2}\) перестановок.

Покажем, что вторая часть состоит из \(D_{n-1}\) перестановок. В самом деле, во вторую часть войдут все перестановки, в которых первый элемент не стоит на втором месте, а остальные элементы не находятся на своих местах. Но тогда можно считать второе место «законным»