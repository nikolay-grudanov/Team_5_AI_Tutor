---
source_image: page_539.png
page_number: 539
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 68.67
tokens: 11910
characters: 2834
timestamp: 2025-12-24T06:46:07.270835
finish_reason: stop
---

Глава 26 Кратчайшие пути для всех пар вершин

произведение

\[
\lambda(p) = \lambda(v_1, v_2) \odot \lambda(v_2, v_3) \odot \cdots \odot \lambda(v_{k-1}, v_k).
\]

Единичный элемент \( \overline{1} \) для умножения будет меткой пустого пути (длины 0). Если путь \( p \) не является путём в графе (то есть при некотором \( i \) пара \( (v_i, v_{i+1}) \) не является ребром), то в выражении для \( \lambda(p) \) один из множителей и потому всё произведение (см. пункт 2 определения замкнутого полукольца) равны \( \overline{0} \).

Мы будем иллюстрировать применение замкнутых полуколец на примере задачи о кратчайших путях (для случая неотрицательных весов). В качестве \( S \) возьмём множество \( S = \mathbb{R}^{>0} \cup \{\infty\} \) (множество неотрицательных вещественных чисел с добавленной (плюс) бесконечностью). Тогда веса всех рёбер будут элементами \( S \). Операцией "умножения" \( \odot \) будет обычное сложение; чтобы не запутаться, отныне мы будем брать в кавычки слова "произведение", "сумма" и т.п., если они относятся к операциям в полукольце. Тогда "произведением" меток на рёбрах вдоль пути будет сумма весов рёбер, то есть вес пути. "Единицей" полукольца будет нейтральный элемент относительно сложения, то есть 0: можно написать \( \overline{1} = 0 \). Метка пустого пути (обозначим его \( \varepsilon \)) будет равна нулю: \( \lambda(\varepsilon) = w(\varepsilon) = 0 = \overline{1} \).

Возвращаясь к общей ситуации, определим соединение, или конкатенацию (concatenation) двух путей \( p_1 = \langle v_1, v_2, \ldots, v_k \rangle \) и \( p_2 = \langle v_k, v_{k+1}, \ldots, v_l \rangle \) как путь

\[
p_1 \circ p_2 = \langle v_1, v_2, \ldots, v_k, v_{k+1}, \ldots, v_l \rangle,
\]

(соединение имеет смысл, если конец первого пути совпадает с началом второго). Ассоциативность "умножения" гарантирует нам, что метка соединения путей равна "произведению" их меток:

\[
\begin{align*}
\lambda(p_1 \circ p_2) &= \lambda(v_1, v_2) \odot \lambda(v_2, v_3) \odot \cdots \odot \lambda(v_{k-1}, v_k) \odot \\
&\quad \lambda(v_k, v_{k+1}) \odot \lambda(v_{k+1}, v_{k+2}) \odot \cdots \odot \lambda(v_{l-1}, v_l) \\
&= (\lambda(v_1, v_2) \odot \lambda(v_2, v_3) \odot \cdots \odot \lambda(v_{k-1}, v_k)) \odot \\
&\quad (\lambda(v_k, v_{k+1}) \odot \lambda(v_{k+1}, v_{k+2}) \odot \cdots \odot \lambda(v_{l-1}, v_l)) \\
&= \lambda(p_1) \odot \lambda(p_2)
\end{align*}
\]

Как мы увидим, различные задачи о путях могут рассматриваться как частные случаи такой общей задачи. Дано замкнутое полукольцо и граф с метками на рёрах; найти (для всех пар вершин \( i, j \in V \)) суммы меток по всем возможным путям из \( i \) в \( j \):

\[
l_{ij} = \bigotimes_{i \xrightarrow{p} j} \lambda(p).
\]

Эта "сумма" может быть бесконечной (путей из \( i \) в \( j \) может быть бесконечно много). При её вычислении можно включать и