---
source_image: page_150.png
page_number: 150
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 60.85
tokens: 11467
characters: 1868
timestamp: 2025-12-24T06:27:19.487176
finish_reason: stop
---

Рисунок 8.1 Работа процедуры Partition. Незакрашенные элементы относятся к уже сформированным кускам, закрашенные ещё не распределены.
(а) Начальное состояние массива, начальный и конечный куски пусты. Элемент \( x = A[p] = 5 \) используется в качестве граничного. (б) Результат первого прохода цикла while (строки 4–8). (в) Элементы \( A[i] \) и \( A[j] \) меняются местами (строка 10). (г) Результат второго прохода цикла while. (д) Результат третьего (последнего) прохода цикла while. Поскольку \( i \geq j \), процедура останавливается и возвращает значение \( q = j \). Элементы слева от \( A[j] \) (включая сам этот элемент) не больше, чем \( x = 5 \), а элементы справа от \( A[j] \) не меньше, чем \( x = 5 \).

части. Процедура возвращает значение \( j \).

Хотя идея процедуры очень проста, сам алгоритм содержит ряд тонких моментов. Например, не очевидно, что индексы \( i \) и \( j \) не выходят за границы промежутка \([p..r]\) в процессе работы. Другой пример: важно, что в качестве граничного значения выбирается \( A[p] \), а не, скажем, \( A[r] \). В последнем случае может оказаться, что \( A[r] \) — самый большой элемент массива, и в конце выполнения процедуры будет \( i = j = r \), так что возвращать \( q = j \) будет нельзя — нарушится требование \( q < r \), и процедура Quicksort зациклится. Правильность процедуры Partition составляет предмет задачи 8-1.

Время работы процедуры Partition составляет \( \Theta(n) \), где \( n = r - p + 1 \) (см. упр. 8.1-3).

Упражнения

8.1-1 Покажите, следуя образцу рис. 8.1, как работает процедура Partition для массива \( A = \langle 13, 19, 9, 5, 12, 8, 7, 4, 11, 2, 6, 21 \rangle \).

8.1-2 Пусть все элементы массива \( A[p..r] \) равны. Какое значение вернёт процедура Partition?

8.1-3 Приведите простое соображение, объясняющее, почему время работы процедуры Partition составляет \( \Theta(n) \).