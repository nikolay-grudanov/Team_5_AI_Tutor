---
source_image: page_358.png
page_number: 358
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 60.47
tokens: 11512
characters: 2180
timestamp: 2025-12-24T06:37:23.617780
finish_reason: stop
---

18.2-3 Добавим к системе операций с двоичным счётчиком операцию RESET (очистить все биты). Реализуйте счетчик на базе вектора битов таким образом, чтобы стоимость последовательности n операций INCREMENT и RESET, применённых к счётчику, в котором первоначально находился нуль, была равна O(n), причём константа не должна зависеть от k — числа битов в счётчике. (Указание: храните номер старшего ненулевого бита).

18.3 Метод потенциалов

Метод потенциалов (potential method) является обобщением метода предоплаты: здесь резерв не распределяется между отдельными элементами структуры данных (например, отдельными битами двоичного счетчика), а является функцией состояния структуры данных в целом. Эта функция называется "потенциальной энергией", или "потенциалом".

Общая схема метода потенциалов такова. Пусть над структурой данных предстоит произвести n операций, и пусть D_i — состояние структуры данных после i-й операции (в частности, D_0 — исходное состояние). Потенциал (potential) представляет собой функцию Ф из множества возможных состояний структуры данных во множество действительных чисел; эта функция называется ещё потенциальной функцией (potential function). Пусть c_i — реальная стоимость i-й операции. Учетной стоимостью (amortized cost) i-й операции объявим число

\[
\hat{c}_i = c_i + \Phi(D_i) - \Phi(D_{i-1}),
\]

т.е. сумму реальной стоимости операции плюс приращение потенциала в результате выполнения этой операции. Тогда суммарная учетная стоимость всех операций равна

\[
\sum_{i=1}^n \hat{c}_i = \sum_{i=1}^n c_i + \Phi(D_n) - \Phi(D_0).
\]

Если нам удалось придумать функцию Ф, для которой \( \Phi(D_n) \geq \Phi(D_0) \), то суммарная учетная стоимость даст верхнюю оценку для реальной стоимости последовательности n операций. Не ограничивая общности, можно считать, что \( \Phi(D_0) = 0 \) (см. упр. 18.3-1).

Говоря неформально, если разность потенциалов \( \Phi(D_i) - \Phi(D_{i-1}) \) положительна, то учетная стоимость i-й операции включает в себя резерв ("предоплату" за будущие операции); если же эта разность отрицательна, то учетная стоимость i-й операции меньше реальной, и разница покрывается за счет накопленного к этому моменту потенциала.