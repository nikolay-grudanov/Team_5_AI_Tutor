---
source_image: page_223.png
page_number: 223
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 61.01
tokens: 11641
characters: 2396
timestamp: 2025-12-24T06:30:43.534038
finish_reason: stop
---

Теорема 12.2. При равномерном хешировании среднее время успешного поиска в хеш-таблице с цепочками есть \( \Theta(1 + \alpha) \), где \( \alpha \) — коэффициент заполнения.

Доказательство. Хотя формулировка этой теоремы похожа на предыдущую, смысл утверждения несколько иной. В предыдущей теореме мы рассматривали произвольную таблицу с коэффициентом заполнения \( \alpha \) и оценивали среднее число действий, необходимых для поиска случайного элемента, равновероятно попадающего во все ячейки таблицы.

В этой теореме так делать нельзя: если мы возьмём произвольную таблицу и, считая все её элементы равновероятными, будем искать среднее время поиска случайно выбранного из них, то оценки вида \( \Theta(1 + \alpha) \) не получится (контрпример: таблица, в которой все элементы попали в один список)

Формулировка подразумевает двойное усреднение: сначала мы рассматриваем случайно выбранную последовательность элементов, добавляемых в таблицу, причём на каждом шаге все значения ключа равновероятны и шаги независимы, а затем в полученной таблице выбираем элемент для поиска, считая все её элементы равновероятными.

Посмотрим на ситуацию в тот момент, когда таблица уже построена, но случайный элемент для поиска ещё не выбран. Чему равно среднее время поиска, усреднённое по всем \( n \) элементам таблицы? Надо сложить позиции всех элементов в своих списках и поделить сумму на \( n \) (общее число элементов).

Если представить себе, что при заполнении таблицы элементы дописывались в конец соответствующих списков (см. упр. 12.2-3), то упомянутая сумма по порядку величины равна общему число операций, выполненных при заполнении таблицы (поскольку при добавлении в конец и при поиске выполняется одно и то же количество действий).

Теперь вспомним об усреднении по различным возможностям в процессе построения таблицы. При добавлении в неё \( i \)-го элемента математическое ожидание числа действий равно \( \Theta(1 + (i - 1)/m) \) (см. доказательство предыдущей теоремы), и потому математическое ожидание общего числа действий при заполнении таблицы, делённое на \( n \), есть

\[
\Theta \left( \frac{1}{n} \sum_{i=1}^n \left( 1 + \frac{i-1}{m} \right) \right) = \Theta \left( 1 + \frac{1}{nm} \sum_{i=1}^n (i-1) \right) =
\]
\[
= \Theta \left( 1 + \frac{1}{nm} \cdot \frac{(n-1)n}{2} \right) =
\]
\[
= \Theta \left( 1 + \frac{\alpha}{2} - \frac{1}{2m} \right) = \Theta(1 + \alpha).
\]