---
source_image: page_229.png
page_number: 229
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 60.02
tokens: 11609
characters: 2222
timestamp: 2025-12-24T06:30:57.170071
finish_reason: stop
---

Хеш-функции

няться вероятности совпадения двух случайно выбранных хеш-значений (которая равна \(1/m\)).

Следующая теорема показывает, что универсальное семейство хеш-функций обеспечивает хорошую производительность в среднем.

**Теорема 12.3.** *Пусть нам необходимо поместить n фиксированных ключей в таблицу размера m, где m \(\geq n\), и хеш-функция выбирается случайным образом из универсального семейства. Тогда математическое ожидание числа коллизий, в которых участвует данный ключ x, меньше единицы.*

**Доказательство.** Математическое ожидание числа коллизий данного ключа x с данным ключом y равно \(1/m\) по определению универсального семейства. Поскольку всего имеется \(n - 1\) ключей, отличных от x, математическое ожидание числа коллизий с каким-нибудь из этих ключей равно \((n - 1)/m\), что меньше единицы, поскольку \(n \leq m\).

Как же построить универсальное семейство? Нам поможет в этом элементарная теория чисел. Число m (количество хеш-значений) выберем простым. Будем считать, что каждый ключ представляет собой последовательность \(r + 1\) "байтов" (байт, или символ,— это просто двоичное число с ограниченным числом разрядов; мы будем считать, что максимальное значение байта меньше m). Для каждой последовательности \(a = \langle a_0, a_1, \ldots, a_r \rangle\), элементы которой являются вычетами по модулю m (то есть принадлежат множеству \(\{0, 1, \ldots, m - 1\}\)), рассмотрим функцию \(h_a\), заданную формулой

\[
h_a(x) = \sum_{i=0}^r a_i x_i \bmod m,
\]

где ключ x есть последовательность байтов \(\langle x_0, x_1, \ldots, x_r \rangle\). Положим

\[
\mathcal{H} = \bigcup_a \{ h_a \},
\]

Очевидно, множество \(\mathcal{H}\) содержит \(m^{r+1}\) элементов.

**Теорема 12.4.** *Семейство функций \(\mathcal{H}\), определённое по формулам (12.3) и (12.4), является универсальным семейством хеш-функций.*

**Доказательство.** Пусть \(x = \langle x_0, x_1, \ldots, x_r \rangle\) и \(y = \langle y_0, y_1, \ldots, y_r \rangle\) — два различных ключа; не ограничивая общности, можно считать, что \(x_0 \neq y_0\). Если \(a = \langle a_0, a_1, \ldots, a_r \rangle\), то \(h_a(x) = h_a(y)\) тогда и только тогда, когда

\[
a_0(x_0 - y_0) \equiv - \sum_{j=1}^r a_j (x_i - y_i) \pmod{m}.
\]