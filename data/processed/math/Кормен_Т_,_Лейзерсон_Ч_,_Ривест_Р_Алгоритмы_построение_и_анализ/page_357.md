---
source_image: page_357.png
page_number: 357
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 58.63
tokens: 11487
characters: 2177
timestamp: 2025-12-24T06:37:15.204373
finish_reason: stop
---

нулю), а расплачиваемся за удаление тарелки лежащим на ней резервным долларом. Точно так же мы имеем возможность объявить операцию MULTIPOP бесплатной: если надо удалить \( k \) тарелок, за удаление каждой из них мы расплатимся лежащим на ней долларом. Стало быть, избыточная плата, которую мы берем за операцию PUSH, покрывает расходы на операции POP и MULTIPOP. (стоимость любой последовательности из \( n \) операций PUSH, POP и MULTIPOP не превосходит суммарной учётной стоимости).

Двоичный счётчик

Решим таким же способом задачу о двоичном счётчике. Нам надо провести амортизационный анализ последовательности из \( n \) операций INCREMENT (в исходном состоянии в счетчике записан нуль). Мы уже отмечали, что время работы этой операции пропорционально суммарному количеству установок и очисток битов. Будем считать, что каждая установка или очистка стоит 1 доллар.

Установим такие учётные стоимости: 2 доллара за установку бита, 0 за очистку. При каждой установке бита одним из двух долларов учетной цены будем расплачиваться за реальные затраты на эту установку, а доллар, остающийся в резерве, будем прикреплять к установленному биту. Поскольку первоначально все биты были нулевыми, в каждый момент к каждому ненулевому биту будет прикреплен резервный доллар. Стало быть, за очистку любого бита ничего платить нам не придется: мы расплатимся за нее долларовой бумажкой, прикреплённой к этому биту в момент его установки.

Теперь легко определить учётную стоимость операции INCREMENT: поскольку каждая такая операция требует не более одной установки бита, ее учётную стоимость можно считать равной 2 долларам. Следовательно, фактическая стоимость \( n \) последовательных операций INCREMENT, начинающихся с нуля, есть \( O(n) \), поскольку она не превосходит суммы учётных стоимостей.

Упражнения

18.2-1 Предположим, что мы работаем со стеком, максимальный размер которого равен \( k \), причем после каждой \( k \) операций делается резервная копия стека. Покажите, что суммарная стоимость \( n \) операций со стеком (включая резервное копирование) есть \( O(n) \), выбрав подходящие учётные стоимости.

18.2-2 Сделайте упражнение 18.1-3 с помощью метода предоплаты.