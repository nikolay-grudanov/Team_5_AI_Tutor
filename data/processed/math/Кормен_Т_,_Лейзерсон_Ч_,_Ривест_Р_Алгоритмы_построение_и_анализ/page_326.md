---
source_image: page_326.png
page_number: 326
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 58.66
tokens: 11517
characters: 1979
timestamp: 2025-12-24T06:35:39.054925
finish_reason: stop
---

Задача о выборе заявок

Формально говоря, заявки с номерами i и j совместны (compatible), если интервалы \([s_i, f_i]\) и \([s_j, f_j]\) не пересекаются (иными словами, если \(f_i \leq s_j\) или \(f_j \leq s_i\)). Задача о выборе заявок (activity-selection problem) состоит в том, чтобы набрать максимальное количество совместных друг с другом заявок.

Жадный алгоритм работает следующим образом. Мы предполагаем, что заявки упорядочены в порядке возрастания времени окончания:

\[
f_1 \leq f_2 \leq \ldots \leq f_n.
\]

Если это не так, то можно отсортировать их за время \(O(n \log n)\); заявки с одинаковым временем конца располагаем в произвольном порядке.

Тогда алгоритм выглядит так (\(f\) и \(s\) — массивы):

**GREEDY-ACTIVITY-SELECTOR**(\(s, f\))

1. \(n \leftarrow length[s]\)
2. \(A \leftarrow \{1\}\)
3. \(j \leftarrow 1\)
4. **for** \(i \leftarrow 2\) **to** \(n\)
5. **do if** \(s_i \geq f_j\)
6. **then** \(A \leftarrow A \cup \{i\}\)
7. \(j \leftarrow i\)
8. **return** \(A\)

Работа этого алгоритма показана на рис. 17.1. Множество \(A\) состоит из номеров выбранных заявок, \(j\) — номер последней из них; при этом

\[
f_j = \max\{ f_k : k \in A \},
\]

поскольку заявки отсортированы по временам окончания. Вначале \(A\) содержит заявку номер 1, и \(j = 1\) (строки 2–3). Далее (цикл в строках 4–7) ищется заявка, начинающаяся не раньше окончания заявки номер \(j\). Если таковая найдена, она включается в множество \(A\) и переменной \(j\) присваивается её номер (строки 6–7).

Алгоритм **GREEDY-ACTIVITY-SELECTOR** требует всего лишь \(\Theta(n)\) шагов (не считая предварительной сортировки). Как и подобает жадному алгоритму, на каждом шаге он делает выбор так, чтобы остающееся свободным время было максимально.

Правильность алгоритма

Не для всех задач жадный алгоритм даёт оптимальное решение, но для нашей даёт. Убедимся в этом.

**Теорема 17.1.** *Алгоритм GREEDY-ACTIVITY-SELECTOR даёт набор из наибольшего возможного количества совместных заявок.*