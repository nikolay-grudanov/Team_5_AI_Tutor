---
source_image: page_384.png
page_number: 384
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.84
tokens: 11193
characters: 1095
timestamp: 2025-12-24T06:38:17.265965
finish_reason: stop
---

Рисунок 19.6  Рис. 19.6. Корень r Б-дерева (с t = 4) является полной вершиной. Он делится на две половины; при этом создается новый корень s, детьми которого становятся эти вершины. Новый корень s содержит ключ-медиану старого корня. Высота Б-дерева увеличилась на единицу.

B-TREE-INSERT(T, k)
1   r ← root[T]
2   if n[r] = 2t - 1
3     then s ← ALLOCATE-NODE()
4        root[T] ← s
5        leaf[s] ← FALSE
6        n[s] ← 0
7        c1[s] ← r
8        B-TREE-SPLIT-CHILD(s, 1, r)
9        B-TREE-INSERT-NONFULL(s, k)
10    else B-TREE-INSERT-NONFULL(r, k)

Строки 3–9 относятся к случаю добавления в дерево с полным корнем (пример на рис. 19.6). Именно в этом случае увеличивается высота Б-дерева. Отметим, что точкой роста Б-дерева является корень (а не лист, как в двоичных деревьях поиска).

Сделав корень неполным (если он не был таковым с самого начала), мы вызываем процедуру B-TREE-INSERT-NONFULL(x, k), которая добавляет элемент k в поддерево с корнем в неполной вершине x. Эта процедура рекурсивно вызывает себя, при необходимости (если вершина оказалась полной) выполнив разделение.