---
source_image: page_359.png
page_number: 359
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 60.40
tokens: 11528
characters: 2104
timestamp: 2025-12-24T06:37:24.124258
finish_reason: stop
---

Учётные стоимости (и тем самым оценки на реальную стоимость), рассчитанные с помощью метода потенциалов, зависят от выбора потенциальной функции, а сам этот выбор является делом творческим.

Операции со стеком

Проиллюстрируем метод потенциалов на примере знакомой нам задачи о стеке с операциями Push, Pop и MultiPop. В качестве потенциальной функции \( \Phi \) возьмем количество элементов в стеке. Поскольку мы начинаем с пустого стека, имеем

\[
\Phi(D_i) \geq 0 = \Phi(D_0).
\]

Стало быть, сумма учётных стоимостей оценивает сверху реальную стоимость последовательности операций.

Найдем теперь учётные стоимости индивидуальных операций. Так как операция Push имеет реальную стоимость 1 и к тому же увеличивает потенциал на 1, её учётная стоимость равна \( 1 + 1 = 2 \); операция MultiPop, удаляющая из стека \( m \) элементов, имеет стоимость \( m \), но уменьшает потенциал на \( m \), так что её учётная стоимость равна \( m - m = 0 \); точно так же равна нулю и учетная стоимость операции Pop. Коль скоро учётная стоимость каждой операции не превосходит 2, стоимость последовательности \( n \) операций, начинаящихся с пустого стека, есть \( O(n) \).

Двоичный счетчик

Проанализируем с помощью метода потенциалов двоичный счётчик. В качестве потенциальной функции возьмём количество единиц в счетчике.

Найдем учётную стоимость операции Increment. Пусть \( b_i \) — количество единиц в счетчике после \( i \)-й операции, и пусть \( i \)-я операция Increment очищает \( t_i \) битов; тогда \( b_i \leq b_{i-1} - t_i + 1 \) (кроме очистки битов, Increment может ещё установить в единицу не более одного бита). Стало быть, реальная стоимость \( i \)-го Increment’а не превосходит \( t_i + 1 \), а его учетная стоимость есть

\[
\hat{c}_i \leq (t_i + 1) + (b_i - b_{i-1}) \leq 2.
\]

Если отсчёт начинается с нуля, то \( \Phi(D_0) = 0 \), так что \( \Phi(D_i) \geq \Phi(D_0) \) для всех \( i \), сумма учётных стоимостей оценивает сверху сумму реальных стоимостей, и суммарная стоимость \( n \) операций Increment есть \( O(n) \) с константой (двойкой), не зависящей от \( k \) (размера счётчика).