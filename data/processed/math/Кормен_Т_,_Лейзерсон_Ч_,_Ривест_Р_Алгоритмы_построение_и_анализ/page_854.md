---
source_image: page_854.png
page_number: 854
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 64.37
tokens: 11767
characters: 2597
timestamp: 2025-12-24T07:00:30.736442
finish_reason: stop
---

36.18
Подробности конструкции для случая, когда ребро \( e_m \) (или \( \bar{e}_m \)) входит в несколько \( A \)-блоков.
(a) Фрагмент рис. 36.17.
(b) Граф, который этот фрагмент символизирует.

чала, что в графе \( G \) есть гамильтонов цикл \( h \), и докажем выполнимость формулы \( \varphi \).
Цикл \( h \) должен быть устроен так:
сначала проходим ребро \( (b_{1,1}, x'_1) \) (будем считать, что слева направо);
затем для каждого \( m \) проходим по одному (и только одному) из рёбер \( e_m, e'_m \);
проходим по ребру \( (b_{k,4}, x''_n) \) справа налево.
проходим все \( B \)-блоки снизу вверх
Заметим, что в действительности мы проходим не по самим рёбрам \( e_m \) и \( \bar{e}_m \), а по \( A \)-блокам, которые к ним привешены (если таковые есть). Отметим также, что если ни к \( e_m \), ни к \( \bar{e}_m \) не привешено ни одного \( A \)-блока, то переменная \( x_m \) не входит в формулу и её можно вообще удалить, так что кратных рёбер действительно нет.
Теперь можно указать выполняющий набор для формулы \( \varphi \): если ребро \( e_m \) принадлежит гамильтонову циклу \( h \), положим \( x_m = 1 \). В противном случае цикл \( h \) содержит ребро \( \bar{e}_m \), и мы полагаем \( x_m = 0 \).
Докажем, что построенный набор является выполняющим для формулы \( \varphi \). Рассмотрим какую-то дизъюнкцию \( C_i \) и соответствующий ей \( B \)-блок. Каждое ребро \( (b_{i,j}, b_{i,j+1}) \) связано с помощью \( A \)-блока либо с ребром \( e_m \), либо с ребром \( \bar{e}_m \) (в зависимости от того, является ли \( j \)-м литералов в дизъюнкции \( C_i \) переменная \( x_m \) или её отрицание \( \neg x_m \)). Цикл \( h \) проходит через ребро \( (b_{i,j}, b_{i,j+1}) \), если и только если соответствующий литерал равен 0. Вспомним, что \( h \) не может проходить через все три ребра \( (b_{i,1}, b_{i,2}), (b_{i,2}, b_{i,3}) \) и \( (b_{i,3}, b_{i,4}) \) в \( B \)-блоке, поэтому хотя бы одному из этих рёбер соответствует истинный литерал дизъюнкции, и дизъюнкция \( C_i \) истинна. Это можно сказать про любую дизъюнкцию \( C_i \), так что все они истинны и формула \( \varphi \) истинна для построенного набора значений переменных.
Обратно, пусть \( \varphi \) истинная для некоторого набора значений переменных. Построим цикл \( h \) по описанным выше правилам (цикл содержит ребро \( e_m \) при \( x_m = 1 \) и ребро \( e_m \) при \( x_m = 0 \); цикл проходит через ребро \( (b_{i,j}, b_{i,j+1}) \), если и только если \( j \)-й литерал дизъюнкции \( C_i \) равен 0 на данном наборе. Очевидно, описанные правила позволяют построить гамильтонов цикл по выполняющему набору.