---
source_image: page_844.png
page_number: 844
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 59.28
tokens: 11680
characters: 2414
timestamp: 2025-12-24T07:00:00.558444
finish_reason: stop
---

вместо исходной формулы написать конъюнкцию переменной, соответствующей корню дерева разбора, и подформул, утверждающих корректность операций в каждой вершине. Например, для формулы (36.3) получится формула

\[
\varphi' = y_1 \land (y_1 \iff (y_2 \land \neg y_2)) \\
\quad \land (y_2 \iff (y_3 \lor y_4)) \\
\quad \land (y_3 \iff (x_1 \rightarrow x_2)) \\
\quad \land (y_4 \iff (\neg y_5)) \\
\quad \land (y_5 \iff (y_6 \lor x_4)) \\
\quad \land (y_6 \iff (\neg x_1 \leftrightarrow x_3)).
\]

Полученная формула \( \varphi' \) является конъюнкцией нескольких подформул, каждая из которых содержит не более 3 переменных — но эти подформулы ещё не являются дизъюнкциями трёх различных литералов.

Что ж, остаётся заменить каждую из этих подформул на конъюнкцию нескольких литералов. Это делается так: составим таблицу значений для этой подформулы (как на рис. 36.10) и посмотрим на строки, в которых подформула ложна (имеет значение 0). Для каждой из этих строк напишем дизъюнкцию трёх литералов, которая будет ложной как раз при этих значениях переменных, а затем напишем конъюнкцию этих дизъюнкций, которая будет эквивалентна рассмотренной подформуле от трёх переменных.

Для формулы из нашего примера таблица истинности показана на рис. 36.10, формула ложна в четырёх случаях, и записывая конъюнкции, исключающие каждый из этих четырёх случаев, получаем формулу

\[
(\neg y_1 \lor \neg y_2 \lor \neg x_2) \land (\neg y_1 \lor y_2 \lor \neg x_2) \land (\neg y_1 \lor y_2 \lor x_2) \land (y_1 \lor \neg y_2 \lor x_2),
\]

которая эквивалентна формуле \( (y_1 \iff (y_2 \land \neg x_2)) \).

Осталась ещё одна небольшая трудность — нам надо, чтобы каждая дизъюнкция содержала ровно три переменных. Для этого можно добавить фиктивные переменные — или на этапе построения таблицы истинности, или сейчас: формулу \( p \lor q \) можно заменить на \( (p \lor q \lor r) \land (p \lor q \lor \neg r) \), а формулу \( p \) можно заменить на

\[
(p \lor q \lor r) \land (p \lor q \lor \neg r) \land (p \lor \neg q \lor r) \land (p \lor \neg q \lor \neg r) \land
\]

Легко видеть, что полученная в итоге формула выполнима в том и только том случае, когда выполнима исходная формула (на первом шаге это обосновывается как в теореме 36.9, а дальше мы заменяли формулы на эквивалентные). Ясно также, что длина новой формулы ограничена полиномом от длины старой и что все этапы нашего построения выполнимы за полиномиальное время.