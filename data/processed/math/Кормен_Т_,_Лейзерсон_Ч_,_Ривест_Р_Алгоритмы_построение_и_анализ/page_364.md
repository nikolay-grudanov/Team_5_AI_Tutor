---
source_image: page_364.png
page_number: 364
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 51.58
tokens: 11400
characters: 1575
timestamp: 2025-12-24T06:37:33.839712
finish_reason: stop
---

Рисунок 18.3 Размер таблицы (size_i), число записей (num_i) и потенциал (\Phi_i = 2 \cdot num_i - size_i) как функция от числа операций Table-Insert, обозначенного буквой i. График num — сплошная тонкая линия, график size — сплошная жирная линия, график \Phi — пунктир. Непосредственно перед расширением таблицы \Phi возрастает до num_i, чтобы оплатить это расширение. Сразу после расширения потенциал падает до нуля, но тут же и возрастает до 2 (за счет добавления записи после расширения).

гда неотрицательно. Стало быть, сумма учётных стоимостей операций Table-Insert (определённых по методу потенциалов как фактическая стоимость плюс изменение потенциала) оценивает сверху суммарную фактическую стоимость.

Найдем учётные стоимости. Для этого обозначим через size_i, num_i и \Phi_i размер, количество записей и потенциал таблицы после i-й операции Table-Insert. Если эта операция не сопровождалась расширением таблицы, то size_i = size_{i-1}, num_i = num_{i-1} + 1 и c_i = 1, откуда

\[
\hat{c}_i = c_i + \Phi_i - \Phi_{i-1} = 3.
\]

Если же i-я операции Table-Insert сопровождалась расширением таблицы, то size_i / 2 = size_{i-1} = num_{i-1} и c_i = num_i, откуда опять-таки

\[
\begin{align*}
\hat{c}_i &= c_i + \Phi_i - \Phi_{i-1} = \\
&= num_i + (2num_i - size_i) - (2num_{i-1} - size_{i-1}) = \\
&= num_i + (2num_i - (2num_i - 2)) - (2(num_i - 1) - (num_i - 1)) = \\
&= num_i + 2 - (num_i - 1) = 3.
\end{align*}
\]

На рис. 18.3 изображена зависимость величин num_i, size_i и \Phi_i от i. Обратите внимание, как накапливается потенциал к моменту расширения таблицы.