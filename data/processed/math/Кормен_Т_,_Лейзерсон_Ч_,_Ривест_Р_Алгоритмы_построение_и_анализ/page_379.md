---
source_image: page_379.png
page_number: 379
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 63.54
tokens: 11530
characters: 1829
timestamp: 2025-12-24T06:38:18.882984
finish_reason: stop
---

В вершине хранится не более \(2t - 1\) ключей. Следовательно, внутренняя вершина имеет не более \(2t\) детей. Вершину, хранящую ровно \(2t - 1\) ключей, назовем полной (full).

В простейшем случае \(t = 2\), тогда у каждой внутренней вершины 2, 3 или 4 ребенка, и мы получаем так называемое 2-3-4 дерево (2-3-4 tree). (Как мы уже говорили, для эффективной работы с диском на практике \(t\) надо брать гораздо большим.)

Высота Б-дерева

Число обращений к диску для большинства операций пропорционально высоте Б-дерева. Оценим сверху эту высоту.

Теорема 19.1. Для всякого Б-дерева высоты \(h\) и минимальной степени \(t \geq 2\), хранящего \(n \geq 1\) ключей, выполнено неравенство

\[
h \leq \log_t \frac{n + 1}{2}.
\]

Доказательство. Пусть высота Б-дерева равна заданному числу \(h\). Наименьшее число вершин в дереве будет, если степень каждой вершины минимальна, то есть у корня 2 ребёнка, а у внутренних вершин по \(t\) детей. В этом случае на глубине 1 мы имеем 2 вершины, на глубине 2 имеем \(2t\) вершин, на глубине 3 имеем \(2t^2\) вершин, ..., на глубине \(h\) имеем \(2t^{h-1}\) вершин. При этом в корне хранится один ключ, а во всех остальных вершинах по \(t - 1\) ключей. (На рис. 19.4 показано такое дерево при \(h = 3\).) Таким образом, получаем неравенство:

\[
n \geq 1 + (t - 1) \sum_{i=1}^{h} 2t^{i-1} = 1 + 2(t - 1) \left( \frac{t^h - 1}{t - 1} \right) = 2t^h - 1,
\]

откуда следует утверждение теоремы.

Как и для красно-чёрных деревьев, высота Б-дерева с \(n\) вершинами есть \(O(\log n)\), но основание логарифма для Б-деревьев гораздо больше, что примерно в \(\lg t\) раз сокращает количество обращений к диску.

Упражнения

19.1-1 Почему в определении Б-дерева требование \(t \geq 2\) существенно?

19.1-2 При каких \(t\) дерево на рис. 19.1 можно рассматривать как Б-дерево минимальной степени \(t\)?