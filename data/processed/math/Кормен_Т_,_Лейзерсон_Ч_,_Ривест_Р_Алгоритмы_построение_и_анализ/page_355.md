---
source_image: page_355.png
page_number: 355
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 64.29
tokens: 11555
characters: 2176
timestamp: 2025-12-24T06:37:15.271642
finish_reason: stop
---

таковой есть) устанавливается в единицу. Стоимость операции INCREMENT линейно зависит от общего количества битов, подвергшихся очистке или установке. Отсюда сразу получается грубая оценка: поскольку в худшем случае (массив A состоит из одних единиц) меняются k битов, требуется O(nk) операций, чтобы сосчитать от 0 до n.

Чтобы получить более точную оценку, заметим, что не каждый раз значения всех k битов меняются. В самом деле, младший бит A[0] меняется при каждом исполнении операции INCREMENT (см. рис. 18.2). Следующий по старшинству бит A[1] меняется только через раз: при отсчете от нуля до n этот бит меняется \( \lfloor n/2 \rfloor \) раз. Далее, A[N] меняется только каждый четвертый раз, и так далее: если \( 0 \leq i \leq \lg n \), то в процессе счета от 0 до n бит A[i] меняется \( \lfloor n/2^i \rfloor \) раз, а если \( i > \lfloor \lg n \rfloor \), то бит i вообще не меняется. Стало быть, общее количество операций очистки и установки битов равно

\[
\sum_{i=0}^{\lfloor \lg n \rfloor} \left\lfloor \frac{n}{2^i} \right\rfloor < n \sum_{i=0}^{\infty} \frac{1}{2^i} = 2n.
\]

Тем самым увеличение двоичного счётчика от 0 до n требует в худшем случае \( O(n) \) операций, причём константа не зависит от k (и равна 2); учётную стоимость каждой операции можно считать равной \( O(n)/n = O(1) \) (константа опять же не зависит от k).

Упражнения

18.1-1 Предположим, что мы разрешили не только операцию MULTIPOP, но и MULTIPUSH, добавляющую к стеку произвольное количество элементов. Можно ли теперь считать учётную стоимость каждой операции равной \( O(1) \)?

18.1-2 Определим для k-битового двоичного счетчика операцию DECREMENT (вычитание единицы по модулю \( 2^k \)). Покажите, последовательность из n операций INCREMENT и DECREMENT в худшем случае требует времени \( \Theta(nk) \).

18.1-3 Рассмотрим последовательность операций, в которой стоимость операции номер i равна i, если i является степенью двойки, и 1 в противном случае. Оцените среднюю стоимость одной операции в последовательности из n операций.

18.2 Метод предоплаты

При проведении амортизационного анализа по методу предоплаты (accounting method) каждой операции присваивается своя учётная