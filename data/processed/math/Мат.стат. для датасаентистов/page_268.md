---
source_image: page_268.png
page_number: 268
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.96
tokens: 11666
characters: 1497
timestamp: 2025-12-24T06:17:53.069303
finish_reason: stop
---

top_sp <- sp500_px[row.names(sp500_px) >= '2005-01-01', syms]
sp_pca <- princomp(top_sp)
screeplot(sp_pca)

Как яствует из рис. 7.2, дисперсия первой главной компоненты довольно большая (как это часто и бывает), но другие верхние главные компоненты имеют важное значение.

![График каменистой осьпи для РСА лидирующих акций S&P 500](../images/chapter7/fig7_2.png)

Рис. 7.2. График каменистой осьпи для РСА лидирующих акций S&P 500

В особенности очевидным может быть отображение весов верхних главных компонент. Один из способов состоит в использовании функции gather из программного пакета tidyr в сочетании с ggplot:

library(tidyr)
loadings <- sp_pca$loadings[,1:5]
loadings$Symbol <- row.names(loadings)
loadings <- gather(loadings, "Component", "Weight", -Symbol)
ggplot(loadings, aes(x=Symbol, y=Weight)) +
  geom_bar(stat='identity') +
  facet_grid(Component ~ ., scales='free_y')

Нагрузки для верхних пяти компонент показаны на рис. 7.3. Нагрузки для первой главной компоненты имеют одинаковый знак: это типично для данных, в которых все столбцы имеют общий множитель (в данном случае, общий тренд фондового рынка). Вторая компонента захватывает ценовые изменения энергетических акций по сравнению с другими акциями. Третья компонента преимущественно противопоставляет динамику цен Apple и CostCo. Четвертая компонента противопоставляет динамику цен Schlumberger другим энергетическим акциям. Наконец, в пятой компоненте доминирующие позиции занимают главным образом финансовые компании.