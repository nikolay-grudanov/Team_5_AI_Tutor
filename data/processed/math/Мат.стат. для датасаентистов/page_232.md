---
source_image: page_232.png
page_number: 232
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 78.43
tokens: 12066
characters: 2339
timestamp: 2025-12-24T06:16:45.795653
finish_reason: stop
---

knn_pred <- knn(train=loan_df, test=newloan, cl=outcome, k=5)
loan_df[attr(knn_pred,"nn.index"),]
    payment_inc_ratio   dti revol_bal revol_util
36054        2.22024 0.79      1687     8.4
33233        5.97874 1.03      1692     6.2
28989        5.65339 5.40      1694     7.0
29572        5.00128 1.84      1695     5.1
20962        9.42600 7.14      1683     8.6

Значение revol_bal в этих соседях очень близко к его значению в новой записи, но другие предикторные переменные идут вразброс и по существу не играют роли в определении соседей.

Сравним это с KNN, примененным к стандартизированным данным при помощи R-функции scale, которая вычисляет z-оценку для каждой переменной:

loan_std <- scale(loan_df)
knn_pred <- knn(train=loan_std, test=newloan_std, cl=outcome, k=5)
loan_df[attr(knn_pred,"nn.index"),]
    payment_inc_ratio   dti revol_bal revol_util
2081        2.61091 1.03      1218     9.7
36054        2.22024 0.79      1687     8.4
23655        2.34286 1.12      523     10.7
41327        2.15987 0.69      2115     8.1
39555        2.76891 0.75      2129     9.5

Пять ближайших соседей гораздо больше похожи во всех переменных, обеспечивая более разумный результат. Отметим, что результаты отображены в исходной шкале, но KNN был применен к прошкалированным данным и предсказываемой новой ссуде.

Использование z-оценки — это всего лишь один способ пересасштабирования переменных. Вместо среднего может использоваться более робастная оценка центрального положения, такая как медиана. Похожим образом может использоваться и другая оценка шкалы, такая как межквартильный размах, вместо стандартного отклонения. Иногда переменные "впикивают" в диапазон 0–1. Также важно понять, что шкалирование каждой переменной до единичной дисперсии носит несколько произвольный характер. Это подразумевает, что каждая переменная, предположительно, имеет одинаковую важность в предсказательной силе. Если вы располагаете субъективным знанием, что какие-то переменные важнее других, тогда их можно прошкалировать вертикально. Например, если говорить о данных о ссудах, разумно ожидать, что большую важность представляет соотношение платежей к доходу.

Нормализация (стандартизация) не меняет форму распределения данных; она не придает им нормальную форму, если только они ее уже не имеют (см. разд. "Нормальное распределение" главы 2).