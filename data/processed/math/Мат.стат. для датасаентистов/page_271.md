---
source_image: page_271.png
page_number: 271
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 64.55
tokens: 11952
characters: 1979
timestamp: 2025-12-24T06:18:31.394950
finish_reason: stop
---

Простой пример

Начнем с того, что рассмотрим набор данных с n записями и всего двумя переменными, x и y. Предположим, что мы хотим разделить данные на K = 4 кластеров. Это значит, что нужно отнести каждую запись (x_i, y_i) к кластеру k. С учетом отнесения n_k записей к кластеру k, центром кластера (\overline{x}_k, \overline{y}_k) является среднее значение точек в кластере:

\[
\overline{x}_k = \frac{1}{n_k} \sum_{i \in \text{кластер } k} x_i;
\]
\[
\overline{y}_k = \frac{1}{n_k} \sum_{i \in \text{кластер } k} y_i.
\]

Центр кластера
В кластеризации записей с многочисленными переменными (типичный случай) термин "центр кластера" обозначает не одно число, а вектор средних значений переменных.

Сумма квадратов внутри кластера задается следующей формулой:
\[
SS_k = \sum_{i \in \text{кластер } k} \left( x_i - \overline{x}_k \right)^2 + \left( y_i - \overline{y}_k \right)^2.
\]

Метод K средних находит такое отнесение записей к кластерам, которое минимизирует внутрикластерную сумму квадратов по всем четырем кластерам \( SS_1 + SS_2 + SS_3 + SS_4 \).
\[
\sum_{k=1}^4 SS_i.
\]

Кластеризация методом K средних можно использовать, чтобы лучше понять динамику цен на акции относительно ее тенденции группироваться в кластеры. Отметим, что о доходности акций сообщается в виде, который практически стандартизирован, и поэтому нам не нужно выполнять нормализацию данных. В R кластеризация по методу K средних можно выполнить при помощи функции kmeans. Например, приведенный далее фрагмент кода находит четыре кластера на основе двух переменных — доходности акций ExxonMobil (XOM) и Chevron (CVX):

df <- sp500_px[row.names(sp500_px) >= '2011-01-01', c('XOM', 'CVX')]
km <- kmeans(df, centers=4)

Отнесение к кластеру каждой записи возвращается в компоненте cluster:

> df$cluster <- factor(km$cluster)
> head(df)
      XOM    CVX cluster
2011-01-03 0.73680496 0.2406809 2
2011-01-04 0.16866845 -0.5845157 1
2011-01-05 0.02663055 0.4469854 2
2011-01-06 0.24855834 -0.9197513 1