---
source_image: page_165.png
page_number: 165
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 64.62
tokens: 11928
characters: 2461
timestamp: 2025-12-24T06:13:07.542032
finish_reason: stop
---

мощи первых двух или трех цифр, что соответствует субметропольной географической области. Для округа Кинг почти все продажи происходят в индексах 980xx или 981xx, так что это не помогает.

Альтернативный подход состоит в группировке почтовых индексов согласно еще одной переменной, такой как продажная цена. Еще лучше будет, если формировать группы с почтовыми индексами, используя остатки от начальной модели. В следующем ниже фрагменте кода dplyr консолидируют эти 82 почтовых индекса в пять групп, основываясь на медиане остатка от регрессии house_lm:

zip_groups <- house %>%
    mutate(resid = residuals(house_lm)) %>%
    group_by(ZipCode) %>%
    summarize(med_resid = median(resid),
        cnt = n()) %>%
    arrange(med_resid) %>%
    mutate(cum_cnt = cumsum(cnt),
        ZipGroup = ntile(cum_cnt, 5))
house <- house %>%
    left_join(select(zip_groups, ZipCode, ZipGroup), by='ZipCode')

Медианные остатки вычислены для каждого почтового индекса, и функция ntile используется для разбиения почтовых индексов, сортированных по медиане, в пять групп. См. разд. "Искажающие переменные" далее в этой главе по поводу примера того, как это используется в качестве члена в уравнении регрессии, который улучшает первоначальную подгонку.

Принцип использования остатков с целью помочь сориентировать подгонку регрессии является фундаментальным шагом в процессе моделирования (см. разд. "Проверка допущений: диагностика регрессии" далее в этой главе).

Порядковые факторные переменные

Некоторые факторные переменные отражают уровни фактора; они называются порядковыми факторными переменными или порядковыми категориальными переменными. Например, уровень ссуды может быть A, B, C и т. д. — каждый уровень несет больший риск, чем предыдущий. Порядковые факторные переменные, как правило, могут быть конвертированы в числовые значения и использоваться как есть. Например, переменная BldgGrade — это порядковая факторная переменная. Несколько типов ее уровней приведены в табл. 4.1. Хотя эти уровни имеют определенное значение, ее числовые значения упорядочены снизу вверх, соответствуя домам более высокого уровня. В модели регрессии house_lm, подгонка которой была выполнена в разд. "Множественная линейная регрессия" ранее в этой главе, BldgGrade рассматривалась как числовая переменная.

Рассмотрение порядковых факторов в качестве числовой переменной сохраняет информацию, содержащуюся в упорядоченности, которая будет потеряна при конвертировании в фактор.