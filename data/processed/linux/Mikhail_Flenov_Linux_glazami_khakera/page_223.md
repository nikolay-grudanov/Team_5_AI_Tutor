---
source_image: page_223.png
page_number: 223
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.40
tokens: 7950
characters: 2400
timestamp: 2025-12-24T04:25:15.417538
finish_reason: stop
---

Но добавлять пользователей вручную не очень удобно, потому что требуется зашифровать и прописать пароль, что не так уж и просто. Чтобы облегчить задачу, в пакет Samba включена утилита smbpasswd, которая принимает следующие параметры:

-а — добавить пользователя в систему. Учетная запись должна уже существовать в /etc/passwd. Например, давайте пропишем Роберта, с которым мы уже не раз работали:
smbpasswd -a robert

В ответ на это программа попросит вас дважды ввести пароль. Указанная вами комбинация никак не влияет на системный пароль и используется только для доступа к Samba. Таким образом, пароли могут отличаться. Я даже рекомендую сделать их различными. ОС Windows умеет запоминать пароли и хранить в своей системе, и версии Windows 9x делают это небезопасным способом. Если злоумышленник сможет украсть пароль на Samba, то он проникнет и в систему;

-х — удалить пользователя. Чтобы исключить Роберта из системы, выполните команду smbpasswd -x robert;

-d — деактивировать пользователя. Если необходимо временно отключить доступ для пользователя, не удаляя его из системы, выполните команду smbpasswd -d robert. Давайте посмотрим на строку, соответствующую Роберту, после выполнения этой команды:
robert:500:813D6593C11F1173ED98178CA975D79:[DUX ]:LCT-41FA818F

Обратите внимание, что в четвертой колонке в квадратных скобках появилась буква D. Она как раз и указывает на то, что запись деактивирована. Таким образом вы легко можете определить, какие записи активны, а какие нет;

-e — активировать пользователя. С помощью этой команды можно подключить деактивированного ранее пользователя: smbpasswd -e robert.

Если запустить smbpasswd без параметров, то вы сможете поменять свой пароль, и это можно будет сделать с текущими правами. Выполнение всех остальных команд требует прав администратора, поэтому их придется выполнять с использованием sudo.

Напоминаю, что файл /etc/samba/smbpasswd используется, если пароли передаются по сети в зашифрованном виде. В этом случае, чтобы предоставить доступ к Samba всем пользователям системы, необходимо для каждого выполнить команду smdpasswd. Есть сценарии, которые автоматизируют работу, но их использование не очень эффективно, потому что они не задают пароля и, чаще всего, перетаскивают всех пользователей, даже тех, кто не должен иметь доступа в систему. К таким пользователям относятся системные учетные записи типа bin, adm, deamon и др.