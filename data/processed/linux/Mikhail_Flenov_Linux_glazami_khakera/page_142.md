---
source_image: page_142.png
page_number: 142
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.31
tokens: 7807
characters: 1910
timestamp: 2025-12-24T04:22:44.720861
finish_reason: stop
---

ARCH= LINUX
#ARCH= FreeBSD
#ARCH= IRIX
#ARCH= SOLARIS

DEBUG = 0
INSTALL_DIR = /tmp/jail
PERL = /usr/bin/perl
ROOTUSER = root
ROOTGROUP = root

Вначале задается тип ОС — по умолчанию установлена LINUX, а следующие три строки для FreeBSD, IRIX и Solaris закомментированы. Оставим это как есть. Что нужно изменить, так это каталог для установки (параметр INSTALL_DIR). В последней версии (на момент написания книги) по умолчанию указывается каталог /tmp/jail. Не знаю, зачем это сделали, ведь этот каталог предназначен для временных файлов и должен быть доступен для чтения абсолютно всем. Раньше по умолчанию был прописан /usr/local, и именно его я советую здесь указать. Больше ничего менять не надо.

Для выполнения следующих директив вам понадобятся права root, поэтому войдите в систему как администратор или получите нужные права, запустив команду su root.

Перед компиляцией и установкой убедитесь, что у файла preinstall.sh есть права на выполнение. Если нет, воспользуйтесь следующей командой:

chmod 755 preinstall.sh

Теперь все готово к установке. Находясь в каталоге jail/src, выполните команды:

make
make install

Если все прошло успешно, то в каталоге /usr/local/bin должны появиться программы addjailsw, addjailuser, jail и mkjailenv.

4.7.3. Работа с программой Jail

Прежде всего создадим каталог /home/chroot, который станет корневым для программы, на которой мы будем испытывать систему. Для этого выполним команду:

mkdir /home/chroot

Теперь нужно подготовить окружение для нормальной работы будущего сервиса. Для этого выполняем команду:

/usr/local/bin/mkjailenv /home/chroot

Посмотрите, что произошло с каталогом /home/chroot. Здесь появились два каталога: dev и etc. Как мы знаем, в каталоге dev должны находиться описания устройств. В данном случае программа не стала делать полную копию системного каталога /dev, а ограничила созданием трех основных устройств: null, urandom и zero.