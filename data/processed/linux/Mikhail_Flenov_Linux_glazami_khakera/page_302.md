---
source_image: page_302.png
page_number: 302
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.45
tokens: 7920
characters: 2152
timestamp: 2025-12-24T04:27:29.219044
finish_reason: stop
---

как станцевать танец с бубнами для установки этого зверя. При помощи поисковика находим архив BerkeleyDB, скачиваем его и разархивируем. Лучше опять разархивировать в домашнюю папку, все равно потом все это можно будет удалить. Теперь переходим в папку:

cd ~/db-X.X.X/build-unix

Буквы X снова означают здесь номер версии. Обратите внимание, что мы переходим в подкаталог build-unix. Это очень важно. Мы устанавливаем библиотеку работы с базой в Linux, которая относится к системам UNIX, поэтому компиляция и установка должна происходить именно отсюда. В этом каталоге выполняем три команды:

../dist/configure
make
sudo make install

Первая команда конфигурирует программу, вторая ее компилирует, а третья — устанавливает. Обратите внимание, что перед командой установки стоит sudo. Дело в том, что установка будет происходить в каталог /usr/local, к которому у простых смертных учетных записей доступа нет. Если не указать sudo, то установка завершится ошибкой прав доступа.

Теперь, когда библиотека базы данных установлена, можно возвращаться в каталог squidGuard. Только не спешите запускать конфигурацию снова. С вероятностью 99% она не пройдет, потому что конфигуратор ищет библиотеку BerkeleyDB в папке /usr/local/BerkeleyDB, но она устанавливается в папку /usr/local/BerkeleyDB.X.X, т. е. в конец имени папки добавляется номер версии. Выполните команду:

ls /usr/local

Это позволит увидеть содержимое папки /usr/local прямо из текущей папки стражника. Запомните имя и выполняйте команду конфигурации так:

./configure --with-db=/usr/local/BerkeleyDB.X.X

В данном случае X.X на конце заменяем на свой номер версии. Теперь конфигурация должна пройти успешно. Если нет, то в этом случае все претензии к разработчикам, но я с другими проблемами не встречался.

После конфигурации выполняем команды сборки и установки:

make
sudo make install

Установка снова выполняется от имени администратора, потому что опять происходит копирование в защищенную область /usr/local.

9.7.2. Настройка

Каталог по умолчанию, в котором можно найти установленный нами стражник, — /usr/local/squidGuard. Основные настройки находятся в файле squidGuard.conf, рас-