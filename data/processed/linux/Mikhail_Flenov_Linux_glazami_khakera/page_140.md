---
source_image: page_140.png
page_number: 140
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.34
tokens: 8067
characters: 2739
timestamp: 2025-12-24T04:22:52.277675
finish_reason: stop
---

сать свой собственный код сайта с минимальными возможностями, но зато безопасный для использования.

А ведь опасность можно уменьшить, ограничив права веб-сервера в ОС. Для этого администраторы должны создать виртуальную среду для выполнения веб-сервиса, сделав при этом все остальные разделы сервера недоступными для злоумышленника. Тогда и каталог /etc окажется недосягаемым, и максимальный вред, который сможет нанести злоумышленник, — это уничтожить сайт и нарушить работу веб-сервиса, но все остальные будут трудиться в штатном режиме. Восстановить один сервис проще, чем налаживать абсолютно все.

После случая с форумом phpBB я целый день бродил по Интернету в поисках уязвимых форумов, и таких оказалось много, потому что администраторы сайтов явно не следили за обновлениями. Я думаю, что в скором времени эти администраторы пройдут через все круги ада. Рано или поздно взломщик найдет их форумы, и администраторам нужно будет молиться, чтобы он не уничтожил всю базу, а только пошалил. Хочется еще раз напомнить о необходимости обновления всех программ, сервисов и самой ОС. Если вы сможете исправить ошибку ранее, чем хакер ее найдет, то обезопасите свою жизнь.

Во время поисков уязвимых форумов я просматривал возможность получения доступа к каталогу /etc, чтобы увидеть не только количество неопытных владельцев сайтов, но и некомпетентных администраторов. Вы не поверите, но доступ был открыт, наверное, на 90 % серверов. Это безграмотность администраторов или их лень? Точно сказать трудно. Защищены были только крупные серверы.

Этот случай произошел очень давно, и я надеюсь, что сейчас ситуация с безопасностью у хостинговых компаний намного лучше.

4.7.1. Принцип работы

Итак, чтобы увеличить безопасность служб, следует создать каталог, который станет для программы корневым. В Linux для этого существует команда chroot, создающая окружение chroot (рис. 4.1).

В этом окружении и создается каталог, который играет роль корневого. Выше этого каталога программа, работающая в окружении chroot, попасть не может. Получается как бы корневая файловая система внутри существующей корневой системы. На рис. 4.1 показана часть файловой системы Linux. Во главе всего стоит корневой каталог /. В нем находятся каталоги (папки) /bin, /usr, /var, /home. В папке /home расположены каталоги пользователей системы. Мы создаем здесь новый каталог, для примера назовем его chroot, — он и станет корневым для службы. В нем будут размещаться свои каталоги /bin, /usr и т. д., и сервис будет работать с ними, а все, что выше /home/chroot, окажется ему недоступно.

На рис. 4.1 в рамку обведены папки, которые будут видны службе. Именно в этом пространстве станет работать сервис, считая, что это и есть реальная файловая система сервера.