---
source_image: page_263.png
page_number: 263
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.79
tokens: 7872
characters: 2057
timestamp: 2025-12-24T04:26:20.308336
finish_reason: stop
---

8.4. Безопасность sendmail

Безопасность сервиса sendmail далека от идеала, и в нем регулярно находят ошибки. По этому поводу администраторы и программисты начали слагать анекдоты и превратили сервис в объект для насмехательств. Я слышал, что некоторые даже делали ставки на то, будет ли найдена ошибка в этом месяце или нет.

Как я и обещал, в данном разделе мы поговорим о некоторых параметрах, повышающих безопасность.

8.4.1. Баннер-болтун

Проблемы безопасности начинаются еще на этапе подключения. Сервис sendmail, как и большинство других служб, выдает строку приветствия, в которой содержится информация об имени и версии программы.

Хакер не должен знать этих данных. Соответственно, необходимо изменить параметр SmtpGreetingMessage в файле /etc/sendmail.cf. В старых версиях sendmail этот параметр был равен:

SmtpGreetingMessage=$j Sendmail $v/$z; $b

Самое опасное здесь — ключ $v/$z, который отображает версию, и само имя Sendmail. Именно поэтому теперь значение этому параметру присваивается следующим образом:

SmtpGreetingMessage=$j $b

Если ваша система сообщает о себе что-то лишнее, то это значение необходимо убрать. Можно даже поставить сообщение другого сервиса:

SmtpGreetingMessage=$j IIS 5.0.1 $b

Любая удачная попытка ввести хакера в заблуждение — это выигрыш во времени, что равносильно маленькой победе.

8.4.2. Только отправка почты

Очень часто почтовые сервисы используют только для отправки почты. Например, на веб-серверах sendmail может стоять лишь для того, чтобы прямо из сценариев на Perl или PHP можно было отсылать письмо. Если ваш сервер не должен принимать писем, то необходимо запретить режим приема. Для этого откройте файл /etc/sysconfig/sendmail и измените его содержимое:

DEAMON=yes
QUEUE="q1h"

Вторая строка задает параметры, которые будут передаваться программе sendmail при запуске. Чтобы возобновить прием почты, измените значение на bd.

Если у вас нет файла /etc/sysconfig/sendmail (он используется не во всех дистрибутивах), то придется редактировать сценарий /etc/rc.d/init.d/sendmail. Найдите в этом