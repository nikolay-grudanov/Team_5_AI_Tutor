---
source_image: page_299.png
page_number: 299
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.63
tokens: 7874
characters: 1849
timestamp: 2025-12-24T04:27:21.414998
finish_reason: stop
---

nosti — 4000 байтов в секунду. На такой скорости будут работать все пользователи в сети, кроме администраторов.

Если вы установите такие правила в какой-либо организации, то могут возникнуть проблемы с руководством, потому что директор тоже попадет в список all и будет работать на скорости 4000 байтов в секунду. Я думаю, что его это не устроит, и для него мы сделаем отдельную запись:

delay_parameters 3 64000/64000
delay_access 3 deny all
delay_access 3 allow bigboss

С помощью ограничения пропускной способности канала можно запретить загрузку мультимедиафайлов в рабочее время. В следующем примере мы разрешаем быстро читать веб-странички, но уменьшаем скорость загрузки других медиафайлов (листинг 9.4).

Листинг 9.4. Ограничение скорости загрузки медиафайлов в рабочее время

# ACL-список, описывающий сеть
acl fullspeed url_regex -i 192.168.1
# ACL-список, описывающий медиафайлы, для которых необходимо
# понизить скорость
acl mediaspeed url_regex -i ftp .exe .mp3 .avi .mpeg .iso .wav
# Время, которое будет действовать ограничение на скорость
# загрузки медиафайлов
acl day time 08:00-18:59

# Нам нужно два пула второго класса
delay_pools 2
delay_class 1 2
delay_class 2 2
# Первый пул не имеет ограничений для всех
delay_parameters 1 -1/-1 -1/-1
delay_access 1 allow fullspeed

# Второй пул ограничивает доступ в дневное время
delay_parameters 2 4000/100000 4000/100000
delay_access 2 allow day
delay_access 2 deny !day
delay_access 2 allow mediaspeed

Я постарался снабдить листинг подробными комментариями, чтобы вы могли с ним разобраться без дополнительных пояснений. Хочу только заметить, что скорость понижается для всех. Если вы хотите разрешить определенным пользователям работать на полной скорости, можно внести их в список (например, allowfull) и добавить в конец листинга следующую строку:

delay_access 2 deny !allowfull