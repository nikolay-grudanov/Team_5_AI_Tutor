---
source_image: page_356.png
page_number: 356
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.38
tokens: 8039
characters: 2512
timestamp: 2025-12-24T04:29:00.814982
finish_reason: stop
---

Если файл /etc/sysconfig/syslog существует, то в нем будет такая же строка. В этом случае вам достаточно внести изменения в этот файл, и не надо будет трогать сценарий запуска /etc/rc.d/init.d/syslog.

Использование выделенного сервера для сохранения сообщений из журналов позволяет сохранить записи, но при этом делает их доступными для всеобщего просмотра. Дело в том, что сообщения передаются по сети в незашифрованном виде. Это не проблема, если вы отделены от Интернета сетевым экраном, и злоумышленник не смог проникнуть внутрь сети. Но если хакеру удалось взломать хотя бы один компьютер в защищенной сети, то он может установить программу прослушивания и увидеть все сообщения в журналах.

Вопрос решается достаточно просто — зашифровать трафик, направив его через туннель SSL. Самый простой вариант — выполнить следующие действия:

1. На сервере, отправляющем сообщения, в конфигурационном файле прописываем пересылку сообщений на локальный компьютер:
   *.*    @localhost

2. Все сообщения будут передаваться на локальный компьютер на порт 514 UDP. Чтобы все получилось, сервер не должен работать в режиме приема сообщений, т. е. запущен без ключа -r. Иначе порт 514 будет занят, а нам это не нужно.

3. На порту 514 локального компьютера запускаем stunnel-клиент:
   stunnel -c -d 127.0.0.1: 514 -r loagserver:1050

Все сообщения, полученные на этот порт, будут шифроваться и передаваться на порт 1050 компьютера loagserver. В вашем случае вместо имени loagserver нужно указать адрес вашего сервера.

4. На компьютере loagserver создаем stunnel-сервер:
   stunnel -d 1050 -r 127.0.0.1:514

После этих действий на локальном компьютере клиент stunnel будет получать незашифрованные сообщения на порту 514, шифровать их и отправлять на порт 1050 компьютера loagserver. А на компьютере loagserver сервер stunnel будет получать зашифрованные сообщения и в расшифрованном виде направлять их на порт 514. На сервере loagserver сервис syslogd должен быть запущен с ключом -r для приема сообщений на порту 514.

Теперь все сообщения будут передаваться по сети в зашифрованном виде.

12.5.7. logrotate

Чтобы файлы журналов слишком сильно не раздувались, в Linux включена утилита logrotate. Рассмотрим принцип ее работы на примере журнала /var/log/messages:

1. Когда размер файла /var/log/messages превышает максимально допустимое значение или проходит определенный промежуток времени, содержимое текущего журнала переносится в файл /var/log/messages.1, а файл /var/log/messages очищается и заполняется заново;