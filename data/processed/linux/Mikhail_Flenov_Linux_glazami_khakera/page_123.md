---
source_image: page_123.png
page_number: 123
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.07
tokens: 8057
characters: 2642
timestamp: 2025-12-24T04:22:24.214218
finish_reason: stop
---

Любые лишние права могут оказаться фатальными для безопасности системы не только с точки зрения взлома, но и утечки информации. Например, файлы бухгалтерской отчетности должны быть доступны только тем, кто с ними работает. Если показать эти документы всем, то финансовые данные, возможно, станут достоянием общественности, и это нежелательным образом отразится на благосостоянии компании.

4.1.4. Права по умолчанию

Когда пользователь создает новый файл или каталог, то им назначаются права по умолчанию. Давайте рассмотрим это на примере. Для создания файла выполним команду ls и перенаправим вывод в файл:

ls -al >> testfile

Теперь проверим права на этот файл с помощью команды ls -al. Должно получиться -rw-r--r--, т. е. владелец может читать и изменять файл, а пользователи группы и все остальные — только просматривать. В старых системах и некоторых дистрибутивах права могут оказаться -rw-rw-r--, т. е. пользователи группы тоже смогут корректировать файл. Но в любом случае все получают возможность читать файл — это разрешено. Такие права нарушают главное правило безопасности.

В этом отношении политика назначения прав по умолчанию может быть не совсем эффективна — если вы создадите файл, который хранит конфиденциальные данные, информация из него будет доступна для всеобщего обозрения. И если вы забудете понизить права, то любой сможет увидеть и прочитать файл.

Ситуацию можно изменить, если понимать, как создаются права для нового файла. Они рассчитываются на основе маски, текущее значение которой определяется командой umask. Если выполнить ее после установки системы, будет получено значение 0022 или 002.

Посмотрим, как маска влияет на регламентацию доступа. По умолчанию права для файлов устанавливаются в значение 666 минус маска, а для каталогов — 777 минус маска.

Теперь ясно, что если маска равна 002, то для нового файла будут установлены права 666 - 002 = 664, а это соответствует -rw-rw-r--. При значении маски 0022 формула изменится на 666 - 0022 = 644, что будет означать -rw-r--r--.

Для каталогов расчет аналогичный, и при маске, равной 002, по умолчанию будут устанавливаться права 777 - 002 = 775 (drwxrwxr-x). В случае с маской 0022 значение определяется как 777 - 0022 = 755, а это соответствует правам drwxr-xr-x, т. е. все пользователи смогут просматривать каталоги и увидят содержащиеся в ней файлы.

Все это не есть хорошо. Только владелец должен иметь доступ, достаточный для полноценной работы с файлами и каталогами, а остальные вообще не должны иметь прав. Эту ситуацию можно исправить изменением маски. Я рекомендую установить ее в 077. В этом случае для каталогов права будут определены так: