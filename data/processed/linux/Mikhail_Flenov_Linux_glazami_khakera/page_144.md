---
source_image: page_144.png
page_number: 144
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.01
tokens: 7848
characters: 2032
timestamp: 2025-12-24T04:22:51.849404
finish_reason: stop
---

Посмотрим, как можно добавить пользователя robert (он у нас уже есть) в виртуальную систему:

/usr/local/bin/addjailuser /home/chroot \
    /home/robert /bin/bash robert

ПРИМЕЧАНИЕ
У меня здесь команда не уместилась в одну строку, поэтому я сделал перенос с помощью символа "\" , который обозначает, что директива не закончилась, и ее продолжение в следующей строке.

Если параметры указаны верно, то вы должны увидеть уведомление Done, в противном случае будет выведено сообщение об ошибке.

Для запуска сервера httpd (в Linux это сервер Apache) в виртуальном окружении должен существовать пользователь apache. В реальной оболочке он уже есть. Давайте посмотрим его параметры и создадим такого же:

/usr/local/bin/addjailuser /home/chroot \
    /var/www /bin/false apache

Как теперь попасть в новое окружение? Выполните команду:

chroot /home/chroot

И вы окажетесь в новом окружении. Только учтите, что большинство команд здесь не работает. Так, например, мы не установили программу MS, поэтому вы не сможете ею воспользоваться.

Чтобы убедиться, что вы находитесь в виртуальном окружении, выполните команду:

ls -al /etc

Вы увидите всего несколько файлов, которые составляют малую часть того, что доступно в реальном каталоге /etc. Можете просмотреть файл /etc/passwd — в нем вы найдете только пользователей виртуального окружения. Если хакер взломает его, то он получит только эти данные и сможет уничтожить лишь содержимое каталога /home/chroot. Вся остальная файловая система останется целой и невредимой.

Для запуска сервиса httpd нужно выполнить в виртуальном окружении команду /usr/sbin/httpd.

4.8. Получение прав root

Теперь, когда у нас есть достаточно информации о разграничении доступа, мы можем рассмотреть типичный метод взломщика для получения прав root и способы его маскировки в системе.

Допустим, что злоумышленник приобрел возможность выполнять какие-либо системные команды от имени (с правами) root. Сидеть под этой учетной записью будет слишком опасно и вызывающе. К тому же изменять пароль root нельзя.