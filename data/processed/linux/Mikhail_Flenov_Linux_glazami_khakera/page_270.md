---
source_image: page_270.png
page_number: 270
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.52
tokens: 7974
characters: 2606
timestamp: 2025-12-24T04:26:36.493422
finish_reason: stop
---

localhost      RELAY
your_domain.com   RELAY

Все остальные не смогут выполнять рассылку писем. Такой метод хорош только в том случае, когда серверы и компьютеры защищены. Если хакер проник в сеть, то он сможет разослать любой спам от имени пользователя сети. От этого никуда не деться. Если есть хоть какое-то разрешение, то им можно воспользоваться, и ваша задача сделать так, чтобы это было, по крайней мере, сложно.

Запрет рассылки не всегда может быть реализован, поэтому приходится использовать другие методы — например, заставить пользователей проверять почту по протоколу POP до отправки писем. Для осуществления этого метода можно воспользоваться сервисом pop-before-smtp (popsmtpl.sourceforge.net), который проверяет журнал сообщений /var/log/maillog, и отправка почты разрешается, только если в нем найдена удачная авторизация за определенный период.

Единственный, но существенный недостаток этого способа заключается в том, что если на пути следования письма стоит анонимный прокси-сервер или маскирующий сетевой экран, то пакеты будут приходить с другим IP-адресом. Это значит, что все пользователи, которые подключены через тот же Proxy или Firewall, также автоматически считаются авторизованными. Таким образом, поиск по IP-адресу записей в журнале не может дать полной защиты.

Наиболее предпочтительным является метод, при котором используется SMTP-авторизация (SMTP AUTH), которая описана в RFC 2554. В сервисе sendmail поддержка этого расширения существует еще с версии 8.10.

Если вы решили использовать SMTP AUTH, то убедитесь, что почтовые клиенты пользователей имеют возможность авторизации на сервере и при этом настроены на ее использование.

8.7. Postfix

В моей любимой Mandriva используется более простой в настройке почтовый сервер, который называется Postfix. Его можно также встретить в Debian и Suse. За конфигурацию этого сервера отвечает файл /etc/postfix/main.cf. Здесь параметров не так много, потому что вся конфигурация сервера разбита на несколько файлов, и main.cf является главным, но не единственным. Например, более полная версия этого файла — это main.cf.dist.

Мы рассмотрим лишь базовые параметры. Знание английского и хорошие комментарии в файле конфигурации помогут вам разобраться со многими значениями, если вдруг понадобится что-то из того, что мы не рассмотрели. Я же постарался выбрать наиболее важные параметры, которые покроют максимальное количество ваших потребностей.

Первый параметр, который может пригодиться, — myorigin. Как и большинство базовых параметров, его можно найти в файле main.cf.dist. Там вы увидите аж две строки следующего вида: