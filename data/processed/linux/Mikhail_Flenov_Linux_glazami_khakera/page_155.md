---
source_image: page_155.png
page_number: 155
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.49
tokens: 8055
characters: 2580
timestamp: 2025-12-24T04:23:17.369365
finish_reason: stop
---

В ОС Linux в качестве сетевого экрана используется программа iptables.

В ядре Linux определены три основные цепочки правил:

- Input — для входящих пакетов;
- Output — для исходящих пакетов;
- Forward — для пакетов, предназначенных другой системе.

Вы можете создавать свои цепочки, которые будут привязаны к определенной политике, но мы эту тему рассматривать не будем.

ОС Linux проверяет все правила из цепочки, которая выбирается в зависимости от направления передачи. Пакет последовательно обследуется на соответствие каждому правилу из цепочки. Если найдено хотя бы одно совпадение с описанием, то выполняются действия, указанные в данном правиле: DENY, REJECT или ACCEPT, т. е. система решает, пропускать пакет дальше или нет.

Цепочки несут в себе одну очень неприятную для новичков особенность. Допустим, что на вашем сервере вы хотите открыть 21-й порт только для себя. Для этого можно создать два правила:

1. Запретить все входящие пакеты на порт 21 сервера.
2. Разрешить пакеты на 21-й порт с компьютера с адресом 192.168.1.1.

На первый взгляд все верно, доступ запрещен для всех, а открыт только для одного IP-адреса. Проблема кроется в том, что если посылка будет с адреса 192.168.1.1, то проверка первого правила для параметров пакета даст положительный результат, поэтому будет произведен запрет и пакет удалится, и второе правило не сработает никогда.

Чтобы наша политика действовала верно, строки надо поменять местами. В этом случае сначала будет проверена запись "Разрешить пакеты на 21-й порт с компьютера с адресом 192.168.1.1", контроль пройдет успешно, а значит, пакет будет пропущен. Для остальных IP-адресов это правило не подойдет, и проверка продолжится. И вот тогда сработает запрет доступа на 21-й порт для всех пакетов.

Пакеты, направленные на другие порты, не будут соответствовать правилам, значит, над ними будут выполняться действия по умолчанию.

4.10.3. Firewall — не панацея

Установив Firewall, вы не получаете полной защиты, потому что существует множество вариантов их взлома, особенно если сетевой экран настроен некорректно. Мало просто установить программу, ее нужно настроить, контролировать и вовремя обновлять.

Firewall — это всего лишь замок на двери парадного входа. Злоумышленник редко пользуется парадным входом, он будет проникать в систему через черный или полезет в окно. Например, на рис. 4.2 показана защищенная сеть, а ее главная дверь — это выход в Интернет через сетевой кабель. Однако если на каком-нибудь клиентском компьютере стоит модем, то это уже черный ход, который не будет контролироваться сетевым экраном.