---
source_image: page_285.png
page_number: 285
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.36
tokens: 8027
characters: 2611
timestamp: 2025-12-24T04:27:01.357784
finish_reason: stop
---

□ icp_query_timeout n — время ожидания в миллисекундах. Чаще всего прокси-серверы расположены в локальной сети с высокой скоростью доступа, и ожидание более 2000 мс будет лишним. Иначе, если ответ не будет получен и придется обращаться в Интернет, пользователь ощутит большую задержку;

□ cache_peer_domain хост домен — разрешить для соседнего прокси-сервера, расположенного по адресу хост, работу только с указанными доменами. Например, следующая строка позволит обращаться к соседнему прокси-серверу с адресом 192.168.2.20 (который должен быть описан директивой cache_peer) только за тем, что относится к домену .com:

cache_peer_domain 192.168.2.20 .com

Все остальные запросы не будут направляться на указанный соседний сервер, чтобы не перегружать его лишней работой. С помощью этого параметра можно настроить в сети несколько прокси-серверов, где каждый будет отвечать за свой домен.

9.3.6. Дополнительные директивы

Рассмотрим оставшиеся представляющие для нас ценность параметры, которые я не смог отнести к определенным категориям:

□ redirect_rewrites_host_header параметр — разрешение (on) или запрет (off) на изменение поля Host в заголовках запросов. Если изменение разрешено, то сервер работает в анонимном режиме, иначе — в прозрачном. Анонимный режим требует дополнительных затрат, но позволяет использовать всего один IP-адрес для внешних соединений в сети любого размера. Прозрачный режим работает быстрее, но каждый компьютер должен иметь собственный IP-адрес, подходящий для работы с Интернетом;

□ redirector_access список — перечень запросов, проходящих через перенаправитель (redirector). Перенаправитель — это небольшая программа, которая просматривает запрашиваемые URL и, возможно, заменяет их. Этот механизм позволяет реализовать довольно эффективный фильтр, запрещающий, например, просмотр порнографии. Более подробную информацию можно найти в разд. 9.5.6 и в документации по squid. По умолчанию перенаправителю отправляются все запросы;

□ cache_mgr email — адрес E-mail, на который будет послано письмо в случае возникновения проблем с работой прокси-сервера;

□ append_domain домен — домен по умолчанию. Например, чаще всего пользователи работают с адресами домена .com. Вполне логичным будет указать в директиве именно его (append_domain .com). Если пользователь введет адрес, например, redhat, то squid сам добавит имя домена и направит на сайт redhat.com;

□ smtp_port n — номер порта, на котором нужно ожидать SMTP-запросы для отправки сообщений. Конечно же, SMTP — это такой протокол, который не требует кэширования, и работа через прокси-сервер не сэкономит трафик, но воз-