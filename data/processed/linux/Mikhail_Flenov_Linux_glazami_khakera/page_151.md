---
source_image: page_151.png
page_number: 151
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.48
tokens: 8055
characters: 2695
timestamp: 2025-12-24T04:23:09.062143
finish_reason: stop
---

А зачем фильтровать то, что уходит из сети? На первый взгляд, это бессмысленно, но резон есть, и он достаточно велик. Исходящий трафик могут отправлять и злоумышленники, я их перечислю:

- троянские программы, которые могут отправлять в сеть конфиденциальную информацию, или сами соединяются с хакером или с его сервером и берут команды с какого-нибудь файла;
- специализированные программы для обхода правил. Допустим, что вы запретили доступ к определенному порту извне. Хакер может поместить на сервере программу, которая будет перенаправлять трафик с разрешенного порта на запрещенный, наподобие туннелирования OpenSSL (Open Secure Sockets Layer, открытый протокол защищенных сокетов). Профессионалу написать такую утилиту — дело пяти минут;
- если запретить компьютерам извне инициировать соединения с вашим, то хакер может попытаться заставить ваш компьютер инициировать соединение со своим.

Возможных лазеек для проникновения очень много, и ваша задача закрыть максимальное их количество. Для этого под контролем должен быть трафик в обоих направлениях.

Когда я работал с сайтом электронной коммерции (от англ. e-commerce), где в базе данных содержалась информация о кредитных картах, то на большинстве серверов по умолчанию было запрещено любое соединение — как во внешний мир, так и во внутренний. Во внешний мир можно было подключаться лишь на определенные IP-адреса, то же самое и при подключении извне — только компьютеры с определенными IP-адресами имели доступ к серверам.

Протоколы

Протокол TCP используется как базовый для передачи данных по таким протоколам, как HTTP, FTP и др. Запрещать его не имеет смысла, потому что это основа, без которой вы лишитесь всех удобств, предоставляемых нам Всемирной сетью. Для передачи данных по протоколу TCP сначала устанавливается соединение с удаленным хостом, и только потом происходит обмен информацией. Благодаря этому подделка IP-адреса любого участника соединения усложняется, а иногда и становится невозможной.

Протокол UDP находится на одном уровне с TCP, но передает данные без установки соединения. Это значит, что пакет просто посылается в сеть на определенный адрес, и нет гарантии, что он дошел до адресата. Здесь нет никакой защиты от подделки IP-адреса, поэтому в качестве отправителя злоумышленник может указать что угодно, и наш сервер не увидит подвоха. Если нет особой надобности (ни одна установленная у меня программа не использует UDP), то я запрещаю прохождение таких пакетов в обе стороны.

Протокол ICMP служит для обмена управляющими сообщениями. Через него команда ping проверяет соединение с компьютером, а оборудование или программы сообщают друг другу об ошибках. Если этот протокол использовать только по