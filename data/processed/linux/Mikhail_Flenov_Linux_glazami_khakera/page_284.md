---
source_image: page_284.png
page_number: 284
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.76
tokens: 7963
characters: 2393
timestamp: 2025-12-24T04:26:54.723730
finish_reason: stop
---

cache_log файл — файл для хранения основной информации о кэше. По умолчанию это /var/log/squid/cache.log;

cache_store_log файл — журнал операций над объектами в кэше (убраны или помещены на какое-то время). По умолчанию используется файл /var/log/squid/store.log, но вы без проблем можете отключить этот журнал, указав в качестве значения none, потому что утилит для анализа сохраняемых данных нет, да и вообще пользы в таких данных мало, а расходы на их сохранение присутствуют;

log_mime_hdrs параметр — если в качестве параметра указано on, то в журнале access будут сохраняться заголовки MIME;

useragent_log — журнал, в котором сохраняется поле User-agent заголовков HTTP. Смысла в этом поле нет, потому что его легко подделать, и ничего полезного журнал не даст, поэтому по умолчанию он не используется.

В разд. 12.5 мы будем говорить о журналах различных сервисов Linux, а в разд. 12.5.4 подробно рассмотрим содержимое основного журнала squid — /var/log/squid/access.log.

9.3.5. Разделение кэша

Чтобы ваш сервер мог обмениваться запросами с другими squid-серверами, разделяя таким образом содержимое кэша, вы должны настроить соответствующий протокол. Для этого есть следующие директивы:

icp_port n — номер порта, который будет использоваться для ICP-протокола. По умолчанию задано значение 3130. Если указать 0, то протокол будет заблокирован;

htcp_port n — номер порта, который будет использоваться для ICP-протокола, работающего поверх TCP/IP. По умолчанию задано значение 4827. Если указать 0, то протокол будет заблокирован;

cache_peer адрес тип http_port icp_port опции — сервер, с которым можно обмениваться информацией. В качестве адреса указывается имя (или адрес) сервера, с которым предполагается взаимодействие. Параметр http_port определяет порт, на котором настроен HTTP-прокси, и соответствует параметру http_port в файле конфигурации squid. Атрибут icp_port определяет порт, на котором настроен протокол ICP, и соответствует параметру icp_port в файле конфигурации squid удаленной системы. В качестве типа может указываться одно из следующих значений:

• parent — старший в иерархии;
• sibling — равнозначный;
• multicast — широковещательный.

Последний параметр опции может принимать много различных значений, поэтому мы его рассматривать не будем, чтобы не утяжелять книгу. В комментариях, содержащихся в конфигурационном файле, каждый параметр подробно описан;