---
source_image: page_283.png
page_number: 283
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.81
tokens: 8098
characters: 2947
timestamp: 2025-12-24T04:27:01.289797
finish_reason: stop
---

☐ quick_abort_pct n — параметр аналогичен quick_abort_min, но в данном случае указывается процент уже полученной информации;

☐ negative_ttl n minutes — количество минут, которые нужно кэшировать негативный ответ сервера. Например, пользователь зашел на сервер и получил ошибку, которая может быть временной, поэтому нельзя кэшировать ответ на длительный срок. Значение по умолчанию 5 минут. Если пользователь обратится по тому же адресу по истечении этого времени, то копия из кэша не будет использоваться, а произойдет новая попытка зайти на сайт;

☐ positive_dns_ttl n hours — время в часах, в течение которого нужно кэшировать положительный результат DNS-запроса. В этот промежуток времени при повторных обращениях к DNS IP-адрес будет взят из кэша. По умолчанию задано значение 6 часов, в настоящее время его можно увеличить до 24 часов. Несколько лет назад IP-адреса имели тенденцию очень часто меняться, поэтому приходилось ограничивать время жизни запросов. Сейчас большинство сайтов имеют статические адреса, которые изменяются только при смене хостинга, а крупные порталы зарезервировали себе собственные постоянные IP-адреса. Если вы не хотите использовать кэширование IP-адресов, встроенное в squid, то можно установить этот параметр в 0;

☐ negative_dns_ttl n minutes — промежуток времени в минутах, в пределах которого нужно кэшировать негативный ответ DNS-сервера. Если по имени не найден IP-адрес, то, возможно, проблема с сервером имен, а не с именем. Такие вопросы чаще всего решаются в течение 2–3 минут, поэтому отрицательный ответ не стоит держать в кэше дольше, иначе все это время клиенты не смогут обратиться к сайту. Я делаю этот параметр равным 1 или 0, чтобы пользователи увидели нужный сайт сразу после устранения проблемы;

☐ range_offset_limit n KB — порядок передачи клиенту неполных данных. Пользователь может запросить не весь файл, а лишь его часть. В этом случае squid не может кэшировать такой файл, не скачав его целиком. Однако если запрошенная часть сильно смещена от начала файла, то это приведет к большой задержке перед тем, как squid начнет возвращать что-либо клиенту. Для контроля над такими ситуациями и предусмотрен этот параметр — если смещение запрошенной части более параметра n, то прокси-сервер запросит у сервера в Интернете лишь необходимую пользователю часть файла и не будет его кэшировать. Если указать значение -1, то squid будет всегда загружать весь файл и кэшировать его содержимое. Если же указать значение 0 (по умолчанию), то, напротив, squid будет скачивать только запрошенные части файлов и кэшировать их, лишь если запрошен весь файл.

9.3.4. Журналы

В конфигурационном файле есть несколько параметров, влияющих на работу прокси-сервера с журналом (журналы легко читаются в любом текстовом редакторе):

☐ cache_access_log файл — журнал, в котором сохраняется вся активность пользователей, а именно: HTTP- и ICP-запросы. По умолчанию этот параметр равен /var/log/squid/access.log;