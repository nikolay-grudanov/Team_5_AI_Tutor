---
source_image: page_297.png
page_number: 297
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.76
tokens: 7942
characters: 2248
timestamp: 2025-12-24T04:27:21.147319
finish_reason: stop
---

пользователей должен быть зарезервирован высокоскоростной канал связи. Но нельзя повысить скорость одному человеку без ущерба остальным.

Если кому-то требуется полоса гарантированной пропускной способности для работы с приложениями, требующими высокой скорости обмена (например, для проведения презентаций), вы должны зарезервировать для них более мощный, чем для остальных, канал.

Ограничение внешнего канала достаточно легко выполнить с помощью squid. Директивы, которые нужно использовать, можно увидеть в следующем примере:

delay_pools 3
delay_class 1 1
delay_class 2 2
delay_class 3 1
delay_parameters 1 256000/256000
delay_access 1 deny all
delay_access 1 allow admins
delay_parameters 2 256000/256000 4000/8000
delay_access 2 allow all
delay_access 2 deny admins
delay_parameters 3 64000/64000
delay_access 3 deny all
delay_access 3 allow bigboss

Этот код нужно добавить в файл конфигурации /etc/squid/squid.conf после комментария:

# DELAY POOL PARAMETERS (all require DELAY_POOLS compilation option)
# ---------------------------------------------------------------

Большинство параметров здесь заданы по умолчанию, и их следует заменить в соответствии с существующей у вас ситуацией.

Давайте подробно рассмотрим конфигурацию. Для начала нужно определить, сколько у вас будет пулов (правил, описывающих скорость доступа). Для этого используется директива delay_pools n, где n — это количество пулов. По умолчанию n равно нулю, и нет никаких ограничений. Мы создадим три пула, поэтому в примере указано число 3.

После этого нужно определить, к какому классу относится пул. Это делается с помощью директивы delay_class n c, где n — это порядковый номер, а c — номер класса. Каждая строка с директивой delay_class должна иметь свой порядковый номер, который начинается с 1. В нашем примере три строки, поэтому в первой параметр n равен 1, во второй — 2, а в третьей — 3.

Номеров класса (второй параметр) может быть три:

□ 1 — ограничение канала происходит для всей сети. Например, у вас внешний канал 256 Кбит/с, вы можете его уменьшить для всех до 64 Кбит/с;

□ 2 — сузить можно общий канал, а также для каждого пользователя индивидуально. В этом случае можно понизить общий канал до 64 Кбит/с, а каждому пользователю — до 4 Кбит/с;