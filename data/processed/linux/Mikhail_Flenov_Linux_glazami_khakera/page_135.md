---
source_image: page_135.png
page_number: 135
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.13
tokens: 8033
characters: 2587
timestamp: 2025-12-24T04:22:39.450537
finish_reason: stop
---

4.4. Типичные ошибки распределения прав

Один мой начальник в банальном файле Excel вел на сервере план работ, в котором указывалось, что, кто и когда должен сделать. Этот файл был доступен для чтения всем, но его нельзя было изменять. Права на изменения были только на каталог, но не на нужный файл. Как изменить информацию в файле? Остановитесь и подумайте. Буквально через абзац я расскажу, как решить эту проблему.

Давайте рассмотрим классический пример с файлами и каталогами. Допустим, что у вас на каталог поставлены максимальные права drwxrwxrwx (или 777), а на все файлы в нем — -rw-------. По идее, при таком наборе прав только владелец файла может его модифицировать, но сейчас вы увидите, что это не совсем так. Да, злоумышленник не может изменить сам файл, но список файлов в каталоге ему доступен — разрешены и чтение, и корректировка. Благодаря этому взломщик просто удалит нужный файл и создаст другой с новыми правами без каких-либо преград.

Теперь ясно, как можно изменить файл, недоступный для записи? Достаточно прочитать файл и сохранить его содержимое в другом файле — например, выполнив команду:

cat имязапрещенногофайла >> имянашегофайла

Эта команда скопирует содержимое файла в новый. Если файл не существовал, то он будет создан из-под вашей учетной записи. Значит, вы будете его владельцем и сможете делать с ним все, что угодно. Теперь можно удалить файл, созданный начальником, и заменить его своей копией. Поскольку вы — владелец, вы можете изменить этот файл, подправив нужную информацию, а потом просто изменить владельца и дату изменения, чтобы никто ничего не заподозрил.

Хитро? Ничего хитрого, но почему-то мало кто обращает на такую мелочь внимание, хотя это, собственно, не мелочь, а дыра в безопасности. Бессмысленно запрещать изменение файла, если предоставлены полные права на каталог.

Попробуйте выполнить следующие команды:

su root
ls -al >> /home/flenov/1.txt
ls -al /home/flenov/1.txt
su flenov
rm /home/flenov/1.txt

В первой строке переключаемся под пользователя root, чтобы от его имени выполнить команды. Вторая команда отображает файлы из текущего каталога, а результат сохраняет в файл /home/flenov/1.txt. Каталог выбран не случайно — это домашний каталог пользователя flenov, в котором он может делать все, что хочет.

Следующая строка выполняет команду ls -al к только что созданному файлу, чтобы просмотреть о нем подробную информацию. Убедитесь, что владелец root и права доступа равны -rwxr--r--. Если это не так, то запретите изменение файла для группы и для всех. В принципе, достаточно запретить изменение для всех, потому