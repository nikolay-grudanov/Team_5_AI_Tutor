---
source_image: page_279.png
page_number: 279
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.07
tokens: 7963
characters: 2452
timestamp: 2025-12-24T04:26:43.954307
finish_reason: stop
---

9.2. Кэширование

Я полагаю, что сейчас не так часто в каких-то сетях устанавливается прокси-сервер для кэширования трафика, приходящего из Интернета. Каналы стали настолько широкими и скоростными, а Интернет настолько огромный и динамично развивающийся, что кэшировать практически бесполезно. Страницы новостных лент меняются постоянно, и если в какой-то момент закэшировать графику той или иной страницы, то через час на этой странице графика окажется уже другой, и из кэша будет доставлено пользователю всего несколько статичных файлов. Стоит эта экономия трафика затрат на сервер и его сопровождение? Трудно сказать...

Мне кажется, что сейчас прокси-сервер чаще используется владельцами сайтов с особенно высокой нагрузкой. Этот сервис очень быстрый и неплохо справляется в качестве первой линии обороны против наплыва большого трафика. По крайней мере, я использую squid именно так, и давайте посмотрим, как это работает.

Этот сервис устанавливается на серверы, которые принимают запросы от пользователя. Если запрашиваемый файл есть в кэше, то он тут же возвращается пользователю, экономя ресурсы остальных серверов. Если файла нет, то он запрашивается уже у одного из веб-серверов. А их у больших сайтов может быть несколько.

9.3. Прокси-сервер squid

Как я уже отмечал, самым распространенным прокси-сервером является squid. Этот сервер имеет достаточно длинную историю, и за время его существования в нем реализовано много возможностей.

Основной конфигурационный файл для squid — /etc/squid/squid.conf (в некоторых системах место его расположения /etc/squid.conf). Файл очень велик, и приводить его полностью нет смысла, т. к. значительную его часть занимают подробные комментарии по использованию директив.

Рассмотрим основные команды, которые доступны нам для управления прокси-сервером. Как обычно, все параметры, влияющие на производительность и безопасность, мы разберем подробно. Остальные настройки будут рассмотрены более поверхностно — с ними можно поближе познакомиться, прочитав комментарии из конфигурационного файла.

9.3.1. Директивы настройки HTTP

При подключении к Интернету пользователи первым делом загружают веб-страницы. Если используется squid, то необходимо правильно настроить протокол HTTP. Для решения этой задачи в файле squid.conf есть следующие директивы:

☐ http_port n — номер порта, через который будет происходить подключение.
    Порты, на которых сервер будет ожидать подключения клиентов, — это первое,