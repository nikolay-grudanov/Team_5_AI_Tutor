---
source_image: page_349.png
page_number: 349
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.85
tokens: 6410
characters: 1395
timestamp: 2025-12-24T04:03:42.639904
finish_reason: stop
---

Когда в каталоге var/session накопится очень много файлов, это приведет к тому, что обычная команда rm * работать не будет — вы получите сообщение о том, что список файлов слишком длинный. Другими словами, просто так их уже не удалишь.

Вторая часть проблемы в том, что на диске, на котором хранится каталог с сессиями, могут закончиться свободные иноды. Свободное пространство еще будет, но не будет свободных блоков для хранения файлов. Эта проблема характерна для файловых систем, которые используют минимум один блок для хранения одного файла. Представьте, что размер блока равен 4096 байтов, а файл занимает 200 байтов. Тогда эти 200 байтов займут весь блок размером 4096 байтов.

Для диагностики проблемы помогут следующие команды:

df -h
df -i
cd var/session
ls -l | wc -l

Первая возвращает информацию о свободном пространстве, вторая — об использовании инодов, последние 2 команды — подсчитывают количество файлов сессий. Несколько миллионов сессий за один месяц — вполне нормальное число.

Все это приводит к тому, что сама Magento начинает изрядно подтормаживать, а если закончатся свободные иноды, то сервер перестанет функционировать, поскольку система не сможет записать данные на диск.

20.3.1. Решение 1: сценарий

Следующий сценарий удаляет все файлы из каталога сессий:

#!/bin/bash
# измените путь к каталогу с сессиями
cd /путь/var/session
for i in sess_*; do rm -fv $i; done