---
source_image: page_173.png
page_number: 173
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.84
tokens: 6489
characters: 1798
timestamp: 2025-12-24T04:00:11.655089
finish_reason: stop
---

Далее попробуем подключиться к серверу:

$ ftp <IP-адрес сервера>

9.2.4. Аутентификация с помощью MySQL

При большом количестве пользователей хранить учетные записи удобнее в таблице MySQL. Во-первых, удобнее управлять таблицей в базе данных, чем редактировать /etc/passwd. С помощью простых SQL-запросов можно легко деактивировать пользователей, которые были зарегистрированы в определенный период или соответствующих другим критериям. При использовании системной аутентификации файл /etc/passwd придется редактировать вручную, да еще и каждую запись отдельно. Во-вторых, FTP-пользователи (которые обычно являются вашими клиентами) не будут смешаны с системными пользователями (с персоналом компании), что есть хорошо — вы всегда сможете понять, кто есть кто.

Для реализации аутентификации через MySQL нужно установить плагин proftpd-mysql, который обеспечит аутентификацию через MySQL. Как правило, это делается путем установки соответствующего пакета (пакет proftpd-mysql).

Далее в область глобальных параметров конфигурационного файла proftpd.conf нужно добавить строки:

SQLAuthTypes Plaintext
SQLAuthenticate users
SQLConnectInfo ftpusers@localhost:3306 ftp
password
SQLUserInfo `users` `username` `password` `uid` `gid` `homedir` `shell`

Первая строка определяет тип аутентификации. Мы будем хранить в БД пароли в открытом виде (в незашифрованном виде), поэтому используем тип аутентификации Plaintext. Можно, конечно, использовать опцию Backend и шифровать пароли с помощью MySQL-функции PASSWORD().

Директива SQLAuthenticate указывает, кого мы будем аутентифицировать - пользователей.

Директива SQLConnectInfo задает параметры подключения к MySQL-серверу. Здесь:

• ftpusers - название базы данных, которая будет содержать информацию о пользователях;
• localhost - имя MySQL-сервера;