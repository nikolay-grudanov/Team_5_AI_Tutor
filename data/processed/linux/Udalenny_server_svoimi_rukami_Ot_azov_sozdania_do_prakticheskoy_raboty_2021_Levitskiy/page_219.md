---
source_image: page_219.png
page_number: 219
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 19.43
tokens: 6409
characters: 1384
timestamp: 2025-12-24T04:00:56.540543
finish_reason: stop
---

На SSH-сервере вводим следующую команду, помещающую ваш ключ в файл authorized_keys:

cat /root/id_rsa.pub >> /root/.ssh/authorized_keys

Перезапустите SSH-сервер:

# service ssh restart

Теперь переходим на SSH-клиент и попробуем скопировать файл на сервер. На этот раз команда ssh не должна запрашивать пароль:

scp /root/.ssh/id_rsa.pub root@example.com:/root/

Все, наш SSH-сервер настроен. Не забудьте на нем создать каталог /backups и можно приступать к тестированию сценария резервного копирования.

Когда вы убедитесь, что все работает, как нужно, добавьте вызов сценария /bin/backup на вашем веб-сервере в таблицу расписания планировщика (см. гл. 16).

Теперь на секундочку задумайтесь, что мы только что создали. Мы создали систему резервного копирования с ротацией резервных копий и возможностью хранения резервных копий на удаленной машине. И все это - стандартными средствами.

Если у вас есть несколько серверов, вы можете скопировать сценарий backup на каждый сервер (возможно, придется модифицировать пути, в зависимости от настроек и специфики сервера) и настроить его на автоматический запуск. Единственный мой совет - настраивайте резервное копирование каждого сервера на разное время, например, с промежутком в полчаса или даже час, если информации много. Если вы создаете резервную копию первого сервера в 4 утра, второго создавайте в 4:30, третьего в 5:00 и т.д.