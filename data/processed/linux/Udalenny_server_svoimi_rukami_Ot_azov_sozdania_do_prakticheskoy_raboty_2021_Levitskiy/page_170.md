---
source_image: page_170.png
page_number: 170
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.72
tokens: 6475
characters: 1692
timestamp: 2025-12-24T04:00:01.844722
finish_reason: stop
---

Директива MaxClientsPerUser задает, сколько соединений может создать один пользователь. Чтобы один пользователь не залогинился 30 раз и не захватил все 30 процессов, рекомендуется ограничить это значение до 1:

MaxClientsPerUser 1 "Only one connection at a time."

Первый параметр этой директивы - число соединений. Второй - сообщение об ошибке, которое будет выведено.

Настройки для медленных соединений

Если у клиента медленное или нестабильное соединение, бывает так, что он может начать передачу файла, но потом связь может оборваться. Можно задать тайм-аут, определяющий, сколько нужно ждать в такой ситуации до разъединения. Медленные и нестабильные соединения уходят в прошлое, поэтому можно понизить время ожидания с 5 минут (300 секунд) до 2 минут:

TimeoutStalled 120

Это делается специально, чтобы процесс proftpd завершился как можно быстрее и не занимал драгоценное процессорное время.

Максимальная продолжительность сессии с момента аутентификации задается директивой TimeoutSession. По умолчанию сессия составляет 1 час, чего вполне хватит даже для загрузки больших файлов. Например, при относительно низкой скорости загрузки в 1 Мбайт/с файл размером 1 Гб загрузится примерно за 1024 секунды. То есть за одну такую сессию пользователь сможет загрузить три таких файла. Если есть необходимость загрузки больших объемов данных, этот параметр можно увеличить.

Настройки для анонимных пользователей

В некоторых случаях нужно разрешить работу анонимных пользователей. Сервер ProFTPD может одновременно работать, как в обычном, так и в автономном режиме. Приведенная далее конфигурация разрешает загрузку файлов в каталог uploads, который пользователи не могут прочитать - это