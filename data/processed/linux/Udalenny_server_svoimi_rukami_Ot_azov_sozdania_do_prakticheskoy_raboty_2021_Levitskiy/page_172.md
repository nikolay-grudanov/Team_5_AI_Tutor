---
source_image: page_172.png
page_number: 172
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.86
tokens: 6469
characters: 1742
timestamp: 2025-12-24T04:00:06.106250
finish_reason: stop
---

AuthOrder mod_auth_unix.c

Если пользователей немного и все они зарегистрированы через /etc/passwd, это неплохой вариант. При желании можно использовать аутентификацию PAM:

AuthOrder mod_auth_pam.c* mod_auth_unix.c

Если же пользователей очень много (несколько сотен или тысяч), удобнее для аутентификации использовать MySQL. В этом случае учетные записи FTP-пользователей будут храниться не в /etc/passwd, а в отдельной таблице MySQL. Настройка этого способа аутентификации будет рассмотрена в следующем разделе, поскольку все не так просто, как кажется на первый взгляд.

Ускорить аутентификацию может отключение следующих директив:

IdentLookups off
UseReverseDns off

Первая строка отключает Ident-запросы (давно уже не используются), вторая - запрещает разрешать IP-адреса пользователей в доменные имена. При входе пользователя на сервер его IP-адрес автоматически преобразовывается в доменное имя. Мы отключили данный функционал, чтобы аутентификация проходила быстрее. При желании вы всегда сможете разрешить IP-адрес в доменное имя вручную, если вам это будет нужно.

Директива TimeoutLogin задает, сколько времени можно потратить пользователю на аутентификацию. По умолчанию - 60 секунд. Сейчас никто не вводит пароль вручную, поэтому нет смысла ждать 60 секунд. FTP-клиент вводит пароль моментально. Зато такая настройка может «подвесить» сервер, например, злоумышленник подключается к серверу под множеством учетных записей и заставляет сервер ждать 60 секунд для каждой из них. Так что меняем это значение на 10. Десять секунд вполне достаточно на предоставление пароля.

TimeoutLogin 10

Как все будет готово, запустим сервер:

sudo systemctl start proftpd

После запуска просмотрим его состояние:

sudo systemctl status proftpd