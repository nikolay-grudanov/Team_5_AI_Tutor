---
source_image: page_213.png
page_number: 213
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.08
tokens: 6655
characters: 2292
timestamp: 2025-12-24T04:01:07.897772
finish_reason: stop
---

13.3. Разработка сценария резервного копирования

Представим, что у нас есть веб-сервер хостинг-провайдера и нужно обеспечить его резервное копирование. Повторюсь, я буду использовать только стандартные средства, чтобы показать, насколько гибким может быть Linux. Что же касается уже готовых комплексов резервного копирования, то у каждого из них есть своя документация и множество статей в Интернете на русском языке. Поэтому не вижу смысла переписывать руководство еще раз другими словами.

Итак, приступим. Первым делом настройте сервер, чтобы он работал. Убедитесь, что настроили все и вам больше не придется вносить изменения в конфигурацию сервера. Будем считать, что пользовательские данные будут, как обычно, храниться в каталоге /home. Базы данных пользователей, как обычно, хранятся в /var/lib/mysql/<имя>. Для упрощения нашей конфигурации будем считать, что одному пользователю будет принадлежать только одна база данных, которая совпадает с именем пользователя. Например, есть сайт www.example.com, он принадлежит пользователю examplecom, его HTML-код хранится в каталоге /home/examplecom/public_html, а база данных - в каталоге /var/lib/mysql/examplecom.

Сразу рекомендую настраивать RAID-массивы, чтобы была возможность горячей замены, и вы могли на лету восстанавливать работоспособность сервера в случае выхода из строя одного из жестких дисков.

После этого используйте инструмент клонирования системы (или Clonezilla или Remastersys Backup, если у вас Debian/Ubuntu) для создания эталонного диска. Созданный образ запишите на болванку и положите где-то по дальше от вашего сервера - в сейф или вообще унесите себе домой, если правила компании разрешают делать это. При создании эталонного диска каталог /home включать в состав образа не нужно.

Если с сервером произойдет катастрофа, которая уничтожит все его диски, то ни RAID, ни что-либо еще не спасет его. Зато вы сможете взять другой сервер и произвести установку с эталонного диска. При этом вам уже не придется тратить время на его настройку. Итак, можно считать, что мы обезопасили сервер от полного фиаско.

Теперь нужно позаботиться о создании резервной копии данных. Нам нужно копировать подкаталоги каталога /home и /var/lib/mysql. В первом хранятся HTML-код (и вспомогательные файлы) сайтов пользователей, а во