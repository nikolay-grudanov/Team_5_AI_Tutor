---
source_image: page_169.png
page_number: 169
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 40.28
tokens: 6677
characters: 2392
timestamp: 2025-12-24T04:00:14.139633
finish_reason: stop
---

торые могут войти на сервер с одного IP-адреса. В корпоративной сети все просто — один клиент — один IP-адрес, поэтому можем написать так:

MaxClientsPerHost    1

Если же к FTP-серверу разрешено подключаться пользователям Интернета, то нужно помнить как раз о тех самых небольших провайдерах. Вспомните об университетах, библиотеках и о прочих местах, где предоставляется доступ к Интернету, но, как правило, в таких местах никто не заботится об уникальности IP-адреса и все работают через один IP-адрес шлюза. Получается, что к вашему серверу могут подключиться несколько пользователей из этой сети и у всех них будет одинаковых IP-адрес, хотя сами пользователи будут разные. Обычно такие ситуации — редкие, поэтому можно ограничиться 2-3 клиентами. Но бывают исключения — у вас может быть очень популярный сервер, например, с развлекательным контентом или же вы знаете, что где-то есть другая сеть, практически все пользователи которой будут подключаться к вашему серверу. Здесь решать только вам. Пока установим ограничение на уровне 3 пользователей с одного IP-адреса:

MaxClientsPerHost    3

Директива MaxInstances задает максимальное число одновременных клиентов. Чтобы предотвратить DoS-атаку, не устанавливайте большие значения для этого параметра:

MaxInstances    20

Опасность этого параметра в том, что более 20 пользователей не смогут работать одновременно. Представим, что вы уже превратились в популярного хостинг-провайдера и у вас уже есть более 500 клиентов. Вероятность, что в бизнес-время более 20 из 500 человек захотят внести изменения в свои сайты, довольно высока. Здесь нужно исходить из поставленных задач. Возможно, придется поднять ограничение до 50 (10% от всего количества пользователей). В любом случае, наверняка у вас будет служба поддержки, в которую будут обращаться пользователи. Если возникнут проблемы, тогда вы всегда сможете поднять этот лимит.

Внимание! Каждый процесс proftpd занимает около 2.5 Мб, следовательно, 100 процессов займут всего 250 Мб. Как видите, память расходуется экономно. Но нужно помнить о загрузке процессора. При закачке одного файла один процесс proftpd занимает от 10 до 30% процессорного времени одного ядра. Вот и считаем, что если даже один процесс расходует 10% процессорного времени одного ядра, всего 10 процессов «сожрут» одно ядро процессора. 40 одновременных процессов окажут ощутимое влияние даже на четырехядерный