---
source_image: page_354.png
page_number: 354
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.26
tokens: 6427
characters: 1620
timestamp: 2025-12-24T04:04:07.286135
finish_reason: stop
---

postrotate
systemctl reload daemond
endscript
}

Первая строчка задает файлы журналов. В нашем случае — это все log-файлы из каталога /var/log/daemond. С первыми пятью командами вы уже знакомы. Команда create определяет, что после ротации будет создан новый пустой файл журнала с правами 0640, владельцем daemon-data и группой daemon-data. Если ваш сервис выполняется от имени какого-то пользователя (например, daemon-data), а не от root, то очень важно указать правильно имя пользователя и группы.

Параметр sharedscripts означает, что скрипт postrotate будет выполняться только один раз, а не после обработки каждого файла.

Параметры postrotate и endscript позволяют указать скрипт, который будет запущен после того, как файл журнала обновится. В примере приложение перезагружается.

Осталось настроить Logrotate на автоматический запуск. Чтобы эта утилита запускалась автоматически, от имени root введите команду crontab -e и в появившемся редакторе добавьте строку:

10 * * * * /usr/sbin/logrotate /etc/logrotate.conf

Сохраните файл и выполните выход из редактора. Мы создали расписание планировщика, которое будет выполнять logrotate на 10-ой минуте каждого часа. Конфигурация будет загружаться из файла /etc/logrotate.conf.

20.5. Десятка утилит для мониторинга сервера

Мониторинг сервера — одна из обязанностей администратора, а сейчас мы рассмотрим некоторые полезные инструменты, позволяющие сделать выполнение этой обязанности комфортнее. В этом разделе будут рассмотрены только простые утилиты, не требующие сложной настройки и даже установки — многие из них устанавливаются по умолчанию. Конечно, для пол-