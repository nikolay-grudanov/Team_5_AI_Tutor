---
source_image: page_115.png
page_number: 115
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.63
tokens: 5888
characters: 2179
timestamp: 2025-12-24T04:12:07.937162
finish_reason: stop
---

вставки. Мы можем даже применять команды Ex к содержимому окна режима командной строки!

Открыв окно режима командной строки нажатием q:, мы можем решить нашу проблему, как показано ниже:

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td>write<br>!ruby %</td>
  </tr>
  <tr>
    <td>Au|<Esc></td>
    <td>write |<br>!ruby %</td>
  </tr>
  <tr>
    <td>J</td>
    <td>write |<br>!ruby %</td>
  </tr>
  <tr>
    <td>:s/write/update</td>
    <td>update |<br>!ruby %</td>
  </tr>
</table>

Если теперь нажать клавишу <CR>, редактор выполнит команду :update | !ruby %, как если бы мы ввели ее в режиме командной строки.

Когда окно режима командной строки открыто, оно всегда получает фокус ввода. Это означает, что мы не сможем переключиться в другое окно, не закрыв этого. Закрыть окно режима командной строки можно командой :q (как любое другое окно Vim) или нажав <CR>.

Имейте в виду, что при нажатии <CR> в окне режима командной строки команда выполняется в контексте активного окна, то есть в контексте окна, которое было активно до открытия окна режима командной строки. Редактор Vim никак не обозначает окно, которое было активным перед открытием окна режима командной строки, поэтому будьте внимательны, если пользуетесь функцией разбиения окон!

А как быть, если в середине ввода команды Ex мы обнаруживаем, что нам нужны более мощные возможности правки? Находясь в режиме командной строки, можно нажать комбинацию <C-f>, чтобы переключиться в окно режима командной строки, сохранив при этом наполовину введенную команду. Ниже перечислено несколько способов открытия окна режима командной строки:

<table>
  <tr>
    <th>Команда</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td>q/</td>
    <td>Открыть окно режима командной строки с историей поиска</td>
  </tr>
  <tr>
    <td>q:</td>
    <td>Открыть окно режима командной строки с историей команд Ex</td>
  </tr>
  <tr>
    <td>C - f</td>
    <td>Перейти из командной строки в окно режима командной строки</td>
  </tr>
</table>

Команды q: и :q легко перепутать. Я уверен, каждый, кто когда-либо пользовался Vim, случайно открывал окно режима командной