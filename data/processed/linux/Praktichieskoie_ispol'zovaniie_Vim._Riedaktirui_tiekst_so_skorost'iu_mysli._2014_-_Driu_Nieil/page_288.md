---
source_image: page_288.png
page_number: 288
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.50
tokens: 5648
characters: 1643
timestamp: 2025-12-24T04:15:37.648626
finish_reason: stop
---

На совпадения с подвыражениями можно ссылаться с помощью нотации \n. То есть в строке замены ссылка \1 будет ссылаться на поле с именем, \2 — на поле с фамилией и \3 — на поле с электронным адресом. Разделив каждую строку на отдельные поля, мы можем переупорядочить их в соответствии с условиями задачи, то есть \3,\2\,1 — электронный адрес, фамилия, имя.
Ниже приводится результат выполнения этой команды:

email,first name,last name
drew@vimcasts.org,drew,neil
john@example.com,john,doe

Рецепт 94. Выполнение арифметических операций в строке замены

Поле замены в команде подстановки необязательно должно содержать простую строку. В нем можно указывать выражения на языке сценариев Vim и использовать результат в качестве строки замены. То есть единственной командой мы можем преобразовать все теги заголовков в документе HTML.

Допустим, что у нас имеется такой HTML-документ:

substitution/headings.html
http://media.pragprog.com/titles/dnvim/code/substitution/headings.html

<h2>Heading number 1</h2>
<h3>Number 2 heading</h3>
<h4>Another heading</h4>

Нам нужно увеличить уровень каждого заголовка, то есть заголовок <h2> превратить <h1>, <h3> — в <h2> и т. д. Проще говоря, нужно вычесть единицу из числовой части всех HTML-тегов заголовков.

Для решения этой задачи воспользуемся командой подстановки. Вот основная идея: мы разработаем шаблон, соответствующий числовым частям HTML-тегов заголовков. Затем разработаем команду подстановки, использующую выражение на языке сценариев Vim для вычитания единицы из сохраненной числовой части. Когда такая команда будет применена ко всему файлу, она изменит все HTML-теги заголовков в файле.