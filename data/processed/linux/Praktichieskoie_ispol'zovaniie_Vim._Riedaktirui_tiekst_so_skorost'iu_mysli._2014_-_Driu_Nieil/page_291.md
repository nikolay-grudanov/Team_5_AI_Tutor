---
source_image: page_291.png
page_number: 291
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.45
tokens: 5621
characters: 1587
timestamp: 2025-12-24T04:15:42.815205
finish_reason: stop
---

сложное — написать выражение, принимающее одно слово и возвращающее другое. Решим эту часть головоломки первой.

Возврат другого слова

Нам даже не нужно создавать функцию, чтобы решить задачу. Достаточно будет воспользоваться структурой-словарем, создав две пары ключ/значение. Попробуйте ввести в Vim следующие команды:

⇒ :let swapper={"dog":"man","man":"dog"}
⇒ :echo swapper["dog"]
    man
⇒ :echo swapper["man"]
    dog

Если теперь передать словарю swapper ключ "dog", он вернет "man", и наоборот.

Поиск совпадений с двумя словами

Вы уже придумали шаблон для поиска? Вот он:

⇒ /\v(<man>|<dog>)

Этот шаблон просто совпадает с целым словом «man» или с целым словом «dog». Круглые скобки используются для сохранения совпадения, чтобы на него можно было сослаться в строке замены.

Все вместе

Теперь объединим все вместе. Для начала выполним команду поиска. Она должна найти все вхождения слов «dog» и «man». Затем, когда мы попробуем выполнить команду подстановки, можно будет оставить поле шаблона пустым (как описывалось в рецепте 90 выше).

Для строки замены нам необходимо подготовить небольшое выражение на языке сценариев Vim. То есть мы будем использовать специальный символ \=. На этот раз мы не будем присваивать словарь переменной, а просто создадим временный словарь для однократного использования.

Обычно для ссылки на совпадения с подвыражениями в Vim используется форма записи \(1, \(2 (и т. д.). Но в выражениях сохраненные совпадения необходимо извлекать вызовом функции submatch() (см. :h submatch() http://vimdoc.sourceforge.net/htmldoc/eval.html#submatch()).