---
source_image: page_300.png
page_number: 300
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.17
tokens: 5630
characters: 1610
timestamp: 2025-12-24T04:15:55.309919
finish_reason: stop
---

Рецепт 98. Удаление строк, соответствующих шаблону

Удаление соответствующих строк командой :g/re/d

Допустим, что нам требуется выбросить все, кроме содержимого тегов <a>. В этом файле содержимое каждой ссылки находится в отдельной строке, а во всех остальных строках только открывающие и закрывающие теги. То есть если мы сможем создать шаблон, соответствующий любому тегу HTML, мы сможем использовать в команде :global для удаления любых строк, соответствующих этому шаблону.

О происхождении слова «grep»

Взгляните на следующую сокращенную форму команды :global:

⇒ :g/re/p

Слово re в данном случае означает «regular expression» (регулярное выражение), а «p» соответствует команде :print, которая по умолчанию подставляется в пустое поле [cmd]. Если удалить символы /, мы получим слово «grep».

Все это сделают следующие команды:

⇒ /\v<\//?\w+>
⇒ :g//d

Если применить эти две команды к файлу выше, в нем останутся только строки:

Show invisibles
Tabs and Spaces
Whitespace preferences and filetypes

В команде :global можно оставить поле шаблона пустым, как и в команде :substitute, и Vim будет повторно использовать последний шаблон (см. рецепт 90 в главе 14). Это означает, что конструирование регулярного выражения можно начать с поиска более широкого совпадения и затем уточнить его в несколько этапов, как было показано в рецепте 85 в главе 13.

Регулярное выражение в команде :global сопоставляется в самом волшебном режиме (very magic), описанном в рецепте 73 в главе 12. В данном случае совпадение должно начинаться открывающей угловой скобкой (\<), за которой следуют необязательный слэш (\/?)