---
source_image: page_303.png
page_number: 303
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.41
tokens: 5688
characters: 1921
timestamp: 2025-12-24T04:15:59.258995
finish_reason: stop
---

Вся хитрость здесь заключена в адресации регистра заглавной буквой A. Таким способом мы сообщаем редактору, что он должен добавлять новый текст в конец регистра, тогда как при адресации строчной буквой а Vim будет затирать прежнее содержимое регистра в каждой операции копирования (захвата). Эту команду :global можно интерпретировать как «Каждую строку, соответствующую шаблону /TODO/, добавить в регистр a».

Если теперь выполнить команду :reg a, мы увидим, что регистр содержит два комментария TODO. (Для ясности я отформатировал вывод команды :reg a, в действительности же Vim выводит все в одну строку, вставляя символы ^J на место символов перевода строки.) После этого можно было бы открыть новый буфер, создав еще одно окно в рабочей области, и командой "ap вставить содержимое регистра a в новый документ.

Обсуждение

В этом примере мы просто выбрали два комментария TODO, что достаточно быстро можно было бы сделать и вручную. Но описанный прием хорошо масштабируется. Если документ будет содержать десятки комментариев TODO, на их выборку будет затрачено ровно столько же усилий с нашей стороны.

Мы могли бы даже объединить команду :global с командой :bufdo или :argdo, чтобы выбрать все комментарии TODO из множества файлов. Я оставляю создание такой команды вам в качестве самостоятельного упражнения, но некоторые подсказки, касающиеся процесса разработки, вы найдете в рецепте 96 в главе 14.

Ниже приводится альтернативное решение:

⇒ :g/TODO/t$

В нем используется команда :t, с которой мы познакомились в рецепте 29 в главе 5. Вместо добавления каждого комментария TODO в регистр она просто копирует их в конец файла. После выполнения этой команды можно перейти в конец файла и просмотреть список извлеченных комментариев TODO. Этот прием выглядит более простым, потому что не вынуждает выполнять операции с регистрами. Но он плохо адаптируется для выполнения в комбинации с командами :argdo и :bufdo.