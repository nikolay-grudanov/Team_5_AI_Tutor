---
source_image: page_329.png
page_number: 329
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.78
tokens: 5720
characters: 1982
timestamp: 2025-12-24T04:16:33.178435
finish_reason: stop
---

По умолчанию nodelint подсвечивает ошибки красным цветом, используя ANSI-коды цвета. Настройка NODE_DISABLE_COLORS=1 отключает выделение цветом, что упрощает поиск ошибок в выводе.

Далее нужно настроить Vim, чтобы он смог разобрать вывод программы nodelint и на его основе построить список результатов. Решить эту проблему можно двумя способами: настроить программу nodelint, чтобы выводимая ею информация напоминала вывод программы make, которую Vim уже понимает, или научить Vim распознавать вывод программы nodelint с настройками по умолчанию. Поскольку эта книга посвящена редактору Vim, реализуем второе решение.

Заполнение списка с результатами на основе вывода Nodelint

Научить Vim распознавать вывод, генерируемый командой :make, можно с помощью параметра настройки errorformat (см. :h 'errorformat' i http://vimdoc.sourceforge.net/htmldoc/options.html#'errorformat'). Значение по умолчанию этого параметра можно получить следующей командой:

⇒ :setglobal errorformat?
errorformat=%*[^"] "%f"%*\D%l: %m,"%f"%*\D%l: %m, ...[abridged]...

Знакомые с функцией scanf (в языке С) сразу поймут основную идею. Каждый символ с предшествующим знаком процента имеет специальное значение: %f соответствует имени файла, %l — номеру строки, а %m — тексту сообщения об ошибке. Полный список специальных символов можно найти в разделе справки :h errorformat i http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat.

Для анализа вывода программы nodelint можно использовать следующую строку формата:

⇒ :setlocal efm=%A%f\,\ line\ %l\,\ character\ %c:%m,%Z%.%#,%-G%.%#

Теперь при вызове команды :make Vim будет использовать эту строку формата для анализа вывода программы nodelint. Для каждого предупреждения он будет извлекать имя файла, номер строки и номер позиции в строке и на их основе генерировать адрес для записи в списке в результатами (quickfix list). Благодаря этому мы сможем перемещаться между предупреждениями с помощью команд, обсуждавшихся в рецепте 105 выше.