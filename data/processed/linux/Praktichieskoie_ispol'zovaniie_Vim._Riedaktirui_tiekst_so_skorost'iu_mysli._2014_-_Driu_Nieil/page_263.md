---
source_image: page_263.png
page_number: 263
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 17.86
tokens: 5632
characters: 1796
timestamp: 2025-12-24T04:15:02.882587
finish_reason: stop
---

Рецепт 84. Выполнение операций над полным совпадением

Команда поиска в редакторе Vim позволяет подсвечивать совпадения и быстро перемещаться между ними, но выполнить операцию над полным совпадением не так-то просто. В этом рецепте рассказывается, как сконструировать команду перемещения курсора, которая позволит воздействовать на все совпадения, даже отличающиеся друг от друга своей длиной.

Команду поиска в редакторе Vim удобно использовать для перемещения между совпадениями с шаблоном, но что, если нам потребуется изменить каждое из них?

В некоторых текстовых редакторах команда поиска не просто перемещает курсор к совпадению, но также выделяет его, что может быть очень удобно, если потребуется изменить это совпадение. Напротив, в Vim совпадение только подсвечивается (если включен параметр hlsearch), а курсор устанавливается в его начало. Поэтому если потребуется изменить совпадение, нужно выделить подсвеченный фрагмент в визуальном режиме или использовать команду перемещения, чтобы покрыть этот фрагмент.

Какие команды перемещения курсора можно использовать для этого? Как всегда, ответ на этот вопрос: «Зависит от ситуации». Если шаблону соответствует целое слово, для манипуляций со словом можно использовать команду e или iw. Но как быть, если совпадением является только часть слова? Или если каждое совпадение имеет разную длину?

Рассмотрим эту ситуацию на примере. В следующем фрагменте мы будем изменять имена классов XmlDocument, XhtmlDocument, XmlTag и XhtmlTag.

search/tag-heirarchy.rb
http://media.pragprog.com/titles/dnvim/code/search/tag-heirarchy.rb

class XhtmlDocument < XmlDocument; end
class XhtmlTag < XmlTag; end

Допустим, что нам требуется переименовать все классы, как показано ниже:

class XHTMLDocument < XMLDocument; end
class XHTMLTag < XMLTag; end