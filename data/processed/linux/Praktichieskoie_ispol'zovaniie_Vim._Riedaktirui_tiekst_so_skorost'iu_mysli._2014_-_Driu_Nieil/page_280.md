---
source_image: page_280.png
page_number: 280
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 18.70
tokens: 5678
characters: 1851
timestamp: 2025-12-24T04:15:25.598252
finish_reason: stop
---

изменения в документ. Это совершенно неприемлемо. Когда тестирование выполняется с помощью команды поиска, документ не изменяется, благодаря чему мы можем позволить себе ошибаться. В рецепте 85 (глава 13) мы познакомились с эффективным способом создания регулярных выражений. Разделение задач упрощает их решение. У нас появляется возможность семь раз отмерить и один раз отрезать.

Кроме того, кто сказал, что мы должны вводить шаблон? В рецепте 86 (глава 13) был продемонстрирован сценарий, реализующий эквивалент команды *, работающий в визуальном режиме. Этот сценарий дает возможность выделить любой текст в документе и найти совпадения с ним, нажав клавишу *. Полученный таким способом шаблон можно использовать в команде подстановки для замены выделенного текста чем-то другим. Впору поспорить, кто окажется ленивее!

Этот прием подходит не всегда

Я не говорил, что вы никогда не должны заполнять поле шаблона в команде подстановки. Ниже приводится пример команды подстановки, объединяющей все строки в файле, с замещением всех символов перевода строки запятыми:

⇒ :%s/\n/,,

Нет смысла разбивать создание такой команды на два этапа. Более того, такое разбиение только добавит работы.

Влияние на историю команд

Важно также помнить, что при выполнении команды подстановки с пустым полем шаблона создается неполная запись в истории команд. Шаблоны сохраняются редактором в истории поиска, а сами команды подстановки — в истории команд Ex (:h cmdline-history http://vimdoc.sourceforge.net/htmldoc/cmdline.html#cmdline-history). Выполняя деление на две задачи, поиска и замены, мы разносим информацию по двум разным хранилищам, что может вызвать сложности, если позднее потребуется повторно выполнить команду подстановки.

Если вам кажется, что позднее может потребоваться восстановить команду подстановки в полном ее виде из истории команд, вы