---
source_image: page_261.png
page_number: 261
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.16
tokens: 5748
characters: 2118
timestamp: 2025-12-24T04:15:09.808159
finish_reason: stop
---

Каждый раз, выполняя команду поиска, курсор устанавливается на первый символ в совпадении. Такое поведение по умолчанию выглядит вполне разумным, но иногда нам может потребоваться, чтобы курсор устанавливался на последний символ в совпадении. В редакторе Vim подобная возможность поддерживается с помощью смещений в совпадениях (см. :h search-offset http://vimdoc.sourceforge.net/htmldoc/pattern.html#search-offset).

Рассмотрим следующий пример. В этом фрагменте автор постоянно сокращает слово «language» до «lang»:

search/langs.txt
http://media.pragprog.com/titles/dnvim/code/search/langs.txt

Aim to learn a new programming lang each year.
Which lang did you pick up last year?
Which langs would you like to learn?

Как бы вы решили задачу дополнения всех трех вхождений слова «lang» до «language»? Одно из решений — воспользоваться командой подстановки: :%s/lang/language/g. Но давайте поищем другой способ, к которому можно было бы применить «формулу точки». Попутно мы узнаем немало интересного.

Для начала попробуем решить поставленную задачу без использования смещений в совпадениях. Итак, прежде всего найдем строку, которую требуется изменить: /lang<CR>. Эта команда поместит курсор в начало первого совпадения. Из этой позиции можно выполнить вставку в конец слова командой eauage<Esc>. Добавление в конец слова — настолько часто используемая операция, что последовательность ea должна нажиматься на инстинктивном уровне, как единая команда.

Теперь нужно переместить курсор в правильную позицию, а все остальное выполнит команда «точка». Чтобы исправить следующее вхождение слова «lang», можно выполнить команду ne. — n выполнит переход к следующему совпадению; e переместит курсор в конец слова, а «точка» (. ) добавит необходимые символы. Итого три нажатия на клавиши. Мы не достигли идеальной «формулы точки», но решили поставленную задачу, так или иначе.

Или не решили? Если выполнить ту же последовательность команд, ne., второй раз, она исказит последнее слово. Сможете объяснить причину? Последнее вхождение «lang» в действительности является сокращением от слова «languages». Поэтому если слепо