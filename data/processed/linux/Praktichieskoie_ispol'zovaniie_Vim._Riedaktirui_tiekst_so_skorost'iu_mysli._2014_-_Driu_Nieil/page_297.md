---
source_image: page_297.png
page_number: 297
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 18.12
tokens: 5619
characters: 1692
timestamp: 2025-12-24T04:15:47.320253
finish_reason: stop
---

⇒ /Pragmatic\ze Vim
⇒ :vimgrep /<C-r>// **/*.txt
⇒ :Qargs
⇒ :argdo %s//Practical/g
⇒ :argdo update

Команда :update сохраняет файл, но только если он был изменен (см. :h update http://vimdoc.sourceforge.net/htmldoc/editing.html#update). Обратите внимание, что последние три команды можно было бы объединить в одну:

⇒ :Qargs | argdo %s//Practical/g | update

Символ | в командной строке Vim действует иначе, чем в командных оболочках. Если в Unix символ вертикальной черты обеспечивает передачу стандартного вывода одной команды на стандартный ввод другой (создавая «конвейер»), то в командной строке Vim он просто играет роль разделителя команд, действуя подобно символу точки с запятой в командной оболочке Unix. За подробностями обращайтесь к разделу справки :h :bar http://vimdoc.sourceforge.net/htmldoc/cmdline.html#:bar.

Прежде мы использовали прием «стрельбы по площадям», применяя команду подстановки ко всем файлам в проекте, невзирая на наличие или отсутствие совпадений с искомым шаблоном. Сейчас мы использовали более совершенную стратегию. Нам все еще нужно заглянуть в каждый файл, имеющийся в проекте, но на этот раз мы использовали команду vimgrep. Затем с помощью нашей собственной команды :Qargs мы скопировали каждый файл из списка результатов (quickfix list) в список аргументов. Это позволило нам «вести прицельный огонь» и применять команду подстановки только к файлам, содержащим искомые совпадения.

Одно из удобств такого подхода состоит в том, что после выполнения подстановки у нас остается список аргументов с измененными файлами. Если нам потребуется просмотреть изменения, мы можем выполнить команду :first и затем просматривать файлы по очереди командой :next.