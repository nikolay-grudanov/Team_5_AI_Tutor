---
source_image: page_270.png
page_number: 270
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.62
tokens: 5761
characters: 2014
timestamp: 2025-12-24T04:15:20.266481
finish_reason: stop
---

Рецепт 86. Поиск текущего визуального выделения

продолжайте доработку в несколько этапов, пока не достигнете желаемого результата.

Возможность редактирования содержимого командной строки здесь как нельзя кстати. Если включить параметр incsearch, появится дополнительное преимущество в виде немедленной обратной связи по мере ввода команды. Конечно, это преимущество теряется с переходом в окно командной строки. Но это — небольшая цена за дополнительные возможности модального редактирования.

Рецепт 86. Поиск текущего визуального выделения

В командном режиме команда * позволяет выполнять поиск слова под курсором. С помощью небольшого сценария можно переопределить поведение команды * так, что в визуальном режиме она будет искать не текущее слово, а текущий выделенный фрагмент.

Поиск текущего слова в визуальном режиме

В визуальном режиме команда * выполняет поиск слова под курсором. Например:

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td>She sells sea shells by the sea shore.</td>
  </tr>
  <tr>
    <td>*</td>
    <td>She sells sea shells by the sea shore.</td>
  </tr>
</table>

Первоначально редактор находится в визуальном режиме, в документе выделены три первых слова и курсор находится на слове «sea». Если вызвать команду *, она найдет следующее вхождение слова «sea» и расширит выделенную область. Хотя такое поведение команды * вполне согласуется с поведением этой же команды в командном режиме, я редко нахожу его удобным.

До того, как я был пленен редактором Vim, я пользовался другим текстовым редактором, имевшим команду «Искать выделенный текст». У меня была настроена горячая комбинация клавиш для доступа к этой команде, и она использовалась мною настолько часто, что мои пальцы вызывали ее на инстинктивном уровне. Когда я начал осваивать Vim, я был удивлен отсутствием подобной возможности в этом редакторе. Мне всегда казалось, что в визуальном режиме команда * должна искать текущее выделение, а не текущее