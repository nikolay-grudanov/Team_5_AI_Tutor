---
source_image: page_086.png
page_number: 86
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.41
tokens: 5699
characters: 1727
timestamp: 2025-12-24T04:11:24.339949
finish_reason: stop
---

Таблица 4.1. Преобразование в верхний регистр в визуальном режиме

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td><a href="#">one</a><br><a href="#">two</a><br><a href="#">three</a></td>
  </tr>
  <tr>
    <td>vit</td>
    <td><a href="#">one</a><br><a href="#">two</a><br><a href="#">three</a></td>
  </tr>
  <tr>
    <td>U</td>
    <td><a href="#">ONE</a><br><a href="#">two</a><br><a href="#">three</a></td>
  </tr>
</table>

Команда j. переместит курсор на следующую строку и повторит последнее изменение. Со второй строкой никаких проблем не возникает, но если повторить эту команду, мы увидим странный результат:

<a href="#">ONE</a>
<a href="#">TWO</a>
<a href="#">THREE</a>

Вам понятно, что случилось? Когда повторяется команда визуального режима, она применяется к фрагменту текста той же длины (см. :h visual-repeat http://vimdoc.sourceforge.net/htmldoc/visual.html#visual-repeat). В данном случае первый раз команда применялась к слову длиной в три символа. При повторном применении этой команды ко второй строке не произошло ничего необычного, потому что требуемое слово также содержит три символа, но при попытке применить ту же команду к слову из пяти символов мы потерпели фиаско.

Использование операторов командного режима

Для команды U визуального режима в командном режиме имеется эквивалентная команда: gU{motion} (:h gU http://vimdoc.sourceforge.net/htmldoc/change.html#gU). Если для первого изменения использовать эту команду, мы сможем выполнить последующие изменения, применив «формулу точки».

Обсуждение

В обоих случаях требуется нажать всего четыре клавиши: vitU и gUit, но семантика этих команд совершенно отлична. В визуаль-