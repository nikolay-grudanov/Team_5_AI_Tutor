---
source_image: page_334.png
page_number: 334
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.78
tokens: 5709
characters: 1976
timestamp: 2025-12-24T04:16:36.822557
finish_reason: stop
---

Рецепт 109. Настройка программы grep

иирует список результатов (quickfix list). В результате мы получим возможность навигации по списку с помощью команд :cnext/:cprev и применения всех остальных приемов, описанных в главе главе 17 «Компиляция кода и обзор ошибок с помощью Quickfix List».

Даже при том, что мы просто вызвали :grep Waldo *, Vim автоматически добавит флаг -n, чтобы обеспечить включение номеров строк в вывод. Именно благодаря этому, осуществляемая навигацию по списку с результатами, редактор оказывается в состоянии переместить курсор непосредственно в строку с совпадением.

Допустим, что нам нужно выполнить поиск без учета регистра символов. Для этого следует передать команде флаг -i:

⇒ :grep -i Waldo *

За кулисами Vim выполнит команду grep -n -i Waldo *. Обратите внимание, что флаг по умолчанию -n все еще присутствует в команде. Таким же способом мы можем передавать программе grep любые другие флаги, чтобыказать влияние на ее поведение.

Рецепт 109. Настройка программы grep

Команда :grep — это всего лишь обертка для внешней программы grep. Мы можем настроить ее так, что Vim будет делегировать решение задачи поиска любому другому инструменту, устанавливая значения двух параметров настройки: grepprg и grepformat. Сначала мы познакомимся со значениями по умолчанию этих параметров, а потом посмотрим, как можно настроить их так, чтобы обеспечить решение задачи с помощью любой другой подходящей внешней программы.

Настройки по умолчанию команды :grep

Параметр настройки grepprg определяет команду оболочки, которую должна запускать команда Vim :grep (:h 'grepprg' http://vimdoc.sourceforge.net/htmldoc/options.html#'grepprg'). Параметр настройки grepformat обеспечивает анализ вывода, возвращаемого командой :grep (см. :h 'grepformat' http://vimdoc.sourceforge.net/htmldoc/options.html#'grepformat'). В системах Unix эти параметры имеют следующие значения по умолчанию:

grepprg="grep -n $* /dev/null"
grepformat="%f:%l:%m,%f:%l%m,%f %l%m"