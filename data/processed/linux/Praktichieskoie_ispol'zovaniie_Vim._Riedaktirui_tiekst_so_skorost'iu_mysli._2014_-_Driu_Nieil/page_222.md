---
source_image: page_222.png
page_number: 222
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.35
tokens: 5699
characters: 1440
timestamp: 2025-12-24T04:14:15.671762
finish_reason: stop
---

Рецепт 68. Добавление команд в макросы

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>qa</td>
    <td>1. one<br>2. two</td>
  </tr>
  <tr>
    <td>0f.r)w~</td>
    <td>1) One<br>2. two</td>
  </tr>
  <tr>
    <td>q</td>
    <td>1) One<br>2. two</td>
  </tr>
</table>

Сразу после остановки записи нажатием на клавишу q мы заметили, что забыли завершить выполнение командой j для перехода на следующую строку.

Прежде чем исправить ошибку, рассмотрим содержимое регистра а:

⇒ :reg a
"a      0f.r)w~

Если ввести команду qa, Vim начнет запись нажатий на клавиши в регистр а, затирая прежнее содержимое этого регистра. Если ввести команду qA, Vim начнет запись нажатий на клавиши, добавляя их в конец содержимого регистра а. Мы можем исправить нашу ошибку так:

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>qA</td>
    <td>1) One<br>2. two</td>
  </tr>
  <tr>
    <td>j</td>
    <td>1) One<br>2. two</td>
  </tr>
  <tr>
    <td>q</td>
    <td>1) One<br>2. two</td>
  </tr>
</table>

Посмотрим, что теперь хранится в регистре а:

⇒ :reg a
"a      0f.r)w~j

Все команды, записанные прежде, остались на месте, но теперь в конце появилась команда j.

Обсуждение

Эта небольшая хитрость позволяет экономить время, исключая необходимость повторной записи макроса с самого начала. Но мы можем добавлять команды только в конец макроса. Если потре-