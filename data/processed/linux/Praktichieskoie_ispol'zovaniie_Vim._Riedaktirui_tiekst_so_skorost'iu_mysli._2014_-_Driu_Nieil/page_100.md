---
source_image: page_100.png
page_number: 100
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.14
tokens: 5699
characters: 1830
timestamp: 2025-12-24T04:11:42.946210
finish_reason: stop
---

Рецепт 28. Выполнение команд для одной строки или для групп строк

визуальное выделение. Вслед за ним можно указать команду Ex и применить ее к каждой выделенной строке:

⇒ :'<,'>p
  2 <html>
  3   <head><title>Practical Vim</title></head>
  4   <body><h1>Practical Vim</h1></body>
  5 </html>

Такой способ определения диапазона строк может пригодиться для применения команды :substitute к подмножеству строк в файле.
Последовательность символов '< соответствует первой строке в визуальном выделении, а последовательность '>' — последней строке в этом же выделении (дополнительную информацию о метках можно найти в рецепте 53 в главе 8). Эти метки продолжают существовать даже после выхода из визуального режима. Если попытаться выполнить команду :'<,'>p непосредственно в командном режиме, она всегда будет применяться к строкам, выделенным последними в визуальном режиме.

Определяйте диапазон строк с помощью шаблонов

В качестве адресов строк для команд Ex можно также использовать шаблоны, как показано ниже:

⇒ :/<html>/,/<\/html>/p
  2 <html>
  3   <head><title>Practical Vim</title></head>
  4   <body><h1>Practical Vim</h1></body>
  5 </html>

Такой способ выглядит достаточно сложным, но в нем используется обычная форма определения диапазона: :{start},{end}. Роль адреса {start} в данном случае играет шаблон /<html>/, а роль адреса {end} — шаблон /<\/html>/. Иными словами, диапазон начинается со строки, содержащей открывающий тег <html>, и заканчивается строкой, содержащей соответствующий закрывающий тег.
В данном конкретном примере тот же результат можно было бы получить, используя адрес :2,5, который короче, но более тесно связан с количеством строк в файле. Если для определения диапазона, включающего элемент <html></html> целиком, использовать шаблоны, становится неважно, сколько строк содержится в файле.