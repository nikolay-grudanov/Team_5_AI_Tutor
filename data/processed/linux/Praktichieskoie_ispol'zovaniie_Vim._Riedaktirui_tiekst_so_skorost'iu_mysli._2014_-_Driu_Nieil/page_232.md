---
source_image: page_232.png
page_number: 232
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.66
tokens: 5726
characters: 1736
timestamp: 2025-12-24T04:14:32.801140
finish_reason: stop
---

Рецепт 71. Правка содержимого макроса

Это действие практически не имеет никаких последствий. При выполнении макроса Vim воспроизведет мою ошибку и последующее ее исправление. Конечный результат получится правильным. Но подобные опечатки и исправления усложняют чтение и правку макроса.

Вставка макроса в документ

Запись макросов осуществляется в те же регистры, с которыми работают операции копирования и вставки. То есть при желании изменить макрос в регистре а достаточно просто вставить его в документ и отредактировать, как обычный текст.
Давайте нажмем клавишу G и перейдем в конец текущего документа. Нам нужно вставить содержимое регистра в новую строку. Для этого проще всего воспользоваться командой :put:

⇒ :put a

Почему бы не воспользоваться командой "ap? В данном случае команда p вставит содержимое регистра правее курсора в текущую строку. Команда :put, напротив, всегда вставляет содержимое в новую строку, ниже текущей, независимо от того, что было сохранено в регистре, последовательность символов или целая строка.

Правка макроса

Теперь мы можем отредактировать макрос, как обычный текст. Последовательность команд, показанная в табл. 11.5, замещает символ ~ парой символов vU.

Таблица 11.5. Правка макроса

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td>0f.r)w~j</td>
  </tr>
  <tr>
    <td>f~</td>
    <td>0f.r)w~j</td>
  </tr>
  <tr>
    <td>svU<esc></td>
    <td>0f.r)wvUj</td>
  </tr>
</table>

Копирование макроса из документа обратно в регистр

В нашем документе имеется исправленная последовательность команд, и нам требуется скопировать ее обратно в регистр. Проще всего это сделать с помощью команды "add (или :d a), но это может