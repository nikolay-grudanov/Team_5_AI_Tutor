---
source_image: page_292.png
page_number: 292
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.00
tokens: 5691
characters: 1768
timestamp: 2025-12-24T04:15:47.125084
finish_reason: stop
---

Рецепт 95. Перемена местами двух и более слов

В окончательном виде решение поставленной задачи выглядит, как показано ниже:

⇒ /\v(<man>|<dog>)
⇒ :%s//\={{"dog":"man","man":"dog"}[submatch(1)]}/g

Обсуждение

Это был не самый лучший пример! Нам пришлось трижды вводить слова «man» и «dog». Очевидно, что гораздо быстрее получилось бы просто заменить два слова в документе. Но при работе с большими объемами текста, где каждое слово встречается множество раз, подобные дополнительные усилия быстро окупаются. Обратите внимание, что это решение легко можно адаптировать для случая перестановки трех и более слов за один проход.

Проблема, связанная с большим объемом ручного ввода, осталась. Однако, написав чуть больше кода на языке сценариев Vim, мы могли бы реализовать собственную команду с более дружественным интерфейсом, которая выполняла бы всю рутинную работу автоматически. Эта тема выходит далеко за рамки данной книги, тем не менее прочитайте врезку «Abolish.vim: перегруженная команда подстановки» ниже.

Abolish.vim: перегруженная команда подстановки

Расширение Abolish.vim, написанное Тимом Поупом (Tim Pope), является одним из моих самых любимых¹. Оно реализует новую команду :Subvert (или :S), которая действует как перегруженная версия команды :substitute. С помощью этого расширения мы могли бы поменять местами слова «man» и «dog», выполнив следующую команду:

⇒ :%S/{man,dog}/{dog,man}/g

Она не только короче, но и гораздо гибче нашего варианта. Помимо слов «man» и «dog», она также поменяет местами слова «MAN» и «DOG», «Man» и «Dog». Этот коротенький пример — лишь верхушка айсберга возможностей данного потрясающего расширения. Я настоятельно рекомендую найти время и исследовать другие его возможности.

¹ https://github.com/tpope/vim-abolish