---
source_image: page_275.png
page_number: 275
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.36
tokens: 5891
characters: 2196
timestamp: 2025-12-24T04:15:33.107003
finish_reason: stop
---

Специальные символы в строке замены

В главе 12 «Поиск по шаблону и поиск точного совпадения» мы видели, что некоторые символы имеют специальное значение в шаблонах. Некоторые символы в строках замены также приобретают специальное значение. Некоторые из них перечислены в таблице ниже, а полный их перечень можно найти в разделе справки :h sub-replace-special http://vimdoc.sourceforge.net/htmldoc/change.html#sub-replace-special:

<table>
  <tr>
    <th>Символ</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>\r</td>
    <td>Вставляет возврат каретки</td>
  </tr>
  <tr>
    <td>\t</td>
    <td>Вставляет символ табуляции</td>
  </tr>
  <tr>
    <td>\\</td>
    <td>Вставляет один символ обратного слэша</td>
  </tr>
  <tr>
    <td>\1</td>
    <td>Вставляет совпадение с первым подвыражением в скобках</td>
  </tr>
  <tr>
    <td>\2</td>
    <td>Вставляет совпадение со вторым подвыражением в скобках</td>
  </tr>
  <tr>
    <td>\0</td>
    <td>Вставляет полное совпадение с шаблоном</td>
  </tr>
  <tr>
    <td>&</td>
    <td>Вставляет полное совпадение с шаблоном</td>
  </tr>
  <tr>
    <td>~</td>
    <td>Использует строку замены {string} из предыдущей команды подстановки</td>
  </tr>
  <tr>
    <td>\={Vim script}</td>
    <td>Вычисляет выражение {Vim script}; использует результат в качестве строки замены {string}</td>
  </tr>
</table>

Специальные символы \r, \t и \\ многим знакомы очень хорошо. С символом ~ мы познакомимся поближе в рецепте 92, где также будут описаны два сокращения, позволяющие повторно вызывать команду подстановки еще быстрее. Примеры использования специальных символов \1 и \2 будут продемонстрированы в рецепте 93.

Комбинация \={Vim script} обладает широчайшими возможностями. Она позволяет выполнять программный код и использовать результат в качестве строки замены {string}. Пару примеров использования этой комбинации мы рассмотрим в рецептах 94 и 95.

Рецепт 88. Поиск и замена всех совпадений в файле

По умолчанию команда подстановки воздействует на текущую строку и изменяет только первое совпадение. Чтобы изменить все совпадения в файле, необходимо определить диапазон [range] и указать флаг g.

Для демонстрации воспользуемся следующим фрагментом: