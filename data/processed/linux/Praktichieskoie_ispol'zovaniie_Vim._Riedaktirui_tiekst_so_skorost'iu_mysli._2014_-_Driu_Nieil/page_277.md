---
source_image: page_277.png
page_number: 277
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.17
tokens: 5682
characters: 1743
timestamp: 2025-12-24T04:15:24.085212
finish_reason: stop
---

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>:s/going/rolling/g</td>
    <td>When the rolling gets tough, the tough get rolling.<br>If you are going through hell, keep going.</td>
  </tr>
</table>

На этот раз изменились все вхождения слова «going» в текущей строке, но в файле осталась еще пара совпадений, которые требуется изменить. Как подсказать команде подстановки, что она должна продолжить обработку файла еще и по оси Y?

Ответ на этот вопрос: указать диапазон. Если перед командой подстановки добавить префикс %, она выполнит обход всех строк в файле:

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>%s/going/rolling/g</td>
    <td>When the rolling gets tough, the tough get rolling.<br>If you are rolling through hell, keep rolling.</td>
  </tr>
</table>

Команда подстановки — это лишь одна из множества команд Ex, каждая из которых может принимать диапазон строк. Подробнее о диапазонах рассказывается в рецепте 28 в главе 5.

Итак, если необходимо найти и заменить все совпадения с шаблоном в текущем файле, следует явно сообщить команде подстановки, что она должна просматривать содержимое файла по обеим осям, X и Y. Флаг g управляет просмотром по оси X, а адрес % — по оси Y.

Подобные детали легко забываются, поэтому в рецепте 92 ниже будет продемонстрирована пара приемов многократного повторения команды подстановки.

Рецепт 89. Подтверждение каждой подстановки

Слепой поиск и замена всех совпадений с шаблоном не всегда оказываются лучшим решением. Иногда бывает желательно оценить каждое совпадение и подтвердить или отвергнуть подстановку. Эту возможность обеспечивает флаг c.

Помните пример из рецепта 5 в главе 1?