---
source_image: page_216.png
page_number: 216
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.61
tokens: 5904
characters: 2182
timestamp: 2025-12-24T04:14:19.247623
finish_reason: stop
---

Рецепт 66. Выполнение со счетчиком

Чтобы он выглядел так:

var foo = "method(" + argument1 + "," + argument2 + ")";

«Формула точки» подразумевает достижение желаемого результата многократным повторением команды ;.. А что, если ту же задачу требуется решить в более крупном масштабе?

x = ")"+a+","+b+","+c+","+d+","+e+")";

Мы можем применить то же самое решение. Но когда для достижения желаемого результата команду ;.. требуется выполнить больше двух раз, возникает ощущение, что мы делаем лишнюю работу. Нет ли какого-нибудь способа задействовать счетчик?

Можно было бы подумать, что команда 11;.. решит поставленную задачу, но это не так. Данная команда выполнит команду ; одиннадцать раз и затем один раз выполнит команду .. Похожей ошибкой было бы пытаться выполнить команду ;11., которая один раз выполнит команду ; и затем одиннадцать раз выполнит команду .. Нам же требуется одиннадцать раз выполнить последовательность ;..

Мы можем добиться желаемого, записав простейший макрос: qq;.q. Здесь команда qq включает запись макроса в регистр q. Затем вводятся требуемые команды ;.., и последнее нажатие на клавишу q завершает запись макроса. Теперь мы можем выполнить макрос со счетчиком: 11@q. Эта команда выполнит ;.. одиннадцать раз.

Давайте объединим все вместе (взгляните на табл. 11.1).
Команда ; повторяет поиск f+. Когда курсор окажется за последним символом + в строке, команда ; потерпит неудачу и выполнение макроса прервется.

Таблица 11.1. Запись макроса и его выполнение со счетчиком

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td>x = "("+a+","+b+","+c+","+d+","+e+")";</td>
  </tr>
  <tr>
    <td>f+</td>
    <td>x = "("+a+","+b+","+c+","+d+","+e+")";</td>
  </tr>
  <tr>
    <td>s + <Esc></td>
    <td>x = "(" +a+","+b+","+c+","+d+","+e+")";</td>
  </tr>
  <tr>
    <td>qq;.q</td>
    <td>x = "(" + a + ","+b+","+c+","+d+","+e+")";</td>
  </tr>
  <tr>
    <td>22@qq</td>
    <td>x = "(" + a + "," + b + "," + c + "," + d + "," + e +")";</td>
  </tr>
</table>

В данном примере достаточно было выполнить макрос десять раз. Но если выполнить его одиннадцать раз, последняя попытка будет