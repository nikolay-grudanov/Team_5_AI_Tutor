---
source_image: page_217.png
page_number: 217
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 16.45
tokens: 5591
characters: 1519
timestamp: 2025-12-24T04:14:05.092505
finish_reason: stop
---

прервана. Иными словами, мы можем добиться требуемого результата, вызвав макрос десять или более раз.

Есть желающие точно подсчитать, сколько раз требуется выполнить этот макрос? Только не я! Лучше я укажу заведомо большое значение счетчика. Я часто использую число 22, потому что я достаточно ленив, а набрать это число на клавиатуре легче легкого. На моей клавиатуре символы @ и 2 находятся на одной и той же клавише.

Обратите внимание, что не всегда можно позволить себе вольность со счетчиком. В данном случае это простительно, потому что макрос имеет встроенный предохранитель: команда перемещения ; потерпит неудачу после выхода за последний символ + в текущей строке. Подробности смотрите в разделе «Прерывайте выполнение, если перемещение курсора не удалось» выше.

Рецепт 67. Повторение изменений в последовательности строк

Мы можем здорово упростить себе жизнь, выполняя один и тот же набор операций с группой строк, записав макрос и выполнив его для каждой строки. Добиться этого можно двумя способами: выполнить макрос последовательно или параллельно.
В качестве примера отредактируем следующий текст:

macros/consecutive-lines.txt
http://media.pragprog.com/titles/dnvim/code/macros/consecutive-lines.txt

1. one
2. two
3. three
4. four

Чтобы он выглядел так:

1) One
2) Two
3) Three
4) Four

На первый взгляд, задача выглядит тривиальной, но в действительности она имеет две интересные особенности.

Запись единицы правки

Для начала запишем все изменения, которые необходимо выполнить в первой строке: