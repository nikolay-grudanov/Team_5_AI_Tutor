---
source_image: page_268.png
page_number: 268
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.36
tokens: 5783
characters: 1881
timestamp: 2025-12-24T04:15:16.068069
finish_reason: stop
---

3: Еще один цикл

Теперь нам нужно понять, что отличает апостроф от закрывающей одиночной кавычки. Взгляните на следующие примеры: «won’t», «don’t» и «we’re». В каждом случае сразу за апострофом следует буква — не пробел и не знак препинания. Изменим шаблон так, чтобы он продолжал искать соответствие, пока за символом ' следует символ слова. Ниже приводится следующая версия:

⇒ /\v'([^']|\'\w)+'

На этот раз потребовалось внести более существенные изменения: не только добавить дополнительный элемент '\w, но также заключить две альтернативы в круглые скобки и разделить их вертикальной чертой. Самое время достать из арсенала нашу большую пушку.
Вместо нажатия на клавиши /<Up>, чтобы вставить в команду поиска предыдущий шаблон, нажмите q/, чтобы вывести окно с командной строкой. Оно действует подобно обычному буферу, но содержит всю историю команд поиска, по одной в каждой строке (см. раздел «Встречайте: окно режима командной строки» в главе 5). Здесь можно использовать все возможности модального редактирования, чтобы исправить последний шаблон.
Ниже приводится последовательность команд редактирования, демонстрирующая, как внести данное конкретное изменение. Если вы забыли, что делает команда c%(<C-r>" )<Esc>, обращайтесь к рецептам 54 (глава 8) и 15 (глава 2).

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>{start}</td>
    <td>\v'[^']+'</td>
  </tr>
  <tr>
    <td>f[</td>
    <td>\v'[^\']+'</td>
  </tr>
  <tr>
    <td>c%(<C-r>" )<Esc></td>
    <td>\v'([^\'])+'</td>
  </tr>
  <tr>
    <td>i|'\w<Esc></td>
    <td>\v'([^\']|\'\w)+'</td>
  </tr>
</table>

Отредактировав шаблон, достаточно просто нажать клавишу <CR>, чтобы выполнить поиск. Теперь документ должен выглядеть так:

This string contains a 'quoted' word.
This string contains 'two' quoted 'words.'
This 'string doesn't make things easy.'

Отлично!