---
source_image: page_266.png
page_number: 266
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 12.46
tokens: 5501
characters: 1304
timestamp: 2025-12-24T04:15:02.844012
finish_reason: stop
---

Рецепт 85. Создание сложных шаблонов с использованием истории поиска

Рецепт 85. Создание сложных шаблонов с использованием истории поиска

Разработка регулярных выражений — достаточно сложное дело. Редко когда получается написать желаемое регулярное выражение с первого раза, поэтому всегда полезно иметь возможность вести разработку поэтапно. И помочь нам в этом сможет история поиска.

В центре нашего внимания, в следующем примере, будет находиться символ кавычек:

search/quoted-strings.txt
http://media.pragprog.com/titles/dnvim/code/search/quoted-strings.txt

This string contains a 'quoted' word.
This string contains 'two' quoted 'words.'
This 'string doesn't make things easy.'

Нам требуется составить регулярное выражение, соответствующее каждой строке в кавычках. Для этого понадобится выполнить несколько попыток, зато потом, когда у нас будет работоспособный шаблон, мы сможем выполнить команду подстановки, замещающую одиночные кавычки двойными, как в следующем фрагменте:

This string contains a "quoted" word.
This string contains "two" quoted "words."
This "string doesn't make things easy."

1: Максимальное совпадение

Начнем с самого простого шаблона:

⇒ /\v'.+'

Ему соответствует единственный символ ', за которым следуют любой символ один или более раз и заключительный символ '.