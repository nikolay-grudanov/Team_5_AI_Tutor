---
source_image: page_281.png
page_number: 281
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 18.37
tokens: 5661
characters: 1751
timestamp: 2025-12-24T04:15:25.400345
finish_reason: stop
---

всегда можете заполнить поле шаблона явно. Нажатие комбинации <C-r>/ в строке ввода вставит последний использовавшийся шаблон в команду. Так, следующая последовательность добавит в историю команд полную запись:

⇒ :%s/<C-r>//"\1"/g

Иногда бывает нежелательно оставлять пустым поле шаблона в команде подстановки. Иногда — наоборот. Используйте оба способа, и со временем вы научитесь определять, когда и какой способ использовать. Как всегда, полагайтесь на свои суждения.

Рецепт 91. Замена содержимым регистра

Мы не обязаны вводить строку замены вручную. Если требуемый текст уже имеется в документе, его можно скопировать в регистр и использовать в качестве строки замены. При этом содержимое регистра можно передавать как по значению, так и по ссылке.

В рецепте 90 выше мы видели, что редактор способен делать вполне разумные выводы при вызове команды подстановки с пустым полем шаблона. Исходя из этого, можно было бы подумать, что если оставить пустым поле строки замены, то редактор автоматически будет использовать строку замены из предыдущей команды подстановки, но это не так. Если оставить поле строки замены пустым, редактор просто заменит все совпадения пустой строкой. Иными словами, он удалит все найденные совпадения.

Передача по значению

Содержимое регистра можно вставить командой <C-r>{register}. Допустим, что мы уже скопировали текст, который требуется вставить в поле строки замены команды подстановки. Теперь мы можем вставить содержимое регистра в команду, как показано ниже:

⇒ :%s//<C-r>0/g

Когда мы вводим <C-r>0, Vim вставляет содержимое регистра 0, благодаря чему мы сможем проверить команду замены перед выполнением. Во многих ситуациях это вполне приемлемое решение, но иногда такой подход может вызывать сложности.