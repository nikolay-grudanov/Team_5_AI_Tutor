---
source_image: page_276.png
page_number: 276
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.85
tokens: 5742
characters: 1979
timestamp: 2025-12-24T04:15:25.726791
finish_reason: stop
---

substitution/get-rolling.txt
http://media.pragprog.com/titles/dnvim/code/substitution/get-rolling.txt

When the going gets tough, the tough get going.
If you are going through hell, keep going.

Попробуем заменить все вхождения слова «going» на «rolling». Для начала включим параметр hlsearch, чтобы можно было видеть происходящее (см. рецепт 80 в главе 13):

⇒ :set hlsearch

В простейшем виде команда подстановки включает шаблон поиска {pattern} и строку замены {string}:

<table>
  <tr>
    <th>Нажатия клавиш</th>
    <th>Содержимое буфера</th>
  </tr>
  <tr>
    <td>:s/going/rolling</td>
    <td>When the rolling gets tough, the tough get going.<br>If you are going through hell, keep going.</td>
  </tr>
</table>

Заметили, что произошло? Редактор заменил первое вхождение «going» на «rolling» и оставил все остальные совпадения нетронутыми.

Чтобы понять причину, представьте, что файл представляет собой двумерное поле из символов, в котором ось X направлена слева направо, а ось Y — сверху вниз. По умолчанию команда подстановки воздействует только на первое совпадение в текущей строке. Давайте посмотрим, что необходимо сделать, чтобы полностью охватить обе оси координат, X и Y.

Чтобы команда продолжила движение по оси X, в нее необходимо включить флаг g. Название этого флага происходит от английского global (глобальный, всеобщий), что, вообще говоря, является не совсем правильным. Всегда найдется кто-то, кто будет ожидать, что данный флаг должен обеспечивать распространение действия команды подстановки на весь файл, но в действительности этот флаг означает «глобальное действие в пределах текущей строки». Такая интерпретация приобретает определенный смысл, если вспомнить, что Vim является прямым потомком редактора ed, как описывается во врезке «О происхождении редактора Vim (и его семейства)» в главе 5.

Нажмите клавишу u, чтобы отменить последнее изменение, и давайте попробуем выполнить другую разновидность команды подстановки — с флагом /g в конце: