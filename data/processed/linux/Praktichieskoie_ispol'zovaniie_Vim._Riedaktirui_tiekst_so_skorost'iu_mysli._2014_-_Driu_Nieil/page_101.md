---
source_image: page_101.png
page_number: 101
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.82
tokens: 5797
characters: 1803
timestamp: 2025-12-24T04:11:45.798403
finish_reason: stop
---

Изменяйте адрес с помощью смещения

Допустим, что необходимо выполнить команду Ex для всех строк внутри элемента <html></html>, кроме строк, содержащих теги <html> и </html>. Добиться этого можно, определив смещение:

⇒ :/<html>/+1,/<\/html>/-1p
3 <head><title>Practical Vim</title></head>
4 <body><h1>Practical Vim</h1></body>

В общем случае смещение определяется как:

:{address}+n

Если значение n отсутствует, по умолчанию оно принимается равным 1. Адрес {address} может быть номером строки, меткой или шаблоном.

Допустим, что нам потребовалось применить команду к конкретному количеству строк, начиная с текущей. Для этого можно было бы указать смещения относительно текущей строки:

⇒ :2
⇒ :.,.+3p

Символ точки (.) обозначает текущую строку, то есть команда :.,.+3 в данном примере эквивалентна команде :2,5.

Обсуждение

Синтаксис определения диапазонов обладает очень большой гибкостью. Мы можем смешивать и сопоставлять номера строк, метки и шаблоны, а также применять смещения к любым из них. Ниже перечислены некоторые символы, которые можно использовать в качестве адресов и диапазонов в командах Ex:

<table>
  <tr>
    <th>Символ</th>
    <th>Адрес</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Первая строка в файле</td>
  </tr>
  <tr>
    <td>$</td>
    <td>Последняя строка в файле</td>
  </tr>
  <tr>
    <td>0</td>
    <td>(Ноль) Виртуальная строка в файле, выше первой строки</td>
  </tr>
  <tr>
    <td>.</td>
    <td>Текущая строка, где находится курсор</td>
  </tr>
  <tr>
    <td>'m</td>
    <td>Строка с меткой m</td>
  </tr>
  <tr>
    <td>'<</td>
    <td>Начало визуального выделения</td>
  </tr>
  <tr>
    <td>'&gt;</td>
    <td>Конец визуального выделения</td>
  </tr>
  <tr>
    <td>%</td>
    <td>Весь файл (более краткая форма записи диапазона :1,$</td>
  </tr>
</table>