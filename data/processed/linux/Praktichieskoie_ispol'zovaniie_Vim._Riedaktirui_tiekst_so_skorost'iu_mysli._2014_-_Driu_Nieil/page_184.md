---
source_image: page_184.png
page_number: 184
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.33
tokens: 5745
characters: 2031
timestamp: 2025-12-24T04:13:28.829186
finish_reason: stop
---

Рецепт 56. Обход списка изменений

⇒ :changes
change line col text
    3   1   8 Line one
    2   2   7 Line two
    1   3   9 Line three
> Press ENTER or type command to continue

Этот пример показывает, что Vim сохраняет номер строки и номер позиции в строке для каждого изменения. С помощью команд g; и g, мы можем перемещаться взад и вперед по списку изменений. Напоминанием о действиях команд g; и g, могут служить команды ; и , используемые для повторения поиска командой f{char} в прямом и обратном направлении (см. рецепт 49 в главе 8).

Чтобы вернуться обратно к последнему изменению в документе, можно нажать g;. Эта команда поместит курсор в строку на символ, где он оказался после предыдущего изменения. Результат будет тем же, как после нажатия последовательности u<C-r>, только при этом не будет производиться временных изменений в документе.

Отметка последнего изменения

Vim автоматически создает две метки, дополняющие список изменений. Метка `.` всегда ссылается на позицию последнего изменения (:h `.` http://vimdoc.sourceforge.net/htmldoc/motion.html#%60.), а метка `^` — на позицию курсора, где произошел выход из режима вставки (:h `^` http://vimdoc.sourceforge.net/htmldoc/motion.html#%60^).

В большинстве случаев переход к метке `.` производит тот же эффект, что и команда g;. Однако метка может ссылаться только на позицию самого последнего изменения, а список изменений может хранить множество местоположений. Мы можем нажимать g; снова и снова, и каждый раз оказываться в другом месте. Метка `.` против, всегда переносит курсор в позицию последнего изменения.

Метка `^` ссылается на позицию последней вставки, которая несколько отличается от последнего изменения. Если выйти из режима вставки и затем перейти в другое место документа, мы легко можем вернуться обратно командой gi (:h gi http://vimdoc.sourceforge.net/htmldoc/insert.html#gi). Одним движением, воспользовавшись меткой `^`, можно вернуть курсор в предыдущую позицию и переключиться в режим вставки. Это позволит сэкономить массу времени!