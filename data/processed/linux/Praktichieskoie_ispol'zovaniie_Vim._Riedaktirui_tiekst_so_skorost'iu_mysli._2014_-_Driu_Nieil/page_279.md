---
source_image: page_279.png
page_number: 279
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 19.02
tokens: 5689
characters: 1771
timestamp: 2025-12-24T04:15:25.726652
finish_reason: stop
---

никакие другие функциональные возможности в этом режиме недоступны. «Формула точки» (как было показано в рецепте 5), напротив, позволяет нам все время оставаться в старом добром командном режиме, сохраняя доступ ко всем возможностям редактора.
Попробуйте использовать оба метода и выберите для себя тот, что лучше соответствует вашим чаяньям.

Рецепт 90. Повторное использование последнего шаблона поиска

Если в команде подстановки оставить поле шаблона пустым, она задействует последний использовавшийся шаблон поиска. Мы можем воспользоваться этой особенностью, чтобы спрямить путь к достижению результата.
Честно говоря, чтобы выполнить команду подстановки, требуется много раз нажать на клавиши. Сначала нужно определить диапазон, затем заполнить поля шаблона и строки замены и, наконец, добавить необходимые флаги. Такой объем работы требует вдумчивого отношения, а любая ошибка может кардинально изменить результат.
Однако не все так плохо: если оставить поле шаблона пустым, Vim будет использовать текущий шаблон.
Возьмем для примера следующую монолитную команду подстановки (из рецепта 85 в главе 13):

⇒ :%s/\v'(([^\']|\w)+)''"\1"/g

Она эквивалентна следующим двум отдельным командам:

⇒ /\v'(([^\']|\w)+)'
⇒ :%s//"\1"/g

Ну и что? Какой бы путь мы ни выбрали, нам все равно придется вводить шаблон целиком, разве не так? Так, да не совсем. В большинстве случаев команда подстановки создается в два этапа: создание шаблона и определение строки замены. Второй подход позволяет нам разделить одну большую задачу на две.
При создании нетривиальных регулярных выражений часто приходится выполнить несколько попыток, прежде чем будет достигнут желаемый результат. Если тестирование регулярного выражения выполнять в команде подстановки, каждая попытка будет вносить