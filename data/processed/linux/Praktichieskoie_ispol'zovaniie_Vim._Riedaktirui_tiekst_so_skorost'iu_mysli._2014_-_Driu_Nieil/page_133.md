---
source_image: page_133.png
page_number: 133
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.46
tokens: 5809
characters: 2024
timestamp: 2025-12-24T04:12:25.410596
finish_reason: stop
---

на нас, выводя сообщение об ошибке: «No write since last change»¹. В большинстве случаев это сообщение является полезным напоминанием. Но в одной ситуации оно превращается в неприятность.

Таблица 6.1. Способы обработки скрытых буферов при завершении работы с редактором

<table>
  <tr>
    <th>Команда</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td>:w[rite]</td>
    <td>Запишет содержимое буфера на диск</td>
  </tr>
  <tr>
    <td>:e[dit]!</td>
    <td>Прочитает файл с диска в буфер (то есть затрет все изменения)</td>
  </tr>
  <tr>
    <td>:qa[ll]!</td>
    <td>Закроет все окна, отменит все изменения без лишних предупреждений</td>
  </tr>
  <tr>
    <td>:wa[ll]</td>
    <td>Запишет содержимое всех измененных буферов на диск</td>
  </tr>
</table>

Рассмотрим поближе команды :argdo и :bufdo. Команда :argdo {cmd} действует примерно следующим образом:

⇒ :first
⇒ :{cmd}
⇒ :next
⇒ :{cmd}

и так далее.

Если выбранная команда {cmd} изменит содержимое первого буфера, следующая за ней команда :next потерпит неудачу. Vim не позволит перейти ко второму пункту в списке аргументов, пока не будут сохранены изменения в первом. Это так неудобно! Если в настройках включен параметр hidden (см.:h 'hidden' http://vimdoc.sourceforge.net/htmldoc/options.html#'hidden'), мы сможем использовать команды :next, :bnext, :cnext (и другие) без завершающего восклицательного знака. Если активный буфер окажется изменен, Vim автоматически скроет его и перейдет к следующему. Параметр настройки hidden позволяет использовать команды :argdo и :bufdo для изменения буферов в коллекции единственной командой.

После выполнения команды :argdo {cmd} может потребоваться сохранить изменения, внесенные в каждый элемент списка аргументов. Мы могли бы сохранить буферы по одному, выполнив :first и затем :wn, получив попутную возможность просмотреть каждый файл. Или, если нет никаких сомнений, что все в порядке, можно выполнить команду :argdo write (или :wall), чтобы сохранить сразу все буферы.

¹ Изменения не сохранены. – Прим. перев.