---
source_image: page_239.png
page_number: 239
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.34
tokens: 5701
characters: 1767
timestamp: 2025-12-24T04:14:37.053758
finish_reason: stop
---

Поиск шестнадцатеричных кодов цвета в расширенном режиме

Описанным требованиям соответствует следующее регулярное выражение:

⇒ /#\( [0-9a-fA-F]{6} \| [0-9a-fA-F]{3} \) /

Попробуйте его, если хотите. Оно прекрасно работает, но взгляните на эти символы обратного слэша, которых в данном выражении целых пять штук!

В этом регулярном выражении используются три типа скобок. Квадратные скобки по умолчанию имеют особое значение, поэтому их не требуется экранировать. Круглые скобки соответствуют символам ( и ) буквально, поэтому их требуется экранировать, чтобы придать им особое значение. То же относится к фигурным скобкам, но обратите внимание: экранировать требуется только открывающую скобку. Закрывающую скобку можно оставить неэкранированной, и Vim поймет наши намерения. Но это не относится к круглым скобкам — экранировать необходимо обе скобки в паре, открывающую и закрывающую.

Каждый из трех типов скобок подчиняется разным правилам. Прочитайте предыдущий абзац еще несколько раз и зазубрите его. Я подожду. Впрочем, не стоит!

Поиск шестнадцатеричных кодов цвета в самом волшебном режиме

Мы можем унифицировать правила для всех специальных символов с помощью ключа \v. Он включает самый волшебный (very magic) режим поиска, когда все символы интерпретируются как специальные, кроме символа подчеркивания («_»), букв верхнего и нижнего регистров и цифр от 0 до 9 (см. :h \v http://vimdoc.sourceforge.net/htmldoc/pattern.html#\v).

Ключ \v делает поведение механизма регулярных выражений Vim более похожим на механизм регулярных выражений в языках Perl, Python и Ruby. Однако существуют некоторые отличия, к которым мы не раз будем привлекать ваше внимание на протяжении всей этой главы, но запомнить их гораздо проще, чем правила экранирования символов.