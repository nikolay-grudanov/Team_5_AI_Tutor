---
source_image: page_290.png
page_number: 290
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.00
tokens: 5661
characters: 1630
timestamp: 2025-12-24T04:15:41.301598
finish_reason: stop
---

Рецепт 95. Перемена местами двух и более слов

После выполнения команды поиска и вслед за ней команды подстановки мы получим следующий результат:

<h1>Heading number 1</h1>
<h2>Number 2 heading</h2>
<h3>Another heading</h3>

Все HTML-теги заголовков изменились, а посторонние цифры, имевшиеся в документе, остались нетронутыми.

Рецепт 95. Перемена местами двух и более слов

Мы можем создать команду подстановки, которая будет менять местами все вхождения одного слова с вхождениями другого, используя регистр выражений и структуру-словарь на языке Vim.
Возьмем для примера следующий фрагмент:

substitution/who-bites.txt
http://media.pragprog.com/titles/dnvim/code/substitution/who-bites.txt

The dog bit the man.

Допустим, что нам нужно поменять местами слова «dog» и «man». Мы могли бы, конечно, использовать последовательность операций копирования и вставки, как описывалось в разделе «Как поменять слова местами» в главе 10. Но сейчас нам интересно выяснить, можно ли реализовать то же самое с помощью команды подстановки.
Ниже приводится первая, наивная попытка решить задачу:

⇒ :%s/dog/man/g
⇒ :%s/man/dog/g

Первая команда замещает слово «dog» словом «man», в результате чего получается фраза «the man bit the man». Вторая команда замещает оба вхождения слова «man» словом «dog», что в конечном итоге дает фразу «the dog bit the dog». Очевидно, что нам придется продолжить попытки.
Двухпроходное решение оказалось неудачным, поэтому нам необходимо создать такую команду подстановки, которая будет выполнять все необходимое за один проход. Самое простое здесь — написать шаблон, обнаруживающий слова «dog» и «man». Самое