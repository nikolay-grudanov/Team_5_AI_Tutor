---
source_image: page_152.png
page_number: 152
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.41
tokens: 5660
characters: 1691
timestamp: 2025-12-24T04:12:46.858824
finish_reason: stop
---

можно сделать, и не перезапуская Vim, предоставив эту задачу процессу командной оболочки, запущенной с помощью команды sudo.

Данный рецепт может быть неприменим к редактору GVim и точно не работает в Windows. Его можно применять в системах Unix, где редактор Vim выполняется в окне терминала, что является достаточно обычным делом, чтобы включить этот рецепт в книгу.

Продемонстрируем данный рецепт на примере файла /etc/hosts. Владельцем этого файла является root, но мы зашли в систему как пользователь «drew», поэтому мы можем только читать этот файл:

⇒ $ ls -al /etc/ | grep hosts
    -rw-r--r--   1 root wheel      634 6 Apr 15:59 hosts
⇒ $ whoami
    drew

Откроем этот файл в Vim:

⇒ $ vim /etc/hosts

Первое, что бросается в глаза после нажатия комбинации <C-g>, — статус файла, Vim пометил его как «[readonly]» («[только для чтения]»).

Попробуем изменить его и посмотрим, что из этого получится. Выполним команду Go, чтобы добавить пустую строку в конец файла. В ответ Vim выведет сообщение: «W10: Warning: Changing a readonly file» («W10: Внимание: изменен файл, доступный только для чтения»). Считайте это сообщение дружеским напоминанием, а не ошибкой. После вывода сообщения Vim выполнит запрошенное изменение.

Vim не мешает вносить изменения в буфер, соответствующий файлу, доступному только для чтения, но он не даст нам сохранить его на диск обычным способом:

⇒ :write
    E45: 'readonly' option is set (add ! to override)

Давайте последуем совету в сообщении¹ и повторим команду, добавив восклицательный знак в конец команды (что может означать: «На этот раз я понимаю, что делаю!»):

¹ Установлен параметр readonly (добавьте !, чтобы обойти проверку). — Прим. перев.