---
source_image: page_260.png
page_number: 260
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.29
tokens: 5675
characters: 1788
timestamp: 2025-12-24T04:15:02.712668
finish_reason: stop
---

Рецепт 83. Смещение курсора относительно конца совпадения

ли вставить в начало шаблона ключ \v, команда <C-r><C-w> вставит в строку ввода все слово под курсором (в результате, например, получится шаблон /\vcarrcarrot<CR>), а не только недостающий остаток. Когда выполняется поиск точного совпадения, а не по шаблону, функция автодополнения инкрементального режима поиска может сэкономить немало времени.

Рецепт 82. Подсчет совпадений с текущим шаблоном

В этом коротком рецепте рассказывается, как определить количество совпадений с шаблоном.
Команда поиска не сообщает количество совпадений, найденных в текущем документе. Но это количество можно определить следующей командой:

⇒ :%s///gn
    117 matches on 65 lines

В действительности это команда подстановки :substitute, флаг n в которой подавляет обычное ее поведение. Вместо замены каждого совпадения она просто подсчитывает количество совпадений и выводит результат ниже командной строки. Оставляя поле шаблона пустым, мы сообщаем, что должен использоваться текущий шаблон. Поле с текстом замены игнорируется (из-за флага n), поэтому его тоже можно оставить пустым.
Однако символы / опускать нельзя. Команда :%s//gn заменит каждое совпадение парой символов «gn»! Если такая команда кажется вам слишком длинной, привяжите ее к какой-нибудь комбинации клавиш. Я оставлю это вам в качестве самостоятельного упражнения.

Рецепт 83. Смещение курсора относительно конца совпадения

Смещение относительно концов совпадения можно использовать для позиционирования курсора относительно начала или конца совпадения на фиксированное число символов. В этом рецепте мы изучим пример, где благодаря возможности позиционирования курсора относительно конца совпадения мы сможем выполнить последовательность изменений, используя «формулу точки».