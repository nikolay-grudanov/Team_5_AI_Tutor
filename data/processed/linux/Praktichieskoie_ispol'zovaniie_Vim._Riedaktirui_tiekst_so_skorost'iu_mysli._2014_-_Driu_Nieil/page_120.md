---
source_image: page_120.png
page_number: 120
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.04
tokens: 5843
characters: 2046
timestamp: 2025-12-24T04:12:14.448899
finish_reason: stop
---

Рецепт 35. Выполнение команд в оболочке

операции сортировки, указав диапазон :2,$. Требуемую нам сортировку выполнит следующая команда:

⇒ :2,$!sort -t',' -k2

Теперь записи в нашем файле CSV должны быть отсортированы по фамилии:

first name,last name,email
jane,doe,jane@example.com
drew,neil,drew@vimcasts.org
john,smith,john@example.com

Редактор Vim поддерживает удобную краткую форму определения диапазона команды :[range]!{filter}. Команда-оператор !{motion} переведет редактор в режим командной строки и подставит в поле [range] диапазон, соответствующий указанному аргументу {motion} (см. :h ! http://vimdoc.sourceforge.net/htmldoc/change.html#!). Например, если поместить курсор в строку 2 и выполнить !G, Vim откроет командную строку и подставит в нее диапазон :.,$!. Правда, нам все еще нужно ввести остаток команды {filter}, но все-таки нам удалось сэкономить на нажатиях клавиш.

Обсуждение

При работе в Vim мы никогда не будем удаляться от командной оболочки дальше, чем на пару нажатий на клавиши, чтобы выполнить команду оболочки. В следующей таблице приводится список наиболее полезных приемов вызова внешних команд:

<table>
  <tr>
    <th>Команда</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td>:shell</td>
    <td>Запускает командную оболочку (возврат в Vim выполняется командой exit)</td>
  </tr>
  <tr>
    <td>!:cmd</td>
    <td>Выполняет команду {cmd} в командной оболочке</td>
  </tr>
  <tr>
    <td>:read !{cmd}</td>
    <td>Выполняет команду {cmd} в командной оболочке и вставляет ее вывод ниже курсора</td>
  </tr>
  <tr>
    <td>:[range]write !{cmd}</td>
    <td>Выполняет команду {cmd} в командной оболочке и передает на ее стандартный ввод указанный диапазон строк [range]</td>
  </tr>
  <tr>
    <td>:[range]!{filter}</td>
    <td>Фильтрует указанный диапазон строк [range] с помощью внешней команды {filter}</td>
  </tr>
</table>

Некоторые команды интерпретируются редактором Vim особо. Например, для команд make и grep имеются отдельные команды-обертки. Они не только упрощают запуск этих команд внутри Vim,