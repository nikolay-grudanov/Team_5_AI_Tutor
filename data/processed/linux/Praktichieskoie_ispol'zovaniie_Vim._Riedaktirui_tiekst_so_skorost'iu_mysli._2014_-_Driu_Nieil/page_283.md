---
source_image: page_283.png
page_number: 283
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.65
tokens: 5742
characters: 2045
timestamp: 2025-12-24T04:15:35.436547
finish_reason: stop
---

как если бы мы выделили текст «Practical Vim» в визуальном режиме и затем ввели "ay, чтобы скопировать выделенный текст в регистр а.

Обе команды подстановки делают одно и то же — они замещают все вхождения фразы «Pragmatic Vim» на «Practical Vim». А теперь подумайте о последствиях, которые влечет каждый из подходов.

В первом случае в истории команд создается запись :%s/Pragmatic Vim/Practical Vim/g, не допускающая неоднозначностей. Если позднее, в этом же сеансе редактирования, нам потребуется повторить эту команду подстановки, мы сможем вызвать ее из истории команд и выполнить еще раз. Без каких-либо неожиданностей.

Во втором случае в истории команд создается запись :%s//\=@a/g. Выглядит довольно туманно, не находите?

Когда эта команда выполнялась в первый раз, роль шаблона играла строка «Pragmatic Vim», а регистр а хранил текст «Practical Vim». Но за полчаса-час текущий шаблон поиска мог измениться десять раз, и содержимое регистра могло быть затерто чем-то другим. То есть если спустя какое-то время повторить команду :%s//\=@a/g, мы можем получить совершенно другой эффект!

Однако эту особенность можно использовать в своих интересах. Мы могли бы найти текст, который можно было бы использовать в качестве строки замены, и скопировать его в регистр а. Затем повторить команду :%s//\=@a/g, автоматически использующую подготовленные значения @/ и @a. Потом мы могли бы отыскать какой-то другой текст, определить его в качестве строки замены, сохранив в регистре а, и вновь повторить команду :%s//\=@a/g, которая на этот раз произвела бы совершенно другой эффект.

Попробуйте! Такой прием может нравиться или, наоборот, вызывать неприязнь, но в любом случае это довольно интересный трюк!

Рецепт 92. Повторение предыдущей команды подстановки

Иногда вам может потребоваться изменять диапазон действия команды подстановки. Например, если была допущена ошибка при первой попытке или при необходимости выполнить ту же команду подстановки с другим буфером. Существует пара приемов, упрощающих повторной вызов команды подстановки.