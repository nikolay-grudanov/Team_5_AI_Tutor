---
source_image: page_265.png
page_number: 265
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.17
tokens: 5811
characters: 2228
timestamp: 2025-12-24T04:15:13.345774
finish_reason: stop
---

Но у нас остается еще одна проблема. При нажатии клавиши n будет повторена последняя команда поиска, включая и смещение //e<CR>. Вместо того чтобы перенести курсор к началу следующего совпадения, клавиша n переместит его в конец. Чтобы попасть в начало совпадения, требуется повторить поиск командой //<CR> без смещения.

Такая необходимость вызывает раздражение, разве не так? Это хорошо, что команда «точка» повторит последнее изменение, а именно gU//e<CR>. Но довольно неприятно, что нам необходимо использовать команду //<CR> для перехода в начало следующего совпадения. Идеальной «формулой точки» была бы команда n., но вместо нее мы вынуждены использовать команду //<CR>. Более оптимальное решение, требующее использования дополнительного расширения, приводится во врезке «Текстовый объект, соответствующий совпадению».

Многие из вас наверняка заметили, что данный пример имеет альтернативное решение: gUfl. Команда перемещения fl выполняет переход из начала совпадения к ближайшему символу «l», а поскольку оба слова, «Xml» и «Xhtml», оканчиваются буквой «l», данная команда будет работать в обоих случаях.

Работая над примером, я сначала заметил это решение, и думаю, что на это важно обратить ваше внимание. Буквы верхнего регистра предшествуют (в смысле порядка сортировки) своим аналогам в нижнем регистре, что делает их более заметными и более предпочтительными целями (см. раздел «Думайте как при игре в “Балду”» в главе 8). Когда приходится иметь дело со словом «MixedCase», прописная буква (tc) выглядит гораздо заметнее, чем буква нижнего регистра перед ней (fd).

Текстовый объект, соответствующий совпадению

Идеальная «формула точки» требует единственного нажатия на клавишу, в результате которого будет выполнено перемещение и внесено необходимое изменение. Решение в рецепте 84 выше требует выполнить три нажатия, только чтобы переместить курсор (/<CR>), что весьма далеко от идеала. Весьма удивительно, что Vim не имеет встроенной команды перемещения, которую удобно было бы использовать при работе с совпадениями.

Однако благодаря поддержке сценариев мы легко можем добавить недостающую функциональность. Мое любимое решение — расширение textobj-lastpat, которое реализовал Кана Натсуно (Kana Natsuno),