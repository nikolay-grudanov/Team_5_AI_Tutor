---
source_image: page_203.png
page_number: 203
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 8.03
tokens: 7311
characters: 1147
timestamp: 2025-12-23T23:09:30.433646
finish_reason: stop
---

Данная программа — скрипт на языке Bash, который выполняет разведку портов на удалённом хосте. Скрипт определяет, какие порты (21, 25 и 80) доступны на указанном хосте, и возвращает результаты разведки в файл.

1. Функция isportopen() проверяет, доступен ли указанный порт на хосте. Если доступен, возвращает 1, иначе 0.
2. Внутри функции isportopen() создается временный файл для хранения результатов разведки.
3. Функция cleanup() удаляет временные файлы при завершении скрипта.
4. Переменные ATHOST и SCRATCH задаются из аргументов командной строки.
5. Проверяется доступность порта 21 (FTP).
6. Если доступен, то выполняется команды ftp -n $ATHOST, после чего результаты сохраняются в файл.
7. Если доступен, то выполняется команды telnet $ATHOST 25, после чего результаты сохраняются в файл.
8. Если доступен, то выполняется команды curl -LIs "https://${ATHOST}" >> "$SCRATCH", после чего результаты сохраняются в файл.
9. Выводится содержимое файла с результатами разведки.

Вот пример использования скрипта:

```bash
./script.sh 192.168.1.100 21 25 80
```

Здесь 192.168.1.100 — IP-адрес хоста, 21, 25 и 80 — порты, которые нужно разведать.