---
source_image: page_086.png
page_number: 86
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 11.34
tokens: 7681
characters: 2205
timestamp: 2025-12-23T23:04:54.500388
finish_reason: stop
---

Вы можете комбинировать команду grep с командой find для простого копирования соответствующих файлов в ваш текущий рабочий каталог (или любой указанный каталог):

find /home -type f -exec grep 'password' '{}' \; -exec cp '{}' . \;

Во-первых, мы используем find /home/ -type f, чтобы идентифицировать все файлы в каталоге /home и во всех остальных каталогах, вложенных в /home. Каждый найденный файл проверяется grep с целью поиска слова password в его содержимом. Каждый файл, соответствующий критериям grep, затем передается команде cp, чтобы скопировать найденный файл в текущий каталог (обозначенный точкой). Выполнение такой комбинации команд может занять довольно продолжительное время, поэтому лучше запускать ее в виде фоновой задачи.

Поиск по типу файла

Поиск в системе определенных типов файлов — довольно сложная задача. Нельзя полагаться на расширение файла: оно может вообще отсутствовать, например, если пользователь его умышленно удалил. К счастью, команда file способна помочь идентифицировать типы файлов, сравнивая их содержимое с известными шаблонами, называемыми магическими числами. В табл. 5.4 перечислены популярные магические числа и их начальные местоположения в файлах.

Таблица 5.4. Магические числа

<table>
  <tr>
    <th>Тип файла</th>
    <th>Шаблон магического числа (шестнадцатеричный)</th>
    <th>Шаблон магического числа (ASCII)</th>
    <th>Смещение файла (байт)</th>
  </tr>
  <tr>
    <td>JPEG</td>
    <td>FF D8 FF DB</td>
    <td>yOyU</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Исполняемый DOS</td>
    <td>4D 5A</td>
    <td>MZ</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Исполняемый и связываемый формат</td>
    <td>7F 45 4C 46</td>
    <td>.ELF</td>
    <td>0</td>
  </tr>
  <tr>
    <td>ZIP-файл</td>
    <td>50 4B 03 04</td>
    <td>PK..</td>
    <td>0</td>
  </tr>
</table>

Для начала вам нужно определить тип файла, для которого вы хотите выполнить поиск. Предположим, нужно найти в системе все файлы изображений формата PNG. Для этого сначала нужно взять файл, который не был изменен, например Title.png, запустить его с помощью команды file и проверить результат:

$ file Title.png

Title.png: PNG image data, 366 x 84, 8-bit/color RGBA, non-interlaced