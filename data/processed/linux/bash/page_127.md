---
source_image: page_127.png
page_number: 127
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 6.88
tokens: 7406
characters: 1471
timestamp: 2025-12-23T23:06:31.429471
finish_reason: stop
---

для очень больших наборов. Метод можно оптимизировать, написав сценарий bash, специально разработанный для извлечения и подсчета количества доступов к страницам, — для этого требуется только один проход данных. В примере 7.8 показан такой сценарий.

Пример 7.8. pagereq.sh

# Bash и кибербезопасность
# pagereq.sh
#
# Описание:
# Подсчет с помощью bash количества запросов страниц для данного IP-адреса
#
# Использование:
# pagereq <ip address> < inputfile
#   <ip address> IP-адрес для поиска
#
declare -A cnt
while read addr d1 d2 datim gmtoff getr page therest
do
    if [[ $1 == $addr ]]; then let cnt[$page]+=1 ; fi
done
for id in ${!cnt[@]}
do
    printf "%8d %s\n" ${cnt[$id]} $id
done

① Мы объявляем cnt как ассоциативный массив и в качестве индекса можем использовать строку. В данной программе в качестве индекса мы будем использовать адрес страницы (URL).

② ${!cnt [@]} выводит список всех значений индекса, которые были обнаружены. Обратите внимание: они не будут перечислены в удобном порядке.

В ранних версиях bash ассоциативных массивов нет. Подсчитать количество различных запросов страниц с определенного IP-адреса вы можете с помощью команды awk, потому что в ней есть ассоциативные массивы (пример 7.9).

Пример 7.9. pageref.awk

# Bash и кибербезопасность
# pageref.awk
#
# Описание:
# Подсчет количества запросов страниц для данного IP-адреса с помощью awk
#
# Использование:
# pagereq <ip address> < inputfile
#   <ip address> IP-адрес для поиска