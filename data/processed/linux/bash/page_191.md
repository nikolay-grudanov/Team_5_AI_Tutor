---
source_image: page_191.png
page_number: 191
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 8.26
tokens: 7445
characters: 1861
timestamp: 2025-12-23T23:09:01.714626
finish_reason: stop
---

Создание панели мониторинга

Панели инструментов полезны, если требуется отобразить несколько блоков информации, меняющейся со временем. Панель инструментов, которую мы далее рассмотрим, отобразит выводы трех сценариев и станет обновлять их через равные промежутки времени.

Здесь используются графические функции окна терминала. Вместо того чтобы просто прокручивать данные страницу за страницей, сценарий каждый раз будет перерисовывать экран с одной и той же начальной позиции, чтобы при перерисовке он полностью обновлялся.

Чтобы сценарий можно было переносить между различными программами, запущенными в терминале, нужно использовать команду tput, которая будет запрашивать последовательность символов, выполняющих графические функции для открытого в данный момент окна программы.

Поскольку экран постоянно «перерисовывается», вы не можете просто переместиться в верхнюю часть экрана и восстановить результат. Почему? Поскольку при следующей итерации могут быть отображены более короткие строки, чем в предыдущем выводе, старые данные с экрана следует удалить.

Сначала следует очистить экран, но, если на нем перед заполнением ничего не будет (например, из-за задержек в командах, предоставляющих вывод для отображения), этот эффект будет раздражать. В таком случае вы можете отправлять весь вывод через функцию (нашей собственной разработки), печатающую каждую строку вывода, и добавлять в конец каждой строки последовательность символов, которая будет очищать каждую строку по ее окончании, удаляя тем самым весь предыдущий вывод. Данная функция позволит немного украсить вывод, завершая каждую строку пунктирной линией.

В примере 12.4 показано создание экранной панели управления, содержащей три отдельных раздела вывода.

Пример 12.4. webdash.sh

#!/bin/bash -
#
# Rapid Cybersecurity Ops
# webdash.sh
#
# Описание:
# Создание информационной панели