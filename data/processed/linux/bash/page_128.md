---
source_image: page_128.png
page_number: 128
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 10.74
tokens: 7609
characters: 2034
timestamp: 2025-12-23T23:06:38.342397
finish_reason: stop
---

# подсчитать количество запросов страниц с адреса ($1)
awk -v page="$1" '{ if ($1==page) {cnt[$7]+=1 } }
END { for (id in cnt) {
    printf "%8d %s\n", cnt[id], id
}
}'
① В этой строке есть две переменные $1, разница между которыми очень большая. Первая переменная $1 является переменной оболочки и ссылается на первый аргумент, предоставленный этому сценарию при его вызове. Вторая переменная $1 — это awk. В каждой строке эта переменная относится к первому полю ввода. Первая переменная $1 была назначена странице переменной awk, чтобы ее можно было сравнить с каждой переменной $1 awk (то есть с каждым первым полем входных данных).

② Простой синтаксис приводит к тому, что переменная id перебирает значения индекса в массиве cnt. Это гораздо более простой синтаксис, чем синтаксис оболочки "${!cnt[@]}", но такой же эффективный.

Можно запустить сценарий pagereq.sh, указав IP-адрес, который требуется найти и перенаправить access.log в качестве входных данных:

$ bash pagereq.sh 192.168.0.37 < access.log | sort -rn | head -5

14 /files/theme/plugin49c2.js?1490908488
14 /files/theme/mobile49c2.js?1490908488
14 /files/theme/custom49c2.js?1490908488
14 /files/main_styleaf0e.css?1509483497
3 /consulting.html

Выявление аномалий в данных

В Интернете строка агента пользователя представляет собой небольшой фрагмент текстовой информации, отправляемый браузером на веб-сервер, который идентифицирует операционную систему клиента, тип браузера, версию и другую информацию. Обычно используется веб-серверами для обеспечения совместимости страниц с браузером пользователя. Вот пример такой строки:

Mozilla/5.0 (Windows NT 6.3; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0

Эта строка идентифицирует систему как Windows NT версии 6.3 (она же Windows 8.1) с 64-разрядной архитектурой и с браузером Firefox.

Строка агента пользователя может нас заинтересовать по двум причинам. Во-первых, значительный объем информации, которую эта строка передает, можно применять для идентификации типов систем и браузеров, обращающихся к сер-