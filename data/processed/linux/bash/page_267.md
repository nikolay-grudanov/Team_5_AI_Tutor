---
source_image: page_267.png
page_number: 267
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 9.17
tokens: 7429
characters: 1766
timestamp: 2025-12-23T23:11:50.808321
finish_reason: stop
---

INVCMMD="apt list --installed"
    ;;
*)
    echo "error: OSbase=${OSbase}"
    exit -1
    ;;
esac

#
# запустить проверку
#
$INVCMMD 2>/dev/null > $OUTFN

① Сначала мы даем определение файлу вывода. Если при вызове этого сценария пользователь указал аргумент (в нашем случае это $1), он будет задан в имени файла вывода. Если нет, по умолчанию будет использовано определенное оболочкой имя $HOSTNAME, к которому мы добавим оставшийся текст (_softinv.txt).

② Здесь мы, отбрасывая и stdout, и stderr, проверяем, доступен ли конкретный инструмент управления пакетами: только после получения результата (успех/неудача) принимается решение о том, существует ли в этой системе данный инструмент.

③ Оболочка bash помещает полученное значение предыдущей команды в $?, и только после этого проводится сравнение. Если значение равно 0, значит, команда выполнена успешно. В этом случае мы присваиваем значение OSbase, чтобы запомнить, какой дистрибутив (или версию Windows) используем. Мы делаем это для каждого применяемого инструмента.

④ С помощью оператора case можем выбрать, какую команду будем выполнять для сбора нужной информации, включая все аргументы.

⑤ В этой части сценария выполняется настоящая работа: команда запускается, и ее вывод направляется в файл.

Определение остального программного обеспечения

При просмотре списка файлов с помощью apt, dpkg, wmic или yum будет обнаружено только то программное обеспечение, что установлено с помощью менеджера пакетов. Если программное обеспечение — это исполняемый файл, который был скопирован в систему, не попав в менеджер пакетов, он не будет виден. Трудно определить программное обеспечение, которое таким образом было введено в систему, но все-таки некоторые методы для обнаружения таких файлов существуют.