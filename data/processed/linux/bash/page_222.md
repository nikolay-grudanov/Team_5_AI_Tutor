---
source_image: page_222.png
page_number: 222
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 9.58
tokens: 7479
characters: 1977
timestamp: 2025-12-23T23:10:14.855960
finish_reason: stop
---

18 Присваивая значение RANDOM, мы устанавливаем начальное значение для последовательности (псевдо-) случайных чисел, которые будут получены при каждой ссылке на переменную.

19 Параметр -r в команде read отключает специальное значение обратного слеша. Таким образом, если в нашем тексте встречается обратный слеш, он просто воспринимается как обратная косая черта, ничем не отличающаяся от любого другого символа. Нам нужно сохранить читаемые нами начальные (и конечные) пробелы в строках. Если в команде read мы зададим одно или несколько имен переменных, оболочка попытается разобрать входные данные на слова, чтобы назначить их указанным переменным. Если имена переменных не будут заданы, входные данные сохраняются во встроенном ответе переменной оболочки. Здесь самое главное заключается в том, что строка не будет анализироваться. Поэтому начальные и конечные пробелы сохраняются (кроме того, вы можете указать имя переменной, но это следует сделать перед чтением с IFS="", чтобы отменить любой разбор на слова и сохранить пробелы).

20 Оператор if проверяет, установлен ли флаг (если переменная содержит значение), чтобы решить, какую функцию вызывать: Decrypt или Ncrypt. В любом случае, чтобы сохранить всю строку в качестве одного аргумента, а также сохранить любые пробелы в строке текста (действительно необходимые только для случая Ncrypt), оператор if передает только что прочитанную из stdin строку, помещая ее в кавычки.

Первая строка streamcipher.sh использует значение source для включения внешнего кода из файла askey.sh. Этот файл, как показано в примере 14.8, содержит функции aschar и asnum.

Пример 14.8. askey.sh

# функции для преобразования десятичных чисел в ASCII и наоборот

# aschar — печать представления символов ascii
#    числа, переданного в качестве аргумента
# example: aschar 65 == > A
#
function aschar ()
{
    local ashex
    printf -v ashex '\x%02x' $1
    printf '%b' $ashex
}

# asnum — печатать ascii (десятичное) значение символа,