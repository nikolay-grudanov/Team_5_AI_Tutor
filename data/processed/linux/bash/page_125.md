---
source_image: page_125.png
page_number: 125
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 13.29
tokens: 7774
characters: 2378
timestamp: 2025-12-23T23:06:33.719510
finish_reason: stop
---

Вместо того чтобы второй раз использовать команду cut, можно добавить команду tr. Параметр -d удаляет указанный символ — в данном случае квадратную скобку.

cut -d' ' -f4,10 access.log | tr -d '['

Необходимо также определить способ группирования данных, связанных с датами: по дню, месяцу, году, часу и т. д. Для этого можно просто изменить параметр для второй итерации команды cut. В табл. 7.3 показаны параметры команды cut, которые используются для извлечения различных форм поля даты/времени. Обратите внимание, что эти параметры предназначены для файлов журнала Apache.

Таблица 7.3. Извлечение поля даты/времени журнала Apache

<table>
  <tr>
    <th>Извлечение даты/времени</th>
    <th>Образец вывода</th>
    <th>Параметры команды cut</th>
  </tr>
  <tr>
    <td>Дата/время</td>
    <td>12/Nov/2017:19:26:09</td>
    <td>-c2-</td>
  </tr>
  <tr>
    <td>Месяц, день и год</td>
    <td>12/Nov/2017</td>
    <td>-c2-12,22-</td>
  </tr>
  <tr>
    <td>Месяц и год</td>
    <td>Nov/2017</td>
    <td>-c5-12,22-</td>
  </tr>
  <tr>
    <td>Полное время</td>
    <td>19:26:04</td>
    <td>-c14-</td>
  </tr>
  <tr>
    <td>Час</td>
    <td>19</td>
    <td>-c14-15,22-</td>
  </tr>
  <tr>
    <td>Год</td>
    <td>2017</td>
    <td>-c9-12,22-</td>
  </tr>
</table>

Сценарий histogram.sh может быть особенно полезен при просмотре данных, связанных с датами. Например, если в организации имеется внутренний веб-сервер, доступ к которому осуществляется только в рабочее время с 09:00 до 17:00, можно с помощью такой гистограммы ежедневно просматривать файл журнала сервера, чтобы проверить, имеются ли всплески активности после обычного рабочего дня. Большие всплески активности или передача данных вне обычного рабочего времени может свидетельствовать об эксфильтрации со стороны злоумышленника. При обнаружении каких-либо аномалий можно отфильтровать данные по конкретной дате и времени и проверять доступ к странице, чтобы определить, является ли действие вредоносным.

Например, если требуется просмотреть гистограмму общего объема данных, полученных в определенный день за каждый час, можно выполнить следующую команду:

$ awk '$4 ~ "12/Nov/2017" {print $0}' access.log | cut -d' ' -f4,10 | cut -c14-15,22- | bash summer.sh | bash histogram.sh

17    ##
16    #############
15    #############
19    ##
18    ###############################################################