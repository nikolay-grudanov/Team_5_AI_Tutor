---
source_image: page_569.png
page_number: 569
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.49
tokens: 7562
characters: 2356
timestamp: 2025-12-24T05:01:18.831673
finish_reason: stop
---

Настойка системы SELinux для сервера NFS

Если система SELinux находится в разрешающем или отключенном режиме, она не блокирует доступ к службе NFS. Чтобы система работала в принудительном режиме, необходимо понимать, как работают логические типы. Чтобы проверить состояние SELinux в системе, введите следующее:

# getenforce
Enforcing
# grep ^SELINUX= /etc/sysconfig/selinux
SELINUX=enforcing

Если система находится в принудительном режиме, как в примере, откройте справочную страницу nfs_selinux, чтобы получить больше информации о настройках SELinux, которые могут повлиять на работу службы vsftpd. Вот несколько контекстов файлов SELinux, связанных с NFS, о которых необходимо знать.

● nfs_export_all_ro. С помощью этого логического типа SELinux позволяет обмениваться файлами с правами только на чтение на серверах NFS. Общий доступ к файлам NFS только для чтения разрешен при этом независимо от контекста файла SELinux, установленного для общих файлов и каталогов.
● nfs_export_all_rw. С помощью этого логического типа SELinux позволяет обмениваться файлами с правами на чтение/запись с помощью NFS. Как и предыдущий логический тип, этот работает независимо от контекста файла, установленного для общих файлов и каталогов.
● use_nfs_home_dirs. Чтобы NFS-сервер мог делиться вашим домашним каталогом, установите этот логический тип.

Первые два из данных логических типов включены по умолчанию. Логический тип use_nfs_home_dirs отключен. Чтобы включить каталог use_nfs_home_dirs, можно ввести следующее:

# setsebool -P use_nfs_home_dirs on

Однако вы можете игнорировать все логические типы, связанные с общим доступом к файлам NFS, изменяя контексты файлов в файлах и каталогах, которыми хотите поделиться через NFS. Контексты файлов public_content_t и public_content_rw_t могут быть установлены в любом каталоге с доступом через NFS или другие протоколы общего доступа к файлам, такие как HTTP, FTP и др. Например, чтобы установить правило, позволяющее совместно использовать каталог /whatever и его подкаталоги для чтения/записи через NFS, а затем применить это правило, введите следующее:

# semanage fcontext -a -t public_content_rw_t "/whatever(/.*)?"
# restorecon -F -R -v /whatever

Если вы хотите, чтобы пользователи могли просто читать файлы из каталога, но не записывать в него, вместо этого назначьте каталогу контекст public_content_t.