---
source_image: page_725.png
page_number: 725
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.35
tokens: 7536
characters: 2098
timestamp: 2025-12-24T05:05:44.212353
finish_reason: stop
---

Здесь вы можете видеть, что необходимый тип контекста — ssh_port_t. Теперь, снова используя команду semanage, вы добавляете этот тип в порт 47 347:

# semanage port -a -t ssh_port_t -p tcp 47347
# semanage port -l | grep ssh
ssh_port_t        tcp        47347, 22

На этом этапе отредактируйте файл /etc/ssh/sshd_config, чтобы добавить в него строку порта 47 347. Затем перезапустите службу sshd, чтобы она прослушивала нестандартный порт 47 347.

Перемещение файлов и потеря меток контекста безопасности
Вы использовали команду cp для временного перемещения файла из /etc в каталог /tmp. Затем — команду mv, чтобы вернуть его обратно. Теперь вместо исходного контекста безопасности файл имеет контекст безопасности временного каталога, и ваша система получает сообщения об отказе AVC, когда служба, применяющая этот файл, пытается запустить его.
Это легко исправить благодаря команде restorecon -R. Просто введите команду restorecon, и файл восстановит свой постоянный контекст безопасности.

Неверно заданные логические типы
Еще одна распространенная проблема — неправильная установка логического типа, которая выдает несколько отказов AVC.
Например, если скрипты вашей системы больше не могут подключаться к сети и вы получаете отказы AVC в журналах, нужно проверить логические типы httpd. Используйте команду getsebool -a и передайте ее в команду grep для поиска любых логических типов, влияющих на службу httpd. В примере показано, как используются эти команды:

# getsebool -a | grep http
...
httpd_can_network_connect --> off
...

Команда getsebool показывает, что логический тип httpd_can_network_connect установлен в значение off. Чтобы изменить логический тип, используйте команду setsebool -P httpd_can_network_connect on.
Обратите внимание: параметр -P использован для того, чтобы сделать настройку постоянной. Теперь ваши скрипты могут подключаться к сети.

Выводы о SELinux
Очевидно, что система SELinux — довольно сложный и масштабный инструмент. Теперь вы больше знаете о ее основных функциях. Дадим некоторые рекомендации, которые стоит учесть при внедрении SELinux в свою систему.