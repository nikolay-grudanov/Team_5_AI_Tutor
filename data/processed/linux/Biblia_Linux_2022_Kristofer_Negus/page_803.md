---
source_image: page_803.png
page_number: 803
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.46
tokens: 7633
characters: 2368
timestamp: 2025-12-24T05:07:51.524944
finish_reason: stop
---

шем окружении. Чтобы добавить дополнительные репозитории, записи в файле user-data можно сделать такими:

apt_mirror: http://us.archive.ubuntu.com/ubuntu/
apt_mirror_search:
  - http://myownmirror.example.com
  - http://archive.ubuntu.com
packages:
  - nmap
  - mycoolcmd
  - [libmystuff, 3.16.0-25]

Строка myownmirror.example.com указывает утилите apt использовать собственный частный репозиторий apt для поиска пакетов. Обратите внимание на то, что пакеты, которые вы хотите установить, вводятся в основном в том же формате, что и в Fedora, хотя конкретная информация о версии (если она есть) в некоторых случаях может выглядеть иначе.

Вы можете добавить множество других настроек в свои файлы user-data и meta-data. Обратитесь к странице Cloud-Init Cloud Config Examples (cloudinit.readthedocs.org/en/latest/topics/examples.html) за подробностями.

Использование службы cloud-init в корпоративных вычислениях

До сих пор описание службы cloud-init в этой главе было сосредоточено на создании облачного образа, ручном добавлении данных конфигурации и временном запуске его в качестве виртуальной машины на локальном гипервизоре. Этот подход полезен, если вы хотите понять, как работает cloud-init и какие есть возможности для настройки облачных образов в соответствии с вашими нуждами. Однако этот подход плохо масштабируется, если вы хотите управлять крупными системами виртуальных машин.

Служба cloud-init поддерживает концепцию источников данных. Поместив данные файлов user-data и meta-data в источник данных, не нужно вводить эту информацию вручную в облачный образ, как мы делали ранее в этой главе. Вместо этого, когда служба cloud-init начинает работать в образе, она знает, что нужно искать источники данных не только в локальной системе, но и за ее пределами.

Для облаков Amazon EC2 cloud-init запрашивает определенный IP-адрес (http://169.254.169.254/) данных. Например, он может проверить http://169.254.169.254/2009-04-04/meta-data/ для поиска файлов meta-data и http://169.254.169.254/2009-04-04/user-data/ для поиска файлов user-data. Это позволяет хранить данные конфигурации и получать к ним доступ из основного расположения.

Что касается того, что может содержаться в файлах meta-data и user-data, то для развертывания ваших облачных образов можно разработать гораздо более сложные схемы конфигурации. Служба cloud-init поддерживает инструмен-