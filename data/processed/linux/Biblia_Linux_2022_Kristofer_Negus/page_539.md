---
source_image: page_539.png
page_number: 539
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.54
tokens: 7629
characters: 2421
timestamp: 2025-12-24T05:00:33.315351
finish_reason: stop
---

Ваш брандмауэр может включать дополнительные правила, разрешающие входящие пакетные запросы для других служб, таких как Secure Shell (sshd) или web (httpd). Их можно не изменять. Главное, чтобы ваши правила Samba располагались где-то перед окончательными правилами REJECT.

Если брандмауэр iptables включен, можете перезапустить его, чтобы новые правила вступили в силу. Для этого введите команду systemctl restart iptables.service (в старых системах Fedora) или service restart iptables (в RHEL 6 или более ранней версии). Снова подключитесь к серверу Samba с помощью команды smbclient или с помощью других методов, описанных в разделе «Доступ к общим ресурсам Samba» далее в этой главе.

Дополнительные сведения об использовании брандмауэра iptables см. в главе 25 «Защита Linux в сети».

Настройка системы SELinux для сервера Samba

Существуют как контекст файла, так и логические типы, связанные с использованием Samba с SELinux в принудительном режиме. Контексты файлов должны быть правильно установлены в каталоге, общем для службы Samba. Логические типы позволяют переопределить подход с точки зрения безопасности по умолчанию к определенным функциям Samba.

Информацию о том, как SELinux ограничивает Samba, вы можете найти на справочной странице samba_selinux (man samba_selinux). Чтобы получить ее, необходимо установить пакет selinux-policy-doc. Лучше понять SELinux поможет глава 24.

Настройка логических типов в SELinux для Samba-сервера

Простой способ перечислить и изменить логические типы SELinux для Samba — использовать командную строку. Чтобы задействовать команду semanage для перечисления логических типов, связанных с Samba, введите следующее:

# semanage boolean -l | egrep "smb|samba"

Далее приведен список логических типов SELinux, применимых к Samba, с описанием. Большинство логических типов позволяет установить, какие файлы и каталоги сервер может читать и записывать от имени пользователей Samba. Другие типы дают возможность разрешить потенциально небезопасные функции.

● samba_run_unconfined. Позволяет серверу запускать неограниченные скрипты из общих ресурсов Samba.
● smbd_anon_write. Дает возможность разрешить анонимным пользователям изменять общедоступные файлы, применяемые для общедоступных служб передачи файлов. Файлы и каталоги должны быть помечены как public_content_rw_t.
● samba_enable_home_dirs. Позволяет серверу совместно задействовать домашние каталоги пользователей.