---
source_image: page_826.png
page_number: 826
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.73
tokens: 7587
characters: 2367
timestamp: 2025-12-24T05:08:31.836100
finish_reason: stop
---

PLAY RECAP *******************************************************
host01: ok=6 changed=4 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0
host02: ok=6 changed=4 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0
host03: ok=6 changed=4 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0

Выходные данные ansible-playbook пошагово проходят через каждую задачу. Первая задача (Gathering Facts) показывает, что все три хост-системы в inventory группы ws доступны. В выводе не показано только то, что команда использует учетные данные для подключения ко всем системам, а затем повышает привилегии этого пользователя до привилегий суперпользователя перед выполнением каждой последующей задачи.

Задача Install httpd проверяет, установлен ли пакет httpd на каждом хосте. Если это не так, Ansible устанавливает пакет вместе с любыми зависимыми пакетами. Затем Ansible проверяет состояние службы httpd на каждом хосте и, если она не запущена, запускает ее.

После этого на каждом хосте проверяется, установлен ли пакет firewalld, и если его нет, то система устанавливает его. Затем Ansible добавляет правило брандмауэра к каждому хосту, чтобы разрешить доступ к службе http (TCP-порт 80), и делает этот параметр постоянным.

Затем PLAY RECAP выводит результаты выполнения всех задач. В выводе видно, что все шесть задач на всех хостах выполнены. Если задача не выполняется, то система ее указывает в выводе.

Можете повторно запустить этот файл playbook, если кажется, что что-то вышло из строя или вы внесли в него изменения. Можете также воспользоваться им позже для развертывания playbook на разных системах.

Система Ansible хорошо развертывает несколько задач в playbook, а также может использоваться для одноразовых действий. В следующем разделе я покажу, как выполнить некоторые специальные ad-hoc-команды Ansible для запроса и дальнейшего изменения хостов, которые мы только что развернули.

Запуск ad-hoc-команд в системе Ansible

Ansible позволяет выполнить на своих узлах разовые задачи с помощью специальных ad-hoc-команд. Таким образом можно напрямую вызвать модуль из командной строки Ansible и заставить его действовать как файл inventory. Задачи могут включать:

● установку программных пакетов RPM;
● управление учетными записями пользователей;
● копирование файлов на узлы и с них;
● изменение прав доступа к файлу или каталогу;
● перезагрузку узла.