---
source_image: page_640.png
page_number: 640
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.01
tokens: 7528
characters: 2025
timestamp: 2025-12-24T05:03:18.969415
finish_reason: stop
---

иметь возможности напрямую изменять файл /etc/passwd. Например, злоумышленник может добавить новую учетную запись в файл, если доступ для записи был предоставлен пользователю Other.

Следующий файл — это /etc/shadow. Конечно, он тесно связан с файлом /etc/passwd, поскольку также задействуется в процессе аутентификации входа в систему. Файл /etc/shadow должен иметь следующие настройки прав:

● Owner: root;
● Group: root;
● Permissions: (000) Owner: --- Group: --- Other: ---.

Приведенный далее код показывает, что файл /etc/shadow имеет соответствующие настройки:

# ls -l /etc/shadow
----------. 1 root root 1049 Feb      2 09:45 /etc/shadow

Файл /etc/passwd имеет права на чтение для владельца, группы и других пользователей. Обратите внимание на то, как сильно ограничен в правах файл /etc/shadow по сравнению с файлом /etc/passwd. Для файла /etc/shadow нет прав на доступ, хотя суперпользователь все еще может получить доступ к нему. Итак, если только суперпользователь может просматривать этот файл, как пользователи могут менять свои пароли, которые хранятся в файле /etc/shadow? Команда passwd в файле /usr/bin/passwd задействует специальный SUID-параметр прав. Он показан далее:

# ls -l /usr/bin/passwd
-rwsr-xr-x. 1 root root 28804 Aug 17 20:50 /usr/bin/passwd

Таким образом, пользователь, выполняющий команду passwd, на время ее выполнения становится суперпользователем, а затем может записать ее в файл /etc/shadow, но только для того, чтобы изменить собственную информацию о пароле.

ПРИМЕЧАНИЕ
Суперпользователь не имеет доступа к изменению разрешения каталога /etc/shadow. Так как же он записывает в файл /etc/shadow? Суперпользователь имеет полный доступ ко всем файлам независимо от того, перечислены права для него или нет.

Файл /etc/group (см. главу 11 «Управление учетными записями») содержит все группы в системе Linux. Его права доступа к файлам должны быть установлены точно так же, как и в файле /etc/passwd:

● Owner: root;
● Group: root;
● Permissions: (644) Owner: rw- Group: r-- Other: r--.