---
source_image: page_724.png
page_number: 724
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.87
tokens: 7496
characters: 2014
timestamp: 2025-12-24T05:05:41.587172
finish_reason: stop
---

Что обычно может вызвать проблемы в системе SELinux:

● применение нестандартного каталога для службы;
● использование нестандартного порта для службы;
● перемещение файлов, которые приводят к потере меток контекста безопасности;
● неверно заданные логические типы.

Любую из этих проблем можно довольно быстро решить.

Использование нестандартного каталога для службы

По разным причинам вы можете хранить файлы службы в нестандартном каталоге. Система SELinux должна знать об этом. В противном случае она запрещает доступ к законным запросам доступа к услугам.

Например, вы решили хранить свои HTML-файлы не в стандартном каталоге /var/www/html, а в другом месте. Вы помещаете файлы в /abc/www/html. Необходимо сообщить SELinux, что служба http должна иметь доступ к файлам в /abc/www/html. Команды для этого — semanage или restorecon. В следующем примере с их помощью добавляется соответствующий тип контекста безопасности в каталог /abc/www/html:

# semanage fcontext -a -t httpd_sys_content_t "/abc/www/html(/.*)?"

Чтобы фактически установить новый тип контекста безопасности для файлов в каталоге, нужно использовать команду restorecon -R, например:

# restorecon -R -v /abc/www/html
# ls -Z /abc/www/html
unconfined_u:object_r:httpd_sys_content_t:s0 abc

Теперь демон httpd имеет разрешение на доступ к вашим HTML-файлам в нестандартном каталоге.

Использование нестандартного порта для службы

Вы можете установить, что служба прослушивает нестандартный порт, так же, как и при решении описанной ранее проблемы. Когда вы меняете этот порт, служба перестает запускаться.

Например, в целях безопасности вы решили перенести службу sshd с 22-го порта на нестандартный порт 47347. SELinux не знает об этом порте, и служба не запускается. Чтобы устранить эту проблему, сначала необходимо найти тип контекста безопасности для sshd. Для этого с помощью следующего кода выдается команда semanage port -l, а результаты передаются в команду grep для поиска службы ssh:

# semanage port -l | grep ssh
ssh_port_t tcp