---
source_image: page_519.png
page_number: 519
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.51
tokens: 7615
characters: 2403
timestamp: 2025-12-24T05:00:00.301250
finish_reason: stop
---

● Чтобы разрешить загрузку файлов анонимным пользователям, контекст файла в каталоге, в который вы загружаете файлы, должен быть установлен в значение public_content_rw_t. (Для этого должны быть установлены также другие разрешения, логические типы SELinux и настройки vsftpd.conf.)

Если у вас в структуре каталогов /var/ftp есть файлы с неправильными контекстами (что может произойти, если переместить туда файлы из других каталогов вместо их копирования), можете изменить или восстановить в них контекст файлов, чтобы они могли быть общими. Например, для рекурсивного изменения контекста файла каталога /var/ftp/pub/stuff так, чтобы содержимое можно было читать с FTP-сервера через SELinux, введите следующее:

# semanage fcontext -a -t public_content_t "/var/ftp/pub/stuff(/.*)?"
# restorecon -F -R -v /var/ftp/pub/stuff

Если вы хотите разрешить пользователям записывать файлы в каталог и читать из него, нужно назначить контекст файла public_content_rw_t каталогу загрузки. В примере далее команда указывает SELinux разрешить загрузку файлов в каталог /var/ftp/pub/uploads:

# semanage fcontext -a -t public_content_rw_t\ "/var/ftp/pub/uploads(/.*)?"
# restorecon -F -R -v /var/ftp/pub/uploads

Функции FTP-сервера, которые SELinux считает небезопасными, имеют логические типы, позволяющие разрешить или запретить эти функции, например.

● Чтобы SELinux разрешал анонимным пользователям читать и записывать файлы и каталоги, необходимо включить логический тип allow_ftpd_anon_write (в RHEL 6) или ftpd_anon_write (в RHEL 7 или более поздней версии):

# setsebool -P ftpd_anon_write on

● Чтобы иметь возможность монтировать удаленные общие файловые системы NFS или CIFS (Windows) и совместно использовать их из вашего сервера vsftpd, необходимо включить следующие два логических типа соответственно:

# setsebool -P allow_ftpd_use_nfs on
# setsebool -P allow_ftpd_use_cifs on

Если вы обнаружите, что не можете получить доступ к файлам или каталогам с вашего FTP-сервера, которые должны быть доступны, попробуйте временно отключить службу SELinux:

# setpenforce 0

Если сможете получить доступ к файлам или каталогам с SELinux в разрешительном режиме, верните систему в принудительный режим (setenforce 1). Таким образом можно выяснить, что проблема заключается в настройках SELinux. (См. главу 24 «Повышенная безопасность с технологией SELinux» для получения дополнительной информации о SELinux.)