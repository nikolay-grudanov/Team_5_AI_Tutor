---
source_image: page_378.png
page_number: 378
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.08
tokens: 7701
characters: 2384
timestamp: 2025-12-24T04:56:01.401034
finish_reason: stop
---

его можно настроить на прием сообщений и через порт 514 TCP). Порядок действий при настройке удаленного хоста Linux, который также запускает службу rsyslog, таков.

● Отредактируйте файл /etc/rsyslog.conf в системе удаленного хоста и раскомментируйте строки, которые позволяют демону rsyslogd прослушивать удаленные сообщения журнала. Раскомментируйте первые две строки, чтобы включить входящие сообщения журнала UDP на порте 514 (по умолчанию), затем раскомментируйте две строки, чтобы разрешить сообщения, использующие протокол TCP (также порт 514):

module(load="imudp") # needs to be done just once
input(type="imudp" port="514")
module(load="imtcp") # needs to be done just once
input(type="imtcp" port="514")

● Откройте брандмауэр, чтобы разрешить отправку новых сообщений на ваш удаленный хост. (См. главу 25 «Защита Linux в сети», чтобы узнать, как открыть определенные порты и разрешить доступ к вашей системе.)

● Перезапустите службу rsyslog (команда service rsyslog restart или systemctl restart rsyslog.service).

● Если служба запущена, вы должны увидеть, что она прослушивает подключенные порты (UDP и/или TCP-порты 514). Выполните команду netstat, как показано далее, чтобы убедиться, что демон rsyslogd прослушивает порты IPv4 и IPv6 514 для служб UDP и TCP:

# netstat -tupln | grep 514
tcp    0   0 0.0.0.0:514   0.0.0.0:*   LISTEN   25341/rsyslogd
tcp    0   0 ::1:514      :::*      LISTEN   25341/rsyslogd
udp    0   0 0.0.0.0:514   0.0.0.0:*   LISTEN   25341/rsyslogd
udp    0   0 ::1:514      :::*      LISTEN   25341/rsyslogd

Просмотр журналов с помощью службы logwatch

Служба logwatch работает в большинстве систем Linux, которые ведут системный журнал с помощью службы rsyslog. Поскольку журналы в занятых системах со временем могут сильно увеличиться в размере, системному администратору может потребоваться много времени, чтобы просмотреть каждое сообщение во всех журналах. Чтобы запустить службу logwatch, введите следующую команду:

# yum install logwatch

Служба logwatch собирает сообщения, которые могут представлять проблему, один раз за ночь, помещает их в сообщение и отправляет его на указанный адрес электронной почты. Чтобы включить службу logwatch, нужно лишь установить пакет logwatch.
Служба logwatch запускается из команды cron (@logwatch), помещенной в файл /etc/cron.daily. Файл /etc/logwatch/conf/logwatch.conf содержит локальные на-