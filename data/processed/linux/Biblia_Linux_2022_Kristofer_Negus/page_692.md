---
source_image: page_692.png
page_number: 692
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.15
tokens: 7542
characters: 2098
timestamp: 2025-12-24T05:04:45.310645
finish_reason: stop
---

#
# the syntax of the lines is as follows:
#
#    services;ttys;users;times
...

Я советую вам ознакомиться с содержимым файла time.conf. Обратите внимание на то, что формат каждой допустимой записи соответствует синтаксису: services;ttys;users;times. Поля разделяются точкой с запятой. Допустимые значения полей задокументированы в файле конфигурации time.conf.

Хотя в файле time.conf много комментариев, всегда полезно изучить все на примере. Например, вы решили, что обычным пользователям следует разрешать использовать терминалы только в будние дни (с понедельника по пятницу). Они могут войти в систему с 7 утра до 7 вечера по будням. В списке далее указано, какие элементы необходимо установить:

● services — учетная запись;
● ttys-* — включает все терминалы;
● users — включает всех, кроме суперпользователя (!root);
● times — позволяет вход по будням (wd) с 7 утра (0700) до 7 вечера (1900).

Такая запись в файле time.conf будет выглядеть следующим образом:

login; * ; !root ; wd0700-1900

В конце нужно убедиться, что модуль PAM, применяющий файл time.conf, включен в один из файлов конфигурации системных событий PAM. Модуль PAM, задействующий time.conf, называется pam_time. В примере далее команда grep отображает модуль PAM, pam_time не используется ни в одном из файлов конфигурации системных событий:

# grep "pam_time" /etc/pam.d/*
config-util:auth      sufficient   pam_timestamp.so
config-util:session   optional     pam_timestamp.so

Поскольку pam_time не указан в списке, вы должны изменить файл /etc/pam.d/system-auth, чтобы PAM мог применить временные ограничения. Файл конфигурации PAM system-auth используется модулями при входе в систему и при изменении пароля. Этот файл конфигурации проверяет множество элементов, включая временные ограничения.

Добавьте следующее в верхней части раздела account файла конфигурации:

account required pam_time.so

Теперь модуль pam_time проверяет ограничения входа, установленные вами в файле /etc/security/time.conf.

ПРИМЕЧАНИЕ
В дистрибутиве Ubuntu вам необходимо использовать файл /etc/pam.d/common-auth вместо файла system-auth.