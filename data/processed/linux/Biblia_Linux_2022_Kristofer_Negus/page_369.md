---
source_image: page_369.png
page_number: 369
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.84
tokens: 7777
characters: 2387
timestamp: 2025-12-24T04:55:46.908613
finish_reason: stop
---

-rw-r--r--.1 johndoe johndoe 2628 Apr 15 15:40 /tmp/man1/batch.1.gz
lrwxrwxrwx.1 root root 7 Feb 14 17:49 /usr/share/man/man1/batch.1.gz
    -> at.1.gz

Вывод команд в примере объясняет, как работает команда scp.

● Потеря атрибутов. Права или атрибуты даты и времени не сохранились при копировании файлов. Если вы используете команду scp в качестве инструмента резервного копирования, то, вероятно, захотите сохранить права и временные метки на файлах, чтобы восстановить файлы позже.
● Потеря символьских ссылок. Файл batch.1.gz на самом деле является символической ссылкой на файл at.1.gz. Вместо того чтобы копировать ссылку, команда scp переходит по ссылке и на самом деле копирует файл. Опять же, если нужно восстановить этот каталог, файл batch.1.gz будет заменен реальным файлом at.1.gz, а не ссылкой на него.
● Копирование повторяется без необходимости. Второй вывод команды scp говорит о том, что все файлы были скопированы снова, несмотря на то что нужные файлы уже скопированы в целевое место назначения. Обновленная дата изменений подтверждает это. Команда rsync, напротив, может определить, что файл уже скопирован, и не будет копировать его снова.

Команда rsync — лучший инструмент резервного копирования по сети, поскольку не имеет перечисленных недостатков команды scp. Используйте команду rsync, чтобы выполнить то же действие, какое выполнялось командой scp, но с несколькими дополнительными параметрами:

$ rm -rf /tmp/man1/
$ rsync -avl johndoe@10.140.67.23:/usr/share/man/man1/ /tmp/
johndoe@10.140.67.23's password: ***************
sending incremental file list
man1/
man1/HEAD.1.gz
man1/Mail.1.gz -> mailx.1.gz
...
$ rsync -avl johndoe@10.140.67.23:/usr/share/man/man1/ /tmp/
johndoe@10.140.67.23's password: ***************
sending incremental file list
sent 42362 bytes received 13 bytes 9416.67 bytes/sec
total size is 7322223 speedup is 172.80
$ ls -l /usr/share/man/man1/batch* /tmp/man1/batch*
lrwxrwxrwx.1 johndoe johndoe 7 Feb 14 17:49 /tmp/man1/batch.1.gz
    -> at.1.gz
lrwxrwxrwx.1 root root 7 Feb 14 17:49 /usr/share/man/man1/batch.1.gz
    -> at.1.gz

После удаления каталога /tmp/man1 запустите команду rsync, чтобы скопировать все файлы в каталог /tmp/man1 с помощью параметров -a (рекурсивно архивировать), -v (подробно) и -l (копировать символические ссылки). Затем сразу же выполните команду еще раз и обратите внимание — ничего не скопируется.