---
source_image: page_357.png
page_number: 357
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.36
tokens: 7831
characters: 3012
timestamp: 2025-12-24T04:55:28.218866
finish_reason: stop
---

Глава 13. Администрирование серверов

Независимо от того, какое средство используется в вашей системе Linux, ваша задача — установить, хотите ли вы, чтобы служба появлялась при загрузке системы, а также нужно ли запускать, останавливать и перезагружать службу по мере необходимости (возможно, при загрузке новых файлов конфигурации или временном запрете на доступ к службе). Команды для выполнения этих задач описаны в главе 15 «Запуск и остановка служб».

Большая часть служб реализуется в качестве демон-процессов. Вот что нужно знать об этих процессах.

• Права доступа пользователей и групп. Демоны часто выполняются от имени пользователей и групп, отличных от суперпользователя. Например, демон httpd работает как пользователь apache, а демон ntpd — как пользователь ntp. Причина этого заключается в том, что, если кто-то взломает эти демоны, они все равно не получат прав на доступ к файлам за пределами данных служб.

• Файлы конфигурации демонов. Чаще всего у службы есть свой файл конфигурации для демона, который хранится в каталоге /etc/sysconfig. Он отличается от файла конфигурации службы тем, что его задача заключается в передаче аргументов самому серврному процессу, а не в настройке службы. Например, параметры, заданные в файле /etc/sysconfig/rsyslogd, передаются демону rsyslogd при его запуске. Допустим, можно указать демону выводить дополнительную отладочную информацию или принимать сообщения удаленного журнала. См. справочную страницу нужной службы (например, man rsyslogd), чтобы узнать, какие параметры для нее поддерживаются.

• Номер порта. Пакеты данных поступают в систему и из нее переходят по сетевым интерфейсам через порты для каждого поддерживаемого протокола (обычно UDP или TCP). Большинство стандартных служб имеют определенные номера портов, к которым подключаются демоны и клиенты. Если не нужно скрывать местоположение службы, то номера портов не изменяются. При переходе к защите службы необходимо убедиться, что порт к службе открыт в брандмауэре (см. главу 25 «Защита Linux в сети», чтобы узнать о брандмауэрах iptables и firewalld). Кроме того, если изменить порт, на котором прослушивается служба, а система SELinux при этом находится в принудительном режиме, она может запретить демону прослушивать этот порт (см. главу 24 «Повышенная безопасность с технологией SELinux», чтобы узнать о системе SELinux).

ПРИМЕЧАНИЕ
Причина изменения номеров портов в сервисе основывается на принципе «безопасность через неясность» (security by obscurity). Например, служба sshd чаще всего становится целью для тех, кто пытается взломать систему, угадывая логины и пароли на TCP-порте 22.

Я знаю, что некоторые пользователи меняли свой интернет-сервис sshd, чтобы задействовать другой номер порта (возможно, какой-то неиспользуемый порт с большим номером). Затем они просили друзей или коллег войти в их компьютер из SSH, указав новый номер порта. Суть заключается в том, что сканеры портов, желающие проникнуть в систему, с меньшей вероятностью просканируют неиспользуемый порт.