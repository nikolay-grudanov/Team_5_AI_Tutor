---
source_image: page_308.png
page_number: 308
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.99
tokens: 7633
characters: 2210
timestamp: 2025-12-24T04:53:57.684288
finish_reason: stop
---

Настройка списков ACL с помощью команды setfacl

С помощью команды setfacl в списках ACL можно изменять права (-m) или удалить их (-x). Далее приведен пример синтаксиса команды setfacl:

setfacl -m u: имя_пользователя :rwx имя_файла

Здесь за параметром modify (-m) следует буква u, обозначающая, что вы устанавливаете права ACL для пользователя. После двоеточия (:) указываются имя пользователя, затем еще одно двоеточие и права, которые нужно назначить. Как и в случае с командой chmod, вы можете назначить пользователю или группе права на чтение (r), запись (w) и/или исполнение (x) (в данном примере даются полные права rwx). Последний аргумент заменяется фактическим именем файла.

Далее приведены примеры применения команды setfacl, где пользователь mary добавляет в файл права для других пользователей и групп:

[mary]$ touch /tmp/memo.txt
[mary]$ ls -l /tmp/memo.txt
-rw-rw-r--. 1 mary mary 0 Jan 21 09:27 /tmp/memo.txt
[mary]$ setfacl -m u:bill:r /tmp/memo.txt
[mary]$ setfacl -m g:sales:r /tmp/memo.txt

Здесь пользователь mary создал файл с именем /tmp/memo.txt. С помощью команды setfacl он изменил права (-m) для пользователя bill, так что теперь у него есть права на чтение/запись (rw) этого файла. Затем пользователь mary изменил права для группы sales, чтобы любой ее член также имел права на чтение и запись. Теперь посмотрите на вывод ls -l и getfacl в этом файле:

[mary]$ ls -l /tmp/memo.txt
-rw-rw-r--+ 1 mary mary 0 Jan 21 09:27 /tmp/memo.txt
[mary]$ getfacl /tmp/memo.txt
# file: tmp/memo.txt
# owner: mary
# group: mary
user::rwuser:
bill:rwgroup::
rwgroup:
sales:rwmask::
rwother::
r--

Обратите внимание на знак плюс (+) в выводе rw-rw-r--+ после ls -l. Он указывает на то, что ACL установлены в файле, поэтому нужно запустить команду getfacl, чтобы увидеть, какие именно списки ACL там есть. В выводе mary — это и владелец, и группа (так же как после ls -l), права обычного пользователя — это rw-, а права в ACL для пользователя bill — это rw-. То же самое верно для прав для групп, в том числе группы sales. Другие права — это r--.

Строку mask (ближе к концу в предыдущем примере getfacl) нужно обсудить отдельно. Как только вы устанавливаете списки ACL для файла, для прав обычных