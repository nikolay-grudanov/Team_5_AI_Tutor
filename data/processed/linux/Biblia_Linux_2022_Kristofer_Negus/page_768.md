---
source_image: page_768.png
page_number: 768
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.78
tokens: 7781
characters: 2329
timestamp: 2025-12-24T05:06:58.524559
finish_reason: stop
---

Installing:
vsftpd    x86_64    3.0.3-32.fc31    fedora    164 k
...
Complete!
99931652dceacc2e9...
STEP 5: VOLUME /var/log/vsftpd
b79b229d09f726356...
STEP 6: EXPOSE 20 21
b0af5428800140104...
STEP 7: RUN mkdir -p ${APP_DATA}/src
b3652e0d07e35af79...
STEP 8: WORKDIR ${APP_DATA}/src
f9d96dee640c5cedc...
STEP 9: COPY ./s2i/bin/ /usr/local/s2i
ded9b512693ccabaa...
STEP 10: COPY default-conf/vsftpd.conf /etc/vsftpd/vsftpd.conf
0c48af8d4f72b76c7...
STEP 11: CMD ["/usr/local/s2i/run"]
STEP 12: COMMIT vsftpd
aa0274872f23ae94dfee...

5. Убедитесь, что новый образ создан:

# podman images
REPOSITORY      TAG      IMAGE ID      CREATED      SIZE
localhost/vsftpd latest aa0274872f23 4 minutes ago 607 MB

Целиком процесс состоит из 12 шагов. Строка FROM на первом шаге извлекает образ fedora из реестра контейнеров registry.fedoraproject.org. На каждом последующем шаге выполняется команда. Если содержимое добавляется во время выполнения команды, для образа создается новый слой. Шаги 2 и 3 устанавливают переменные среды и метки, которые используются во время сборки, а также для идентификации атрибутов образа контейнера при его дальнейшем применении.

Шаг 4 запускает команду dnf, которая устанавливает пакет vsftpd из репозитория Fedora yum в контейнер. Обратите внимание на то, что инструкция RUN содержит как dnf install, так и dnf clean. Это предотвращает включение дополнительного слоя кэшированных данных dnf в образ.

Шаг 5 определяет том, используемый для хранения файлов журнала vsftpd. Шаг 6 добавляет TCP-порты 20 и 21 для службы FTP. Обратите внимание: даже если порты открыты (то есть их можно увидеть снаружи контейнера), они все равно должны быть сопоставлены с портами хоста при последующем запуске контейнера, если вы хотите, чтобы эти порты были доступны за пределами локальной системы.

Шаги 7 и 8 создают каталог и устанавливают его в качестве рабочего каталога для приложения. Шаг 9 копирует скрипты source-to-image (s2i) в контейнер для запуска службы vsftpd. Шаг 10 копирует файл конфигурации по умолчанию vsftpd.conf в контейнер.

На шаге 11 инструкция CMD устанавливает каталог /usr/local/s2i/run в качестве команды по умолчанию, если контейнер запускается без ее переопределения. Шаг 12 фиксирует окончательный образ vsftpd в локальном хранилище (которое можно увидеть, набрав команду podman images).