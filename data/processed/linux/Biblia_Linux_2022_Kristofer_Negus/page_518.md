---
source_image: page_518.png
page_number: 518
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.76
tokens: 7569
characters: 2306
timestamp: 2025-12-24T04:59:57.386154
finish_reason: stop
---

раз при запуске брандмауэра. Отредактируйте эту строку в начале файла /etc/sysconfig/iptables-config, чтобы она выглядела следующим образом:

IPTABLES_MODULES="nf_conntrack_ftp"

На этом этапе можно перезапустить брандмауэр, помня о том, что ошибка может заблокировать вас, если вы вошли в систему удаленно. Используйте одну из двух следующих команд для перезапуска брандмауэра в зависимости от того, применяет ли ваша система более старую службу iptables или новую firewalld:

# service iptables restart

или

# systemctl restart firewalld.service

Попробуйте еще раз получить доступ к FTP-серверу из удаленной системы с помощью браузера или другого FTP-клиента.

Настройка SELinux для FTP-сервера

Если служба SELinux установлена в разрешительный режим или отключена, то она никоим образом не будет блокировать доступ к службе vsftpd. Однако, если SELinux находится в принудительном режиме, это может привести к тому, что ваш сервер vsftpd будет вести себя не так, как хотелось бы. Используйте следующие команды для проверки состояния SELinux в своей системе:

# getenforce
Enforcing
# grep ^SELINUX= /etc/sysconfig/selinux
SELINUX=enforcing

Команда getenforce показывает, в какой режим установлена служба SELinux. (В примере она находится в принудительном режиме.) Переменная SELINUX= в файле /etc/sysconfig/selinux показывает, в какой режим устанавливается SELinux при запуске системы. Если она находится в принудительном режиме, как в примере, проверьте справочную страницу ftpd_selinux для получения информации о настройках SELinux, которые могут повлиять на работу вашей службы vsftpd. Установите пакет selinux-policy-doc, чтобы получить справочную страницу ftpd_selinux, а также справочные страницы для других служб, связанных с политикой SELinux.

Примеры контекстов файлов, которые следует установить для SELinux, чтобы разрешить доступ к файлам и каталогам vsftpd.

● Чтобы поделиться содержимым так, чтобы его можно было загрузить на FTP-клиенты, он должен быть помечен контекстом файла public_content_t. Файлы, созданные в каталоге /var/ftp или в его подкаталогах, автоматически наследуют контекст файла public_content_t. (Обязательно создайте новое содержимое или скопируйте существующее в каталоги /var/ftp. Если файлы туда просто переместить, контекст может не измениться должным образом.)