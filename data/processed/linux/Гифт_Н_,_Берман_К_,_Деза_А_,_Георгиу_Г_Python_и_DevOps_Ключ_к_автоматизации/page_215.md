---
source_image: page_215.png
page_number: 215
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.97
tokens: 7562
characters: 2341
timestamp: 2025-12-24T03:06:32.128598
finish_reason: stop
---

Помещаемые в StatsD данные агрегируются и сбрасываются в гибко настраиваемую прикладную часть (например, Graphite) через заданные промежутки времени (по умолчанию 10 секунд). По нашему опыту развертывания сочетания Graphite и StatsD в нескольких средах промышленной эксплуатации, проще использовать по одному экземпляру StatsD на каждом сервере приложения вместо одного экземпляра для всех приложений. Подобное развертывание упрощает настройку и повышает безопасность: конфигурация на всех серверах приложений указывает на сервис StatsD на localhost, так что не требуется открывать никакие внешние порты. В конце StatsD передает метрики в Graphite через исходящее UDP-соединение. Определенное преимущество заключается также в повышении масштабируемости благодаря распределению нагрузки далее по конвейеру на Graphite.

StatsD представляет собой демон Node.js, так что его установка означает подтягивание зависимости Node.js. Это отнюдь не проект Python!

Prometheus

Во многом Prometheus (https://prometheus.io) похож на Graphite (широкие возможности выполнения запросов и визуализации). Основное различие — он извлекает информацию из источников, причем по HTTP. Так что сервисы должны открывать доступ к конечным точкам HTTP, чтобы Prometheus мог собирать метрики. Еще одно существенное отличие его от Graphite — встроенные возможности оповещения с настраиваемыми правилами генерации оповещений либо возможностью использовать Alertmanager — компонент, предназначенный для управления оповещениями, их подавления, агрегирования и перенаправления в различные системы, например электронную почту, чат и онлайн-платформы.

В некоторых проектах, например Ceph (https://ceph.com), есть настраиваемые опции, активирующие сбор Prometheus информации через заданные промежутки времени. Если есть готовая интеграция подобного вида — замечательно, в противном случае придется запустить где-то экземпляр HTTP-сервера, предоставляющий сервису данные. Например, в случае применения базы данных PostgreSQL (https://www.postgresql.org) экспорт в Prometheus выполняется контейнером, в котором запущен HTTP-сервис, предоставляющий доступ к данным. Такой вариант вполне подходит во многих случаях, но если уже интегрированы какие-либо системы для сбора информации, например collectd (https://collectd.org), то запуск HTTP-сервисов может оказаться нежелательным.