---
source_image: page_184.png
page_number: 184
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.23
tokens: 7515
characters: 2208
timestamp: 2025-12-24T03:05:50.263968
finish_reason: stop
---

ExecStart=/opt/http/bin/pecan serve /opt/http/api/config.py
WorkingDirectory=/opt/http/api
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target

Сохраните этот файл с названием hello-world.service. Далее в этом разделе мы скопируем его туда, где он должен в итоге находиться.

Важно обеспечить правильность всех названий разделов и инструкций конфигурации, поскольку они все учитывают регистр клавиатуры. Если названия хоть чуть-чуть расходятся, ничего работать не будет. Рассмотрим во всех подробностях каждый из разделов для HTTP-сервиса.

• Unit. Приводит описание и включает инструкцию After, указывающую systemd, что перед выполнением данного юнита сервиса сетевая среда должна быть в рабочем состоянии. Требования других юнитов могут быть еще сложнее не только для запуска сервиса, но и после его запуска! Очень удобны, в частности, инструкции Condition и Wants.

• Service. Этот раздел необходим только при настройке юнита сервиса. По умолчанию Type=simple. От сервисов этого типа не следует порождать новые — они должны оставаться на переднем плане, чтобы systemd мог управлять их работой. Строка ExecStart задает команду, которую необходимо выполнить для запуска сервиса. Обязательно используйте абсолютные пути во избежание проблем с поиском нужных файлов.

Хотя это и не обязательно, я включил инструкцию WorkingDirectory, чтобы гарантировать выполнение процесса в том же каталоге, где располагается приложение. В случае изменений в будущем соответствующее приложению местоположение может пригодиться.

Инструкции StandardOutput и StandardError очень удобны в работе и демонстрируют широту возможностей systemd. Они берут на себя все журналы, выдаваемые механизмами systemd через stdout и stderr. Мы продемонстрируем это подробнее, когда будем обсуждать взаимодействие с сервисом.

• Install. Инструкция WantedBy указывает, когда запускать юнит в случае его активации. multi-user.target эквивалентно runlevel 3 (обычный уровень выполнения для сервера, которому для штатной работы достаточно текстового терминала). С помощью этой настройки система определяет поведение после активации. После активации создается символическая ссылка в каталоге multi-user.target.wants.