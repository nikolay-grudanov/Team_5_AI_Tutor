---
source_image: page_131.png
page_number: 131
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.62
tokens: 7585
characters: 2123
timestamp: 2025-12-24T03:04:17.430326
finish_reason: stop
---

Сетевые утилиты

Сетевые утилиты непрерывно совершенствуются по мере роста числа требующих соединения серверов. Часть этого раздела описывает создание удобных однорочных сценариев, например, для SSH-туннелирования, а часть подробно рассказывает о способах измерения быстродействия сети, например, с помощью утилиты Apache Bench.

SSH-туннелирование

Вы пробовали когда-нибудь подключиться к HTTP-сервису, запущенному на удаленном сервере, доступном только через SSH? Подобная ситуация может возникнуть, когда включенный HTTP-сервис не должен быть общедоступным. Последний раз мы встречались с таким, когда работали с плагином управления экземпляра RabbitMQ (https://www.rabbitmq.com), находящегося в промышленной эксплуатации, который запускался в виде HTTP-сервиса на порте 15672. Этот сервис не был открыт для всеобщего доступа, и не случайно, поскольку применялся он редко, а при необходимости можно было воспользоваться SSH-туннелированием.

Для этого создается SSH-соединение с удаленным сервером, после чего удаленный порт (в данном случае 15672) перенаправляется на локальный порт машины, запросившей соединение. На удаленной машине порт SSH был нестандартным, что несколько усложнило команду, которая выглядела вот так:

$ ssh -L 9998:localhost:15672 -p 2223 adeza@prod1.rabbitmq.ceph.internal -N

В ней можно видеть три флага, три числа и два адреса. Рассмотрим эту команду по частям, чтобы разобраться, что происходит. Флаг -L включает проброс портов и привязку локального порта (9998) к удаленному (по умолчанию для RabbitMQ — 15672). Флаг -p указывает нестандартный порт SSH удаленного сервера — 2223, а далее указываются имя пользователя и адрес. Наконец, флаг -N означает, что требуется только проброс портов, а не выполнение удаленных команд.

Если выполнить эту команду правильно, она как бы зависнет, но при этом вы сможете, перейдя по адресу http://localhost:9998/, увидеть страницу входа для удаленного экземпляра RabbitMQ. Один из полезных флагов при туннелировании -f: он переводит процесс в фоновый режим, что удобно для постоянного соединения, поскольку терминал при этом готов для дальнейшей работы.