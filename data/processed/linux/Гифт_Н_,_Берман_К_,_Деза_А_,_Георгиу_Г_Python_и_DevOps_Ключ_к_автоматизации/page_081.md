---
source_image: page_081.png
page_number: 81
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.08
tokens: 7472
characters: 1901
timestamp: 2025-12-24T03:02:58.533346
finish_reason: stop
---

In [66]: matched = re.finditer(r, access_log)

In [67]: for m in matched:
    ...:     print(m.group('IP'))
    ...:
127.0.0.1
342.3.2.33

С помощью регулярных выражений можно делать с текстом очень многое. Если они вас не пугают, вы обнаружите, что это один из самых мощных инструментов для работы с текстом.

Обработка больших файлов

Иногда требуется обрабатывать очень большие файлы. Если данные в файле можно обрабатывать построчно, то при использовании Python все очень просто: вместо его загрузки в оперативную память целиком, как мы делали ранее, можно читать по одной строке за раз, обрабатывать ее, а затем переходить к следующей. Средство сборки мусора Python автоматически удаляет из памяти эти строки, освобождая занимаемую ими память.

Python автоматически выделяет и освобождает память. Для этого служит система сборки мусора. Средством сборки мусора Python можно управлять с помощью пакета gc, хотя требуется это редко.

Чтение файлов, созданных на различных операционных системах, затрудняется тем фактом, что в этих ОС используются разные символы окончания строк. Созданные в Windows файлы содержат символ \r в дополнение к \n. А в Linux-системах они отображаются в виде части текста. Если нужно в большом файле подправить символы окончания строк в соответствии с применяемой операционной системой, можно открыть этот файл и читать его построчно, сохраняя строки в новый файл. А Python возьмет на себя преобразование символов окончания строк:

In [23]: with open('big-data.txt', 'r') as source_file:
    ...:     with open('big-data-corrected.txt', 'w') as target_file:
    ...:         for line in source_file:
    ...:             target_file.write(line)
    ...:

Обратите внимание на возможность использования вложенных операторов with для открытия двух файлов сразу и прохода в цикле построчно по исходному файловому объекту. Для этого удобно описать функцию-генератор, особенно