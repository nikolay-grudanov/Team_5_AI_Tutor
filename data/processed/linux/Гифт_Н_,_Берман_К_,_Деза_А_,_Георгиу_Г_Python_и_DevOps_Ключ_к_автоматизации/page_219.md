---
source_image: page_219.png
page_number: 219
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.20
tokens: 7717
characters: 2488
timestamp: 2025-12-24T03:06:44.815692
finish_reason: stop
---

slow_bucket{endpoint="/database",le="0.025"} 0.0
slow_bucket{endpoint="/database",le="0.05"} 0.0
slow_bucket{endpoint="/database",le="0.075"} 0.0
slow_bucket{endpoint="/database",le="0.1"} 0.0
slow_bucket{endpoint="/database",le="0.25"} 0.0
slow_bucket{endpoint="/database",le="0.5"} 0.0
slow_bucket{endpoint="/database",le="0.75"} 0.0
slow_bucket{endpoint="/database",le="1.0"} 0.0
slow_bucket{endpoint="/database",le="2.5"} 2.0
slow_bucket{endpoint="/database",le="5.0"} 2.0
slow_bucket{endpoint="/database",le="7.5"} 2.0
slow_bucket{endpoint="/database",le="10.0"} 2.0
slow_bucket{endpoint="/database",le="+Inf"} 2.0
slow_count{endpoint="/database"} 2.0
slow_sum{endpoint="/database"} 2.0021886825561523

Объект Histogram отличается большой гибкостью, он может выступать в роли контекстного менеджера, декоратора или получать значения напрямую. Подобная гибкость открывает невероятные возможности и помогает с легкостью создавать инструменты для работы в самых разных средах.

Телеметрия

В одной из известных нам компаний было приложение, используемое несколькими газетами, — гигантское монолитное веб-приложение без мониторинга выполнения. Команда эксплуатации неплохоправлялась с отслеживанием расхода системных ресурсов, в частности оперативной памяти и CPU, но не было никакой проверки количества вызовов в секунду API стороннего поставщика видео, а также степени их ресурсоемкости. Можно возразить, что подобные измерения можно получить посредством журналирования, и это действительно так, но опять же речь идет о гигантском монолитном приложении, и без того отличающемся безумным объемом журналов.

Задача состояла в создании надежных метрик с удобной визуализацией и организацией запросов, причем таких, чтобы их добавление в код требовало не многодневного обучения разработчиков, а всего лишь добавления операторов журналирования. Для любой технологии телеметрия во время выполнения должна быть как можно ближе к описанному в предыдущем предложении варианту. Любое решение, которое ему не соответствует, вряд ли будет успешно работать. Если выполнение запросов или визуализация в нем требуют значительных усилий, мало кто им будет пользоваться или обращать внимание на результаты. Если реализация (и сопровождение!) сложны, от него могут отказаться. Если добавление такой телеметрии времени выполнения неудобно для разработчиков, то не имеет значения, что вся инфраструктура и сервисы готовы использовать метрики — ничего они не получат (по крайней мере, ничего осмысленного).