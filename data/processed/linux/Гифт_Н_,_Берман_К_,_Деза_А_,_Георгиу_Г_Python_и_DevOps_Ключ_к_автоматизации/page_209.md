---
source_image: page_209.png
page_number: 209
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.42
tokens: 7607
characters: 2309
timestamp: 2025-12-24T03:06:23.965543
finish_reason: stop
---

Централизованное журналирование

Журналирование по степени важности не слишком отстает от автоматизации. В крупномасштабных распределенных системах журналирование совершенно необходимо. Особое внимание следует уделять журналированию как на уровне приложения, так и на уровне среды.

Например, исключения всегда должны отправляться в централизованную систему журналирования. В то же время при разработке программного обеспечения журналы отладки зачастую полезнее, чем вывод в консоль. Почему? Многие часы тратятся на разработку эвристических правил отладки исходного кода. Почему бы не использовать эти наработки для решения конкретных проблем при промышленной эксплуатации?

Хитрость заключается в уровнях журналирования. Благодаря уровням журналирования, отображаемым только в среде разработки, а не промышленной эксплуатации, исходный код может включать всю логику журналирования. Аналогично можно отключать чрезмерно подробное и вводящее в заблуждение журналирование при промышленной эксплуатации.

Пример журналирования в крупномасштабных распределенных системах можно найти в Ceph (https://ceph.com/): у демонов может быть до 20 уровней журналирования! Все они обрабатываются в коде, что позволяет гибко регулировать его объем. Ceph еще более совершенствует эту стратегию за счет возможности ограничения объема журналирования для демонов. В системе может быть несколько демонов, и журналирование можно расширять для одного из них или их всех.

Ситуационный анализ: база данных при промышленной эксплуатации разрушает жесткие диски

Еще одна важнейшая стратегия журналирования связана с решением проблемы масштабируемости. По достижении приложением определенных размеров уже не имеет смысла хранить все его журналы в файле. Альфредо однажды пришлось искать причины проблемы с основной базой данных крупного веб-приложения, охватывавшего сайты около сотни газет, радиостанции и телевизионного канала. Эти сайты генерировали огромный объем трафика и колоссальное количество записей журналов. Журналов было так много, что журналирование PostgreSQL было установлено на минимальный уровень, так что Альфредо не мог найти причину проблемы, так как не мог повысить уровень журналирования. При повышении уровня журналирования приложение просто перестало бы работать из-за интенсивных операций ввода/вывода. Каждый