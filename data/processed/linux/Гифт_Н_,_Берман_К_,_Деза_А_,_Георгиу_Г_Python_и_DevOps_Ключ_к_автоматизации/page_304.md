---
source_image: page_304.png
page_number: 304
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.06
tokens: 7494
characters: 1998
timestamp: 2025-12-24T03:08:57.710224
finish_reason: stop
---

Стоит потратить минуту, чтобы оценить по достоинству то, насколько упростились сейчас создание бесплатного SSL-сертификата. Прошли те времена, когда нужно было ждать часами или даже днями одобрения запроса поставщиком SSL-сертификатов, причем вы должны были представить доказательства, что ваша компания существует. При наличии AWS ACM и Let’s Encrypt в 2020 году не может быть оправданий тому, что не на всех страницах веб-сайта используется SSL.

Автоматическое выделение инфраструктуры с помощью Terraform

Мы решили задействовать Terraform в качестве первой утилиты IaC для автоматизации упомянутых задач, хотя она и не имеет непосредственного отношения к Python. Однако у нее есть несколько преимуществ, в частности зрелость, развитая инфраструктура и средства выделения ресурсов для мультиоблаков.

При написании кода Terraform рекомендуется применять модули — переписываемые компоненты кода конфигурации Terraform. Компания HashiCorp поддерживает единый реестр (https://registry.terraform.io/) модулей Terraform, в котором вы можете найти готовые модули для выделения нужных ресурсов. В этом же примере мы напишем собственные модули.

Здесь использована версия 0.12.1 Terraform — последняя на момент написания книги. Установить ее на Mac можно с помощью brew:

$ brew install terraform

Выделение корзины S3

Создадим каталог modules, а в нем — каталог s3 с тремя файлами: main.tf, variables.tf и outputs.tf. Файл main.tf в каталоге s3 указывает Terraform на необходимость создания корзины S3 с заданной политикой. В нем задействуется объявленная в файле variables.tf переменная domain_name, значение которой передается туда вызывающей модуль стороной. В результате выводится конечная точка DNS корзины S3, используемая далее другими модулями в качестве входной переменной.

Вот как выглядит содержимое названных трех файлов из каталога modules/s3:

$ cat modules/s3/main.tf
resource "aws_s3_bucket" "www" {
    bucket = "www.${var.domain_name}"
    acl = "public-read"
    policy = <<POLICY