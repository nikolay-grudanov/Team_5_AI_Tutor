---
source_image: page_097.png
page_number: 97
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.79
tokens: 7368
characters: 1634
timestamp: 2025-12-24T03:03:27.368557
finish_reason: stop
---

469    return CompletedProcess(process.args, retcode, stdout, stderr)
470

CalledProcessError: Command '['ls', '/doesnotexist']' returned non-zero exit

Таким образом, не придется проверять stderr на предмет сбоев и можно будет обрабатывать ошибки, возвращаемые подпроцессами, так же как и прочие исключения Python.

Создание утилит командной строки

Простейший способ вызова сценария Python из командной строки — с помощью python. При создании сценария Python все операторы верхнего уровня (не вложенные в блоки кода) выполняются при каждом его вызове или импорте. Если нужно вызывать какую-либо функцию при каждой загрузке кода, можно делать это на верхнем уровне:

def say_it():
    greeting = 'Hello'
    target = 'Joe'
    message = f'{greeting} {target}'
    print(message)

say_it()

Эта функция будет выполняться при каждом вызове данного сценария из командной строки:

$ python always_say_it.py

Hello Joe

А также при импорте файла:

In [1]: import always_say_it
Hello Joe

Впрочем, поступать так следует только с самыми простыми сценариями. Существенный недостаток этого подхода: при импорте модуля в другие модули Python код выполняется, а не ждет спокойно, пока к нему не обратится вызывающий модуль. А тот, кто импортирует модуль, обычно хочет сам определять, когда будет вызываться его содержимое. Можно добавить функциональность, выполняемую только при вызове из командной строки, с помощью глобальной переменной name. Как вы видели, она содержит имя модуля во время импорта. Если модуль вызывается непосредственно из командной строки, она получает строковое значение main. По соглашению запускаемые в командной строке