---
source_image: page_222.png
page_number: 222
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.78
tokens: 7580
characters: 2245
timestamp: 2025-12-24T03:06:42.558856
finish_reason: stop
---

Теперь в этих двух вспомогательных функциях есть свои уникальные счетчики на основе одного адаптера, так что в среде промышленной эксплуатации метрики появятся в пространстве имен наподобие secret.app1.web.api.aws.s3.write.Counter. Подобный уровень детализации удобен при идентификации метрик по операциям. Даже если и существуют сценарии использования, в которых такая детализация не нужна, всегда лучше иметь данные и игнорировать их, чем не иметь. Большинство инструментальных панелей для отображения метрик предоставляют возможности настройки их группировки.

Суффикс полезен при добавлении к названиям функций (или методов классов), которые плохо отражают свое назначение, так что усовершенствование схемы наименования с помощью суффикса — еще одно преимущество достигнутой гибкости:

def helper_for_expensive_operations_on_large_files():
    counter = Counter(__name__, suffix='large_file_operations')
    while slow_operation:
        ...
        counter +=1

Добывать счетчики и прочие типы метрик, например датчики, так легко, что возникает соблазн включить их в цикл, но подобная телеметрия может отрицательно повлиять на производительность требующих быстродействия блоков кода, выполняемых тысячи раз в секунду. Лучший вариант — ограничить число отправляемых метрик или отправить их позднее.

В этом разделе мы показали реализацию получения метрик для локального сервиса StatsD. Этот экземпляр в конечном итоге передает данные в настроенную прикладную часть, например Graphite, но приведенные упрощенные примеры не относятся исключительно к StatsD. Напротив, они демонстрируют необходимость добавления вспомогательных функций и утилит в качестве адаптеров для стандартных задач и то, что при наличии удобных средств реализации разработчики захотят использовать их повсеместно. Слишком много данных метрик — это лучше, чем их отсутствие.

Соглашения о наименованиях

В большинстве сервисов мониторинга и обработки метрик, таких как Graphite, Graphana, Prometheus и даже StatsD, есть понятие пространств имен. Пространства имен очень важны, так что желательно тщательно выбрать соглашение о наименованиях, которое позволило бы с легкостью идентифицировать компоненты системы и в то же время было достаточно гибким для дальнейшего расши-