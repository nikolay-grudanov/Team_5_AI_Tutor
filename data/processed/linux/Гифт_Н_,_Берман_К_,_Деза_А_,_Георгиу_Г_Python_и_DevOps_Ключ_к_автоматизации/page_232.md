---
source_image: page_232.png
page_number: 232
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.41
tokens: 7634
characters: 2258
timestamp: 2025-12-24T03:07:08.471181
finish_reason: stop
---

Еще один удобный паттерн — использование встроенных возможностей модуля журналирования для интерполяции строк. Возьмем для примера следующий фрагмент кода:

```python
>>> logging.error(
"An error was produced when calling: expensive_operation, \
with arguments: %s, %s" % (arguments))
```

В этом операторе есть две строковые замены, он предполагает, что arguments состоит минимум из двух элементов. Если в arguments нет двух элементов, приведенный оператор приведет к сбою находящегося в промышленной эксплуатации кода. А его сбой из-за журналирования всегда нежелателен. В модуле есть вспомогательная функция, позволяющая перехватить эту ошибку, сообщить о проблеме и продолжить работу программы:

```python
>>> logging.error("An error was produced when calling: expensive_operation, \
with arguments: %s, %s", arguments)
```

Этот рекомендуемый способ передачи аргументов в оператор совершенно безопасен.

Стек ELK

Подобно тому как Linux, Apache, MySQL и PHP известны под общей аббревиатурой LAMP, нередко можно услышать про стек ELK: Elasticsearch, Logstash и Kibana. Он дает возможность извлекать информацию из журналов, захватывать полезные метаданные и отправлять их в хранилище документов (Elasticsearch), а затем отображать информацию на мощной инструментальной панели (Kibana). Хорошо понимать все составляющие этого стека жизненно важно для эффективной стратегии потребления журналов. Все эти составляющие одинаково важны, и хотя для каждой из них существуют аналоги, в этом разделе мы рассмотрим роли, которые именно они играют в примере приложения.

Большинство находящихся в промышленной эксплуатации систем существуют довольно давно, и разработчику редко выпадает шанс переделать инфраструктуру с нуля. Но даже если вам посчастливилось проектировать инфраструктуру с чистого листа, очень легко упустить из виду важность структуры журналов. Правильная структура журналов столь же важна, как и сама фиксация полезной информации, но в случае отсутствия инфраструктуры на помощь может прийти Logstash. Выводимая по умолчанию в журнал информация при установке Nginx выглядит примерно так:

192.168.111.1 - - [03/Aug/2019:07:28:41 +0000] "GET / HTTP/1.1" 200 3700 "-" \
"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:68.0) Gecko/20100101 Firefox/68.0"