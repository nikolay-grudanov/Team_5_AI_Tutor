---
source_image: page_502.png
page_number: 502
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.47
tokens: 7699
characters: 2715
timestamp: 2025-12-24T03:14:04.279311
finish_reason: stop
---

Одна из последних и наиболее интересных проблем, решенных нами, возникла в системе мониторинга. После стабилизации производительности системы и применения рекомендуемых практик инженерии разработки ПО мы обнаружили неожиданную программную ошибку. В качестве базового контроля состояния системы мы настроили ежедневную фиксацию ресурсов. Через несколько дней ежедневно стали возникать серьезные проблемы с быстродействием. Когда мы увидели всплески использования CPU базой данных, то обнаружили, что они соответствуют по времени базовому контролю состояния системы. После расследования стало ясно, что код фиксации ресурсов (доморощенный ORM (средство объектно-реляционного отображения)) генерировал все больше SQL-запросов. Большинство технологических процессов включало применение лишь одной или двух версий ресурса, так что мониторинг состояния системы обнаружил критический изъян. Это еще один довод в пользу автоматизированной проверки состояния системы.

При нагрузочном тестировании мы обнаружили уйму проблем. Одну из них нашли сразу же: даже небольшое количество одновременного трафика — и база данных MySQL мгновенно «умирала». Мы обнаружили, что у использовавшейся нами версии MySQL были серьезные проблемы с производительностью. Переход на последнюю версию резко повысил быстродействие. Ликвидировав проблему с производительностью и создав средство автоматического тестирования на предмет того, решена ли проблема, мы начали быстро исправлять проблемы одну за другой.

Далее мы внесли исходный код в систему контроля версий, создали основанную на ветвях кода стратегию развертывания, после чего начали запускать линтинг и тестирование, а также анализ кода при каждом внесении кода в систему контроля версий. В результате стало намного легче обнаруживать проблемы с производительностью, и решения стали самоочевидны. В условиях кризиса автоматизация и стандарты совершенства — два абсолютно необходимых средства.

Одна, последняя, задача, с которой мы столкнулись, — серьезные проблемы с надежностью на удаленной площадке нашей киностудии. Персонал на ней считал, что причина была в проблемах с быстродействием, связанных с нашим API. Ситуация была настолько экстренной, что руководство компании отправило меня и еще одного инженера на место самолетом для решения проблемы. Когда мы добрались на место, то позвонили в центральный офис и попросили посмотреть только на запросы из соответствующего диапазона IP-адресов. И когда запустили их приложение, то не увидели никакого сетевого трафика.

Мы проверили сетевую инфраструктуру в удаленном офисе и убедились, что трафик между клиентской машиной и центральным офисом проходит. По наитию мы решили взглянуть на локальную и сетевую производительность машины