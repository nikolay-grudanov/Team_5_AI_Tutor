---
source_image: page_263.png
page_number: 263
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.15
tokens: 7435
characters: 1834
timestamp: 2025-12-24T03:07:53.058719
finish_reason: stop
---

• host.system_info — разнообразные виды метаданных системы, например версия дистрибутива, выпуск и его кодовое наименование.
• host.check_output — выполняет системную команду, проверяя выводимую ею информацию в случае успешного выполнения, может применяться в сочетании с host.sudo.
• host.run — выполняет системную команду, позволяя проверять код возврата, host.stderr и host.stdout.
• host.run_expect — проверяет, соответствует ли код возврата ожидаемому.

Примеры

Самое естественное начало разработки проверочных тестов — во время создания самой системы развертывания. Как и при реализации методологии разработки через тестирование (Test Driven Development, TDD), любое усовершенствование требует нового теста. Для этого раздела вам понадобится установить веб-сервер и запустить его на порте 80 для выдачи статической стартовой страницы. По мере достижения прогресса мы будем добавлять новые тесты. Неотъемлемой составляющей написания тестов является осознание сбоев, так что смоделируем несколько проблем, на примере которых будем разбираться, что нужно исправить.

На свежем сервере Ubuntu начните с установки пакета Nginx:

$ apt install nginx

Создайте новый файл теста test_webserver.py, в который мы будем постепенно добавлять тесты:

def test_nginx_is_installed(host):
    assert host.package('nginx').is_installed

Сделаем вывод pytest лаконичнее с помощью флага -q, чтобы сосредоточить свое внимание на сбоях. Удаленный сервер называется node4, для подключения к нему используется SSH. Вот команда для запуска первого теста:

(validate) $ pytest -q --hosts='ssh://node4' test_webserver.py
.
1 passed in 1.44 seconds

Явный прогресс! Необходимо, чтобы веб-сервер был запущен и работал, так что добавляем новый тест для проверки этого поведения:

def test_nginx_is_running(host):
    assert host.service('nginx').is_running