---
source_image: page_165.png
page_number: 165
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.42
tokens: 7534
characters: 1983
timestamp: 2025-12-24T03:05:15.986003
finish_reason: stop
---

Внутренний каталог пакетов

В некоторых случаях лучше поддерживать свой внутренний PyPI.

У компании, где Альфредо когда-то работал, были закрытые библиотеки, вовсе не предназначавшиеся для общего доступа, так что необходимо было поддерживать свой экземпляр PyPI. Впрочем, у этого решения есть подводные камни. В экземпляр должны быть включены все зависимости и их версии, иначе могут возникнуть сбои при установке. Программа установки не может извлекать зависимости из различных источников одновременно! Несколько раз оказывалось, что для новой версии недоставало какого-либо компонента, так что для завершения установки приходилось загружать в каталог соответствующий пакет.

При локальном размещении пакета \( A \), зависящего от пакетов \( B \) и \( C \), необходимо, чтобы все три (и все нужные их версии) существовали в одном экземпляре.

Внутренний PyPI ускоряет установку пакетов, позволяет обеспечить конфиденциальность пакетов и, по сути, не так уж сложен в реализации.

Мы очень рекомендуем для создания внутреннего PyPI воспользоваться полнофункциональной утилитой devpi, обладающей возможностями зеркального копирования, предэксплуатационного тестирования, репликации и интеграции с Jenkins. В документации этого проекта (https://doc.devpi.net) можно найти подробную информацию и прекрасные примеры.

Сначала создайте новый каталог rypi, чтобы получить нужную структуру для размещения пакетов, после чего создайте подкаталог, называющийся так же, как и пример пакета (hello-world). Названия подкаталогов соответствуют названиям самих пакетов:

$ mkdir -p rypi/hello-world
$ tree rypi
rypi
└── hello-world

1 directory, 0 files

Теперь скопируйте файл tar.gz в каталог hello-world. Итоговый вариант структуры каталога должен выглядеть так:

$ tree rypi
rypi
└── hello-world
    └── hello-world-0.0.1.tar.gz

1 directory, 1 file

Следующий шаг — создание веб-сервера с включенной автоматической индексацией. В Python есть встроенный веб-сервер, вполне подходящий для наших