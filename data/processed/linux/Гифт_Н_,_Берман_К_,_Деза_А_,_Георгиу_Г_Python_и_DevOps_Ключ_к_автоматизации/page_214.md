---
source_image: page_214.png
page_number: 214
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.41
tokens: 7579
characters: 2410
timestamp: 2025-12-24T03:06:30.998244
finish_reason: stop
---

Graphite

Graphite — хранилище числовых хронологических данных: оно умеет хранить захваченную числовую информацию с привязкой к времени в соответствии с настраиваемыми правилами. Оно предоставляет обладающий очень широкими возможностями API, к которому можно делать запросы относительно данных с указанием промежутков времени, а также применять функции для преобразования данных или выполнения вычислений над ними.

Важный аспект хранилища Graphite (https://oreil.ly/-0YEs) — оно не собирает данные, а сосредотачивает внимание на API и возможностях обработки колоссальных объемов данных для заданных промежутков времени. В результате пользователям приходится выбирать, какое программное обеспечение для сбора данных применять вместе с Graphite. Существует немало вариантов программного обеспечения, способного передавать метрики в Graphite, в этой главе мы рассмотрим один из них — StatsD.

Еще один интересный аспект Graphite — хотя в его состав входит веб-приложение, способное рисовать графики по требованию, обычно оно развертывается вместе с другим сервисом, которым может использовать Graphite как прикладную часть для отрисовки графиков. Прекрасный пример этого — великолепный проект Grafana (https://grafana.com), предоставляющий полнофункциональное веб-приложение для визуализации метрик.

StatsD

В Graphite можно помещать метрики через TCP или UDP, но StatsD намного удобнее, поскольку существуют варианты создания средств на Python для организации технологических процессов наподобие агрегирования метрик по UDP с последующей передачей их в Graphite. Подобная архитектура логична для приложений Python, в которых нежелательно блокирование при отправке данных (TCP-соединения блокируются вплоть до получения ответа, UDP — нет). В ходе работы занимающего очень много времени Python-цикла для захвата метрик не имеет смысла расходовать лишнее время на взаимодействие с захватывающим их сервисом.

Если вкратце, отправка метрик в сервис StatsD практически не занимает времени (как и должно быть!). Благодаря возможностям Python измерение метрик не составляет сложности. Когда у сервиса StatsD набирается достаточно метрик для отправки в Graphite, он запускает процесс отправки. Все это происходит полностью асинхронно, благодаря чему приложение может продолжать работу. Метрики, мониторинг и журналирование никоим образом не должны влиять на работу приложения, находящегося в промышленной эксплуатации!