---
source_image: page_250.png
page_number: 250
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.10
tokens: 7568
characters: 2101
timestamp: 2025-12-24T03:07:31.538574
finish_reason: stop
---

столкнетесь с необходимостью писать очень похожие тесты для контроля одного и того же исхода при различных входных данных, вы будете знать, что можно облегчить себе работу с помощью декоратора parametrize.

Фикстуры

Фикстуры фреймворка pytest (https://oreil.ly/gPoM5) — своего рода маленькие вспомогательные функции, внедряемые в тест. Вне зависимости от того, пишете вы отдельную тестовую функцию или набор тестовых методов, фикстуры можно использовать одинаково. Если не планируется применять их в других тестовых файлах, вполне можно объявлять их в одном, в противном случае их можно объявить в файле conftest.py. Фикстуры, как и вспомогательные функции, могут быть всем необходимым для теста, от простых заранее создаваемых структур данных до более сложных, например базы данных для веб-приложения.

Для этих вспомогательных функций существует понятие области видимости (scope). Они могут включать специальный код очистки для каждого тестового метода, класса и модуля или, возможно, даже для всего тестового сеанса. Описывая их в тестовом методе (или тестовой функции), вы, по сути, внедряете фикстуру во время выполнения. Если это не совсем понятно, вы все поймете по мере изучения примеров в следующих разделах.

Приступим

Описывать и использовать фикстуры так просто, что часто ими злоупотребляют. Мы знаем это, поскольку сами создали немало тех, которые могли бы быть простыми вспомогательными методами! Как мы уже упоминали, сценариев применения фикстур очень много — от простых структур данных до более сложных, например настройки целых баз данных для отдельного теста.

Недавно Альфредо пришлось тестировать маленькое приложение, предназначенное для синтаксического разбора конкретного файла — файла keyring (содержащего набор ключей). Его структура напоминает INI-файл, он включает значения, которые должны быть уникальными и соответствовать определенному формату. Воссоздавать структуру этого файла для каждого теста было бы очень утомительно, так что он создал фикстуру. Вот как выглядел файл keyring:

[mon.]
    key = AQBvaBFZAAAAABAA9VHgwCg3rWn8fMaX8KL01A==
    caps mon = "allow *"