---
source_image: page_229.png
page_number: 229
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.04
tokens: 7510
characters: 2003
timestamp: 2025-12-24T04:38:29.969005
finish_reason: stop
---

5773 pts/0   R   0:05 bzip2 -kf dvd.iso
+ ls --color=auto -lh dvd.iso.bz2
-rw------- 1 bender bender 9,6M  ♦ дек. 12 13:38 dvd.iso.bz2
+ sleep 1
() + ps p 5773
PID TTY     STAT TIME COMMAND
5773 pts/0   R   0:58 bzip2 -kf dvd.iso
+ ls --color=auto -lh dvd.iso.bz2
-rw------- 1 bender bender 87M  ♦ дек. 12 13:39 dvd.iso.bz2
[1]+ Готово    bzip2 -kf dvd.iso
+ sleep 1
() + ps p 4523
PID TTY     STAT TIME COMMAND

В примере из листинга 5.48 составной список while используется в качестве генератора пар имен файлов для массового параллельного переименования. Для этого стандартный поток ввода построчно считывается в цикле при помощи встроенной команды интерпретатора read, причем на каждой итерации цикла переменная FN принимает значение очередной строки, а команда read завершается успешно до исчерпания строк. В результате выполнения встроенной команды echo и при помощи подстановки значения переменной $FN и подстановок вывода команд dirname(1) и basename(1) на стандартном потоке вывода составного списка формируются пары имен файла — исходное считанное путевое имя и синтезированное путевое имя с измененным «расширением файла». Исходный поток имен формируется командой find(1), а результирующий поток передается команде xargs(1), которая в свою очередь передает пары имен (-n2) командам mv(1), запускаемым параллельно в количестве ядер процессора, которое было получено командой nproc(1).

Листинг 5.48. Цикл «ПОКА»: массовое параллельное переименование файлов

bender@ubuntu:~$ find DCIM -name '*.jpg' |
> while read FN ; do echo $FN $(dirname $FN)/$(basename $FN .jpg).jpeg ; done |
> xargs -n2 -P $(nproc) mv

Аналогично, в примере из листинга 5.49 составной список while используется в качестве генератора 1 классификатора файлов по их контрольным MD5-суммам. При помощи команд find(1), xargs(1) и md5sum(1) формируется поток строк, в первом столбце которых будет выведена контрольная сумма W:[MD5] файла, а во втором столбце — его имя. Полученный поток построчно считывается в цикле при помо-