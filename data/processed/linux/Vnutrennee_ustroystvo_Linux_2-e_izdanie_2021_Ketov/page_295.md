---
source_image: page_295.png
page_number: 295
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.73
tokens: 7531
characters: 2156
timestamp: 2025-12-24T04:40:35.791330
finish_reason: stop
---

Свойства окон X-клиентов могут использоваться не только оконным менеджером, но и другими клиентами, например xlsclients(1), который опрашивает X-сервер (листинг 7.5) и выводит список «клиентов». На самом деле он отображает список окон только со свойствами WM_CLIENT_MACHINE и WM_COMMAND, которые в действительности устанавливаются (и то не всегда) X-клиентами для своих «основных» окон.

Листинг 7.5. Список клиентов X-сервера

homer@ubuntu:~$ xlsclients -l | grep -C 3 gnome-terminal
Window 0x2a00001:
    Machine: ubuntu
    Name: <unknown type COMPOUND_TEXT (502) or format 8>
    Icon Name: <unknown type COMPOUND_TEXT (502) or format 8>
    Command: gnome-terminal-server
    Instance/Class: gnome-terminal-server/Gnome-terminal-server

Взаимодействие X-клиентов и X-сервера происходит при помощи локальных или сетевых сокетов в зависимости от их взаимного месторасположения и согласно адресу подключения, указываемому на стороне X-клиентов при помощи переменной окружения DISPLAY в формате host:number.

Адрес подключения состоит из имени (или IP-адреса) узла X-сервера host и номера его дисплея number (например, DISPLAY=ubuntu.local:0 или 192.168.0.5:0). В качестве host может выступать любое имя, для которого можно получить IP-адрес, используя службу имен (см. разд. 6.3), а в случае локального взаимодействия host не указывается вовсе (т. е. DISPLAY=:0).

Номер дисплея указывает на экземпляр X-сервера, запущенного на узле host для управления некоторым набором оборудования (графическими дисплеями — видеокартами и мониторами, клавиатурами и пр.).

Проиллюстрировать разные виды X-взаимодействия проще всего при помощи «виртуальных» X-серверов Xnest(1) и Xephyr(1). В отличие от «аппаратного» X-сервера, организующего доступ X-клиентов к аппаратному дисплею, эти серверы организуют доступ своих клиентов к виртуальному «дисплею», в качестве которого выступает их собственное окно аппаратного сервера.

В листинге 7.6 показан запуск X-сервера Xnest(1) с номером дисплея :1 (т. к. дисплей :0 обычно занят ① аппаратным X-сервером), который создает сокет ② семейства ip(7) для подключения сетевых клиентов и сокет ③ семейства unix(7) для локальных.