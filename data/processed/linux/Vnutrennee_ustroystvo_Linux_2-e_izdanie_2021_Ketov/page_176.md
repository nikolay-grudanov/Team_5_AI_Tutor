---
source_image: page_176.png
page_number: 176
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.97
tokens: 7701
characters: 2427
timestamp: 2025-12-24T04:37:00.864151
finish_reason: stop
---

4.8.1. Сеансы и группы процессов: управление заданиями

Одним из основных применений сигналов при интерактивной работе пользователя в системе является механизм управления «заданиями», которыми пользуются командные интерпретаторы и подобные интерактивные программы, например lftp(1).

Для удобства управления процессами при помощи сигналов они объединяются в группы и сеансы (см. credentials(7)), проиллюстрированные в листинге 4.48 при помощи команды ps(1) атрибутами PGID (process group identifier) и SID (session identifier). Процесс (создавший группу), чей идентификатор PID совпадает ② с идентификатором PGID группы, носит название лидера группы. Процесс (создавший сеанс), чей идентификатор PID совпадает ① с идентификатором SID сеанса, называется лидером сеанса. Нужно отметить, что лидер сеанса в столбце STAT отмечается флагом s, а процессы группы переднего фона — флагом +. Только одна группа сеанса, называемая «терминальной» TGPID, является группой «переднего» (foreground) фона, остальные группы сеанса являются группами «заднего» (background) фона.

Командный интерпретатор формирует свои задания «заднего» ① или «переднего» фона ②, помещая процессы заданий в соответствующие группы. Механизм управления заданиями всегда посылает «терминальные» сигналы ^C SIGINT, ^\ SIGQUIT всем процессам текущей «терминальной» группы. Для смены терминальной группы используется сигнал № 20 SIGTSTP (terminal stop signal), также отсылаемый всем процессам «терминальной» группы при получении драйвером терминала управляющего символа ^Z (SUB), генерируемого клавишами Ctrl+Z. Обработчик сигнала SIGTSTP по умолчанию приостанавливает процессы, и управление возвращается к командному интерпретатору ③, группа которого становится «терминальной». При помощи встроенных команд fg (foreground), bg (background) можно продолжить (SIGCONT) выполнение указанного задания (всех процессов его группы) на «переднем» или «заднем» фоне, а при помощи команды jobs -l получить список всех заданий вместе с номерами их групп процессов.

Листинг 4.48. Сеансы и группы процессов — задания интерпретатора

① fitz@ubuntu:~$ dd if=/dev/zero of=/dev/null &
[1] 3181
② fitz@ubuntu:~$ ps jf
PPID   PID   PGID   SID   TTY   TPGID STAT   UID   TIME COMMAND
① 3094  3099  3099  3099 pts/0   3159 Ss   1000  0:00 bash
② 3099  3181  3181  3099 pts/0   3182 R    1000  0:08 \_ dd if=/dev/zero of=...
② 3099  3182  3182  3099 pts/0   3182 R+   1000  0:00 \_ ps jf