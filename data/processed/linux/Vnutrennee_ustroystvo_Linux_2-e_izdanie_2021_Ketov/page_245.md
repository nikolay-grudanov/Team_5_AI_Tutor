---
source_image: page_245.png
page_number: 245
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.40
tokens: 7380
characters: 1495
timestamp: 2025-12-24T04:38:55.420185
finish_reason: stop
---

глобально заменит подстроки из любого количества * символов, кроме слеша [^/], заканчивающиеся слешем /, на вертикальную черту с тремя пробелами |   |, что заменит элементы путевого имени найденных файлов в нужное количество уровней иерархии дерева в выводе.

Листинг 5.66. Замена подстрок: дерево файлов и каталогов

bender@ubuntu:~$ cd /lib/terminfo
bender@ubuntu:/lib/terminfo$ find . | sort -f |
> sed -e 's:^..:::' -e 's:[^/.][^/]*$:+-- &:' -e 's:[^/]*/:| :g'

.
+-- a
|   +-- ansi
+-- c
|   +-- cons25
+-- v
|   +-- vt100
|   +-- vt102
|   +-- vt220
|   +-- vt52
+-- x
|   +-- xterm
|   |   +-- xterm-vt220
|   |   +-- xterm-xfree86

Еще один типичный пример применения потокового редактора sed(1) проиллюстрирован в листинге 5.67, где во всех модулях некоторой программы на языке W:[python] имя модуля module нужно заменить его новым именем Module. Найденные командой find(1) имена модулей *.py проверяются командой grep(1) на предмет наличия в их тексте слова (-w) module, затем их имена (-l) отправляются потоковому редактору, который выполняет замену подстрок, замещая (-i) содержимое непосредственно обрабатываемого файла. Замены производятся в строках, содержащих слово import, при этом только подстроки module, слева \(<\) и справа \(>\) от которых находятся границы слов, т. е. только слова module, заменяются на Module.

Листинг 5.67. Массовая замена подстрок в файлах

bender@ubuntu:~$ find . -name '*.py' | xargs grep -wl module |
> xargs sed -i '/import/ s:\<module\>:Module:g'