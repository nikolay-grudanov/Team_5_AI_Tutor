---
source_image: page_370.png
page_number: 370
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.28
tokens: 7705
characters: 2724
timestamp: 2025-12-24T04:42:59.630637
finish_reason: stop
---

Нужно заметить, что абсолютно все сущности (как сами устройства, так и модули ядра) иерархически идентифицируются путевыми файлами в псевдофайловой системе sysfs(5), которая по соглашению монтируется в каталог /sys. Сами события «сохраняется» в файле uevent в каталоге этой сущности, отведенном ему на sysfs, а псевдоним устройства может определять сразу несколько драйверов 3 4, подлежащих загрузке. Так, в приведенном примере по событию подключения 1 udev(7) узнает псевдоним устройства и определяет модули, подлежащие загрузке 12, т. е. драйвер самого устройства usb_storage (v, производитель 058F и p, продукт 6387) и драйвер uas, т. к. устройство поддерживает универсальный интерфейс 8/6/80 (класс, подкласс, протокол iso8isc06ip50), т. е. W:[USB Attached SCSI]. Успешная загрузка модулей драйверов тоже приводит к доставке событий 1 и 2 (подобных событиям физических устройств), которые используются udev(7) как сигнал для создания специальных файлов устройств в каталоге /dev.

Кроме «горячего» подключения устройств, проиллюстрированного в листинге 10.7, служба udev(7) ответственна также за их «холодное» подключение. Поскольку ядро стартует первым и задолго до самой службы udev(7)1, то для устройств, обнаруженных на ранних стадиях инициализации ядра, будет некому загрузить из драйвера. «Холодное» подключение устройств и загрузка их драйверов начинаются при старте самой службы, которая обходит файловую систему sysfs в поисках uevent файлов и «проигрывает» их абсолютно так же, как если бы устройства подключались «горячим» образом.

10.3. Как запускаются системные службы

После того как ядро загружено, а корневая файловая система смонтирована, управление передается процессу init (PID = 1), в который помещается программа /sbin/init, выполняющая несколько функций. Первоочередная задача, стоящая перед init, — это обработка всех осиротевших процессов (см. разд. 4.3), для которых он назначается приемным родителем. Вторая его немаловажная задача состоит в инициализации операционной системы и последующем запуске ее служб, которые в большинстве своем работают в классе процессов-демонов (см. разд. 4.4). При инициализации ОС обычно выполняется несколько нехитрых подготовительных действий: монтирование всех оставшихся файловых систем в дерево каталогов (за исключением корневой, которая уже смонтирована ядром), конфигурирование сетевых интерфейсов и маршрутов и прочие сопутствующие действия, прежде чем можно будет запускать2 службы.

1 Честно говоря, ее облегченный аналог включен даже в образ «временной» корневой файловой системы initrd.img.
2 Поскольку сетевым службам нужны проинициализированные сетевые интерфейсы, службы СУБД могут размещать свои базы данных на отдельных файловых системах и т. д.