---
source_image: page_169.png
page_number: 169
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.97
tokens: 7571
characters: 2205
timestamp: 2025-12-24T04:36:45.928934
finish_reason: stop
---

при помощи отображения mmap(2), то в результате каждая библиотека размещается в оперативной памяти лишь единожды, вне зависимости от количества ее «использований».

Интегральная статистика по использованию виртуальной памяти может быть получена при помощи команды free(1), как показано в листинге 4.40.

Листинг 4.40. Статистика использования памяти

fitz@ubuntu:~$ free -mW
всего    занято    свободно    общая    буферы    временные    доступно
Память:   3935      975       1354      39        71         1534        2679
Подкачка: 448        0         448

fitz@ubuntu:~$ LANGUAGE=en free -mW
total    used    free    shared    buffers    cache    available
Mem:     3935    975     1354     39        71         1534        2679
Swap:    448     0

Строка Mem: содержит статистику использования оперативной памяти, а строка Swap: — статистику специальной области подкачки. В столбце total указан суммарный объем всех доступных страничных кадров, а в столбцах used (вычисляется как used = total - free - buffers - cache) и free — суммарные объемы использованных и свободных страничных кадров соответственно.

В столбце cache указан объем страничного кэша (page cache), т. е. суммарный объем страничных кадров оперативной памяти, использованных под отображение файлов в память. Необходимо заметить, что именно страничный кэш является неким резервом памяти, которую можно высвободить при первой необходимости, т. к. содержимое этих страниц в реальности всегда можно считать из отображаемых файлов заново (и то, если понадобится) — см. разд. 4.7.2.

Аналогично, в столбце buffers указывается объем буферного кэша, т. е. суммарный объем памяти, использованной ядром для кэширования «неотображаемых» сущностей: метаданных файлов, дисковых блоков при прямом вводе-выводе на устройства и пр.

В столбце available предсказывается объем доступной памяти для новых процессов, без вытеснения страниц старых.

В листинге 4.41 показан пример потребления памяти процессом текстового редактора vi(1) при попытке редактирования громадного файла в 1 Гбайт. Процесс загружает файл целиком, в результате чего он целиком оказывается в резидентных страницах 1 сегмента данных процесса, что естественным образом увеличивает