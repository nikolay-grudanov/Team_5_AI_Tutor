---
source_image: page_344.png
page_number: 344
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.81
tokens: 7458
characters: 2021
timestamp: 2025-12-24T04:42:01.618044
finish_reason: stop
---

несовместимого набора программных средств (библиотек и пр.), другими словами, дают возможность одновременно на одной системе исполнять программы, жестко привязанные к очень разным версиям операционной системы или к версиям ОС от разных поставщиков (дистрибутивам).

9.1. Чрутизация

Самым древним средством изоляции, известным со времен классического UNIX, является системный вызов chroot(2), позволяющий назначать процессам корень дерева каталогов, от которого вычисляются все абсолютные путевые имена (см. разд. 3.1.1). Другими словами, каждый процесс, помимо атрибута cwd (current working directory, см. разд. 4.5.3), относительно которого вычисляются относительные путевые имена, имеет еще и атрибут rtd (root directory), относительно которого вычисляются абсолютные путевые имена, т. е. корень дерева каталогов оказывается абсолютом только для ядра ОС¹, а для процессов это вполне установленный каталог, выше которого процесс не имеет доступа, иными словами, изолирован в части настоящего дерева каталогов.

Листинг 9.1. Чрутизация

rick@ubuntu:~$ pgrep -l avahi-daemon
587 avahi-daemon
663 avahi-daemon
rick@ubuntu:~$ lsof -p 587 | grep rtd
avahi-dae 587 avahi rtd DIR 8,2 4096 262180 /etc/avahi

В листинге 9.1 показано типичное применение так называемой чрутизации, т. е. добровольного заключения сетевыми службами себя в некоторый каталог (например, в каталог с конфигурационными файлами или в их специальный каталог «времени исполнения»). В случае, если злоумышленник воспользуется уязвимостью такой службы, он не сможет заставить ее выдать ему содержимое файлов системы, находящихся за пределами этого каталога.

Чрутизация реализуется как раз посредством chroot(2), когда сетевая служба, закончившая свою инициализацию, назначает своим новым корневым каталогом некоторый каталог, все дерево выше которого должно быть ей (и потенциальному злоумышленнику) недоступно.

¹ Да и то, если честно, это не так. Ядро может даже для себя определять каталог, который является корнем в данный определенный момент времени.