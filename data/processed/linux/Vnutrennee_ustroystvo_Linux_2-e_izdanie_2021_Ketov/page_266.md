---
source_image: page_266.png
page_number: 266
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.83
tokens: 7569
characters: 2412
timestamp: 2025-12-24T04:39:36.701215
finish_reason: stop
---

Аутентификация пользовательского сеанса по паролю имеет некоторое неудобство — необходимость вводить пароль заново при каждом новом соединении SSH. Кроме того, пароль передается внутри соединения SSH, поэтому существует угроза подбора пароля злоумышленником. Более прогрессивный способ аутентификации пользователя основан на использовании асимметричных алгоритмов цифровой подписи (аналогично аутентификации сервера в протоколе Диффи — Хелмана) и ключей пользователя. Для этого открытый ключ пользователя единожды регистрируется на сервере, а при аутентификации подписывается его закрытым ключом и высылается серверу повторно. Сервер в свою очередь проверяет цифровую подпись присланного ключа и удостоверяется в подлинности его владельца, а побитное сравнение с заранее зарегистрированным ключом пользователя указывает на то, что владелец присланного ключа и есть целевой пользователь.

В листинге 6.17 иллюстрируется процедура применения ключей аутентификации пользователя. Сначала при помощи команды ssh-keygen(1) генерируется закрытый (private) W:[RSA]-ключ в локальном файле ~/.ssh/id_rsa и парный ему открытый (public) ключ в локальном файле ~/.ssh/id_rsa.pub. Закрытый ключ защищается (шифруется) от несанкционированного использования парольной фразой (passphrase) ①, которая в отличие от пароля никогда по сети не передается, а лишь обеспечивает доступ к самому ключу. Нужно заметить, что использование пустой парольной фразы (как в примере) потенциально небезопасно, т. к. в случае кражи или разглашения ключей ими может воспользоваться любая третья сторона.

Затем при помощи команды ssh-copy-id(1) открытый ключ регистрируются на удаленном сервере greg.org в файле ~/.ssh/authorized_keys, что происходит с предъявлением пароля ②. Последующие SSH-соединения ③ аутентифицируются парой ключей, в результате отпадает необходимость вводить пароль¹.

Листинг 6.17. Доступ по ключу

1 lumpy@ubuntu:~$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/lumpy/.ssh/id_rsa): ←
Enter passphrase (empty for no passphrase): ↵ ①
Enter same passphrase again: ↵ ①
Your identification has been saved in /home/lumpy/.ssh/id_rsa.
Your public key has been saved in /home/lumpy/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:ztIK3kUagoDuY4sUxqFMSZFfnqVxQQhPOQ4y8tDMov6w lumpy@ubuntu

¹ Появляется необходимость вводить парольную фразу, но в примере она (непозволительно) пустая.