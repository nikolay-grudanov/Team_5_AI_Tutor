---
source_image: page_188.png
page_number: 188
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.34
tokens: 7508
characters: 2026
timestamp: 2025-12-24T04:37:18.549193
finish_reason: stop
---

Анализ карт памяти взаимодействующих процессов при помощи команды pmap(1) подтверждает, что страничные кадры сегмента разделяемой s памяти 26_{10} (1A_{6}) и 40_{10} (28_{16}) были отображены на страницы обоих взаимодействующих процессов по разным виртуальным адресам ① и ②.

Еще один вариант реализации разделяемой памяти, пришедший в Linux из W:[BSD], основывается на «разделяемом» (shared) отображении одного и того же файла в память разных процессов при помощи «штатного» механизма mmap(2). В листинге 4.57 показан типичный пример применения совместного отображения файла /var/cache/nscd/hosts в память процесса nscd (name service cache daemon) и многих других процессов, пользующихся его услугами.

Служба имен (name service) предназначена для извлечения свойств различных каталогизируемых сущностей по их имени. Например, по имени интернет-узла из каталога системы доменных имен DNS служба имен извлекает IP-адрес этого узла, и наоборот, по IP-адресу — имя. При большом количестве повторяющихся запросов к службе имен в течение промежутка времени, в который изменения запрашиваемой информации в соответствующем каталоге объектов не происходит, «бесполезные» повторные запросы к каталогу могут быть сокращены при помощи сохранения и использования предыдущих ответов (кэширования), чем и занимается демон nscd(8).

В частности, ответы из DNS, сохраняются процессом nscd в страничных кадрах памяти отображенного файла /var/cache/nscd/hosts ①, а остальные процессы совместно их используют, отображая тот же файл в страницы своей памяти ②.

Листинг 4.57. Разделяемая память (BSD)

fitz@ubuntu:~ $ sudo fuser -v /var/cache/nscd/hosts
ПОЛЬЗ-ЛЬ   PID ДОСТУП КОМАНДА

/var/cache/nscd/hosts:
root        668 ...m NetworkManager
syslog      680 ...m rsyslogd
root        683 ...m snapd
root        712 F...m nscd
root        784 ...m cups-browsed
whoopsie    903 ...m whoopsie
root        919 ...m apache2
...
root        1103 ...m sshd
postgres    1144 ...m postgres
...
postgres    1149 ...m postgres
root        1280 ...m master