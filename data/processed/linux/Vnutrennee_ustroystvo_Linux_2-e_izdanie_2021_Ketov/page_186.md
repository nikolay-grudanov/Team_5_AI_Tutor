---
source_image: page_186.png
page_number: 186
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.22
tokens: 7607
characters: 2109
timestamp: 2025-12-24T04:37:24.191092
finish_reason: stop
---

данными приводит к значительным накладным расходам. Разделяемая память является специализированным средством взаимодействия, имеющим минимальные издержки использования.

В листинге 4.55 при помощи команды ipcs(1) показаны созданные в системе сегменты разделяемой памяти, массивы семафоров и очереди сообщений — средства межпроцессного взаимодействия svipc(7), «унаследованные» Linux от W:[UNIX System V]. Экземпляры средств System V IPC идентифицируются при помощи глобально уникальных ключей ①, или локальных¹ идентификаторов ② shmid (shared memory identifier), semid (semaphore identifier) и msgid (message queue identifier), и сродни файлам имеют владельцев и права доступа.

Листинг 4.55. Разделяемая память, очереди сообщений и семафоры (System V IPC)

fitz@ubuntu:~$ ipcs
------ Очереди сообщений --------
ключ msgid   владелец права исп. байты сообщения

------ Сегменты совм. исп. памяти --------
ключ ① shmid ② владелец права байты nattch состояние
0x0052e2c1 0 postgres 600 56 6
0x00000000 11567105 fitz 600 393216 2 назначение
0x00000000 10944514 fitz 700 1694000 2 назначение
0x00000000 11206666 fitz 600 393216 2 назначение

------ Массивы семафоров --------
ключ semid   владелец права nsems

Разделяемая память System V IPC реализуется ядром на основе механизма странично-го отображения при помощи совместного использования страничных кадров страницами разных процессов (см. рис. 4.6). При помощи системного вызова shmget(2) один из взаимодействующих процессов создает сегмент памяти, состоящий из страничных кадров без отображения на какой-либо файл. Впоследствии кадры этого сегмента при помощи системного вызова shmat(2) (shared memory attach) отображаются на страницы всех взаимодействующих процессов, за счет чего эти процессы и используют выделенную память совместно.

Иллюстрация применения разделяемой памяти приведена в листинге 4.56, где сегменты разделяемой памяти с идентификаторами 18₁₀ и 12₁₀ были созданы (cpid,

¹ Идентификаторы IPC (сродни индексным и файловым дескрипторам файлов) изменяются при пересоздании/переоткрытии экземпляра, а ключи IPC (подобно именам файлов) — нет.