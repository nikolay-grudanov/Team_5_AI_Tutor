---
source_image: page_225.png
page_number: 225
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.72
tokens: 7596
characters: 2423
timestamp: 2025-12-24T04:38:24.547585
finish_reason: stop
---

ся температура temp процессора в градусах °C, рассчитываемая путем деления на-цело измеряемой ядром (из псевдофайловой системы sysfs) температуры на 1000 (миллиградусов).

Завершает сценарий составной список ветвления if ①, проверяющий при помощи «красивой» формы [ команды test(1) логическое выражение |нагрузка ≥ мощность И температура > 80°C| на истинность и уведомляющий при помощи nodtify-send(1) пользователя о перегрузке, в сообщении которого будет приведена текущая статистика потребления ресурсов из первых 5 строк вывода команды top(1).

Еще один вид составного списка, предназначенного для организации множественного ветвления, реализуется конструкцией

case word in [ ([] pattern₁ [|| pattern₂]... ) list₁ ;; ]... esac

с ключевыми словами case, in, esac и признаком окончания ветви ;;. При множественном ветвлении используются не логические¹, а шаблонные выражения, заимствованные у подстановок имен файлов. Для определения ветви исполнения слово word проверяют на соответствие шаблонам pattern₁ слева направо (сверху вниз), при совпадении с одним из которых выполняется соответствующий список команд list₁, и дальше никакие проверки не производятся.

В примере из листинга 5.44 сильно заэкранированный текст небольшого сценария командного интерпретатора присваивается переменной PROMPT_COMMAND, выполнение команд которой происходит каждый раз перед выводом первичного приглашения PS1. В роли такой команды выступает составной список множественного ветвления case, который анализирует статус завершения последней выполненной интерпретатором команды при помощи подстановки значения специального параметра $?.

Если статус завершения равен 0 (успех) или 127 (команда не найдена), то вспомогательной «выдуманной» переменной PROMPT_COLOR присваивается управляющая последовательность (см. разд. 2.4) «normalного» (sgr0) режима вывода на терминал. Если статус завершения равен 130 (штатное завершение по сигналу SIGINT, например, при нажатии на ^C) или 131 (аварийное завершение по сигналу SIGQUIT, например, при нажатии на ^\), то используется управляющая последовательность «негативного» (rev) вывода ①. Если же команда завершилась со статусом 1 или с любым другим ошибочным статусом, то будет использована управляющая последовательность «жирного» (bold) начертания ②.

¹ При «обычном» ветвлении if-then-else для определения ветви исполнения тоже используются не логические выражения, а статусы завершения списков.