---
source_image: page_212.png
page_number: 212
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.93
tokens: 7576
characters: 1998
timestamp: 2025-12-24T04:38:00.879629
finish_reason: stop
---

команду expr(1), предназначенную для вычисления арифметических выражений, можно вычислять значения одних переменных на основе других, как показано в примере ① из листинга 5.28. Нужно отметить, что аргументы команды expr(1) отделяются пробелами, как и у любой другой команды, например find(1), а специальные символы, например *, подлежат экранированию (см. разд. 5.5).

Запуск внешних команд влечет за собой накладные расходы в виде системных вызовов fork(2) и execve(2), поэтому во многих диалектах языка командного интерпретатора реализованы аналогичная встроенная команда арифметических вычислений let и арифметическая подстановка в виде стандартной POSIX-конструкции $((expression)), а в некоторых еще и в нестандартном виде $[expression]. Использование команды let в примере ② из листинга 5.28, наоборот, исключает пробелы в арифметическом выражении, т. к. оно целиком является одним ее аргументом. В случае использования арифметической подстановки в примере ③ пробельные символы могут быть расставлены произвольным образом.

Листинг 5.28. Арифметические действия командного интерпретатора

bender@ubuntu:~$ set -x
bender@ubuntu:~$ RADIUS=10
① bender@ubuntu:~$ CIRCLE=`expr 2 \* $RADIUS \* 355 / 113`
++ expr 2 '*' 10 '*' 355 / 113
+ CIRCLE=62
② bender@ubuntu:~$ let CIRCLE=2*RADIUS*355/113; echo $CIRCLE
+ let 'CIRCLE=2*RADIUS*355/113'
+ echo 62
62
③ bender@ubuntu:~$ CIRCLE=$((2 * RADIUS * 355/113))
+ CIRCLE=62

Подстановки арифметических выражений полезно применять для пересчета значений в аргументах разных команд, использующих «неудобные» единицы измерения. Так, например, в листинге 5.29 при поиске библиотек больше 10 Мбайт нужно задавать количество байтов (символов), которое и составит искомые десять килобайт килобайтов.

Листинг 5.29. Библиотеки больше 10 Мбайт

bender@ubuntu:~$ set -x
bender@ubuntu:~$ find /lib /usr/lib -name '*.so.*' -size +$((1024*1024*10))c
+ find /lib /usr/lib -name '*.so.*' -size +10485760c
/usr/lib/x86_64-linux-gnu/libicudata.so.63.2
... ... ... ... ...