---
source_image: page_386.png
page_number: 386
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.40
tokens: 7568
characters: 2300
timestamp: 2025-12-24T04:43:26.520868
finish_reason: stop
---

дет выполнять вводимые команды. Тремя самыми важными командами являются linux ①, initrd ② и boot ③. Первая команда загружает в память ядро и параметры ①②, вторая — образ «временной» корневой ФС, а третья передает ядру управление. Команда insmod ④, как нетрудно догадаться, загружает указанный модуль GRUB, команда set ⑤ устанавливает значение переменной окружения GRUB, а команда echo вообще не нуждается в пояснениях. Кроме того, директива menuentry ⑥ заставляет GRUB изобразить простейшее меню с таким количеством пунктов, сколько таких директив было найдено, а при выборе одного из них выполнить команды из соответствующей секции {...}.

Приведенный в листинге 10.20 конфигурационный файл указывает GRUB загрузить модули ⑦, реализующие спецификации EFI UGA (Universal Graphic Adapter) и UEFI GOP (Graphics Output Protocol), которые организуют доступ к видеоадаптеру, а переменная окружения gfxpayload сообщает ⑧ загрузчику в формате WxH, какой видеорежим нужно выбрать для передачи его параметров в ядро. Так как загрузка со «съемного» накопителя может быть в принципе производиться в любом аппаратном окружении, то список поддерживаемых видеорежимов заранее неизвестен, и используется специальное значение auto.

Самым последним этапом при загрузке операционной системы является запуск процесса init, на который возложена обязанность запуска системных служб, в том числе служб терминального, графического и сетевого входа в операционную систему. Для этого остается только добавить пакет systemd на корневую ФС (листинг 10.21), и все будет готово для запуска.

Листинг 10.21. Установка /sbin/init (systemd)

root@ubuntu:# apt install systemd
...
root@ubuntu:# apt clean
root@ubuntu:# df -h /
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdc2       1.8G  365M  1.3G  23% /
root@ubuntu:# exit
morty@ubuntu:~$ sudo umount -R /mnt

Тестирование полученной инсталляции можно производить на «голом железе», т. е. попробовать выполнить перезагрузку и загрузить инсталлированную ОС с USB-флэш, но это не очень удобно, т. к. если что-то «пошло не так», то потребуется повторная загрузка исходной ОС для исправления. Куда удобнее использовать виртуальные машины с пара- или полной виртуализацией, например W:[QEMU] или W:[Virtual PC]. В листинге 10.22 показано, как, используя QEMU, можно запустить