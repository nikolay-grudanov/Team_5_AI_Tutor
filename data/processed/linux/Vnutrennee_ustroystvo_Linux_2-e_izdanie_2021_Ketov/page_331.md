---
source_image: page_331.png
page_number: 331
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.35
tokens: 7463
characters: 2024
timestamp: 2025-12-24T04:41:33.334635
finish_reason: stop
---

Глава 8
Графическая система Wayland

На самом деле W:[Wayland] — это протокол взаимодействия между графическими приложениями, Wayland-клиентами и так называемым Wayland-композитором, т. е. дисплейным сервером (он же Wayland-сервер).

Wayland-сервер (как и любой другой дисплейный сервер, включая X-сервер), решает задачу разделения устройств вывода (дисплеев) и ввода (клавиатуры, манипуляторы «мышь», сенсорные панели и пр.) между одновременно выполняющимися графическими приложениями. Вместе с тем архитектура и внутреннее устройство Wayland-протокола и сервера основывается на современных достижениях X Window System, отбросив все их недостатки и сохранив преимущества.

Вторая задача, решение которой возложено на Wayland-композитор, — это, собственно, композитинг (аналогично композитному менеджеру X), т. е. составление конечной визуальной сцены, изображаемой на дисплее пользователя из содержимого окон клиентов, которые принято называть поверхностями (surface).

Протокол Wayland не предоставляет клиентам никаких возможностей рисования векторных примитивов, как это делал X-протокол, вместо чего за основу протокола взята пересылка от клиентов к композитору растровых изображений. Пересылаемые изображения содержат образ окна целиком или образ изменяющейся части окна и доставляются при помощи буферов в разделяемой памяти или через DRM-буферы видеоускорителей, задействуя инфраструктуру DRI.

Сам протокол спроектирован так, чтобы произвольно расширяться без потери совместимости, для чего вводят понятие интерфейсов, каждый из которых является некоторым набором предоставляемых услуг. Каждый интерфейс имеет набор методов, которые приложение может вызвать, и событий, на которые приложение может подписываться и реагировать.

На листинге 8.1 показан вывод¹ утилиты weston-info(1), которая, будучи простейшим Wayland-клиентом, подключается к композитору посредством Wayland-протокола и

¹ Все примеры в этой главе работают, только если войти в систему с использованием Ubuntu on wayland сеанса при входе в систему.