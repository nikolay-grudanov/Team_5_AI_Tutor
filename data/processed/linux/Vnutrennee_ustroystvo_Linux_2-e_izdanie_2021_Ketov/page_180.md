---
source_image: page_180.png
page_number: 180
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.17
tokens: 7607
characters: 2140
timestamp: 2025-12-24T04:37:02.957253
finish_reason: stop
---

общений и разделяемая память, а для синхронизации действий процессов над совместно используемыми объектами — семафоры.

4.9.1. Неименованные каналы

Самое простое средство обмена информацией между родственными процессами (родитель и любые его потомки) — неименованные каналы. Канал является «двусторонним однонаправленным безымянным файлом», с одного конца в который можно только записывать информацию, а с другого конца — только считывать. В отличие от «обычного» файла, при открытии которого создается только один файловый дескриптор (и для чтения, и для записи файла), при создании канала создаются сразу два дескриптора — один для передачи (записи) в канал, а другой — для приема (чтения) из канала. При порождении дочерних процессов файловые дескрипторы наследуются, что и позволяет им взаимодействовать как с родительским процессом, так и между собой.

Использование неименованных каналов в системе широко распространено. Например, командный интерпретатор применяет их для организации конвейерной обработки (см. разд. 5.3). Архиватор tar(1) аналогичным способом — для упаковки архивов «на лету» при помощи «внешних» упаковщиков. В примере из листинга 4.51 посредством трассировщика strace(1) отслеживается системный вызов pipe(2), при помощи которого tar(1) создает неименованный канал для связи с упаковщиком xz(1) в дочернем процессе. Вся группа процессов архиватора tar(1) приостановлена сигналом ^Z SIGTSTP, после чего при помощи команды lsof(1) показаны файловые дескрипторы открытых файлов обоих процессов.

Листинг 4.51. Неименованные каналы

fitz@ubuntu:~$ strace -fe pipe,execve tar cJf /tmp/docs.tgz /usr/share/doc execve("/usr/bin/tar", ["tar", "cJf", "/tmp/docs.tgz", "/usr/share/doc"], ...) = 0 pipe([3, 4]) = 0
strace: Process 9274 attached
tar: Удаляется начальный '/' из имен объектов
[pid 9274] execve("/bin/sh", ["/bin/sh", "-c", "xz"], 0x7fff7fd6d060 ...) = 0
strace: Process 9275 attached
[pid 9275] execve("/usr/bin/xz", ["xz"], 0x5557bdfdb48 /* 31 vars */) = 0
[pid 9275] pipe([3, 4]) = 0
^Z
[1]+ Остановлен strace -fe pipe,execve tar cJf /tmp/docs.tgz /usr/share/doc
fitz@ubuntu:~$ ps f
8547 pts/1 Ss 0:00 -bash