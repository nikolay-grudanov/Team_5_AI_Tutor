---
source_image: page_113.png
page_number: 113
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.33
tokens: 7435
characters: 1806
timestamp: 2025-12-24T04:35:03.600340
finish_reason: stop
---

3.7.2. Флаги файлов

Кроме «общих» расширенных атрибутов, которые используются разными компонентами операционной системы, каждая файловая система зачастую имеет собственные атрибуты файлов, управляющие ее поведением и функциями при доступе к файлам. Так, файловые системы ext2/ext3/ext4 управляются специальными атрибутами-флагами, например a (append only), i (immutable), s (secure deletion), S (synchronous updates) и пр.

Флаг s заставляет файловую систему при удалении файла не только высвобождать принадлежащие ему блоки, но и обнулять их, а флаг s заставляет операции записи в файл выполнять синхронно (немедленно), минуя отложенную запись с использованием дискового кэша. Флаг i делает файл «неприкасаемым» (1, листинг 3.58) — его нельзя ни изменить 2, ни удалить 3 никому, даже суперпользователю 4 root. Флаг a делает файл «накопительным», т. е. никому не дает изменять имеющуюся в файле информацию или удалять файл, а позволяет только добавлять данные 2 в его конец.

Устанавливать флаги файлов разрешено их владельцам, а установка отдельных флагов, например a или i, требует определенных привилегий процесса (см. разд. 4.5.2). Для просмотра флагов файлов предназначена утилита lsattr(1), а для их изменения — утилита chattr(1), что иллюстрирует листинг 3.58 на примере флага i.

Листинг 3.58. Флаги файлов

finn@ubuntu:/srv/kingdom/stash$ lsattr
----------e- ./README.jake
----------e- ./README

finn@ubuntu:/srv/kingdom/stash$ chattr +i README.jake
chattr: Операция не позволяет while setting flags on README.jake

finn@ubuntu:/srv/kingdom/stash$ sudo chattr +i README.jake

finn@ubuntu:/srv/kingdom/stash$ lsattr README.jake
----i--------e- README.jake

finn@ubuntu:/srv/kingdom/stash$ date >1 README.jake
-bash: README.jake: Операция не позволяет

1 О перенаправлениях подробнее см. разд. 5.3.