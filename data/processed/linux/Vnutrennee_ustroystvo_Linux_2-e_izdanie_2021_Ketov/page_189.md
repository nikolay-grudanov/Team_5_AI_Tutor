---
source_image: page_189.png
page_number: 189
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.56
tokens: 7514
characters: 1904
timestamp: 2025-12-24T04:37:18.557137
finish_reason: stop
---

fitz      3129 ...m sshd
root      3170 ...m sudo

fitz@ubuntu:~$ sudo pmap -p 712
712:   /usr/sbin/nscd

1 00007fe044f94000 32768K rw-s-  -> /var/cache/nscd/hosts

fitz@ubuntu:~$ sudo pmap -p 919
919:   /usr/sbin/apache2 -k start

2 00007fb0e2f36000 212K r--s-  -> /var/cache/nscd/hosts

Организация межпроцессного взаимодействия при помощи разделяемой памяти на основе «штатного» механизма отображения файлов (в общем случае размещаемых на внешней, дисковой памяти) в память процессов имеет один значительный недостаток. Так как изменяемые страничные кадры такого общего сегмента памяти требуют сохранения в дисковый файл (что, к счастью, выполняется ядром не немедленно при их изменении), то в общем смысле на производительность такой разделяемой памяти влияют задержки операций дискового ввода-вывода (!), а не только скорость работы оперативной памяти.

В примере с демоном nscd(8) этого вполне достаточно, тем более что создаваемый им кэш все равно должен сохраняться при перезагрузках. В случаях, когда взаимодействие процессов требует максимальной производительности, разделяемая память на основе отображения дисковых файлов в память является не лучшим механизмом. Элегантное решение данной проблемы используется в Linux-реализации разделяемой памяти стандарта POSIX¹, что проиллюстрировано в листинге 4.58. Псевдофайловая система tmpfs специально придумана для «временного» размещения файлов непосредственно в оперативной памяти, что в совокупности со «штатным» механизмом их отображения в память взаимодействующих процессов и дает желаемые характеристики производительности.

Листинг 4.58. Разделяемая память (POSIX)

fitz@ubuntu:~$ findmnt /dev/shm
TARGET    SOURCE FSTYPE OPTIONS
/dev/shm    tmpfs    rw,nosuid,nodev
fitz@ubuntu:~$ sudo fuser -v /dev/shm/*
ПОЛЬЗ-ЛЬ    PID ДОСТУП КОМАНДА

¹ См. shm_overview(7), а также POSIX-семафоры sem_overview(7) и POSIX-очереди сообщений mq_overview(7).