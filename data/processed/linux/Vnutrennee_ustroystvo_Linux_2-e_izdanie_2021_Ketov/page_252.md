---
source_image: page_252.png
page_number: 252
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 52.42
tokens: 8248
characters: 3274
timestamp: 2025-12-24T04:39:31.581448
finish_reason: stop
---

Разные семейства (address family) сокетов соответствуют различным стекам сетевых протоколов. Например, стек TCP/IP v4 представлен семейством AF_INET, см. ip(7), стек TCP/IP v6 — семейством AF_INET6, см. ipv6(7), и даже локальные (файловые) сокеты имеют собственное семейство — AF_LOCAL, см. unix(7).

Для просмотра статистики по использованию сетевых сокетов используют «классическую» UNIX-команду netstat(8) или специфичную для Linux команду ss(8). В листингах 6.5 и 6.6 иллюстрируется использование этих команд для вывода информации обо всех (-a, all) сокетах протоколов (-u, udp) UDP и (-t, tcp) TCP стека TCP/IP v4 (-4), порты и адреса которых выведены в числовом (-n, numeric) виде, а также изображены процессы (-p, process), их открывшие.

Листинг 6.5. Сетевые сокеты (UNIX netstat(8))

lumpy@ubuntu:~$ sudo netstat -4autpn

Активные соединения с Интернетом (servers and established)

<table>
  <tr>
    <th>Proto</th>
    <th>Recv-Q</th>
    <th>Send-Q</th>
    <th>Local Address</th>
    <th>Foreign Address</th>
    <th>State</th>
    <th>PID/Program name</th>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>0.0.0.0:22</td>
    <td>0.0.0.0:*</td>
    <td>LISTEN</td>
    <td>864/sshd</td>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>127.0.0.1:631</td>
    <td>0.0.0.0:*</td>
    <td>LISTEN</td>
    <td>697/cupsd</td>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>127.0.0.1:5432</td>
    <td>0.0.0.0:*</td>
    <td>LISTEN</td>
    <td>1039/postgres</td>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>0.0.0.0:25</td>
    <td>0.0.0.0:*</td>
    <td>LISTEN</td>
    <td>1250/master</td>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>127.0.0.53:53</td>
    <td>0.0.0.0:*</td>
    <td>LISTEN</td>
    <td>638/systemd-resolve</td>
  </tr>
  <tr>
    <td>tcp</td>
    <td>0</td>
    <td>0</td>
    <td>192.168.0.101:22</td>
    <td>192.168.0.103:57622</td>
    <td>ESTABLISHED</td>
    <td>6152/sshd: lumpy [pr</td>
  </tr>
  <tr>
    <td>udp</td>
    <td>0</td>
    <td>0</td>
    <td>127.0.0.53:53</td>
    <td>0.0.0.0:*</td>
    <td></td>
    <td>638/systemd-resolve</td>
  </tr>
  <tr>
    <td>udp</td>
    <td>0</td>
    <td>0</td>
    <td>192.168.0.101:68</td>
    <td>0.0.0.0:*</td>
    <td></td>
    <td>684/NetworkManager</td>
  </tr>
</table>

Сетевые сокеты идентифицируются парой адресов (собственным, local, и чужим¹, foreign), принятыми в их семействе. Например, для семейства TCP/IP адрес сокета состоит из (сетевого) IP-адреса и (транспортного) номера порта, причем нули имеют специальное — «неопределенное» значение. Так, для прослушивающего² (LISTEN) сокета 0.0.0.0 в собственном IP-адресе означает, что он принимает соединения, направленные на любой адрес любого сетевого интерфейса, а 0.0.0.0 в чужом адресе указывает на то, что взаимодействие еще не установлено. Для сокетов с установленным (ESTABLISHED) взаимодействием оба адреса имеют конкретные значения, определяющие участников взаимодействия, например 192.168.100.105:22 и 192.168.100.103: 57622.

¹ Адрес удаленного приложения, с которым установлено соединение.
² Прослушивающие сокеты используются «серверными» приложениями, пассивно ожидающими входящие соединения с ними.