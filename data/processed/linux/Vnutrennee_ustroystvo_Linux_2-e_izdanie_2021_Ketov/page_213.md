---
source_image: page_213.png
page_number: 213
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.40
tokens: 7612
characters: 2050
timestamp: 2025-12-24T04:38:02.554537
finish_reason: stop
---

Пример из листинга 5.30 содержит две вложенные друг в друга подстановки — подстановку вывода команды date(1) в арифметическую подстановку. Команда find(1) при поиске модифицированных (-mtime, modification time) файлов использует единицы измерения «дней назад», и при поиске файлов в каталоге /var/lib/dpkg/info¹, изменявшихся в период с 19.11.2019 по 22.11.2019, приходится рассчитывать количество «дней назад» до этих дат. Для расчета используются команды date(1) и W:[UNIX-время], вычисляющая как целое количество секунд, прошедших от 01.01.1970 00:00 UTC до нужного момента, и арифметическая подстановка, вычисляющая количество «дней назад». Сначала вычисляется количество «секунд назад» как разница между текущим UNIX-временем и UNIX-временем указанной даты, после чего вычисляется количество «дней назад» путем деления на 60 секунд в минуте, 60 минут в часе и 24 часа в сутках. При помощи команды stat(1) подтверждается правильность поиска путем анализа даты модификации найденных файлов.

Листинг 5.30. Пакеты программного обеспечения, установленные в определенный период

bender@ubuntu:~$ set -x
bender@ubuntu:~$ find /var/lib/dpkg/info -name '*.list' \
> -mtime +$[ ( -mtime -mtime ) / (24*60*60) ] \
> -mtime -$[ ( -mtime -mtime ) / (24*60*60) ] | \
+ xargs stat -c %y:%n
++ date +%s
++ date -d 2019-11-22 +%s
++ date +%s
++ date -d 2019-11-19 +%s
+ find /var/lib/dpkg/info -name '*.list' -mtime +1 -mtime -4
- 2019-11-19 19:10:05.219764913 +0300:/var/lib/dpkg/info/tshark.list
2019-11-20 19:59:56.743180406 +0300:/var/lib/dpkg/info/libjq1:amd64.list
2019-11-20 00:54:46.292860010 +0300:/var/lib/dpkg/info/nscd.list
...
...
...
...

В этом примере строка первой команды конвейера для удобства ввода разбивается на три экранные строки посредством экранирования (см. ниже) управляющего символа перевода строки ↵ при помощи метасимвола одиночного экранирования \. В этом случае командный интерпретатор каждую последующую экранную строку

¹ Это база данных пакетного менеджера dpkg(1) об установленных в систему пакетах программного обеспечения.