---
source_image: page_368.png
page_number: 368
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.30
tokens: 7523
characters: 1905
timestamp: 2025-12-24T04:42:51.781391
finish_reason: stop
---

**Листинг 10.6. Модули драйверов устройств**

morty@ubuntu:~$ find /lib/modules/`uname -r`/kernel/drivers/ -name '*.ko' | wc -l
4268

morty@ubuntu:~$ lspci -d ::0401 -k
00:05.0 Multimedia audio controller: Intel Corporation 82801AA AC'97 Audio Controller (rev 01)
    Subsystem: Dell 82801AA AC'97 Audio Controller
    Kernel driver in use: snd_intel8x0
    Kernel modules: snd_intel8x0

morty@ubuntu:~$ lspci -d ::0401 -n
00:05.0 0401: 8086:2415 (rev 01)

morty@ubuntu:~$ modinfo snd_intel8x0 | grep alias
alias: pci:v00008086d00002445sv*sd*bc*sc*i*
alias: pci:v00008086d00002425sv*sd*bc*sc*i*

В реальности проблема имеет простое и элегантное решение, основанное на том, что практически все устройства на современных шинах идентифицируют себя как минимум при помощи идентификатора вендора устройства (vendor) и идентификатора модели устройства (device). Драйвера шины сканируют устройства и сообщают о событиях устройств (присоединении и отсоединении и пр.) всем желающим при помощи специального сокета «связи с ядром» netlink(7), а кроме того, экспортят информацию о текущем состоянии шин при помощи псевдофайловой системы sysfs(5).

Утилиты lspci(8), lscsi(8), lsusb(8) и им подобные умеют считывать с sysfs(5) информацию (см. ① в листинге 10.6) об идентификаторах ③④ устройств, подключенных к шинам в текущий момент времени, а затем, используя таблицу расшифровки идентификаторов /usr/share/misc/pci.ids, показывают эту информацию в удобоваримом ①② виде. События устройств, присылаемые драйверами шин из ядра, отслеживаются специальной службой udev(7), которая получает в каждом событии идентификаторы ③④ устройства, с которым это событие связано и, собственно, выполняет загрузку драйверов при подключении устройств и выгрузку при их отключении.

Для сопоставления идентификаторов устройств и имен модулей драйверов последние содержат в себе псевдонимы (alias) устройств, которые они поддерживают ②.