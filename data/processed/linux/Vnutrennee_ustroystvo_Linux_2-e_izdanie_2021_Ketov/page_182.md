---
source_image: page_182.png
page_number: 182
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.31
tokens: 7657
characters: 2436
timestamp: 2025-12-24T04:37:10.513397
finish_reason: stop
---

его последующее открытие осуществляется «обычным» системным вызовом open(2). Именованные каналы сейчас используются крайне редко и практически вытеснены именованными локальными сокетами, но в некоторых редких случаях все еще являются вполне достаточным средством взаимодействия.

В качестве примера на листинге 4.52 показан именованный канал /run/initctl (ранее размещался в /dev/initctl), через который systemd(1) все еще для совместимости принимает устаревшие (legacy) команды устаревшего init(8) для переключения «уровней исполнения» системы (run-level), см. boot(7).

Листинг 4.52. Именованные каналы

fitz@ubuntu:~$ ls -l /run/initctl /dev/initctl
lrwxrwxrwx 1 root root 12 ноя 22 22:01 /dev/initctl -> /run/initctl
prw------- 1 root root 0 ноя 22 19:24 /run/initctl
fitz@ubuntu:~$ sudo lsof /run/initctl
COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME
systemd 1 root 26u FIFO 0,23 0t0 276 /run/initctl

4.9.3. Неименованные локальные сокеты

Каналы являются однонаправленными средствами взаимодействия процессов, поэтому слабо подходят для двунаправленного обмена, например для организации обратной связи между процессами. В большинстве случаев именованные каналы позволяют эффективно реализовать только простейшую модель взаимодействия «поставщик → потребитель», тогда как для реализации модели «клиент ↔ сервер» используют специальное средство взаимодействия, называемое сокетом¹. Неименованные локальные (файловые) сокеты, как и неименованные каналы, являются «безымянными файлами», только двунаправленными, и так же предназначены для взаимодействия родственных процессов. Для создания пары соединенных сокетов используется системный вызов socketpair(2), создающий пару файловых дескрипторов, каждый из которых используется одновременно и для приема (чтения), и для передачи (записи) информации. Применение неименованных файловых сокетов проиллюстрировано в листинге 4.53 на примере синхронизирующего копировщика rsync(1). Копировщик оказывается параллельной программой, использующей сокеты для взаимодействия своих параллельных ветвей, первая из которых работает с исходными файлами, а вторая — с результирующими. При этом сокет используется как для обмена информацией о свойствах файлов для детектирования разни-

¹ Сокет — устоявшаяся русская калька с англ. socket, буквально означающая «разъем», например, 220В розетку и вилку, или сетевую розетку и вилку RJ-45, или 3,5 мм гнездо для наушников и соответствующий штекер.