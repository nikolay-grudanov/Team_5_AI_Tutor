---
source_image: page_223.png
page_number: 223
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.26
tokens: 7407
characters: 1737
timestamp: 2025-12-24T04:38:08.029507
finish_reason: stop
---

Условные списки удобно использовать для ветвления, если в каждой ветви выполняется по одной команде, как в первом примере из листинга 5.41, где посредством which(1) проверяется наличие команды clear(1), которая при наличии и вызывается для очистки терминала. В противном случае терминал очищается при помощи управляющей последовательности, которую выводит команда tput(1).

При необходимости выполнить в каждой ветви сценария несколько команд используется конструкция ветвления «ЕСЛИ» вида

if [!] list; then list; [elif [!] list; then list;] ... [else list;] fi,

являющаяся составным списком и использующая ключевые слова языка командного интерпретатора: if, then, elif, else, fi. Стоит заметить, что в самой конструкции логические выражения отсутствуют, а ветвление основано на статусах завершения списков команд, указывающихся после ключевых слов if и elif. В листинге 5.42 из ISO-образа извлекается каталог sys/src, но двумя разными способами. Если установлен архиватор 7z(1) и обнаружен командой which(1), то выполняется «успешная ветвь» ① с его использованием, иначе выполняется «неуспешная» ветвь с использованием монтирования/размонтирования ISO-образа при помощи fuseiso(1).

Листинг 5.42. Простое ветвление по результату выполнения команд

① bender@ubuntu:~$ if which 7z
    > then
↓① >  7z x plan9.iso sys/src
    > else
↓② >  fuseiso dvd.iso ~/.dvd
↓ >  cp -a ~/dvd/sys/src .
↓ >  fusermount -u ~/dvd
    > fi

② bender@ubuntu:~$ if ! findmnt ~/.dvd
    > then
    >  fuseiso dvd.iso ~/.dvd
    > fi

③ bender@ubuntu:~$ if test -b /dev/cdrom; then eject /dev/cdrom; fi

В примере ② из листинга 5.42 используется признак отрицания !, который заставляет if действовать «наоборот», т. е. запускать ветвь then, если список после