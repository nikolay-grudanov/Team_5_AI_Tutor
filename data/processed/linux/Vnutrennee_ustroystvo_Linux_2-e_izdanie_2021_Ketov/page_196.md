---
source_image: page_196.png
page_number: 196
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.09
tokens: 7439
characters: 1926
timestamp: 2025-12-24T04:37:30.100103
finish_reason: stop
---

5.3. Перенаправление потоков ввода-вывода

Для программирования сценариев на языке командного интерпретатора одной из важнейших его способностей является возможность организации сохранения результатов в файлы и возможность считывания исходных данных из файлов при выполнении команд.

Командный интерпретатор организует перенаправления потоков ввода-вывода внешних и встроенных команд при помощи конструкций [n]>file или [n]>>file и [n]<file (рис. 5.1). Символы < и > естественным образом идентифицируют направление выполняемых перенаправлений — ввода или вывода, а необязательное число n уточняет номер перенаправляемого потока (при умалчивании n перенаправляется стандартный поток вывода № 1, stdout(3) при выводе и стандартный поток ввода № 0, stdin(3) при вводе). Перенаправление вывода > выполняется с усечением старого содержимого, а перенаправление >> — с добавлением к старому содержимому файла file.

![Рис. 5.1. Стандартные потоки ввода-вывода и перенаправление потока вывода STDOUT](https://i.imgur.com/3Q5z5QG.png)

Для перенаправления заданного потока N некоторой запускаемой команды command в файл file командный интерпретатор порождает дочерний процесс при помощи системного вызова fork(2), затем в новом процессе открывает файл file при помощи системного вызова open(2), перенаправляет поток N в открытый файл посредством системного вызова dup2(2) и, наконец, запускает в этом процессе программу command при помощи системного вызова execve(2).

В примере из листинга 5.4 при помощи «разрезателя» текста cut(1) вырезается по разделителю (-d) : (двоеточие) 1-е поле (-f) файла passwd(5), содержащего свойства учетных записей пользователей, зарегистрированные в системе, а результат сохраняется в файле users при помощи перенаправления потока STDOUT. Затем при помощи потокового редактора файлов sed(1) выводятся (5,8p) только (-n) с 5-й по 8-ю строки полученного файла, что дает логины с 5-го по 8-й пользователя.