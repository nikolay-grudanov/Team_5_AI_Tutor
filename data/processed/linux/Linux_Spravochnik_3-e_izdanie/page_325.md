---
source_image: page_325.png
page_number: 325
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 51.30
tokens: 11794
characters: 2001
timestamp: 2025-12-24T03:30:01.217254
finish_reason: stop
---

<table>
  <tr>
    <th>pcnfsd</th>
    <td>RPC, направляемые программе с номером 150001. Текущая реализация демона pcnfsd (на момент написания этой книги) поддерживает как первую, так и вторую версию протокола pcnfsd. Запросы, на которые реагирует pcnfsd, разделяются на три категории: авторизация, печать и все прочие. Административное значение имеют только запросы на авторизацию и печать.

Авторизация

При получении запроса PCNFSD_AUTH или PCNFSD2_AUTH pcnfsd регистрирует пользователя, проверяя имя пользователя и пароль, возвращая соответствующий идентификатор пользователя, идентификатор группы, имя домашнего каталога и значение umask. Помимо этого происходит добавление записи в базу данных wtmp. Если нет необходимости записывать вход пользователей таким образом, добавьте строку

wtmp off

в файл /etc/pcnfsd.conf.

Печать

pcnfsd поддерживает модель печати, основанную на использовании NFS для передачи данных для печати от клиента серверу. Клиент посылает запрос PCNFSD_PR_INIT или PCNFSD2_PR_INIT, а сервер возвращает путь к буферному каталогу, который может использоваться клиентом и который экспортируется NFS. Команда pcnfsd создает подкаталог для каждого клиента; родительским каталогом является, как правило, /usr/spool/pcnfs, а именем подкаталога — имя узла системы клиента. Для того чтобы задать другой родительский каталог, следует добавить строку

spooldir path

в файл /etc/pcnfsd.conf. После того как клиент подмонтирует буферный каталог и скопирует в него данные для печати, pcnfsd посылает запрос PCNFSD_PR_START или PCNFSD2_PR_START. pcnfsd создает команду, основываясь на сервисах печати операционной системы сервера, и выполняет ее, учитывая информацию о пользователе РС. Каждый запрос на печать включает имя устройства вывода. pcnfsd интерпретирует принтер либо как конечный файл, передаваемый в системный буфер печати, либо как виртуальное печатающее устройство. Виртуальные принтеры определяются строками следующего вида в файле /etc/pcnfsd.conf:</td>
  </tr>
</table>