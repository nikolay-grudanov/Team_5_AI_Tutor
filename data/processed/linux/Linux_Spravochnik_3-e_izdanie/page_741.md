---
source_image: page_741.png
page_number: 741
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 45.94
tokens: 11841
characters: 2325
timestamp: 2025-12-24T03:48:53.074739
finish_reason: stop
---

738

Глава 14. CVS и RCS

Файл commitinfo

При выполнении команды commit CVS обращается к этому файлу, чтобы определить, необходимо ли производить какие-либо предварительные проверки файла. Каждая строка файла commitinfo содержит маску каталога, за которой следует имя программы, вызываемой для проверки файлов при помещении их в соответствующие каталоги.

Помимо обычных масок, существуют два специальных шаблона:

ALL
Если данный шаблон присутствует в файле, тогда все без исключения файлы передаются для проверки указанной программе. Затем CVS ищет шаблон, соответствующий имени каждого конкретного файла, и вызывает дополнительные проверяющие программы, если они определены.

DEFAULT
Если в файле присутствует данный шаблон, все файлы, не соответствующие ни одной из перечисленных масок, передаются для проверки указанной программе. Автоматическое соответствие всех файлов ключевому слову ALL, если таковое найдено, не считается за соответствие, когда речь идет об определении необходимости передачи файла на проверку программе, отмеченной как DEFAULT.

CVS создает командную строку для вызова программы проверки путем добавления полного пути к каталогу внутри репозитория и списка файлов, которые помещаются в репозиторий (это означает, что в файле commitinfo можно при необходимости указать несколько первых параметров проверяющей программы). Если проверяющая программа завершается с ненулевым кодом возврата, помещение файлов в репозиторий не происходит.

Программы, выполняемые по такому механизму, выполняются на сервере при использовании удаленного репозитория: Вот пример файла commitinfo:

ALL $CVSROOT/CVSROOT/commit-ALL.pl
DEFAULT $CVSROOT/CVSROOT/commit-DEFAULT.pl
CVSROOT$ $CVSROOT/CVSROOT/commit-CVSROOT.pl

В данном примере предполагается, что вы создадите файлы сценариев в модуле CVSROOT и добавите их в файл checkoutlist.

Файл config

Настройки репозитория определяются в административном файле config.

LockDir=dir
Указание CVS помещать файлы блокировки в указанный альтернативный каталог вместо репозитория, позволяя, таким образом, пользователям, не имеющим права записи в репозиторий (но имеющим права записи в указанный каталог dir), читать файлы из репозитория.
В версии 1.10 не поддерживаются альтернативные каталоги для файлов блокировки, и указание этого параметра вызывает сообщение об ошибке.