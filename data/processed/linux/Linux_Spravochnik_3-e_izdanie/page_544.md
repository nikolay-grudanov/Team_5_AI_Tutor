---
source_image: page_544.png
page_number: 544
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.18
tokens: 11879
characters: 2181
timestamp: 2025-12-24T03:40:00.146362
finish_reason: stop
---

Журнал команд

bash позволяет отображать и редактировать ранее введенные команды. По механизму работы эта возможность сходна с журналом интерпретатора C shell. Команды из журнала можно изменять:

• В режиме построчного редактирования
• С помощью команды fc

Кроме того, подстановки команд, описанные в главе 8 «Интерпретаторы csh и tcsh», также действительно в bash.

Режим построчного редактирования

Режим построчного редактирования позволяет эмулировать многие возможности редакторов vi и Emacs. Список команд журнала хранится в файле. После запуска редактора можно с помощью команд перемещаться по строкам файла в поисках нужной строки. Клавиши управления курсором работают на большинстве терминалов как в режиме Emacs, так и в режиме vi. Перед применением найденной строки ее можно изменить. В табл. 7.23 приведены примеры распространенных команд редактирования строки. Для выполнения команды необходимо лишь нажать клавишу <Enter>.

По умолчанию в режиме построчного редактирования работают сочетания клавиш Emacs. Чтобы переключиться на vi-редактирование, введите команду:

$ set -o vi

Помните, что vi запускается в режиме вставки; для того чтобы ввести команду vi, необходимо сначала нажать клавишу <Esc>.

Режим, установленный для редактирования команд bash, никак не связан с выбором редактора, который автоматически запускается при выполнении многих команд (в частности, в почтовых клиентах при создании нового письма). Чтобы изменить стандартный редактор, необходимо установить переменную VISUAL или EDITOR в соответствующее значение (полный путь редактора):

$ export EDITOR=emacs

Таблица 7.23. Распространенные сочетания клавиш, используемые для редактирования

<table>
  <tr>
    <th>vi</th>
    <th>Emacs</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td>k</td>
    <td>Ctrl-P</td>
    <td>Получить предыдущую команду</td>
  </tr>
  <tr>
    <td>j</td>
    <td>Ctrl-N</td>
    <td>Получить следующую команду</td>
  </tr>
  <tr>
    <td>/string</td>
    <td>Ctrl-R string</td>
    <td>Получить предыдущую команду, которая содержит строку string</td>
  </tr>
  <tr>
    <td>h</td>
    <td>Ctrl-B</td>
    <td>Переместить курсор на символ влево</td>
  </tr>
</table>