---
source_image: page_232.png
page_number: 232
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.09
tokens: 11842
characters: 2216
timestamp: 2025-12-24T03:25:40.342600
finish_reason: stop
---

Правила организованы в цепи (chains). Вы можете использовать их при создании брандмауэра, сокрытии адресов вашей локальной сети или просто отсечении определенных типов сетевых соединений.

Существует три предопределенные таблицы iptables; первая, filter, предназначена для фильтрации сетевых пакетов, вторая, nat — для трансляции сетевых адресов (Network Address Translation), а последняя, mangle, может применяться для внесения специфических изменений в сетевые пакеты. Правила для брандмауэра организуются в цепи, представляющие собой упорядоченные последовательности правил, которые проверяются ядром в процессе обработки пакета. Таблица filter содержит три предопределенные цепи: INPUT, OUTPUT и FORWARD. Цепи INPUT и OUTPUT применяются к входящим или исходящим пакетам. Цепь FORWARD предназначена для обработки пакетов, проходящих через данный узел и адресованных другой системе. Таблица nat также содержит три предопределенные цепи: PREROUTING, POSTROUTING и OUTPUT. В таблице mangle цепей только две: PREROUTING и OUTPUT.

Модуль netfilter проверяет входящие пакеты. После обработки всех правил цепи PREROUTING, в случае если пакет просто проходит через данный узел, модуль передает пакет в цепи INPUT или FORWARD. Исходящие пакеты обрабатываются сначала правилами цепи OUTPUT, а затем правилами цепи POSTROUTING. Каждая из цепей имеет цель по умолчанию — правило, применяемое, если пакет не соответствует ни одному из критериев цепи. Пользователь может создавать собственные цепи и отводить им роль целей для пакетов, но целей по умолчанию такие цепи иметь не могут. Если пакет не соответствует ни одному критерию в пользовательской цепи, то он возвращается в цепь, из которой произошел вызов, и проверяется на соответствие следующему правилу этой цепи.

Команда iptables лишь вносит изменения в правила работающего ядра. При выключении системы эти изменения не сохраняются. Для создания сценариев восстановления может применяться команда iptables-save. Восстановление настроек брандмауэра производится с помощью команды iptables-restore. Такой сценарий обычно вызывается при загрузке системы. Во многие дистрибутивы входит сценарий инициализации iptables, который использует результаты работы iptables-save.