---
source_image: page_006.png
page_number: 6
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 13.81
tokens: 11874
characters: 2255
timestamp: 2025-12-23T22:46:57.270370
finish_reason: stop
---

Рис. 4. Логическая структура функционирования программного пакета «rust-libtlrw»

сегментированными потоками. При взаимодействии же с несегментированными потоками достигается стандартная производительность алгоритмов на базе операции сравнения с обменом.

2. Особенности реализации программного пакета

Любые операции с разделяемыми несколькими потоками данными в многопоточных приложениях на Rust требуют неукоснительного выполнения таких требований, как создание счетчика ссылок на каждый разделяемый объект, клонирование разделяемых данных с последующим перемещением копии в новую область памяти, а также обязательное использование мьютексов, базовых примитивов синхронизации в Rust. Для обхода этих ограничений была спроектирована методика внедрения аппарата транзакционной памяти в язык, использующая свойство Rust взаимодействовать с кодом, написанным на других языках программирования. Механизм FFI (Foreign Function Interface), представленный в Rust, позволяет связывать приложения на этом языке с функциями из библиотек на таких средствах разработки, как Java, Python, C#, C. Внешние функции разработанного программного пакета были реализованы на языке С. Логика работы инструментария представлена на рис. 4.

Блок atomic.h включает в себя операцию сравнения с обменом для 32-разрядных целочисленных значений, функции атомарных записи и чтения для 8-разрядных и 32-разрядных целых чисел, а также атомарные функции инкрементирования и декрементирования 32-разрядных переменных. На этой библиотеке базируется основной модуль в разработанном программном пакете, tlrw.c. Он содержит реализацию основных операций с ключевым элементом алгоритма TLRW, структурой байтлока.

Представленные модули являются внешними библиотеками на языке С, которые подключаются для работы с прикладными программами на Rust при помощи блоков libc и gcc, поддерживаемых Cargo, менеджером пакетов Rust. Разработчик прикладной многопоточной программы обращается к библиотеке транзакционной памяти через программный интерфейс (tlrw-api.rs), содержащий в себе вызовы внешних функций на языке С. Удобная работа с транзакционными операциями обеспечивается благодаря функциям пользовательского интерфейса — определения начала и конца транзакционных секций. От разработчика на Rust