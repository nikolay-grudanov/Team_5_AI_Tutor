---
source_image: page_523.png
page_number: 523
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.48
tokens: 11681
characters: 1625
timestamp: 2025-12-24T10:40:27.006419
finish_reason: stop
---

Листинг 18-13: Деструктуризация полей структуры с использованием сокращённой записи

Этот код создаёт переменные x и y, которые соответствуют полям x и y из переменной p. В результате переменные x и y содержат значения из структуры p.

Вместо создания переменных для всех полей мы также можем деструктурировать с помощью литеральных значений являющихся частью структуры. Это позволяет проверить некоторые поля на определённые значения при создании переменных для деструктуризации других полей.

В листинге 18-14 показано выражение match, которое разделяет значения Point на три случая: точки, которые лежат непосредственно на оси x (что верно, когда y = 0), на оси y (x = 0) или ни то, ни другое.

Файл: src/main.rs

fn main() {
    let p = Point { x: 0, y: 7 };

    match p {
        Point { x, y: 0 } => println!("On the x axis at {}", x),
        Point { x: 0, y } => println!("On the y axis at {}", y),
        Point { x, y } => println!("On neither axis: ({}, {})", x, y),
    }
}

Листинг 18-14: Деструктуризация и сопоставление с литералами в одном шаблоне

Первая ветка будет соответствовать любой точке, которая лежит на оси x, указанием того что поле y совпадает, если его значение соответствует литералу равному 0.
Шаблон все ещё создаёт переменную x, которую мы можем использовать в коде для этой ветки.

Точно так же вторая ветка соответствует любой точке на оси y, указанием того что поле x совпадает, если его значение равно 0 и создаёт переменную y для значения поля y.
Третья ветка не указывает никаких литералов, поэтому он соответствует любой другой точке Point и создаёт переменные для обоих полей x и y.