---
source_image: page_050.png
page_number: 50
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.31
tokens: 7554
characters: 2049
timestamp: 2025-12-24T10:47:04.821654
finish_reason: stop
---

да вы будете выполнять сборку проекта в будущем, Cargo будет видеть, что файл Cargo.lock существует, и использовать указанные там версии, а не делать всю работу по выяснению версий снова. Это позволяет вам автоматически иметь воспроизводимую сборку. Другими словами, ваш проект будет оставаться в версии 0.3.14 до тех пор, пока вы не обновите его благодаря файлу Cargo.lock.

Обновление упаковки до новой версии

Когда вы хотите обновить упаковку, Cargo предоставляет еще одну команду, update, которая будет игнорировать файл Cargo.lock и выяснит все последние версии, которые соответствуют вашим спецификациям в Cargo.toml. Если она сработает, то Cargo запишет эти версии в файл Cargo.lock.

Но по умолчанию Cargo будет искать только версии больше 0.3.0 и меньше 0.4.0. Если упаковка rand выпустила две новые версии, 0.3.15 и 0.4.0, то вы увидите следующее ниже, выполнив команду cargo update:

    $ cargo update
        Updating registry `https://github.com/rust-lang/crates.io-index`
        Updating rand v0.3.14 -> v0.3.15

На этом этапе вы также заметите изменение в файле Cargo.lock, отметив, что версия упаковки rand, которую вы сейчас используете, равна 0.3.15.

Если бы вы захотели использовать rand версии 0.4.0 или любую версию в серии 0.4.x, то вам следовало бы обновить файл Cargo.toml так, чтобы он выглядел следующим образом:

Cargo.toml
    [dependencies]
    rand = "0.4.0"

В следующий раз, когда вы выполните команду cargo build, Cargo обновит реестр имеющихся упаковок и пересмотрит потребности rand в соответствии с новой версией, которую вы указали.

О пакетном менеджере Cargo и его экосистеме мы еще много чего расскажем в главе 14, но пока это все, что вам нужно знать. Cargo очень упрощает повторное использование библиотек, и поэтому растиане могут писать небольшие проекты, которые собираются из многочисленных пакетов.

Генерирование случайного числа

Теперь, когда вы добавили упаковку rand в файл Cargo.toml, приступим к ее использованию. Следующим шагом является обновление src/main.rs, как показано в листинге 2.3.