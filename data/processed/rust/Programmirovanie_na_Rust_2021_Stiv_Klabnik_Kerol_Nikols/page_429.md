---
source_image: page_429.png
page_number: 429
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.60
tokens: 7619
characters: 2336
timestamp: 2025-12-24T10:57:10.111634
finish_reason: stop
---

ком или стандартной библиотекой; вы можете создать свои инструменты или же использовать те, которые написаны другими.

Тем не менее два понятия конкурентности встроены в язык: маркерные (std::marker) типажи Sync и Send.

Разрешение передавать владение между потоками с помощью Send

Маркерный типаж Send указывает на то, что владение типом, реализующим Send, может передаваться между потоками. Почти каждый тип языка Rust маркируется как Send, но есть некоторые исключения. К ним относится тип Rc<T>: он не может реализовать Send, потому что, если вы клонировали значение типа Rc<T> и попытались передать владение клоном в другом потоке, то оба потока могут обновить счетчик ссылок в одно и то же время. По этой причине тип Rc<T> реализован для однопоточных ситуаций, в которых не нужно тратить ресурсы для обеспечения безопасности потока.

Следовательно, благодаря системе типов Rust и границам типажа вы не отправите случайно значение типа Rc<T> через потоки в небезопасном виде. Когда мы попытались сделать это в листинге 16.14, возникла ошибка, а именно типаж Send не был реализован для Rc<Mutex<i32>> (the trait Send is not implemented for Rc<Mutex<i32>>). Когда мы переключились на Arc<T>, который реализует Send, код скомпилировался.

Любой тип, целиком состоящий из типажей Send, автоматически помечается как Send. Почти все примитивные типы маркируются типажом Send, за исключением сырых указателей, которые мы обсудим в главе 19.

Разрешение доступа из нескольких потоков исполнения с помощью Sync

Маркерный типаж Sync указывает на то, что он безопасен для типа, реализующего Sync, на который можно ссылаться из нескольких потоков исполнения. Другими словами, любой тип T маркируется типажом Sync, если &T (ссылка на T) маркируется как Send, имея в виду, что ссылку можно безопасно отправить в другой поток. Подобно Send примитивные типы маркируются как Sync, а типы, целиком состоящие из типов, маркируемых как Sync, тоже маркируются как Sync.

Умный указатель Rc<T> не маркируется как Sync по тем же причинам, по которым он не маркируется как Send. Тип RefCell<T> (о котором мы говорили в главе 15) и семейство связанных типов Cell<T> не маркируются как Sync. Реализация проверки заимствования, которую RefCell<T> выполняет во время выполнения, небезопасна для потоков. Умный указатель Mutex<T> маркируется как Sync и может