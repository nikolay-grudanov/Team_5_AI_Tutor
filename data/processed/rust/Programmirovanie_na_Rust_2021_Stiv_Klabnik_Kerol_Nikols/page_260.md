---
source_image: page_260.png
page_number: 260
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.15
tokens: 7470
characters: 1970
timestamp: 2025-12-24T10:52:37.703203
finish_reason: stop
---

Добавление сообщений об ошибках для пользователя

Вы также можете добавлять сообщения для пользователя, которые будут напечатаны вместе с сообщением об ошибке в качестве необязательных аргументов для макрокоманд assert!, assert_eq! и assert_ne!. Любые аргументы, которые указываются после одного обязательного аргумента для assert! или двух обязательных аргументов для assert_eq! и assert_ne!, передаются вместе с макрокомандой format! (см. раздел «Конкатенация с помощью оператора + или макрокоманды format!» (с. 177)), так что вы можете передать форматную строку, содержащую заполнители {} и значения для вставки внутрь этих заполнителей. Сообщения для пользователя полезны, чтобы фиксировать значение проверочного утверждения. Если тест не сработает, у вас будет более четкое представление, в чем проблема с кодом.

Допустим, у нас есть функция, которая приветствует людей по имени, и мы хотим проверить, что имя, которое мы передаем в функцию, появляется на выходе из нее:

src/lib.rs
```rust
pub fn greeting(name: &str) -> String {
    format!("Здравствуй {}!", name)
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn greeting_contains_name() {
        let result = greeting("Кэрол");
        assert!(result.contains("Кэрол"));
    }
}
```

Требования к этой программе еще не были согласованы, и мы почти уверены, что текст Здравствуй в начале функции greeting изменится. Мы решили, что не хотим обновлять тест при изменении требований, поэтому вместо проверки точного равенства значению, возвращаемому функцией greeting, мы просто будем проверять, что данные на выходе содержат текст параметра на входе.

Давайте внесем в этот код ошибку, изменив функцию greeting, не включив name, и посмотрим, как не сработает этот тест:

```rust
pub fn greeting(name: &str) -> String {
    String::from("Здравствуй!")
}
```

Выполнение этого теста приводит к следующему результату:

```
running 1 test
test tests::greeting_contains_name ... FAILED

failures:
```