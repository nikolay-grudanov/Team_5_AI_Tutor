---
source_image: page_481.png
page_number: 481
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.79
tokens: 7513
characters: 1931
timestamp: 2025-12-24T10:58:30.048907
finish_reason: stop
---

Условие совпадения констатирует, что рукав совпадает только в том случае, если значение x равно 4, 5 или 6 и если y является истинным. Когда этот код выполняется, паттерн первого рукава совпадает, потому что x равно 4, но ограничитель совпадения if y является ложным, поэтому первый рукав не выбирается. Код переходит ко второму рукаву, который совпадает, а программа выведет нет. Причина в том, что условие if применяется ко всему паттерну 4 | 5 | 6, не только к последнему значению 6. Другими словами, приоритет ограничителя совпадения по отношению к паттерну ведет себя так:

(4 | 5 | 6) if y => ...

а не так:

4 | 5 | (6 if y) => ...

После выполнения этого кода приоритет становится очевидным: если бы ограничитель совпадения применялся только к конечному значению в списке значений, заданных с помощью оператора |, то рукав совпал бы и программа вывела бы да.

Привязки @

Оператор at (@) позволяет создавать переменную, которая содержит значение. В то же время мы проверяем это значение, чтобы убедиться, что оно совпадает с паттерном. В листинге 18.29 показан пример, в котором нужно проверить, не находится ли поле id в Message::Hello в пределах интервала 3...7. Но мы также хотим привязать значение к переменной id_variable, чтобы можно было его использовать в коде, связанном с рукавом совпадения. Мы могли бы назвать эту переменную id, так же как и поле, но в данном примере будем использовать другое имя.

Листинг 18.29. Использование @ для привязки к значению в паттерне и проверка

enum Message {
    Hello { id: i32 },
}

let msg = Message::Hello { id: 5 };

match msg {
    Message::Hello { id: id_variable @ 3...7 } => {
        println!("Найден идентификатор в интервале: {}", id_variable)
    },
    Message::Hello { id: 10...12 } => {
        println!("Найден идентификатор в еще одном интервале")
    },
    Message::Hello { id } => {
        println!("Найден какой-то другой идентификатор: {}", id)
    },
}