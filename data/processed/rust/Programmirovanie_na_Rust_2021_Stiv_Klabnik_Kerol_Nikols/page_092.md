---
source_image: page_092.png
page_number: 92
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.45
tokens: 7571
characters: 2323
timestamp: 2025-12-24T10:48:11.204420
finish_reason: stop
---

так же процессор выполняет работу лучше, если он работает с данными, которые находятся близко к другим данным (как это происходит в стеке), а не далеко (как это бывает в куче). Выделение большого объема пространства в куче также занимает немало времени.

Когда код вызывает функцию, значения, переданные в функцию (в том числе потенциально, указатели на данные в куче) и локальные переменные функции вталкиваются в стек. Когда функция заканчивается, эти значения выталкиваются из стека.

Отслеживание того, какие части кода используют тот или иной тип данных в куче, сведение к минимуму объема повторяющихся данных и очистка неиспользуемых данных в куче, чтобы сохранить свободное пространство, — все эти проблемы решает владелец. Как только вы поймете, что такое владение, вам не нужно будет задумываться о стеке и куче. Но если вы знаете, что управление данными кучи является причиной существования владения, то вы поймете, почему оно работает именно так.

Правила владения

Прежде всего давайте взглянем на правила владения. Помните об этих правилах по мере того, как мы будем отрабатывать примеры, которые их иллюстрируют:

○ Каждое значение в языке Rust имеет переменную, которая называется его владельцем.
○ В каждый момент времени может существовать только один владелец.
○ Если владелец выйдет из области видимости, значение будет отброшено.

Область видимости переменной

Мы уже отработали пример программы Rust в главе 2. Теперь, изучив базовый синтаксис, мы не будем включать весь код fn main() { в примеры, поэтому, если вы будете заниматься дальше, то вам придется помещать последующие примеры в функцию main вручную. В результате наши примеры будут немного короче, позволяя сосредотачиваться на деталях, а не на стереотипном коде.

В качестве первого примера владения мы рассмотрим область видимости нескольких переменных. Область видимости — это диапазон внутри программы, для которого элемент является действительноым. Будем считать, что у нас есть переменная, которая выглядит следующим образом:

let s = "hello";

Переменная s относится к строковому литералу, где значение строки жестко закодировано в текст нашей программы. Переменная является действительной с момента ее объявления до конца текущей области видимости. В листинге 4.1 приведены комментарии, аннотирующие места, где действует переменная s.