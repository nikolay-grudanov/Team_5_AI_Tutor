---
source_image: page_174.png
page_number: 174
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.95
tokens: 7624
characters: 2466
timestamp: 2025-12-24T10:50:26.137043
finish_reason: stop
---

Компилятору необходимо знать, какие типы будут находиться в векторе во время компиляции, чтобы определить, сколько потребуется памяти в куче для хранения каждого элемента. Дополнительное преимущество заключается в том, что мы можем четко определить, какие типы разрешены в этом векторе. Если бы Rust разрешал вектору содержать любой тип, то был бы шанс, что один или несколько типов вызовут ошибки при операциях, выполняемых над элементами вектора. Использование перечисления плюс выражения match означает, что во время компиляции язык Rust будет обеспечивать обработку всех возможных вариантов, как описано в главе 6.

При написании программы, если вы не знаете исчерпывающий набор типов, которые программа получит во время работы для хранения в векторе, то техническое решение с использованием перечисления работать не будет. Вместо него вы можете применить типажный объект, который мы рассмотрим в главе 17.

Теперь, когда мы обсудили несколько наиболее распространенных способов использования векторов, обязательно ознакомьтесь с документацией API о всевозможных полезных методах, определенных для Vec<T> стандартной библиотекой. Например, в дополнение к методу push метод pop выталкивает из вектора и возвращает последний элемент. Давайте перейдем к следующему коллекционному типу — типу String!

Хранение текста в кодировке UTF-8 с помощью строк

Мы говорили о строках в главе 4, а теперь рассмотрим их подробнее. Новички, как правило, застревают на строках по трем причинам: из-за склонности Rust к выявлению возможных ошибок, из-за большей сложности структуры данных строк, чем считают многие программисты, и вследствие UTF-8. Комбинацию этих факторов бывает трудно воспринять, если до этого вы имели дело с другими языками программирования.

Целесообразно обсуждать строки в контексте коллекций, поскольку строки реализованы как коллекция байтов, плюс некоторые методы обеспечивают полезную функциональность, когда эти байты интерпретируются как текст. В этом разделе мы поговорим об операциях в типе String, которые есть у каждого коллекционного типа, такого как создание, обновление и чтение. Мы также обсудим отличия типа String от других коллекций, а именно как индексирование в String осложняется различиями в том, как люди и компьютеры интерпретируют данные типа String.

Что такое тип String?

Сначала мы определим, что подразумевается под термином строковый тип, String. В Rust имеется только один строковый тип в ядре языка, а именно строковый срез