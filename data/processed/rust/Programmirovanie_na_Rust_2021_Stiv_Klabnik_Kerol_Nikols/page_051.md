---
source_image: page_051.png
page_number: 51
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.62
tokens: 7592
characters: 2246
timestamp: 2025-12-24T10:47:13.841584
finish_reason: stop
---

Листинг 2.3. Добавление кода генерирования случайного числа

use std::io;
① use rand::Rng;

fn main() {
    println!("Угадайте число!");

    ② let secret_number = rand::thread_rng().gen_range(1, 101);

    println!("Секретное число равно {}", secret_number);
    println!("Пожалуйста, введите свою догадку.");

    let mut guess = String::new();

    io::stdin().read_line(&mut guess)
        .expect("Не получилось прочитать строку");

    println!("Вы загадали: {}", guess);
}

Сначала мы добавляем строку кода use: use rand::Rng ①. Типаж Rng определяет методы, которые реализуются генераторами случайных чисел, и указанный типаж должен быть в области видимости, благодаря чему мы можем использовать эти методы. В главе 10 типажи будут рассмотрены подробно.

Далее мы добавляем еще две строки кода в середине ②. Функция rand::thread_rng даст нам конкретный генератор случайных чисел, который мы намерены использовать — он является локальным для текущего потока и инициализируется операционной системой. Затем мы вызываем метод gen_range на указанном генераторе случайных чисел. Этот метод определен типажом Rng, который мы ввели в область видимости с помощью инструкции use rand::Rng. Метод gen_range берет два числа в качестве аргументов и генерирует случайное число между ними. Результат включает в себя нижнюю границу, но исключает верхнюю, поэтому для того, чтобы запросить число между 1 и 100, нам нужно указать 1 и 101.

ПРИМЕЧАНИЕ

Вы не просто узнаете, какие типажи использовать и какие функции и методы вызывать из упаковки. Инструкции по использованию упаковки содержатся в сопроводительной документации к ней. Еще одно приятное свойство Cargo заключается в том, что вы можете выполнить команду cargo doc --open, которая выведет документацию, порождаемую всеми вашими зависимостями, локально и откроет ее в браузере. К примеру, если вас интересует прочая функциональность упаковки rand, то выполните cargo doc --open и нажмите rand на боковой панели слева.

Вторая строка кода, добавленная нами в середине программы, выводит секретное число. Это полезно при разработке программы и позволяет ее тестировать, но мы удалим эту строку из окончательной версии. Игра никуда не годится, если программа выводит ответ, как только запускается!