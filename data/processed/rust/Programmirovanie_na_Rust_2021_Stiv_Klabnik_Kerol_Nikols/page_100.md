---
source_image: page_100.png
page_number: 100
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.19
tokens: 7545
characters: 2180
timestamp: 2025-12-24T10:48:20.573917
finish_reason: stop
---

Сору, если тип или любая из его частей реализовали типаж Drop. Если типу нужно, чтобы происходило нечто особенное, когда значение выходит из области видимости, а мы добавляем аннотацию Сору в этот тип, то происходит ошибка времени компиляции. Чтобы узнать, как добавлять аннотацию Сору в тип, см. приложение В в конце книги.

Итак, какие типы аннотирует типаж Сору? Вы можете обратиться к документации по тому или иному типу и узнать об этом, но по общему правилу любая группа простых скалярных значений аннотируется типажом Сору. Типаж Сору не аннотирует ничего, что требует выделения пространства в куче или является некоторой формой ресурса. Вот несколько типов, которые аннотируются:

○ Все целочисленные типы, такие как u32.
○ Булев тип bool со значениями true и false.
○ Символьный тип char.
○ Все типы с плавающей точкой, такие как f64.
○ Кортежи, если только они содержат типы, которые также аннотируются. Например, (i32, i32) аннотируются, а (i32, String) — нет.

Владение и функции

Семантика передачи значения функции аналогична семантике присвоения значения переменной. Передача переменной функции приведет к перемещению или копированию, так же как и присвоение значения переменной. В листинге 4.3 приведен пример с примечаниями, показывающими, где переменные входят в область видимости, а где выходят из нее.

Листинг 4.3. Функции с аннотированными владением и областью видимости
src/main.rs

fn main() {
    let s = String::from("hello"); // s входит в область видимости

    takes_ownership(s);           // значение s перемещается в функцию...
                                  // ... и поэтому больше здесь не действует

    let x = 5;                    // x входит в область видимости

    makes_copy(x);                // x переместится в функцию, но
                                  // i32 копируема, поэтому нормально,
                                  // если x будет использоваться после этого

} // Здесь x выходит из области видимости, а затем s. Но поскольку
   // значение s было перемещено, ничего особенного не происходит.

fn takes_ownership(some_string: String) { // some_string входит
    // в область видимости
    println!("{}", some_string);
}