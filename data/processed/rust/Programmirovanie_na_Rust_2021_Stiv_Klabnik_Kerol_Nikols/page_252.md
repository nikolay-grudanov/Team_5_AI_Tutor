---
source_image: page_252.png
page_number: 252
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.16
tokens: 7578
characters: 2054
timestamp: 2025-12-24T10:52:30.814172
finish_reason: stop
---

Листинг 11.1. Тестовый модуль и функция, автоматически генерируемые командой cargo new

src/lib.rs

```rust
#[cfg(test)]
mod tests {
    #[test]
    fn it_works() {
        assert_eq!(2 + 2, 4);
    }
}
```

Пока давайте проигнорируем две верхние строчки и сосредоточимся на функции, чтобы увидеть, как она работает. Обратите внимание на аннотацию #[test] ①: этот атрибут указывает на то, что функция является тестовой, поэтому исполнитель теста знает, что эту функцию нужно рассматривать как тест. В модуле tests также могут быть не-тестовые функции, помогающие настраивать общие сценарии или выполнять часто встречающиеся операции. Именно поэтому нам нужно указывать функции, которые являются тестами, используя атрибут #[test].

Тело функции использует макрокоманду assert_eq! ② для утверждения о том, что 2 + 2 равно 4. Это проверочное утверждение служит примером формата для типичного теста. Давайте выполним его, чтобы увидеть, что этот тест проходит.

Команда cargo test выполняет все тесты в проекте, как показано в листинге 11.2.

Листинг 11.2. Данные, полученные в результате выполнения автоматически сгенерированного теста

```
$ cargo test
Compiling adder v0.1.0 (file:///projects/adder)
Finished dev [unoptimized + debuginfo] target(s) in 0.22 secs
Running target/debug/deps/adder-ce99bcc2479f4607

① running 1 test
② test tests::it_works ... ok

③ test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

④ Doc-tests adder
    running 0 tests
    test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
```

Пакетный менеджер Cargo скомпилировал и выполнил тест. После строчек Compiling, Finished и Running идет строчка running 1 test ①. Следующая далее строчка показывает имя сгенерированной тестовой функции под названием it_works и результат выполнения этого теста — ок ②. Далее появляется итоговая сводка выполнения тестов. Текст test result: ok. ③ означает, что все тесты прошли, и часть, которая читается как 1 passed; 0 failed, подытоживает число тестов, которые прошли успешно или не сработали.