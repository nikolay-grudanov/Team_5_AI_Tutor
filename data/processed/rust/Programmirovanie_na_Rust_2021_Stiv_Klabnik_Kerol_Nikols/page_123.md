---
source_image: page_123.png
page_number: 123
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.14
tokens: 7550
characters: 1947
timestamp: 2025-12-24T10:49:00.457915
finish_reason: stop
---

чение! Мы должны учитывать, что ширина — это кортежный индекс 0, а высота — кортежный индекс 1. Если бы кто-то другой работал над этим кодом, то ему следовало бы это понимать и держать в уме. Легко забыть или перепутать эти значения и вызвать ошибки, потому что мы не передали смысл данных в коде.

Рефакторинг с использованием структур: добавление большего смысла

Мы используем структуры, для того чтобы улучшить смысловое содержание путем маркировки данных. Можно трансформировать используемый кортеж в тип данных с именем для целого и с именами для частей, как показано в листинге 5.10.

Листинг 5.10. Определение структуры Rectangle
src/main.rs

struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };

    println!(
        "Площадь прямоугольника равна {} квадратным пикселам.",
        area(&rect1)
    );
}

fn area(rectangle: &Rectangle) -> u32 {
    rectangle.width * rectangle.height
}

Мы определили структуру и назвали ее Rectangle ①. Внутри фигурных скобок поля определены как width и height, оба имеют тип u32 ②. Затем в функции main мы создали конкретный экземпляр структуры Rectangle, у которого ширина 30 и высота 50 ③.

Функция area теперь определяется с одним параметром, который мы назвали rectangle, его тип является неизменяемым заимствованием экземпляра структуры Rectangle ④. Как уже упоминалось в главе 4, мы хотим заимствовать структуру, а не брать ее во владение. Таким образом, функция main сохраняет свое владение и продолжает использовать rect1, что является причиной того, почему мы используем & в сигнатуре функции и где мы вызываем эту функцию.

Функция area обращается к полям width и height экземпляра структуры Rectangle ⑤. Сигнатура функции area теперь соответствует тому, что мы имеем в виду: нужно вычислить площадь прямоугольника, используя поля ширины width и высоты height. Благодаря этому передается идея о том, что ширина и высота связа-