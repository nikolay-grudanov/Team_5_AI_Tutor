---
source_image: page_584.png
page_number: 584
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.57
tokens: 7538
characters: 2257
timestamp: 2025-12-24T11:00:59.430181
finish_reason: stop
---

пирование данных кучи. Дополнительные сведения о клонировании смотрите в разделе «Пути взаимодействия переменных и данных: Clone» (с. 99).

Генерирование типажа Clone реализует метод clone, который при выполнении для всего типа целиком вызывает clone для каждой части типа. Это означает, что для генерирования типажа Clone все поля или значения в типе также должны реализовывать типаж Clone.

Пример того, когда требуется Clone, — вызов метода to_vec для среза. Срез не владеет экземплярами типа, которые он содержит, но вектор, возвращаемый из to_vec, должен будет владеть своими экземплярами, поэтому to_vec вызывает clone для каждого элемента. Таким образом, тип, хранящийся в срезе, должен реализовывать типаж Clone.

Типаж Copy позволяет дублировать значение путем копирования только тех частей, которые хранятся в стеке, никакого произвольного кода не требуется. Дополнительную информацию о типаже Copy смотрите в разделе «Данные только из стека: Copy» (с. 99).

Типаж Copy не определяет методов, которые не дают программистам перегружать эти методы и нарушать предположение о том, что никакой произвольный код не выполняется. Благодаря этому все программисты допускают, что значения будут копироваться очень быстро.

Вы можете сгенерировать типаж Copy для любого типа, все части которого реализуют Copy. Вы можете применять типаж Copy к типам, которые также реализуют Clone, поскольку тип, выполняющий Copy, имеет тривиальную реализацию Clone, выполняющую ту же задачу, что и Copy.

Типаж Copy требуется редко. Типы, реализующие Copy, имеют в своем распоряжении оптимизации, то есть не нужно вызывать clone, что делает код более сжатым.

Всего, что можно сделать с помощью Copy, можно также добиться с помощью Clone, но код, возможно, будет медленнее, либо местами придется использовать clone.

Хеш для отображения значения в значение фиксированного размера

Типаж Hash позволяет брать экземпляр типа произвольного размера и отображать этот экземпляр в значение фиксированного размера с помощью хеш-функции. Генерирование типажа Hash реализует метод hash. Сгенерированная (производная) реализация метода hash объединяет результат вызова hash для каждой части типа, то есть для генерирования Hash все поля или значения должны также реализовывать Hash.