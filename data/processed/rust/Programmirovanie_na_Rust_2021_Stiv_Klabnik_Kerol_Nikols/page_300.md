---
source_image: page_300.png
page_number: 300
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.96
tokens: 7464
characters: 1813
timestamp: 2025-12-24T10:53:40.876244
finish_reason: stop
---

3. Если содержит, то добавить эту строку в список возвращаемых значений.
4. Если не содержит, то ничего не делать.
5. Вернуть список совпавших результатов.

Давайте проработаем каждый шаг, начиная с перебора строк содержимого.

Перебор строк содержимого с помощью метода lines

В Rust есть полезный метод для работы с построчным перебором значений типа String, удобно названный lines, который работает, как показано в листинге 12.17. Обратите внимание, что этот код пока не компилируется.

Листинг 12.17. Перебор каждой строки содержимого в contents
src/lib.rs
```rust
pub fn search<'a>(query: &str, contents: &'a str) -> Vec<&'a str> {
    for line in contents.lines() {
        // сделать что-то со строкой текста
    }
}
```

Метод lines возвращает итератор. Мы подробно поговорим об итераторах в главе 13, но вспомните, что вы видели этот способ применения итератора в листинге 3.5, где мы использовали цикл for с итератором, чтобы выполнить код для каждого элемента в коллекции.

Поиск запроса в каждой строке

Далее мы проверим наличие строки запроса в текущей строке текста. К счастью, в типе String имеется полезный метод contains, который делает это за нас! Добавьте вызов метода contains в функцию search, как показано в листинге 12.18. Обратите внимание, что этот код по-прежнему не компилируется.

Листинг 12.18. Добавление функциональности для проверки, содержит ли строка текста запрос
src/lib.rs
```rust
pub fn search<'a>(query: &str, contents: &'a str) -> Vec<&'a str> {
    for line in contents.lines() {
        if line.contains(query) {
            // сделать что-то со строкой текста
        }
    }
}
```

Хранение совпадающих строк текста

Нам также нужен способ хранения строк текста, содержащих строку запроса. Для этого мы создаем изменяемый вектор перед циклом for и вызываем метод push,