---
source_image: page_484.png
page_number: 484
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.77
tokens: 7703
characters: 2653
timestamp: 2025-12-24T10:58:39.196251
finish_reason: stop
---

Небезопасный Rust существует потому, что по своей природе статический анализ консервативен. Когда компилятор пытается выяснить, поддерживает ли код гарантии, то лучше отклонять некоторые допустимые программы, чем принимать некоторые недопустимые программы. Хотя с точки зрения языка Rust код может быть в полном порядке, но самом деле все не так! Используйте небезопасный код, чтобы сказать компилятору: «Доверься мне, я знаю, что делаю». Важно понимать, что вы действуете на свой страх и риск: если вы работаете с небезопасным кодом неправильно, могут возникнуть проблемы из-за небезопасности памяти, такие как переход по указателю null.

Вторая причина существования «небезопасного двойника» заключается в том, что базовое аппаратное обеспечение небезопасно. Если бы Rust не позволял выполнять небезопасные операции, вы не смогли бы выполнять некоторые задачи. Компилятору нужно, чтобы вы могли заниматься низкоуровневым системным программированием, например взаимодействовать с операционной системой непосредственно или даже писать собственную ОС. И действительно, одна из целей языка — это работа с низкоуровневым системным программированием. Давайте узнаем, что и как можно делать с небезопасным Rust.

Небезопасные сверхспособности

Чтобы переключиться на небезопасный Rust, используйте ключевое слово unsafe, а затем начните новый блок, содержащий небезопасный код. В небезопасном Rust вы можете предпринять четыре действия, именуемые небезопасными сверхспособностями, которые нельзя совершить на безопасном языке Rust. Эти сверхспособности включают в себя способы:

○ применять оператор разыменования к сырому указателю;
○ вызывать небезопасную функцию или метод;
○ обращаться или модифицировать изменяемую статическую переменную;
○ реализовывать небезопасный типаж.

Важно понимать, что ключевое слово unsafe не отключает контролер заимствования или другие проверки безопасности, принятые в Rust: если вы используете ссылку в небезопасном коде, она все равно будет проверена. Ключевое слово unsafe предоставляет доступ только к этим четырем операциям, которые затем не проверяются компилятором на безопасность памяти. Внутри опасного блока вы все равно до некоторой степени будете в безопасности.

В дополнение к этому, небезопасность не означает, что код внутри блока обязательно опасен или что в нем обязательно будут проблемы с безопасностью памяти. Цель состоит в том, что, как программист, вы будете делать так, чтобы код внутри небезопасного блока обращался к памяти правильным образом.

Людям свойственно ошибаться, и ошибки, безусловно, будут. Но требуя, чтобы эти четыре небезопасные операции были внутри блоков, связанных с unsafe, вы