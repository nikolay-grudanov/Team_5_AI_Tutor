---
source_image: page_126.png
page_number: 126
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.59
tokens: 7471
characters: 1904
timestamp: 2025-12-24T10:49:00.209868
finish_reason: stop
---

более крупные структуры, полезно иметь результат, который легче читать. В этих случаях вместо {:?} в строке макрокоманды println! мы можем использовать {:#?}. Если в данном примере применить стиль {:#?}, то результат будет выглядеть следующим образом:

    rect1 is Rectangle {
        width: 30,
        height: 50
    }

Язык Rust предоставляет ряд типажей для использования с аннотацией derive, которые добавляют полезные свойства в настраиваемые типы. Эти типажи и их свойства перечислены в приложении B в конце книги. Мы рассмотрим технические приемы реализации этих типажей с настраиваемыми свойствами, а также способы создания собственных типажей в главе 10.

Функция площади area очень специфична: она вычисляет площадь только прямоугольников. Было полезно теснее связать это свойство со структурой Rectangle, потому что оно не будет работать с другим типом. Давайте посмотрим, как продолжить рефакторинг этого кода, превратив функцию area в метод area, определенный для типа Rectangle.

Синтаксис методов

Методы похожи на функции: они объявляются с помощью ключевого слова fn и имени, у них могут быть параметры и возвращаемое значение, они содержат код, который выполняется, когда их вызывают из другого места. Однако методы отличаются от функций тем, что они определяются внутри контекста структуры (или перечисления, или типажа, которые мы рассмотрим в главах 6 и 17 соответственно). Их первым параметром всегда является параметр self, представляющий экземпляр структуры, для которого метод вызывается.

Определение методов

Давайте изменим функцию area, которая в качестве параметра берет экземпляр структуры Rectangle, и вместо этого создадим метод area, определенный для структуры Rectangle, как показано в листинге 5.13.

Листинг 5.13. Определение метода area для структуры Rectangle

src/main.rs
    #[derive(Debug)]
    struct Rectangle {
        width: u32,
        height: u32,
    }