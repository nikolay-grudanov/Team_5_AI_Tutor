---
source_image: page_370.png
page_number: 370
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.99
tokens: 7522
characters: 1887
timestamp: 2025-12-24T10:55:31.950563
finish_reason: stop
---

ПРИМЕЧАНИЕ

Между типом MyBox<T>, который мы собираемся построить, и реальным типом Box<T> есть одно большое различие: наша версия не будет хранить свои данные в куче. В этом примере мы фокусируемся на типаже Deref, поэтому место, где на самом деле хранятся данные, менее важно, чем поведение, подобное указателю.

Следование по указателю к значению с помощью оператора разыменования

Регулярная ссылка — это тип указателя, и один из способов обозначить указатель — представить стрелку к значению, хранящемуся где-то в другом месте. В листинге 15.6 мы создаем ссылку на значение типа i32 и затем используем оператор разыменования, чтобы пройти к данным по ссылке.

Листинг 15.6. Использование оператора разыменования, чтобы пройти к значению типа i32 по ссылке
src/main.rs

fn main() {
    let x = 5;
    let y = &x;

    assert_eq!(5, x);
    assert_eq!(5, *y);
}

Переменная x содержит значение типа i32, равное 5 ①. Мы устанавливаем значение переменной y равным ссылке на переменную x ②. С помощью макрокоманды assert_eq! мы можем подтвердить, что переменная x равна 5 ③. Однако, если мы хотим выполнить проверочное утверждение значения в переменной y, то нужно использовать синтаксис *y, чтобы пройти по ссылке к значению, на которое она указывает ④. Как только мы применили оператор разыменования к переменной y, мы получаем доступ к целочисленному значению, на которое указывает переменная y и которое можно сравнить с 5.

Если бы вместо этого мы попытались написать assert_eq!(5, y);, то получили бы вот такую ошибку компиляции¹:

error[E0277]: can't compare `{integer}` with `&{integer}`
 --> src/main.rs:6:5
  |
6 |     assert_eq!(5, y);
  |     ^^^^^^^^^^^^^^^^ no implementation for `{integer} == &{integer}`
  |
  = help: the trait `std::cmp::PartialEq<&{integer}>` is not implemented for `{integer}`

¹ ошибка[E0277]: не получается сравнить `{целое число}` с `{целое число}`