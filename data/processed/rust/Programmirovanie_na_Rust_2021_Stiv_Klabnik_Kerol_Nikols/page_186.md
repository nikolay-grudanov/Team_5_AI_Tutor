---
source_image: page_186.png
page_number: 186
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.34
tokens: 7522
characters: 2039
timestamp: 2025-12-24T10:50:34.417597
finish_reason: stop
---

Этот код выводит каждую пару в произвольном порядке:

    Желтая: 50
    Синяя: 10

Обновление хеш-отображения

Хотя число ключей и значений может расти, с каждым ключом одновременно может быть связано только одно значение. Если вы хотите изменить данные в хеш-отображении, то вы должны решить, как обрабатывать случай, когда за ключом уже закреплено значение. Вы могли бы заменить старое значение новым, проигнорировав старое значение. Вы могли бы оставить старое значение и проигнорировать новое. Добавить новое значение можно было бы, только если у ключа еще нет значения. Или же вы могли бы объединить старое и новое значения. Давайте посмотрим, как выполнить каждый из этих вариантов.

Перезапись значения

Если мы вставим ключ и значение в хеш-отображение, а затем вставим тот же ключ с другим значением, то значение, связанное с этим ключом, будет заменено. Даже если код в листинге 8.24 вызывает метод insert дважды, хеш-отображение будет содержать только одну пару ключ/значение, потому что мы оба раза вставляем значение для ключа Синей команды.

Листинг 8.24. Замена сохраненного значения с конкретным ключом

    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from("Синяя"), 10);
    scores.insert(String::from("Синяя"), 25);

    println!("{:?}", scores);

Этот код выводит {"Синяя": 25}. Исходное значение 10 было перезаписано.

Вставка значения, только если ключ не имеет значения

Часто принято выполнять проверку на наличие у ключа конкретного значения, и если его нет, то вставлять значение для ключа. Хеш-отображения имеют специальный API для этого под названием entry. Метод entry берет в качестве параметра ключ, который вы хотите проверить, и возвращает перечисление Entry, представляющее значение, которого может и не существовать. Допустим, мы хотим проверить, что значение связано с ключом Желтой команды. Если это не так, то мы хотим вставить значение 50, и то же самое для Синей команды. При использовании API entry код выглядит так, как показано в листинге 8.25.