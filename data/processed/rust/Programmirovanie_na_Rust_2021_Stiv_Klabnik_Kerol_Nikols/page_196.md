---
source_image: page_196.png
page_number: 196
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.37
tokens: 7536
characters: 2220
timestamp: 2025-12-24T10:50:51.980272
finish_reason: stop
---

std::fs::File, то есть файловым дескриптором. Типом параметра E, используемого в значении ошибки, является std::io::Error.

Этот возвращаемый тип означает, что вызов File::open может завершиться успешно и вернуть файловый дескриптор, который мы прочитаем или в который запишем. Кроме того, вызов функции может не сработать. Например, возможно, файл не существует или у нас не будет разрешения на доступ к файлу. Функция File::open должна иметь возможность сообщить об успешности или неуспешности выполнения и в то же время дать нам либо файловый дескриптор, либо информацию об ошибке. Именно эту информацию передает перечисление типа Result.

В случае успешного выполнения File::open значение переменной f будет экземпляром Ok, содержащим файловый дескриптор. В случае, когда выполнение оказывается безуспешным, значение в f будет являться экземпляром Err, содержащим дополнительную информацию о типе произошедшей ошибки.

Нужно добавить код в листинг 9.3, он будет предпринимать разные действия в зависимости от значения, которое возвращает File::open. В листинге 9.4 показан один из способов обработки перечисления Result с помощью базового инструмента — выражения match, которое мы обсуждали в главе 6.

Листинг 9.4. Использование выражения match для обработки вариантов перечисления Result, которые могут быть возвращены

src/main.rs
use std::fs::File;

fn main() {
    let f = File::open("hello.txt");

    let f = match f {
        Ok(file) => file,
        Err(error) => {
            panic!("Проблема с открытием файла: {:?}", error)
        },
    };
}

Обратите внимание, что, как и перечисление Option, перечисление Result и его варианты были введены в область видимости прелюдией, поэтому не нужно указывать Result:: перед вариантами Ok и Err в рукавах выражения match.

Здесь мы говорим языку Rust о том, что, когда результат будет равным Ok, надо вернуть внутреннее значение file из варианта Ok, а затем мы присвоим это значение файлового дескриптора переменной f. После выражения match можно использовать указанный файловый дескриптор для чтения или записи.

Другой рукав выражения match улаживает случай, когда мы получаем значение Err из File::open. В этом примере мы решили вызвать макрокоманду panic!.