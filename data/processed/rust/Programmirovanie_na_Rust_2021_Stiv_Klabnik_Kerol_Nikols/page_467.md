---
source_image: page_467.png
page_number: 467
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.56
tokens: 7612
characters: 2214
timestamp: 2025-12-24T10:58:09.431724
finish_reason: stop
---

переменные, объявляемые как часть паттерна внутри выражения match, будут затенять переменные с тем же именем вне конструкции match, как и в случае со всеми переменными. В листинге 18.11 мы объявляем переменную x со значением Some(5) и переменную y со значением 10. Затем мы создаем выражение match для значения x. Посмотрите на паттерны в рукавах выражения match и в макрокоманде println! в конце и попытайтесь выяснить, что этот код будет печатать, прежде чем его выполнить или читать дальше.

Листинг 18.11. Выражение match с рукавом, который вводит затененную переменную y
src/main.rs

fn main() {
    let x = Some(5);
    let y = 10;

    match x {
        Some(50) => println!("Получено 50"),
        Some(y) => println!("Совпадение, y = {:?}", y),
        _ => println!("Вариант по умолчанию, x = {:?}", x),
    }

    println!("в конце: x = {:?}, y = {:?}", x, y);
}

Давайте посмотрим, что происходит, когда выполняется выражение match. Паттерн в первом рукаве совпадения ③ не совпадает с определенным значением x ①, поэтому код продолжает работу.

Паттерн во втором рукаве совпадения ④ вводит новую переменную с именем y, которая будет совпадать с любым значением внутри значения Some. Поскольку мы находимся в новой области видимости внутри выражения match, эта переменная y является новой, а не той y, которую мы объявили в начале со значением 10 ②. Эта новая привязка y будет совпадать с любым значением внутри Some, которое мы имеем в x. Следовательно, эта новая y связывается с внутренним значением Some в x. Указанное значение равно 5, поэтому выражение для данного рукава исполняется и выводит Совпадение, y = 5.

Если бы значение переменной x было равно None вместо Some(5), то паттерны в первых двух рукавах не совпали бы, поэтому значение совпало бы с подчеркиванием ⑤. Мы не ввели переменную x в паттерн рукава подчеркивания, поэтому x в выражении по-прежнему является внешним x, который не был затенен. В этом гипотетическом случае выражение match выведет:

Вариант по умолчанию, x = None.

Когда выражение match завершает работу, его область видимости заканчивается, и так же заканчивается область внутренней переменной y. Последняя инструкция println! ⑥ выводит в конце: x = Some(5), y = 10.