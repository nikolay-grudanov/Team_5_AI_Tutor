---
source_image: page_266.png
page_number: 266
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.32
tokens: 7679
characters: 2700
timestamp: 2025-12-24T10:53:03.206906
finish_reason: stop
---

командной строки, и тем самым изменить поведение по умолчанию для команды cargo test. Например, поведение по умолчанию двоичного файла, создаваемого командой cargo test, состоит в выполнении всех тестов в параллельном режиме и захвате данных, генерируемых во время выполнения тестов. При этом данные не выводятся на экран, и облегчается чтение данных, связанных с результатами теста.

Одни аргументы командной строки входят в команду cargo test, а другие — в результирующий тестовый двоичный файл. Для того чтобы разделить эти два типа аргументов, вы перечисляете те аргументы, которые входят в команду cargo test, затем разделитель --, а потом те, которые входят в тестовый двоичный файл. Выполнив cargo test --help, вы увидите аргументы, которые можно использовать с командой cargo test, а выполнив cargo test -- --help, вы увидите аргументы, которые можно использовать после разделителя --.

Параллельное и последовательное выполнение тестов

Когда вы выполняете несколько тестов, по умолчанию они выполняются параллельно с использованием потоков исполнения. Это означает, что тесты завершат работу быстрее, благодаря чему вы скорее получите обратную связь о том, работает ли код. Поскольку тесты выполняются одновременно, убедитесь, что они не зависят друг от друга или от какого-либо совместного состояния, включая совместную среду, например текущий рабочий каталог или переменные среды.

Например, каждый тест выполняет некий код, который создает файл на диске с именем test-output.txt и пишет в этот файл некие данные. Затем каждый тест читает данные из этого файла и выполняет проверочное утверждение о том, что файл содержит некоторое значение, которое отличается в каждом тесте. Поскольку тесты выполняются одновременно, один тест может переписать файл в промежутке между тем, как другой тест пишет и читает файл. Тогда второй тест не сработает, но не потому, что код является неправильным, а потому, что тесты мешали друг другу во время параллельного выполнения. Одно решение состоит в том, чтобы каждый тест писал в другой файл, а другое — чтобы тесты выполнялись по одному за раз.

Если вы не желаете выполнять тесты параллельно или хотите точнее контролировать число используемых потоков исполнения, вы можете отправить флаг --test-threads и число потоков исполнения, которые хотите использовать, в тестовый двоичный файл. Взгляните на следующий пример:

$ cargo test -- --test-threads=1

Мы установили число тестовых потоков исполнения равным 1, сказав программе не использовать никакого параллелизма. Выполнение тестов с одной нитью исполнения займет больше времени, чем их параллельное выполнение, но тесты не будут мешать друг другу, если они делят между собой совместное состояние.