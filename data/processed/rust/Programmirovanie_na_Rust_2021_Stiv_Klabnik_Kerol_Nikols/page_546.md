---
source_image: page_546.png
page_number: 546
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.41
tokens: 7486
characters: 1974
timestamp: 2025-12-24T11:00:14.943610
finish_reason: stop
---

сделаем что-то похожее на реализацию функции thread::spawn из стандартной библиотеки, поэтому можно посмотреть, какие границы у сигнатуры thread::spawn в ее параметре. Документация показывает следующее:

pub fn spawn<F, T>(f: F) -> JoinHandle<T>
    where
        F: FnOnce() -> T + Send + 'static,
        T: Send + 'static

Здесь нас интересует именно параметр типа F. Параметр типа T связан с возвращаемым значением, он нам не интересен. Мы видим, что spawn использует FnOnce в качестве границы типажа в типе F. Вероятно, это тоже нужно, потому что мы в конечном итоге будем передавать аргумент, получаемый в execute, в spawn. Можно с уверенностью сказать, что FnOnce — нужный нам типаж, потому что поток будет выполнять замыкание запроса только один раз, что соответствует части Once в имени FnOnce.

Параметр типа F также имеет границу типажа Send и границу 'static жизненного цикла, которые полезны в этой ситуации: граница Send нужна, чтобы передавать замыкание из одного потока в другой, а граница 'static требуется потому, что мы не знаем, сколько времени займет исполнение потока. Давайте создадим метод execute для структуры ThreadPool, который будет принимать параметр обобщенного типа F с этими границами:

src/lib.rs
impl ThreadPool {
    // --пропуск--
    pub fn execute<F>(&self, f: F)
        where
            F: FnOnce() + Send + 'static
    {
    }
}

Мы по-прежнему используем () после FnOnce 1, потому что типаж FnOnce представляет собой замыкание, которое не берет параметров и не возвращает значение. Как и определения функций, возвращаемый тип может быть опущен из сигнатуры, но даже если у нас нет параметров, то все равно нужны круглые скобки.

Опять же, это самая простая реализация метода execute: она ничего не делает, мы лишь пытаемся скомпилировать код. Давайте проверим еще раз:

$ cargo check
Compiling hello v0.1.0 (file:///projects/hello)
warning: unused variable: `size`
--> src/lib.rs:4:16
| 4 | pub fn new(size: usize) -> ThreadPool {