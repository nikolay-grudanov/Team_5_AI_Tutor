---
source_image: page_106.png
page_number: 106
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.97
tokens: 7421
characters: 1676
timestamp: 2025-12-24T10:48:26.286347
finish_reason: stop
---

О Два или более указателей одновременно обращаются к одним и тем же данным.
О По крайней мере один из указателей используется для записи в данные.
О Не используется никакого механизма синхронизации доступа к данным.

Гонки данных вызывают неопределенное поведение, их трудно диагностировать и устранять, когда вы пытаетесь отследить их во время выполнения. Язык Rust предотвращает эту проблему, потому что код с гонками данных он даже не будет компилировать!

Как всегда, мы используем фигурные скобки для создания новой области видимости, допускающей использование более одной изменяемой ссылки (эти ссылки не являются одновременными):

let mut s = String::from("hello");

{
    let r1 = &mut s;
} // r1 здесь выходит из области видимости, поэтому мы можем без проблем сделать // новую ссылку.

let r2 = &mut s;

Схожее правило существует для комбинирования изменяемых и неизменяемых ссылок. Этот код приводит к ошибке:

let mut s = String::from("hello");

let r1 = &s; // нет проблем
let r2 = &s; // нет проблем
let r3 = &mut s; // БОЛЬШАЯ ПРОБЛЕМА

println!("{}, {}, and {}", r1, r2, r3);

Вот ошибка¹:

error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable
 --> src/main.rs:6:14
  |
4 |     let r1 = &s; // нет проблем
   |                -- immutable borrow occurs here
5 |     let r2 = &s; // нет проблем
6 |     let r3 = &mut s; // БОЛЬШАЯ ПРОБЛЕМА
   |                ^^^^^^ mutable borrow occurs here
7 |
8 |     println!("{}, {}, and {}", r1, r2, r3);
   |                -- immutable borrow later used here

¹ ошибка[E0502]: не получается позаимствовать переменную `s` как изменяемую, потому что она также заимствуется как неизменяемая