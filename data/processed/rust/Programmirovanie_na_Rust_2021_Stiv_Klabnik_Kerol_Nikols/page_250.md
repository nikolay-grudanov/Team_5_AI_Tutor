---
source_image: page_250.png
page_number: 250
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.10
tokens: 7548
characters: 2076
timestamp: 2025-12-24T10:52:19.803335
finish_reason: stop
---

11 Автоматизированные тесты

В своем эссе 1972 года «Смиренный программист» (The Humble Programmer) Эдсгер Дейкстра сказал, что «тестирование может показать наличие дефектов в программе, но не доказать их отсутствие». Однако это вовсе не означает, что мы не должны пытаться тестировать как можно больше!

Правильность в программах подразумевает, до какой степени код делает то, что мы от него хотим. При разработке языка Rust большое внимание уделено корректности программ, но корректность — это сложное понятие, ее не так легко доказать. Система типов Rust берет на себя огромную часть этого бремени, но система типов не способна отлавливать все виды некорректной работы. По этой причине Rust включает в себя поддержку написания автоматизированных тестов.

Например, мы пишем функцию add_two, которая прибавляет 2 к любому числу, которое ей передается. Сигнатура этой функции на входе принимает целое число в качестве параметра и возвращает целое число на выходе. Когда мы реализуем и компилируем эту функцию, Rust выполняет всю проверку типов и заимствований, которую вы уже изучили, чтобы, например, мы не передавали в эту функцию значение типа String или недействительную ссылку. Но Rust не способен проверить, что эта функция будет делать именно то, что мы хотим, а именно возвращать параметр плюс 2, а не, скажем, параметр плюс 10 или параметр минус 50! Вот тут-то и вступают в игру тесты.

Мы можем написать тесты, которые проверяют, например, что при передаче в функцию add_two числа 3 возвращаемое значение равно числу 5. Можно выполнять эти тесты всякий раз, когда мы вносим в код изменения, чтобы убедиться, что любое существующее правильное поведение не изменилось.

Тестирование представляет собой сложный навык. Хотя мы не можем охватить в одной главе все правила написания хороших тестов, мы обсудим механику средств тестирования в Rust. Мы поговорим об аннотациях и макрокомандах, имеющихся в вашем распоряжении при написании тестов, поведении по умолчанию и параметрах для выполнения тестов, а также о том, как организовывать модульные и интеграционные тесты.