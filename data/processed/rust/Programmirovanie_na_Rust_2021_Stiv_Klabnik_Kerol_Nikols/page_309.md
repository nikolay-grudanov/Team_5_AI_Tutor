---
source_image: page_309.png
page_number: 309
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.22
tokens: 7434
characters: 1834
timestamp: 2025-12-24T10:53:53.260879
finish_reason: stop
---

Синтаксис > говорит, чтобы оболочка записала содержимое стандартного вывода данных не на экран, а в output.txt. Мы не увидели сообщения об ошибке на экране, как ожидали, а значит, оно должно было оказаться в файле. Вот что содержит файл output.txt:

Problem parsing arguments: not enough arguments

Точно, сообщение об ошибке выводится в стандартный вывод данных. Гораздо полезнее, чтобы сообщения об ошибках вроде этого выводились в стандартный вывод ошибок, вследствие чего в файл попадут только данные при успешном выполнении. Мы это изменим.

Запись сообщения об ошибках в стандартный вывод ошибок

Мы используем код из листинга 12.24, чтобы изменить способ вывода сообщений об ошибках. Из-за рефакторинга, проделанного ранее в этой главе, весь код, который выводит сообщения об ошибках, находится в одной функции — main. Стандартная библиотека предоставляет макрокоманду eprintln!, которая выполняет вывод в поток стандартного вывода ошибок. Поэтому давайте изменим два места, в которых для вывода ошибок мы вызывали макрокоманду println!, вместо этого воспользовавшись макрокомандой eprintln!.

Листинг 12.24. Запись сообщения об ошибках в стандартный вывод ошибок вместо стандартного вывода данных с использованием макрокоманды eprintln!

src/main.rs

fn main() {
    let args: Vec<String> = env::args().collect();

    let config = Config::new(&args).unwrap_or_else(|err| {
        eprintln!("Проблема с разбором аргументов: {}", err);
        process::exit(1);
    });

    if let Err(e) = minigrep::run(config) {
        eprintln!("Ошибка в приложении: {}", e);
        process::exit(1);
    }
}

После замены println! на eprintln! давайте снова выполним программу таким же образом, без аргументов, перенаправляя стандартный вывод данных с помощью >:

$ cargo run > output.txt
Problem parsing arguments: not enough arguments