---
source_image: page_514.png
page_number: 514
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.46
tokens: 7512
characters: 1974
timestamp: 2025-12-24T10:59:18.198489
finish_reason: stop
---

Либо в качестве аргумента функции map можно назначить функцию вместо замыкания, как тут:

let list_of_numbers = vec![1, 2, 3];
let list_of_strings: Vec<String> = list_of_numbers
    .iter()
    .map(ToString::to_string)
    .collect();

Обратите внимание, мы должны использовать полный синтаксис, о котором говорилось в разделе «Продвинутые типажи» (с. 494), поскольку существует много функций с именем to_string. Здесь мы используем функцию to_string, определенную в типаже ToString, выполняемом стандартной библиотекой для любого типа, который реализует типаж Display.

Некоторым нравится этот стиль, а другие предпочитают замыкание. В итоге оба стиля компилируются в один и тот же код, поэтому используйте тот стиль, который вам понятнее.

У нас есть еще один полезный паттерн, в котором задействованы детали реализации кортежных структур и вариантов перечисления кортежных структур. Эти типы используют () в качестве инициализирующего синтаксиса, который выглядит как вызов функции. Инициализаторы фактически реализованы как функции, возвращающие экземпляр, который выводится из их аргументов. Мы можем использовать эти инициализирующие функции в качестве указателей функций, реализующих типажи замыкания, а значит, можно указывать инициализирующие функции в качестве аргументов методов, принимающих замыкания, например:

enum Status {
    Value(u32),
    Stop,
}

let list_of_statuses: Vec<Status> =
    (0u32..20)
    .map(Status::Value)
    .collect();

Здесь мы создаем экземпляры Status::Value, используя каждое значение типа u32 в интервале, для которого вызывается функция map, за счет инициализирующей функции Status::Value. Некоторым нравится этот стиль, другие предпочитают замыкание. Оба стиля компилируются в один и тот же код, поэтому используйте тот стиль, который вам понятнее.

Возвращающие замыкания

Замыкания представлены типажами, а значит, вы не можете возвращать замыкания напрямую. В большинстве случаев, когда требуется вернуть типаж, вместо него