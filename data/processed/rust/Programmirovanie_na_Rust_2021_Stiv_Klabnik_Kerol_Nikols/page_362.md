---
source_image: page_362.png
page_number: 362
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.58
tokens: 7512
characters: 2049
timestamp: 2025-12-24T10:55:17.272906
finish_reason: stop
---

15 Умные указатели

Указатель — это общее понятие для переменной, которая содержит адрес в памяти. Этот адрес ссылается, или «указывает», на некие другие данные. Самым часто встречающимся видом указателя в Rust является ссылка, о которой вы узнали в главе 4. Ссылки обозначаются символом & и заимствуют значение, на которое указывают. У них нет никаких особых возможностей, кроме обращения к данным. Кроме того, они не затратны, и мы чаще всего используем именно их.

С другой стороны, умные указатели (Smart pointers) — это структуры данных, которые не только действуют как указатель, но и обладают дополнительными метаданными и способностями. Понятие умных указателей не является уникальным для Rust: умные указатели возникли в C++ и существуют также в других языках. В Rust разные умные указатели, определенные в стандартной библиотеке, обеспечивают функциональность, выходящую за рамки той, которая предоставляется ссылками. В этой главе мы познакомимся с умным указателем с подсчетом числа ссылок. Этот указатель позволяет иметь несколько владельцев данных, отслеживать их число и, когда владельцев не остается, очищать данные.

В Rust, который использует понятие владения и заимствования, дополнительное различие между ссылками и умными указателями заключается в том, что ссылки — это указатели, которые только заимствуют данные. В отличие от них, умные указатели зачастую владеют данными, на которые они указывают.

Мы уже сталкивались с несколькими умными указателями в этой книге, такими как String и Vec<T> в главе 8, хотя в то время мы не называли их умными указателями. Оба типа считаются умными указателями, потому что они владеют некоторой памятью и позволяют ею манипулировать. Они также имеют метаданные (например, емкость) и дополнительные способности или гарантии (например, в случае с типом String они обеспечивает, чтобы его данные всегда были действительно и кодировались в UTF-8).

Умные указатели обычно реализуются с помощью структур. Особенность, отличающая умный указатель от обычной структуры, заключается в том, что умные