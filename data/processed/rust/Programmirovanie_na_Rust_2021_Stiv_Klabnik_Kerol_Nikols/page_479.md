---
source_image: page_479.png
page_number: 479
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.00
tokens: 7650
characters: 2369
timestamp: 2025-12-24T10:58:30.448159
finish_reason: stop
---

У языка Rust нет возможности выяснить, сколько значений в кортеже следует игнорировать, прежде чем сопоставить значение со вторым second, а затем узнать, сколько еще значений проигнорировать после этого. Этот код может означать, что мы хотим проигнорировать 2, привязать переменную second к 4, а затем проигнорировать 8, 16 и 32. Либо что мы хотим проигнорировать 2 и 4, привязать second к 8, а затем проигнорировать 16 и 32; и так далее. Имя переменной second не означает для Rust ничего особенного, поэтому компилятор выдает ошибку — такого рода использование .. в двух местах является неоднозначным.

Дополнительные условия с ограничителями совпадений

Ограничитель совпадения — это дополнительное условие if, задаваемое после паттерна в рукаве выражения match, которое, наряду с совпадением с паттерном, также должно совпадать, чтобы рукав был выбран. Ограничители совпадений полезны тем, что они помогают выражать более сложные идеи, чем это делают паттерны.

Условие может использовать переменные, создаваемые в паттерне. Листинг 18.26 показывает выражение match, в котором первый рукав имеет паттерн Some(x) и ограничитель совпадения if x < 5.

Листинг 18.26. Добавление ограничителя совпадения в паттерн

let num = Some(4);

match num {
    Some(x) if x < 5 => println!("меньше пяти: {}", x),
    Some(x) => println!("{}", x),
    None => ()
}

Указанный пример будет печатать меньше пяти: 4. Когда переменная num сравнивается с паттерном в первом рукаве, она совпадает, потому что Some(4) совпадает с Some(x). Затем ограничитель совпадения проверяет, меньше ли значение в x, чем 5, и поскольку это так, то выбирается первый рукав.

Если бы вместо этого переменная num была равна Some(10), то ограничитель совпадения в первом рукаве был бы ложным, потому что 10 не меньше 5. Затем компилятор перейдет ко второму рукаву, который совпадет, потому что второй рукав не имеет ограничителя совпадения и поэтому совпадает с любым вариантом Some.

Выразить условие if x < 5 внутри паттерна невозможно, поэтому ограничитель совпадения дает возможность выражать эту логику.

В обсуждении листинга 18.11 мы упомянули, что можно было бы использовать ограничители совпадения для решения проблем с затенением паттерна. Напомним, что новая переменная создавалась внутри паттерна в выражении match вместо переменной вне выражения match. Эта новая переменная означала, что мы не