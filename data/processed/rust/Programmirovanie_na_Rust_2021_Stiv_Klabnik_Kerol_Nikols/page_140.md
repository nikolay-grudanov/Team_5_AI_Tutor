---
source_image: page_140.png
page_number: 140
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.04
tokens: 7579
characters: 2153
timestamp: 2025-12-24T10:49:29.374867
finish_reason: stop
---

видах паттернов и описывается их работа. В основе выражения match лежит мощь паттернов, а также то, что компилятор проверяет, что все возможные случаи учтены.

Подумайте о выражении match как о машине для сортировки монет: монеты скользят по дорожке, вдоль которой расположены отверстия разного размера. Каждая монета падает в первое попавшееся отверстие, в которое помещается. Значения в выражении match проходят через каждый паттерн точно таким же образом, и в первом паттерне, в который значение «помещается», оно попадает в связанный блок кода, который будет использоваться во время исполнения.

Поскольку мы только что упомянули монеты, давайте используем их в качестве примера применения выражения match! Мы напишем функцию, которая берет неизвестную монету Соединенных Штатов и, подобно счетной машине, выясняет номинал этой монеты и возвращает его в центах, как показано в листинге 6.3.

Листинг 6.3. Перечисление и выражение match, которое в качестве паттернов содержит варианты перечисления

enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

fn value_in_cents(coin: Coin) -> u8 {
    match coin {
        Coin::Penny => 1,
        Coin::Nickel => 5,
        Coin::Dime => 10,
        Coin::Quarter => 25,
    }
}

Давайте разберем выражение match в функции value_in_cents. Сначала мы пишем ключевое слово match, а затем — выражение, которым в данном случае является значение переменной coin ②. Это выражение очень похоже на то, которое используется с if, но есть большая разница: с if выражение должно возвращать логическое значение, а здесь оно может быть любого типа. Типом переменной coin в данном примере является перечисление Coin, которое мы определили в ①.

Далее идут рукава выражения match. Рукав состоит из двух частей: паттерна и кода. Здесь первый рукав имеет паттерн, являющийся значением Coin::Penny с последующим оператором =>, который отделяет паттерн и исполняемый код ③. Кодом в данном случае является просто значение 1. Каждый рукав отделен от следующего запятой.

Когда выражение match исполняется, оно по порядку сравнивает полученное значение с паттерном каждого рукава. Если паттерн совпадает со значением, то