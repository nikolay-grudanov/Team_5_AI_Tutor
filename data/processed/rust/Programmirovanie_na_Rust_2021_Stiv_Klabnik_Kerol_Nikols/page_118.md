---
source_image: page_118.png
page_number: 118
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.14
tokens: 7474
characters: 1892
timestamp: 2025-12-24T10:48:48.852035
finish_reason: stop
---

Листинг 5.4. Функция build_user, которая принимает электронную почту и имя пользователя и возвращает экземпляр структуры User

```rust
fn build_user(email: String, username: String) -> User {
    User {
        email: email,
        username: username,
        active: true,
        sign_in_count: 1,
    }
}
```

Имеет смысл называть параметры функции так же, как и поля структуры, но повторять имена полей email и username и переменные немного утомительно. Если бы в структуре было больше полей, то необходимость повторять каждое имя раздражала бы еще больше. К счастью, есть удобное краткое написание!

Использование краткой инициализации полей: когда у переменных и полей одинаковые имена

Поскольку имена параметров и имена полей структуры в листинге 5.4 совпадают, можно использовать синтаксис краткой инициализации полей для написания функции build_user по-новому, чтобы она вела себя точно так же, но при этом не имела повторений email и username, как показано в листинге 5.5.

Листинг 5.5. Функция build_user, которая использует краткую инициализацию полей, потому что параметры email и username совпадают с именами полей структуры

```rust
fn build_user(email: String, username: String) -> User {
    User {
        email,
        username,
        active: true,
        sign_in_count: 1,
    }
}
```

Мы создаем новый экземпляр структуры User, у которого есть поле с именем email. Мы хотим установить значение в поле email равным значению параметра email функции build_user. Поскольку у поля email и параметра email одинаковые имена, то вместо email: email нам нужно написать только email.

Создание экземпляров из других экземпляров с помощью синтаксиса обновления структуры

Часто бывает полезным создать новый экземпляр структуры, который использует большую часть значений старого экземпляра, но изменяет некоторые из них. Это делается с помощью синтаксиса обновления структуры.