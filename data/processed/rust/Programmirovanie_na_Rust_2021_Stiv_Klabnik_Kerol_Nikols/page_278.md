---
source_image: page_278.png
page_number: 278
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.82
tokens: 7508
characters: 2009
timestamp: 2025-12-24T10:52:58.071525
finish_reason: stop
---

12 Проект ввода-вывода: сборка программы командной строки

Эта глава представляет собой сводку многих навыков, которые вы уже усвоили. В ней пойдет речь еще о нескольких средствах стандартной библиотеки. Мы создадим инструмент командной строки, который взаимодействует с файловым и консольным вводом-выводом, чтобы на практике изучить некоторые понятия языка Rust, которые теперь есть в вашем арсенале.

Скорость, безопасность, единый двоичный вывод и кросс-платформенная поддержка Rust делают его идеальным для создания инструментов командной строки, поэтому для проекта мы создадим собственную версию классического инструмента командной строки grep (globally search a regular expression and print, то есть «глобальный поиск по регулярному выражению и вывод»). В простейшем случае grep выполняет поиск заданного строкового значения в заданном файле. Для этого grep берет в качестве аргументов имя файла и строковое значение. Затем он читает файл, находит в нем строчки, которые содержат строковый аргумент, и выводит их.

Попутно мы покажем, как сделать так, чтобы инструмент командной строки использовал средства терминала, применяемые во многих инструментах командной строки. Мы будем читать значение переменной среды, чтобы позволить пользователю настроить свойства инструмента. Мы также будем печатать в поток стандартного вывода ошибок (stderr) вместо стандартного вывода данных (stdout), благодаря чему, к примеру, пользователь сможет перенаправлять вывод успешных данных в файл, при этом по-прежнему видя сообщения об ошибках на экране.

Один из членов сообщества Эндрю Галлант (Andrew Gallant) уже создал полнофункциональную, очень быструю версию grep под названием ripgrep. Для сравнения, наша версия grep будет довольно простой, но, изучив эту главу, вы получите базовые знания, необходимые для понимания реального проекта, такого как ripgrep.

Наш проект grep объединит ряд идей, которые вы уже усвоили:

○ Организация кода (модули, глава 7).
○ Использование векторов и строк (коллекции, глава 8).