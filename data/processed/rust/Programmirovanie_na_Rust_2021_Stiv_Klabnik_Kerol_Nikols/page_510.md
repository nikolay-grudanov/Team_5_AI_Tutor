---
source_image: page_510.png
page_number: 510
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.02
tokens: 7451
characters: 1886
timestamp: 2025-12-24T10:59:06.262201
finish_reason: stop
---

но в верхнюю часть цикла, поэтому в случае варианта Err мы никогда не передаем значение переменной guess.

Тип never также полезен с макрокомандой panic!. Помните метод unwrap, который мы вызываем для значений типа Option<T>, чтобы создать значение или поднять панику? Вот его определение:

impl<T> Option<T> {
    pub fn unwrap(self) -> T {
        match self {
            Some(val) => val,
            None => panic!("вызвана `Option::unwrap()` для значения `None`"),
        }
    }
}

В этом коде происходит то же самое, что и в выражении match в листинге 19.26: Rust видит, что val имеет тип T, а макрокоманда panic! имеет свой тип !, поэтому результатом совокупного выражения match является T. Этот код работает, потому что макрокоманда panic! не создает значение, а завершает программу. В случае варианта None мы не будем возвращать значение из метода unwrap, поэтому этот код допустим.

И последним выражением с типом ! является цикл loop:

print!("на веки ");

loop {
    print!("вечные ");
}

Здесь loop никогда не кончается, и поэтому тип ! является значением выражения. Однако оно не было бы истинным, если бы мы включили инструкцию break, потому что цикл заканчивался бы, дойдя до инструкции break.

Динамически изменяемые типы и типаж Sized

Из-за потребности языка Rust знать некоторые детали, например, сколько места нужно выделить для значения того или иного типа, в его системе типов имеется уголок, который может сбить с толку: речь об идее динамически изменяемых типов. Иногда называемые DST от англ. dynamically sized type, или безразмерными типами, они позволяют писать код со значениями, размер которых известен только во время выполнения.

Давайте углубимся в детали динамически изменяемого типа под названием str, который мы использовали на протяжении всей книги. Все верно, не &str, а str в отдельности является динамически изменяемым типом. Мы не знаем длину