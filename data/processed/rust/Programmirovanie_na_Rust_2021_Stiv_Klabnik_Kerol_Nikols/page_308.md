---
source_image: page_308.png
page_number: 308
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.17
tokens: 7485
characters: 2125
timestamp: 2025-12-24T10:53:53.705130
finish_reason: stop
---

ритете аргумента командной строки или переменной среды, если программа выполняется, когда одно из двух задано как чувствительное к регистру, а другое — как нечувствительное к регистру.

Модуль std::env содержит много дополнительных полезных функций для работы с переменными среды. Обратитесь к его документации и посмотрите, что в нем есть.

Запись сообщений об ошибках в стандартный вывод ошибок вместо стандартного вывода данных

Пока что мы записываем все данные в терминал с помощью макрокоманды println!. Большинство терминалов обеспечивают два вида вывода: стандартный вывод данных (stdout) для общих сведений и стандартный вывод ошибок (stderr) для сообщений об ошибках. Это различие позволяет пользователям направлять успешный вывод программы в файл, но при этом выводить на экран сообщения об ошибках.

Макрокоманда println! предназначена только для стандартного вывода данных, поэтому мы должны использовать что-то еще для вывода в стандартный вывод ошибок.

Проверка места, куда записываются ошибки

Сначала давайте посмотрим, как содержимое, печатаемое программой minigrep, сейчас записывается в стандартный вывод данных, включая любые сообщения об ошибках, которые нужно записывать в стандартный вывод ошибок. Мы сделаем это, перенаправив поток стандартного вывода данных в файл, а также намеренно вызвав ошибку. Мы не будем перенаправлять поток стандартного вывода ошибок, поэтому любое содержимое, отправляемое в стандартный вывод ошибок, будет по-прежнему отображаться на экране.

Предполагается, что программы командной строки будут отправлять сообщения об ошибках в поток стандартного вывода ошибок, поэтому, даже если мы перенаправляем поток стандартного вывода данных в файл, сообщения об ошибках по-прежнему видны на экране. Наша программа пока не очень хорошо работает, но мы скоро увидим, что она записывает вывод сообщений об ошибках в файл!

Можно продемонстрировать это, если выполнить программу с > и именем файла output.txt, в который мы хотим перенаправить поток стандартного вывода данных. Мы не станем передавать никаких аргументов, и это должно стать причиной ошибки:

$ cargo run > output.txt