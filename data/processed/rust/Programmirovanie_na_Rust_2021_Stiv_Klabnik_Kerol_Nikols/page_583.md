---
source_image: page_583.png
page_number: 583
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 20.77
tokens: 7555
characters: 2252
timestamp: 2025-12-24T11:00:59.592466
finish_reason: stop
---

Примером ситуации, когда требуется типаж Eq, являются ключи в хеш-отображении HashMap<K, V>, благодаря которому HashMap<K, V> может отличать, одинаковы ли два ключа.

PartialOrd и Ord для сравнений порядка

Типаж PartialOrd позволяет сравнивать экземпляры типа для сортировки. Тип, реализующий PartialOrd, используется с операторами <, >, <= и >=. Типаж PartialOrd можно применять только к тем типам, которые также реализуют PartialEq.

Генерирование типажа PartialOrd реализует метод partial_cmp, возвращающий перечисление Option<Ordering>, которое будет равно None, если переданные значения не производят упорядоченности. Примером значения, которое не производит упорядоченности, хотя большинство значений этого типа могут сравниваться, является значение не-числа (NaN) с плавающей точкой. Вызов partial_cmp с любым числом с плавающей точкой и значением NaN с плавающей точкой вернет None.

При генерировании в структурах типаж PartialOrd сопоставляет два экземпляра путем сравнения значения в каждом поле в порядке, в котором поля появляются в определении структуры. При генерировании в перечислениях варианты перечисления, объявленные в определении перечисления ранее, считаются меньшими, чем варианты, следующие позже.

Типаж PartialOrd требуется, например, для метода gen_range из упаковки rand, который генерирует случайное значение в интервале, заданном низким и высоким значениями.

Типаж Ord позволяет узнавать, что для любых двух значений аннотированного типа существует допустимый порядок. Типаж Ord реализует метод cmp, который вместо Option<Ordering> возвращает Ordering, поскольку допустимое упорядочение Ordering возможно всегда. Вы можете применять типаж Ord только к типам, которые также реализуют PartialOrd и Eq (причем Eq требует PartialEq). При генерировании в структурах и перечислениях cmp ведет себя так же, как генерируемая (производная) реализация для partial_cmp ведет себя с PartialOrd.

Примером того, когда требуется Ord, является хранение значений в типе BTreeSet<T>, структуре, хранящей данные на основе порядка сортировки значений.

Clone и Copy для дублирования значений

Типаж Clone позволяет явным образом создавать глубокую копию значения, а процесс дублирования предусматривает выполнение произвольного кода и ко-