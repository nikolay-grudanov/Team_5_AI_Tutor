---
source_image: page_410.png
page_number: 410
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.65
tokens: 7511
characters: 1916
timestamp: 2025-12-24T10:56:36.177443
finish_reason: stop
---

привет, число 1 из порожденного потока!
привет, число 2 из порожденного потока!
привет, число 3 из порожденного потока!
привет, число 4 из порожденного потока!
привет, число 5 из порожденного потока!
привет, число 6 из порожденного потока!
привет, число 7 из порожденного потока!
привет, число 8 из порожденного потока!
привет, число 9 из порожденного потока!
привет, число 1 из главного потока!
привет, число 2 из главного потока!
привет, число 3 из главного потока!
привет, число 4 из главного потока!

Небольшие детали, такие как место вызова join, могут повлиять на то, будут ли потоки выполняться в одно и то же время.

Использование замыкания move с потоками

Замыкание move часто используется вместе с функцией thread::spawn, поскольку позволяет применять данные из одного потока в другой.

В главе 13 мы упоминали о том, что можно использовать ключевое слово move перед списком параметров замыкания, чтобы сделать замыкание владельцем значений, которые оно использует в среде. Этот технический прием особенно полезен при создании новых потоков исполнения, чтобы передавать владение значениями из одного потока в другой.

Обратите внимание, что в листинге 16.1 замыкание, которое мы передаем в функцию thread::spawn, не берет никаких аргументов: мы не используем данные из главного потока исполнения в коде порожденного потока. Для того чтобы использовать данные из главного потока в порожденный, замыкание порожденного потока должно захватывать необходимые ему значения. Листинг 16.3 показывает попытку создать вектор в главном потоке исполнения и использовать его в порожденном потоке. Но как вы вскоре увидите, это пока не работает.

Листинг 16.3. Попытка использовать вектор, созданный главным потоком, в другом потоке

src/main.rs
use std::thread;

fn main() {
    let v = vec![1, 2, 3];

    let handle = thread::spawn(|| {
        println!("Вот вектор: {:?}", v);
    });

    handle.join().unwrap();
}