---
source_image: page_101.png
page_number: 101
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.54
tokens: 7482
characters: 2261
timestamp: 2025-12-24T10:48:14.574210
finish_reason: stop
---

} // Здесь some_string выходит из области видимости и вызывается `drop`.
    // Поддерживающая память высвобождается.

fn makes_copy(some_integer: i32) { // some_integer входит в область видимости
    println!("{}", some_integer);
} // Здесь some_integer выходит из области видимости.
    // Ничего особенного не происходит.

Если бы мы попытались использовать переменную s после вызова функции takes_ownership, то Rust выдал бы ошибку времени компиляции. Эти статические проверки защищают от ошибок. Попробуйте добавить в функцию main код, который использует переменные s и x, чтобы увидеть, где их можно использовать, а где правила владения не позволяют этого делать.

Возвращаемые значения и область видимости

Возвращаемые значения также передают владение. Листинг 4.4 — это пример с аннотациями, похожими на приведенные в листинге 4.3.

Листинг 4.4. Передача владения возвращаемых значений
src/main.rs

fn main() {
    let s1 = gives_ownership();        // gives_ownership перемещает свое
                                      // возвращаемое значение в s1

    let s2 = String::from("hello");    // s2 входит в область видимости

    let s3 = takes_and_gives_back(s2); // s2 перемещается в
                                      // takes_and_gives_back, которая также
                                      // перемещает свое возвращаемое
                                      // значение в s3
} // Здесь s3 выходит из области видимости и отбрасывается. s2 выходит
    // из области видимости, но была перемещена, поэтому ничего не происходит.
    // s1 выходит из области и отбрасывается.

fn gives_ownership() -> String {      // gives_ownership переместит свое
    // возвращаемое значение в функцию,
    // которая ее вызывает

    let some_string = String::from("hello"); // some_string входит
                                              // в область видимости

    some_string                              // some_string возвращается и
                                              // выносится в вызывающую функцию
}

// takes_and_gives_back возьмет String и вернет String
fn takes_and_gives_back(a_string: String) -> String { // a_string приходит
    // в область видимости

    a_string // a_string возвращается и выносится в вызывающую функцию
}