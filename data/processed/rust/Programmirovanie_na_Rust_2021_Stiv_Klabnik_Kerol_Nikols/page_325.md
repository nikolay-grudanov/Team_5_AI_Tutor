---
source_image: page_325.png
page_number: 325
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.05
tokens: 7499
characters: 1896
timestamp: 2025-12-24T10:54:19.470975
finish_reason: stop
---

вызваны хотя бы один раз. Замыкания, которые не перемещают захваченные переменные, также реализуют FnMut, а замыкания, которым не нужен изменяемый доступ к захваченным переменным, также реализуют Fn. В листинге 13.12 замыкание equal_to_x неизменяемо заимствует x (поэтому equal_to_x имеет типаж Fn), поскольку телу замыкания нужно только считывать значение в x.

Если вы хотите, чтобы замыкание брало во владение значения, которые оно использует в среде, вы можете применить ключевое слово move перед списком параметров. Этот технический прием главным образом полезен при передаче замыкания нового потока, — он позволяет перемещать данные так, чтобы ими владел новый поток.

У нас будет больше примеров замыканий с ключевым словом move в главе 16, когда мы будем говорить о конкурентности. А пока — вот код из листинга 13.12 с ключевым словом move, добавленным в определение замыкания и использующим векторы вместо целых чисел, потому что целые числа можно копировать, а не перемещать. Обратите внимание, что этот код пока не компилируется.

src/main.rs

fn main() {
    let x = vec![1, 2, 3];

    let equal_to_x = move |z| z == x;

    println!("невозможно использовать x здесь: {:?}", x);

    let y = vec![1, 2, 3];

    assert!(equal_to_x(y));
}

Мы получаем следующую ошибку¹:

error[E0382]: use of moved value: `x`
 --> src/main.rs:6:40
  |
4 |     let equal_to_x = move |z| z == x;
   |                -------- value moved (into closure) here
5 | 
6 |     println!("невозможно использовать x здесь: {:?}", x);
   |                        ^ value used here after move
  |
  = note: move occurs because `x` has type `std::vec::Vec<i32>`, which does not implement the `Copy` trait

Значение x перемещается внутрь замыкания, когда замыкание определено, потому что мы добавили ключевое слово move. Затем замыкание берет x во владение,

¹ ошибка[E0382]: использование перемещенного значения `x`