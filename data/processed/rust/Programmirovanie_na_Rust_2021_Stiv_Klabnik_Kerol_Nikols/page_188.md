---
source_image: page_188.png
page_number: 188
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.28
tokens: 7612
characters: 2350
timestamp: 2025-12-24T10:50:42.389384
finish_reason: stop
---

Этот код выводит

{"мир": 2, "здравствуй": 1, "чудесный": 1}

Метод or_insert фактически возвращает изменяемую ссылку (&mut V) на значение этого ключа. Здесь мы храним эту изменяемую ссылку в переменной count, поэтому для того, чтобы передать это значение, мы сначала должны пройти по ссылке count к этому значению, используя оператор разыменования (*). Изменяемая ссылка выходит из области видимости в конце цикла for, поэтому все эти изменения безопасны и разрешены правилами заимствования.

Хеширующие функции

По умолчанию тип HashMap использует криптографически сильную хеширующую функцию, которая обеспечивает устойчивость к DoS-атакам. Это не самый быстрый алгоритм хеширования из имеющихся, но компромисс ради большей безопасности, который приходит с падением производительности, стоит того. Если вы профилируете код и обнаруживаете, что принята по умолчанию хеш-функция является слишком медленной для ваших целей, то вы можете переключиться на другую функцию, указав другой хешер. Хешер (hasher) — это тип, которым реализуется типаж BuildHasher. О типажах и способах их реализации мы поговорим в главе 10. Вам не обязательно реализовывать собственный хешер с нуля; https://crates.io/ содержит библиотеки, распространяемые другими пользователями языка Rust, которые предоставляют хешеры, реализующие многие часто встречающиеся алгоритмы хеширования.

Итоги

Векторы, строки и хеш-отображения обеспечат большой объем функциональности, необходимый в программах, когда вам нужно хранить и изменять данные, а также обращаться к ним. Ниже приведено несколько упражнений — теперь вы достаточно подготовлены, чтобы их решить:

○ При наличии списка целых чисел использовать вектор и вернуть среднее (среднее арифметическое значение), медиану (после сортировки взять значение в серединной позиции) и моду (значение, которое встречается чаще всего, — здесь будет полезно хеш-отображение) списка.

○ Конвертировать строки в «поросячью латынь». Первая согласная каждого слова перемещается в конец слова, куда добавляется «ay», в результате чего «first» становится «irst-fay». В конец слов, которые начинаются с гласной, добавляется «hay» («apple» становится «apple-hay»). Учитывайте сведения о кодировке UTF-8!

○ Используя хеш-отображения и векторы, создать текстовый интерфейс, позволяющий пользователю добавлять имена сотрудников в отдел компании. На-