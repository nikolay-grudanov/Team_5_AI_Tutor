---
source_image: page_132.png
page_number: 132
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.49
tokens: 7495
characters: 1909
timestamp: 2025-12-24T10:49:13.917792
finish_reason: stop
---

6 Перечисления и сопоставление с паттернами

В этой главе мы обратимся к перечислениям, так называемым enum. Перечисления позволяют определять тип путем перечисления его возможных значений. Сначала мы определим и применим перечисление, чтобы показать, как оно кодирует значение вместе с данными. Далее мы познакомимся с особенно полезным перечислением под названием Option, которое выражает идею о том, что значение бывает либо чем-то, либо ничем. Затем мы посмотрим, как сопоставление с паттернами в выражении match позволяет легко выполнять разный код для разных значений перечисления. Наконец, мы покажем, что конструкция if let — это еще одна удобная и лаконичная идиома, доступная для обработки перечислений в коде.

Перечисления входят в состав средств многих языков программирования, но в каждом языке их свойства различаются. Перечисления языка Rust наиболее похожи на алгебраические типы данных в функциональных языках, таких как F#, OCaml и Haskell.

Определение перечисления

Давайте взглянем на ситуацию, выраженную в коде, и посмотрим, почему перечисления в этом случае являются полезными и более уместными, чем структуры. Допустим, нам нужно работать с IP-адресами. В настоящее время для IP-адресов используются два главных стандарта: версия четыре и версия шесть. Эти возможности для IP-адреса являются единственными, с которыми столкнется программа: мы можем перечислить все возможные значения, отсюда и происходит название перечисления.

Любой IP-адрес может быть адресом либо версии четыре, либо версии шесть, но не обеими версиями одновременно. Это свойство IP-адресов делает структуру данных enum оправданной, поскольку значения перечисления принимают только один из вариантов. Обе версии адресов — четыре и шесть — в своей основе по-прежнему являются IP-адресами, поэтому их следует рассматривать как один и тот же тип, когда код обрабатывает ситуации, применимые к любому виду IP-адреса.