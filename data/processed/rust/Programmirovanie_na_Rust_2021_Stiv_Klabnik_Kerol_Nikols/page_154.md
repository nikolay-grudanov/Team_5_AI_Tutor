---
source_image: page_154.png
page_number: 154
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.77
tokens: 7539
characters: 2105
timestamp: 2025-12-24T10:49:43.755945
finish_reason: stop
---

ции, о которых внешний код не должен знать, которые он не должен вызывать или на которые он не должен полагаться. Поэтому, если вы хотите сделать элемент, такой как функция или структура, конфиденциальным, вам нужно поместить его в модуль.

Принцип работы конфиденциальности в Rust заключается в том, что все элементы (функции, методы, структуры, перечисления, модули и константы) конфиденциальны по умолчанию. Элементы в родительском модуле не могут использовать конфиденциальные элементы внутри дочерних модулей, но элементы дочерних модулей могут использовать элементы в своих предковых модулях. Причина этого заключается в том, что дочерние модули обертывают и скрывают детали своей реализации, но они видят контекст, в котором определены. Продолжая ресторанную метафору, подумайте о правилах конфиденциальности как о служебном помещении ресторана: то, что происходит там, скрыто от клиентов, но сотрудники могут видеть и делать в ресторане, в котором они работают, абсолютно все.

В Rust функционирование модульной системы организовано так, чтобы сокрытие деталей внутренней реализации осуществлялось по умолчанию. Благодаря этому вы знаете, какие части внутреннего кода вы можете изменять, не нарушая внешний код. Но вы можете показывать внутренние части кода дочерних модулей внешним предковым модулям, используя ключевое слово pub, делая элемент публичным.

Демонстрация путей с помощью ключевого слова pub

Давайте вернемся к ошибке в листинге 7.4, которая сообщила о том, что модуль hosting является конфиденциальным. Мы хотим, чтобы функция eat_at_restaurant в родительском модуле имела доступ к функции add_to_waitlist в дочернем модуле, поэтому помечаем модуль hosting ключевым словом pub, как показано в листинге 7.5.

Листинг 7.5. Объявление модуля hosting как pub, чтобы использовать его из eat_at_restaurant

src/lib.rs

mod front_of_house {
    pub mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Абсолютный путь
    crate::front_of_house::hosting::add_to_waitlist();

    // Относительный путь
    front_of_house::hosting::add_to_waitlist();
}