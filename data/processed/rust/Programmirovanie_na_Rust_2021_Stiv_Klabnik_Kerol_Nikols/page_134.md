---
source_image: page_134.png
page_number: 134
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.37
tokens: 7530
characters: 1912
timestamp: 2025-12-24T10:49:18.009177
finish_reason: stop
---

kind: IpAddrKind::V4,
    address: String::from("127.0.0.1"),
};
⑥ let loopback = IpAddr {
    kind: IpAddrKind::V6,
    address: String::from("::1"),
};

Здесь мы определили структуру IpAddr ②, у которой есть два поля: поле вида kind ③, которое имеет тип IpAddrKind (перечисление, определенное нами ранее ①), и поле адреса address ④ типа String. У нас есть два экземпляра этой структуры. Первый, home ⑤, имеет значение IpAddrKind::V4 как его вид kind с соответствующими адресными данными 127.0.0.1. Второй экземпляр, loopback ⑥, имеет другой вариант IpAddrKind в качестве своего значения kind, V6, и связанный с ним адрес ::1. Мы использовали структуру для компоновки значений вида и адреса вместе, поэтому теперь вариант связан с этим значением.

Мы можем представить ту же самую идею в более сжатом виде, используя вместо перечисления внутри структуры только одно перечисление, поместив данные непосредственно в каждый вариант перечисления. Это новое определение перечисления IpAddr говорит о том, что оба варианта, V4 и V6, будут иметь связанные значения String:

enum IpAddr {
    V4(String),
    V6(String),
}
let home = IpAddr::V4(String::from("127.0.0.1"));
let loopback = IpAddr::V6(String::from("::1"));

Мы прикрепляем данные к каждому варианту перечисления напрямую, поэтому дополнительная структура не нужна.

Есть еще одно преимущество использования перечисления вместо структуры: каждый вариант может иметь разные типы и объемы связанных данных. У IP-адресов версии четыре всегда будет четыре числовых компонента, каждый из которых будет иметь значения от 0 до 255. Если бы мы хотели хранить адреса V4 как четыре значения u8, но выражать адреса V6 как одно значение String, то не смогли бы сделать это со структурой. Перечисления легко с этим справляются.

enum IpAddr {
    V4(u8, u8, u8, u8),
    V6(String),
}
let home = IpAddr::V4(127, 0, 0, 1);
let loopback = IpAddr::V6(String::from("::1"));