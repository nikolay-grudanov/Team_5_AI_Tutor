---
source_image: page_460.png
page_number: 460
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.35
tokens: 7596
characters: 2275
timestamp: 2025-12-24T10:57:59.994862
finish_reason: stop
---

Код в листинге 18.1 показывает серию проверок на несколько условий, которые решают, каким должен быть фоновый цвет. В этом примере мы создали переменные с жестко заданными значениями, которые реальная программа могла бы получить из данных, вводимых пользователем.

Листинг 18.1. Смешивание выражений if let, else if, else if let и else
src/main.rs

```rust
fn main() {
    let favorite_color: Option<&str> = None;
    let is_tuesday = false;
    let age: Result<u8, _> = "34".parse();

    if let Some(color) = favorite_color {
        println!("Используя ваш любимый цвет, {}, в качестве фона", color);
    } else if is_tuesday {
        println!("Вторник - зеленый день!");
    } else if let Ok(age) = age {
        if age > 30 {
            println!("Использование фиолетового цвета в качестве фона");
        } else {
            println!("Использование оранжевого цвета в качестве фона");
        }
    } else {
        println!("Использование синего цвета в качестве фона");
    }
}
```

Если пользователь указывает любимый цвет ①, то это фоновый цвет ②. Если сегодня — вторник ③, то фоновый цвет — зеленый ④. Если пользователь указывает свой возраст в качестве строки и мы можем успешно разобрать ее как число ⑤, то цвет будет либо фиолетовым ⑦, либо оранжевым ⑧ в зависимости от значения числа ⑥. Если ни одно из этих условий не применимо ⑨, то фоновый цвет — синий ⑩.

Эта условная структура позволяет поддерживать сложные требования. С жестко закодированными значениями, которые здесь есть, этот пример будет выводить

Использование фиолетового цвета в качестве фона.

Вы видите, что выражение if let может также вводить затененные переменные таким же образом, как и рукава выражения match: строка кода if let Ok(age) = age ⑤ вводит новую затененную переменную age, содержащую значение внутри варианта Ok. Это означает, что нужно поместить условие if age > 30 в этот блок ⑥: мы не можем совместить эти два условия в выражении if let Ok (age) = age && age > 30. Затененная переменная age, которую мы хотим сравнить с 30, будет недействительна до тех пор, пока новая область видимости не начнется с фигурной скобки.

Недостатком использования выражений if let является то, что компилятор не проверяет исчерпываемость, в то время как с выражениями match он это делает.