---
source_image: page_243.png
page_number: 243
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.94
tokens: 7541
characters: 2115
timestamp: 2025-12-24T10:52:08.336695
finish_reason: stop
---

В этом примере мы задали параметр жизненного цикла 'a для параметра x и возвращаемого типа, но не для параметра y, поскольку жизненный цикл y не имеет связи с жизненным циклом x или возвращаемым значением.

Во время возвращения ссылки из функции параметр жизненного цикла для возвращаемого типа должен совпадать с параметром жизненного цикла одного из параметров. Если возвращаемая ссылка не ссылается на один из параметров, то она должна ссылаться на значение, созданное внутри этой функции. В итоге получится висячая ссылка, потому что значение выйдет из области видимости в конце функции. Рассмотрим попытку реализации функции longest, которая не будет компилироваться:

src/main.rs

fn longest<'a>(x: &str, y: &str) -> &'a str {
    let result = String::from("реально длинная строка");
    result.as_str()
}

Даже если мы описали параметр жизненного цикла 'a для возвращаемого типа, эту реализацию здесь не получится скомпилировать, потому что жизненный цикл возвращаемого значения вообще не связан с жизненным циклом параметров. Вот сообщение об ошибке:

error[E0597]: `result` does not live long enough
 --> src/main.rs:3:5
  |
3 |     result.as_str()
  |     ^^^^^^ does not live long enough
4 | }
  | - borrowed value only lives until here
note: borrowed value must be valid for the lifetime 'a as defined on the function body at 1:1...
 --> src/main.rs:1:1
  |
1 | / fn longest<'a>(x: &str, y: &str) -> &'a str {
2 | |     let result = String::from("really long string");
3 | |     result.as_str()
4 | | }
|_^

Проблема в том, что переменная result выходит из области видимости и очищается в конце функции longest. Мы также пытаемся вернуть ссылку на result из функции. Мы никак не можем описать параметры жизненных циклов, которые изменили бы висячую ссылку, а компилятор не позволит создать висячую ссылку. В этом случае лучше всего было бы вернуть тип данных, находящийся во владении, а не ссылку, чтобы затем вызывающая функция отвечала за очистку значения.

В конечном счете, синтаксис жизненных циклов предназначен для соединения жизненных циклов различных параметров и возвращаемых значений функций.