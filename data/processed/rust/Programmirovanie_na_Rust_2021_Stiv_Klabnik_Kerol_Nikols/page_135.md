---
source_image: page_135.png
page_number: 135
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.07
tokens: 7484
characters: 1814
timestamp: 2025-12-24T10:49:13.903970
finish_reason: stop
---

Мы показали несколько разных способов определения структур данных для хранения IP-адресов версий четыре и шесть. Однако, как оказалось, пользователи часто желают хранить IP-адреса и определять в коде их вид, поэтому в стандартной библиотеке есть определение, которое можно использовать. Давайте посмотрим, как стандартная библиотека определяет IpAddr. В ней есть точно такое же перечисление и варианты, которые мы определили и использовали, но библиотека вставляет адресные данные внутрь вариантов в форме двух разных структур, которые определяются по-разному для каждого варианта:

struct Ipv4Addr {
    // --пропуск--
}

struct Ipv6Addr {
    // --пропуск--
}

enum IpAddr {
    V4(Ipv4Addr),
    V6(Ipv6Addr),
}

Этот код иллюстрирует, что внутрь варианта перечисления можно помещать любые данные, например строковые, числовые типы или структуры. Вы даже можете включить еще одно перечисление! Кроме того, типы стандартной библиотеки часто не намного сложнее того, что вы могли бы придумать сами.

Обратите внимание, что, даже если стандартная библиотека содержит определение для IpAddr, все равно можно создавать и использовать собственное определение бесконфликтно, потому что мы не ввели определение стандартной библиотеки в область видимости. Мы еще поговорим о введении типов в область видимости в главе 7.

Давайте посмотрим на очередной пример перечисления в листинге 6.2. В варианты этого перечисления встроено большое разнообразие типов.

Листинг 6.2. Перечисление Message, в каждом из вариантов которого хранятся разные объемы и типы значений

enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}

Это перечисление имеет четыре варианта с разными типами:

○ Quit вообще не имеет связанных с ним данных.

○ Move включает в себя анонимную структуру.