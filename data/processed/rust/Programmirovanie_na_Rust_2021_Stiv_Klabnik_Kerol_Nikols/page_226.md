---
source_image: page_226.png
page_number: 226
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.61
tokens: 7617
characters: 2430
timestamp: 2025-12-24T10:51:48.653819
finish_reason: stop
---

гая упаковка смогла реализовать типаж Summary, этот типаж также должен быть публичным, поэтому мы ставим ключевое слово pub перед trait в листинге 10.12.

При реализации типажей следует обратить внимание на одно ограничение — мы можем реализовать типаж в типе только в том случае, если либо типаж, либо тип являются локальными для упаковки. Например, можно реализовать типажи стандартной библиотеки, такие как Display, в настраиваемом типе Tweet в рамках функциональности упаковки aggregator, потому что тип Tweet является локальным для упаковки aggregator. Мы также можем реализовать Summary в Vec<T> в упаковке aggregator, поскольку типаж Summary является локальным для упаковки aggregator.

Но мы не можем реализовывать внешние типажи во внешних типах. Например, мы не можем реализовать типаж Display в Vec<T> в упаковке aggregator, потому что Display и Vec<T> определены в стандартной библиотеке и не являются локальными для упаковки aggregator. Это ограничение является частью свойства программ — когерентностью, а конкретнее — «сиротским правилом», названным так потому, что родительский тип отсутствует. Это правило обеспечивает, чтобы код других людей не мог нарушать ваш код, и наоборот. Без этого правила две упаковки могли бы реализовать один и тот же типаж в одном и том же типе, и язык Rust не знал бы, какую реализацию использовать.

Реализации по умолчанию

Иногда бывает полезно иметь поведение по умолчанию для некоторых или всех методов в типаже вместо того, чтобы требовать реализации всех методов в каждом типе. Тогда, по мере реализации типажа в конкретном типе, мы можем оставлять или переопределять поведение по умолчанию каждого метода.

Листинг 10.14 показывает, как конкретизировать строковое значение по умолчанию для метода summarize типажа Summary, а не только определять сигнатуру этого метода, как мы сделали в листинге 10.12.

Листинг 10.14. Определение типажа Summary с реализацией по умолчанию метода summary
src/lib.rs
pub trait Summary {
    fn summarize(&self) -> String {
        String::from("(Читать дальше...)")
    }
}

Чтобы воспользоваться реализацией по умолчанию для суммирования экземпляров типа NewsArticle, вместо определения настраиваемой реализации мы указываем пустой блок impl с инструкцией impl Summary for NewsArticle {}.

Хотя мы больше не определяем метод summary непосредственно для NewsArticle, мы предоставили реализацию по умолчанию и указали, что NewsArticle реализует