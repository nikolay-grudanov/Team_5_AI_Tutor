---
source_image: page_244.png
page_number: 244
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.99
tokens: 7540
characters: 2107
timestamp: 2025-12-24T10:52:10.215210
finish_reason: stop
---

После того как они будут соединены, у языка Rust будет достаточно информации, чтобы разрешить безопасные для памяти операции и запретить операции, которые могли бы создать висячие указатели или иным образом нарушить безопасность памяти.

**Аннотации жизненных циклов в определениях структур**

До сих пор мы определяли структуры только для хранения обладаемых типов. Структуры могут содержать ссылки, но в этом случае потребуется добавить аннотацию жизненного цикла в каждую ссылку в определении структуры. Листинг 10.25 имеет структуру ImportantExcerpt, содержащую строковый срез.

**Листинг 10.25. Структура, содержащая ссылку, поэтому ее определение нуждается в аннотации жизненного цикла**

src/main.rs

```rust
struct ImportantExcerpt<'a> {
    part: &'a str,
}

fn main() {
    let novel = String::from("Зовите меня Измаил. Несколько лет тому назад...");
    let first_sentence = novel.split('.')
        .next()
        .expect("Не смог отыскать '.'");

    let i = ImportantExcerpt { part: first_sentence };
}
```

Эта структура имеет одно поле part, которое содержит строковый срез, то есть ссылку ②. Как и в случае с обобщенными типами данных, мы объявляем имя параметра обобщенного жизненного цикла в угловых скобках после имени структуры, поэтому можно использовать параметр жизненного цикла в теле определения структуры ①. Эта аннотация означает, что экземпляр ImportantExcerpt не может пережить ссылку, которую он содержит в поле part.

Функция main здесь создает экземпляр структуры ImportantExcerpt ⑤, который содержит ссылку на первое предложение повести string ④, которым владеет переменная novel ③. Данные в novel существуют перед тем, как создается экземпляр структуры ImportantExcerpt. В дополнение к этому, переменная novel не выходит из области видимости, пока из области видимости не выйдет экземпляр структуры ImportantExcerpt, поэтому ссылка в экземпляре структуры ImportantExcerpt является действительно.

**Пропуск жизненного цикла**

Вы узнали, что у каждой ссылки есть жизненный цикл и что нужно описывать параметры жизненных циклов для функций или структур, которые используют