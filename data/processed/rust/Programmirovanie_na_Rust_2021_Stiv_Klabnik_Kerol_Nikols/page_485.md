---
source_image: page_485.png
page_number: 485
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.83
tokens: 7635
characters: 2289
timestamp: 2025-12-24T10:58:38.743756
finish_reason: stop
---

будете знать, что любые ошибки в безопасности памяти должны быть внутри небезопасного блока. Пусть небезопасные блоки будут небольшими. Вы будете благодарны позже при расследовании дефектов памяти.

В целях максимальной изоляции небезопасного кода лучше всего помещать его внутрь безопасной абстракции и предоставлять безопасный API, который мы обсудим позже при изучении небезопасных функций и методов. Части стандартной библиотеки реализованы как безопасные абстракции над проверенным небезопасным кодом. Благодаря обертыванию небезопасного кода в безопасную абстракцию использование unsafe не приводит к утечке небезопасного кода там, где вы или ваши пользователи могли бы использовать функциональность, реализованную с небезопасным кодом, потому что безопасная абстракция безопасна.

Давайте посмотрим на каждую из четырех небезопасных сверхспособностей. Мы также поговорим о некоторых абстракциях, которые обеспечивают безопасный интерфейс для небезопасного кода.

Применение оператора разыменования к сырому указателю

В разделе «Висячие ссылки» (с. 107) мы упомянули, что компилятор обеспечивает, чтобы ссылки всегда были действительными. Небезопасный Rust имеет два новых типа, именуемых сырыми указателями, которые похожи на ссылки. Как и в случае со ссылками, сырые указатели могут быть неизменяемыми либо изменяемыми и пишутся соответственно как *const T и *mut T. Звездочка не является оператором разыменования, это часть имени типа. В контексте сырых указателей «неизменяемый» означает, что указатель не может быть присвоен непосредственно после применения оператора разыменования.

В отличие от ссылок и умных указателей:

○ Сырым указателям разрешено игнорировать правила заимствования, имея как неизменяемые, так и изменяемые указатели или несколько изменяемых указателей на одно и то же место.
○ Сырые указатели гарантированно не указывают на действительную память.
○ Сырым указателям разрешено быть null.
○ Сырые указатели не реализуют никакой автоматической очистки.

Отказавшись от этих гарантий, вы отказываетесь от безопасности в обмен на более высокую производительность или возможность взаимодействовать с другим языком или оборудованием, где гарантии Rust не применяются.

Листинг 19.1 показывает, как создавать неизменяемый и изменяемый сырой указатель из ссылок.