---
source_image: page_438.png
page_number: 438
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.61
tokens: 7461
characters: 1931
timestamp: 2025-12-24T10:57:16.253553
finish_reason: stop
---

Она работает иначе, чем определение структуры, которое использует параметр обобщенного типа с границами типажа. Параметр обобщенного типа может быть заменен только одним конкретным типом за раз, в то время как типажные объекты обеспечивают возможность заполнять типажный объект несколькими конкретными типами во время выполнения. Например, мы могли бы определить структуру Screen с помощью обобщенного типа и границы типажа, как в листинге 17.6.

Листинг 17.6. Альтернативная реализация структуры Screen и ее метода run с использованием обобщений и границ типажа

src/lib.rs
```rust
pub struct Screen<T: Draw> {
    pub components: Vec<T>,
}

impl<T> Screen<T>
    where T: Draw {
    pub fn run(&self) {
        for component in self.components.iter() {
            component.draw();
        }
    }
}
```

Это ограничивает нас экземпляром структуры Screen, который содержит список всех компонентов типа Button либо TextField. Если когда-либо у вас будут только однородные коллекции, то предпочтительно использовать обобщения и границы типажа, потому что определения будут мономорфизированы во время компиляции для использования конкретных типов.

С другой стороны, с методом, использующим типажные объекты, один экземпляр структуры Screen может содержать Vec<T> с Box<Button>, а также Box<TextField>. Давайте посмотрим, как это работает, а затем поговорим о последствиях для производительности времени выполнения.

Реализация типажа

Теперь мы добавим несколько типов, реализующих типаж Draw. Мы предоставим тип Button. Опять же, фактическая реализация библиотеки GUI выходит за рамки темы этой книги, поэтому в теле метода draw не будет никакой полезной реализации. Чтобы представить себе, как может выглядеть реализация, структура Button может иметь поля width, height и label, как показано в листинге 17.7.

Листинг 17.7. Структура Button, реализующая типаж Draw

src/lib.rs
```rust
pub struct Button {
    pub width: u32,
```