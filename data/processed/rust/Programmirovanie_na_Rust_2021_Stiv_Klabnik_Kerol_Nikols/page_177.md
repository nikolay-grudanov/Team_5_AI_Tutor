---
source_image: page_177.png
page_number: 177
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.02
tokens: 7524
characters: 2097
timestamp: 2025-12-24T10:50:22.540729
finish_reason: stop
---

После этих двух строк s будет содержать foobar. Метод push_str берет строковый срез, потому что мы не обязательно хотим брать этот параметр во владение. Например, код в листинге 8.16 показывает, что было бы очень хорошо, если бы мы не смогли использовать s2 после добавления его содержимого в конец s1.

Листинг 8.16. Использование строкового среза после добавления его содержимого в конец значения типа String

let mut s1 = String::from("foo");
let s2 = "bar";
s1.push_str(s2);
println!("s2 равна {}", s2);

Если бы метод push_str брал s2 во владение, то мы бы не смогли вывести его значение в последней строке кода. Однако этот код работает так, как мы и ожидали!

Метод push берет один символ в качестве параметра и добавляет его в конец значения типа String. В листинге 8.17 показан код, который добавляет букву l в значение типа String с помощью метода push.

Листинг 8.17. Добавление одного символа в значение типа String с помощью push

let mut s = String::from("lo");
s.push('l');

В результате выполнения этого кода переменная s будет содержать lol.

Конкатенация с помощью оператора + или макрокоманды format!

У вас часто будет возникать потребность в объединении двух существующих строк. Один из способов предполагает использование оператора +, как показано в листинге 8.18.

Листинг 8.18. Использование оператора + для объединения двух значений типа String в новое значение типа String

let s1 = String::from("Hello, ");
let s2 = String::from("world!");
let s3 = s1 + &s2; // примечание: s1 перенесено сюда и больше не может // использоваться

В результате выполнения этого кода переменная s3 будет содержать Hello, world!. Причина, почему переменная s1 больше не является действительной после сложения и отчего мы использовали ссылку на s2, связана с сигнатурой метода, который вызывается при использовании оператора +. Оператор + использует метод add, сигнатура которого выглядит примерно так:

fn add(self, s: &str) -> String {

Это не совсем та сигнатура, которая имеется в стандартной библиотеке: в стандартной библиотеке метод add определяется с помощью обобщений. Здесь мы смо-