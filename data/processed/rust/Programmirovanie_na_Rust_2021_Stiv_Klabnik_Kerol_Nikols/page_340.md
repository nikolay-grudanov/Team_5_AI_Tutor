---
source_image: page_340.png
page_number: 340
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.09
tokens: 7472
characters: 1880
timestamp: 2025-12-24T10:54:42.473314
finish_reason: stop
---

мы умножаем значения каждой пары, суммируем все результаты и сдвигаем биты в сумме бит qlp_shift вправо.

В вычислениях в таких приложениях, как аудиодекодеры, часто отдают наиболее высокий приоритет производительности. Здесь мы создаем итератор, используя два адаптера, а затем потребляем значение. В какой ассемблерный код будет компилироваться этот код на языке Rust? Скажем так, на момент написания этой книги он компилируется до той же сборки, которую вы бы написали от руки. Там вообще нет цикла, соответствующего перебору значений coefficients: язык Rust знает, что имеется 12 итераций, и поэтому он «разворачивает» цикл. Разворачивание представляет собой оптимизацию, которая устраняет накладные расходы по управлению циклом в коде и вместо этого генерирует повторяющийся код для каждой итерации цикла.

Все коэффициенты хранятся в регистрах — это значит, что доступ к значениям происходит очень быстро. Нет никаких проверок границ доступа к массиву во время выполнения. Все эти оптимизации, которые язык Rust способен применять, делают результирующий код чрезвычайно эффективным. Теперь, зная это, вы можете использовать итераторы и замыкания без страха! Они делают код внешне более высокоуровневым, но при этом не налагают за это штраф в виде снижения производительности времени выполнения.

Итоги

Замыкания и итераторы — это средства Rust, вдохновленные идеями языков функционального программирования. Они помогают Rust четко выражать высокоуровневые идеи при производительности, характерной для низкого уровня. Реализации замыканий и итераторов таковы, что производительность времени выполнения не страдает. Отчасти это способствует тому, чтобы достичь абстракций с нулевой стоимостью.

Теперь, улучшив выразительность проекта ввода-вывода, давайте рассмотрим еще несколько средств консольной команды cargo, которые помогут нам поделиться этим проектом со всем миром.