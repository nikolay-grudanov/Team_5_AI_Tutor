---
source_image: page_475.png
page_number: 475
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.28
tokens: 7424
characters: 1912
timestamp: 2025-12-24T10:58:16.952123
finish_reason: stop
---

Игнорирование частей значения с помощью вложенных _

Мы также можем использовать _ внутри еще одного паттерна для игнорирования только части значения. Например, когда мы хотим протестировать только часть значения, но не используем другие части в соответствующем коде, который требуется выполнить. Листинг 18.18 показывает код, ответственный за управление значением настройки. Требования предписывают, что пользователю не разрешается вносить записи поверх существующих настроек. Но он может сбросить параметр и задать ему значение, если оно в данный момент не задано.

Листинг 18.18. Использование подчеркивания в паттернах, которые совпадают с вариантами Some, когда не нужно использовать значение внутри Some

let mut setting_value = Some(5);
let new_setting_value = Some(10);

match (setting_value, new_setting_value) {
    (Some(_), Some(_)) => {
        println!("Не получается перезаписать существующее настраиваемое значение");
    }
    _ => {
        setting_value = new_setting_value;
    }
}

println!("значение настройки равно {:?}", setting_value);

Этот код выведет:

    Не получается перезаписать существующее настраиваемое значение
а затем

    значение настройки равно Some(5)

В первом рукаве совпадения не нужно сопоставлять или использовать значения внутри варианта Some, но требуется выполнить проверку ситуации, когда setting_value и new_setting_value равны варианту Some. В этом случае мы печатаем, почему не изменяем значение setting_value, и оно не изменяется.

Во всех остальных случаях (если либо setting_value, либо new_setting_value равны None), выражаемых паттерном _ во втором рукаве, мы хотим разрешать new_setting_value становиться setting_value.

Мы также можем использовать подчеркивания в нескольких местах внутри одного паттерна, чтобы игнорировать то или иное значение. Листинг 18.19 показывает пример игнорирования второго и четвертого значений в кортеже из пяти элементов.