---
source_image: page_506.png
page_number: 506
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.49
tokens: 7614
characters: 2286
timestamp: 2025-12-24T10:59:13.310478
finish_reason: stop
---

чemu они полезны как типы. Затем мы перейдем к псевдонимам типов, языковому средству, похожему на newtype, но с несколько иной семантикой. Мы также обсудим тип ! и динамически изменяемые типы.

ПРИМЕЧАНИЕ

Чтобы освоить материал следующего раздела, вам необходимо ознакомиться с разделом «Использование паттерна newtype для реализации внешних типажей во внешних типах» (с. 504).

Использование паттерна newtype для безопасности типов и абстракции

Паттерн newtype полезен для решения задач, выходящих за рамки рассмотренных примеров, включая статическое обеспечение того, чтобы значения не перемешивались и указывались единицы измерения значения. Вы видели пример использования типов newtype для обозначения единиц измерения в листинге 19.15: вспомните, что структуры Millimeters и Meters обертывали значения типа u32 в newtype. Если бы мы написали функцию с параметром типа Millimeters, то не смогли бы скомпилировать программу, которая ненароком попыталась бы вызвать эту функцию со значением типа Meters или простым типом u32.

Еще одно применение паттерна newtype заключается в абстрагировании некоторых деталей реализации типа: новый тип может предоставлять публичный API, отличный от API приватного внутреннего типа, если мы используем новый тип непосредственно, к примеру, для ограничения имеющейся функциональности.

Типы newtype также могут скрывать внутреннюю реализацию. Например, мы можем предоставить тип People для обертывания HashMap<i32, String>, который хранит идентификатор человека, связанный с его именем. Код, использующий People, будет взаимодействовать только с публичным API, который мы предоставляем, например, метод добавления строки имени в коллекцию People. Этому коду не нужно будет знать, что мы назначаем идентификатор i32 именам внутри. Паттерн newtype — это легкий способ достижения инкапсуляции для сокрытия деталей реализации, который мы обсуждали в разделе «Инкапсуляция, которая скрывает детали реализации» (с. 432).

Создание синонимов типов с помощью псевдонимов типов

Наряду с паттерном newtype язык Rust предоставляет возможность объявлять псевдоним типа, чтобы давать существующему типу другое имя. Для этого мы используем ключевое слово type. Например, можно создать псевдоним Kilometers для типа i32 примерно так:

    type Kilometers = i32;