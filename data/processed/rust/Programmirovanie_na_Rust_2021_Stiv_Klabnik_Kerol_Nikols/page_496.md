---
source_image: page_496.png
page_number: 496
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.09
tokens: 7499
characters: 1919
timestamp: 2025-12-24T10:58:47.524968
finish_reason: stop
---

реализовать для типа многократно, каждый раз изменяя конкретные типы параметров обобщенного типа. Используя метод next для Counter, нам пришлось бы предоставлять аннотации типов, чтобы задавать необходимую реализацию типа-жа Iterator.

При работе со связанными типами не нужно аннотировать типы, потому что мы не можем реализовать типаж в типе многократно. В листинге 19.12 с определением, использующим связанные типы, мы можем выбрать только один тип Item, поскольку может быть только одна инструкция impl Iterator for Counter. Не нужно описывать, что итератор значений типа u32 требуется везде, где мы вызываем next для Counter.

Параметры обобщенного типа по умолчанию и перегрузка операторов

При работе с параметрами обобщенного типа вы можете задавать используемый по умолчанию конкретный тип для обобщенного типа. Таким образом, средствам типажа не нужно задавать конкретный тип, если работает тип по умолчанию. Синтаксис описания типа по умолчанию для обобщенного типа — это <ЗаполнительныйТип=КонкретныйТип> во время объявления обобщенного типа.

Этот технический прием полезен в такой ситуации, как перегрузка операторов. Перегрузка операторов — это индивидуальная настройка поведения оператора (такого, как +) в определенных ситуациях.

Rust не позволяет создавать собственные операторы или перегружать произвольные операторы. Но вы можете перегружать операции и соответствующие типажи, перечисленные в std::ops, реализуя типажи, связанные с оператором. Например, в листинге 19.14 мы перегружаем оператор +, чтобы складывать вместе два экземпляра структуры Point. Мы делаем это, реализуя типаж Add в структуре Point.

Листинг 19.14. Реализация типажа Add с целью перегрузки оператора + для экземпляров структуры Point
src/main.rs
use std::ops::Add;

#[derive(Debug, PartialEq)]
struct Point {
    x: i32,
    y: i32,
}

impl Add for Point {
    type Output = Point;

    fn add(self, other: Point) -> Point {