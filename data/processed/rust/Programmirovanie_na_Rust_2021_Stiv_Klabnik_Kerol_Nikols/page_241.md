---
source_image: page_241.png
page_number: 241
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.95
tokens: 7543
characters: 2169
timestamp: 2025-12-24T10:52:05.487569
finish_reason: stop
---

цикл 'а получит конкретный жизненный цикл, равный меньшему из жизненных циклов x и y. Поскольку мы аннотировали возвращаемую ссылку тем же параметром жизненного цикла 'а, возвращаемая ссылка также будет действительно в течение длины меньшего из жизненных циклов x и y.

Давайте посмотрим, как аннотации жизненных циклов ограничивают функцию longest путем передачи ссылок, у которых разные конкретные жизненные циклы. Листинг 10.23 — это простой пример.

Листинг 10.23. Использование функции longest со ссылками на значения типа String, имеющие разные конкретные жизненные циклы

src/main.rs
```rust
fn main() {
    let string1 = String::from("длинная строка является длинной");

    {
        let string2 = String::from("xyz");
        let result = longest(string1.as_str(), string2.as_str());
        println!("Самая длинная строка равна {}", result);
    }
}
```

В этом примере string1 действительно вплоть до конца внешней области видимости, string2 действительно вплоть до конца внутренней области, и result ссылается на то, что является действительно вплоть до конца внутренней области. Выполните этот код, и вы увидите, что контролер заимствования одобряет этот код; он скомпилирует и выведет:

Самая длинная строка равно длинная строка является длинной.

Далее, давайте посмотрим на пример, который показывает, что жизненный цикл ссылки в переменной result должен быть меньшим жизненным циклом двух аргументов. Мы переместим объявление переменной result за пределы внутренней области, но оставим передачу значения переменной result внутри области с переменной string2. Затем мы перенесем макрокоманду println!, которая использует result вне внутренней области, после того, как внутренняя область закончилась. Код, приведенный в листинге 10.24, не компилируется.

Листинг 10.24. Попытка использовать переменную result после того, как string2 вышла из области видимости

src/main.rs
```rust
fn main() {
    let string1 = String::from("длинная строка является длинной");
    let result;
    {
        let string2 = String::from("xyz");
        result = longest(string1.as_str(), string2.as_str());
    }
    println!("Самая длинная строка равна {}", result);
}
```