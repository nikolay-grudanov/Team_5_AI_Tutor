---
source_image: page_765.png
page_number: 765
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.22
tokens: 7713
characters: 2229
timestamp: 2025-12-24T01:31:13.325312
finish_reason: stop
---

запуска файла как сценария верхнего уровня, а не когда он импортируется (новая версия файла модуля переименована в min-max2.py):

print('I am:', __name__)
def minmax(test, *args):
    res = args[0]
    for arg in args[1:]:
        if test(arg, res):
            res = arg
    return res

def lessthan(x, y): return x < y
def grtrthan(x, y): return x > y

if __name__ == '__main__':
    print(minmax(lessthan, 4, 2, 1, 5, 6, 3))  # Тестовый код
    print(minmax(grtrthan, 4, 2, 1, 5, 6, 3))

Для контроля мы также выводим здесь значение атрибута __name__. Python создает и присваивает эту переменную режима использования, когда начинает загрузку файла. В случае запуска файла как сценария верхнего уровня атрибут __name__ устанавливается в __main__, а потому выполняется код самотестирования:

c:\code> python minmax2.py
I am: __main__
1
6

Однако если файл импортируется, то атрибут __name__ не содержит __main__, так что функцию потребуется вызывать явно:

c:\code> python
>>> import minmax2
I am: minmax2
>>> minmax2.minmax(minmax2.lessthan, 's', 'p', 'a', 'a')
'a'

Опять-таки независимо от того, применяется ли это для тестирования, совокупный эффект в том, что мы используем код в двух разных ролях — как модуль библиотеки инструментов или как исполняемую программу.

Согласно обсуждению операций относительного импортирования пакетов в главе 24 методика, описанная в настоящем разделе, способна оказывать определенное влияние на операции импортирования, выполняемые файлами, которые также применяются как компоненты пакетов в Python 3.x, но она по-прежнему может быть задействована с операциями импортирования по абсолютным путям пакетов и другими приемами. За дополнительными сведениями обращайтесь в предыдущую главу.

Пример: код с двойным режимом

Рассмотрим более сложный пример модуля, который демонстрирует еще один способ использования трюка с атрибутом __name__ из предыдущего раздела. В показанном далее модуле formats.py определяются служебные функции форматирования строк для импортеров, а также производится проверка, запущен ли он как сценарий верхнего уровня. Если файл был запущен как сценарий, тогда проверяется наличие аргументов в командной строке; в случае их передачи запускается указанный тест, а ина-