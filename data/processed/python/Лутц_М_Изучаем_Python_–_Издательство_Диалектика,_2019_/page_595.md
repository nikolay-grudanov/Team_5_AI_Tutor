---
source_image: page_595.png
page_number: 595
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.21
tokens: 7787
characters: 2465
timestamp: 2025-12-24T01:25:49.854154
finish_reason: stop
---

Выбор элементов из итерируемых объектов: filter

Функция map — первоначальный и относительно прямолинейный представитель инструментального набора для функционального программирования в Python. Ее близкие родственники, filter и reduce, выбирают элементы из итерируемых объектов на основе проверочной функции и применяют функции к парам элементов соответственно.

Из-за возвращения итерируемого объекта функция filter (подобно range) требует вызова list при отображении всех ее результатов в Python 3.x. Скажем, следующий вызов filter выбирает из последовательности элементы больше нуля:

```python
>>> list(range(-5, 5))                # Итерируемый объект в Python 3.x
[-5, -4, -3, -2, -1, 0, 1, 2, 3, 4]
>>> list(filter((lambda x: x > 0), range(-5, 5)))    # Итерируемый объект
# в Python 3.x
[1, 2, 3, 4]
```

Функция filter кратко упоминалась во врезке "Что потребует внимания: булевские операции" в конце главы 12 и во время исследования итерируемых объектов Python 3.x в главе 14. Элементы из последовательности либо итерируемого объекта, для которых проверочная функция возвращает истинное значение, добавляются в результирующий список. Как и map, функция filter приблизительно эквивалентна циклу for, но она является встроенной, лаконичной и часто более быстрой:

```python
>>> res = []
>>> for x in range(-5, 5):
...     if x > 0:
...         res.append(x)
...
>>> res
[1, 2, 3, 4]
```

Также подобно map функцию filter можно эмулировать посредством синтаксиса спискового включения с часто более простыми результатами (особенно если удается избежать создания новой функции) и с помощью похожего генераторного выражения, когда желателен отложенный выпуск результатов, но остаток истории мы рассмотрим в следующей главе:

```python
>>> [x for x in range(-5, 5) if x > 0] # Используйте () для генерации элементов
[1, 2, 3, 4]
```

Комбинирование элементов из итерируемых объектов: reduce

Вызов функции reduce, которая в Python 2.x представляет собой встроенную функцию, но в Python 3.x находится в модуле functools, выглядит сложнее. Она принимает итерируемый объект, подлежащий обработке, но сама не является итерируемым объектом, а возвращает одиночный результат. Ниже показаны два вызова reduce, которые вычисляют сумму и произведение элементов в списке:

```python
>>> from functools import reduce    # Импортировать в Python 3.x,
# но не в Python 2.x
>>> reduce((lambda x, y: x + y), [1, 2, 3, 4])
10
>>> reduce((lambda x, y: x * y), [1, 2, 3, 4])
24
```