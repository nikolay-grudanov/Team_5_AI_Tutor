---
source_image: page_768.png
page_number: 768
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 50.10
tokens: 7881
characters: 2926
timestamp: 2025-12-24T01:31:26.227333
finish_reason: stop
---

Аргументы командной строки можно использовать способами, аналогичными продемонстрированному в примере приему, чтобы снабдить обычным средством ввода сценарии, которые упаковывают свой код в виде функций и классов для многократного применения импортерами. Более сложная обработка аргументов командной строки описана в приложении А второго тома, а также в документации по модулям getopt, optparse и argparse в руководстве по стандартной библиотеке Python. В отдельных сценариях вы можете также использовать встроенную функцию input, которая применялась в главах 3 и 10, чтобы запрашивать тестовые входные данные у пользователя оболочки вместо их извлечения из командной строки. Дополнительные сведения об используемом здесь операторе assert ищите в главе 34 (том 2).

В главе 7 обсуждался синтаксис { , d } метода форматирования, появившийся в версиях Python 2.7 и 3.1; это расширение форматирования разделяет запятыми группы цифр во многом подобно тому, как было реализовано в приведенном выше коде. Тем не менее, предложенный здесь модуль добавляет форматирование денежных значений, может изменяться и служит ручной альтернативой вставкам запятых в ранних версиях Python.

Символы валют: Unicode в действии

Функция money модуля formats по умолчанию работает с денежными значениями в долларах, но поддерживает другие символы валют, позволяя передавать отличающиеся от ASCII символы Unicode. Например, порядковый номер Unicode с шестнадцатеричным значением 00A3 представляет собой символ фунта, а с 00A5 — иены. Указывать их можно в разнообразных формах, как описано далее.

• Порядковый номер (целое число) декодированной кодовой точки Unicode в текстовой строке, обозначив ее как Unicode или шестнадцатеричную (в Python 3.x для совместимости с Python 2.x такие строковые литералы должны содержать в своем начале u).
• Низкоуровневая закодированная форма символа в байтовой строке, которая декодируется перед передачей, обозначив ее как шестнадцатеричную (в Python 2.x для совместимости с Python 3.x такие строковые литералы должны содержать в своем начале b).
• Фактический символ в тексте программы вместе с объявлением кодировки исходного кода.

Предварительный обзор Unicode приводился в главе 4, а дополнительные детали будут предложены в главе 37, но базовые требования в данном примере довольно просты и являются подходящим сценарием применения. Для тестирования других символов валют мы поместим в файл formats_currency.py представленный далее код, чтобы не набирать его вручную в интерактивной подсказке каждый раз, когда вносится изменение:

from __future__ import print_function    # Python 2.x
from formats import money
X = 54321.987
print(money(X), money(X, 0, ''))
print(money(X, currency=u'\xA3'), money(X, currency=u'\u00A5'))
print(money(X, currency=b'\xA3'.decode('latin-1')))
print(money(X, currency=u'\u20AC'), money(X, 0, b'\xA4'.decode('iso-8859-15')))
print(money(X, currency=b'\xA4'.decode('latin-1')))