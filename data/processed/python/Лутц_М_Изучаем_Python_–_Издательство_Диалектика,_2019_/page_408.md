---
source_image: page_408.png
page_number: 408
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.94
tokens: 7864
characters: 2944
timestamp: 2025-12-24T01:20:12.126661
finish_reason: stop
---

Например:

```python
>>> ['f', 't'][bool('')]
'f'
>>> ['f', 't'][bool('spam')]
't'
```

Тем не менее, это не в точности то же самое, потому что Python не будет предпринимать укороченную оценку — он всегда выполняет и Z, и Y независимо от значения X. Из-за таких сложностей в Python 2.5 и последующих версиях лучше применять более простое и легкое для восприятия выражение if/else. Однако опять-таки вы должны использовать его крайне умеренно и только когда все части относительно просты; иначе предпочтительнее записывать форму полного оператора if, чтобы облегчить внесение изменений в будущем. Ваши коллеги по работе будут счастливы.

И все же вы можете встречать версию с операциями and/or в коде, написанном до выхода версии Python 2.5 (и в коде Python, написанном бывшими программистами на C, которые еще не полностью отпустили свое темное прошлое кодирования)².

Что потребует внимания: булевские операции

Один из распространенных способов применения несколько необычного поведения булевских операций Python — выбор из набора объектов с помощью or. Оператор следующего вида:

X = A or B or C or None

присваивает X первый непустой (т.е. истинный) объект из числа А, В и С или None, если все они пусты. Прием работает из-за того, что операция or возвращает один из двух своих объектов, и представляет собой довольно часто используемую кодовую парадигму в Python: для выбора непустого объекта из набора с фиксированным размером необходимо объединить их вместе в выражении or. В более простой форме это также применяется для указания стандартного значения — показанный ниже код устанавливает X в А, если А является истинным (или непустым), и в default в противном случае:

X = A or default

Также важно понимать укороченную оценку булевских операций и выражения if/else, потому что это может препятствовать выполнению действий. Скажем, выражение в правой части булевской операции может вызывать функции, которые делают значимую или важную работу, либо иметь побочные эффекты, которые не произойдут по причине вступления в силу правила укороченной оценки:

if f1() or f2(): ...

Здесь если f1 возвращает истинное (или непустое) значение, тогда Python никогда не запустит f2. Чтобы гарантировать выполнение обеих функций, их нужно вызывать перед операцией or:

tmp1, tmp2 = f1(), f2()
if tmp1 or tmp2: ...

² На самом деле выражение Y if X else Z в Python имеет порядок, слегка отличающийся от выражения X ? Y : Z в языке C, и задействует более читабельные слова. Как сообщают, его отличающийся порядок был выбран в ответ на анализ широко употребляемых шаблонов в коде Python. В соответствии с фольклором такой порядок был выбран отчасти и для того, чтобы препятствовать его чрезмерному использованию бывшими программистами на C! Помните, простое лучше сложного, как в Python, так и в других местах. Если вам приходится упорно работать над упаковкой логики в выражения подобного рода, тогда операторы, возможно, будут более удачным вариантом.