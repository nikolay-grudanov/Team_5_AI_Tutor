---
source_image: page_690.png
page_number: 690
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.56
tokens: 7956
characters: 3143
timestamp: 2025-12-24T01:28:49.828720
finish_reason: stop
---

(http://shop.oreilly.com/product/9780596158118.do) издательства O’Reilly, но онлайновые руководства бесплатны, могут просматриваться в любом веб-браузере (в формате HTML), доступны в других форматах (скажем, в виде справочных файлов Windows) и обновляются каждый раз, когда выходит новый выпуск Python. Дополнительные подсказки ищите в главе 15.

Как работает импортирование

В предыдущем разделе речь шла об импортировании модулей без пояснения, что при этом происходит. Поскольку импортирование лежит в основе структуры программ Python, в данном разделе мы погрузимся в более формальные детали операции импортирования, чтобы сделать процесс менее абстрактным.

Некоторым программистам на языке C нравится сравнивать операции импортирования модулей с директивами #include языка C, но на самом деле поступать так не следует; импортирование в Python — не просто вставка одного текста внутрь другого. Они действительно являются операциями времени выполнения, которые делают три отдельных шага, когда программа впервые импортирует заданный файл.

1. Ищут файл модуля.
2. Компилируют его в байт-код (при необходимости).
3. Выполняют код модуля для создания объектов, которые в нем определены.

Для лучшего понимания импортирования модулей мы исследуем перечисленные шаги по очереди. Имейте в виду, что все три шага проделываются только при первом импортировании модуля во время выполнения программы; последующее импортирование того же самого модуля при выполнении программы обходит все шаги и просто извлекает из памяти уже загруженный объект модуля. Формально Python хранит загруженные модули в таблице по имени sys.modules и просматривает ее в начале операции импортирования. Если модуль в таблице отсутствует, тогда запускается процесс из трех шагов.

1. Поиск файла модуля

Первым делом Python должен найти файл модуля, на который производится ссылка в операторе import. Обратите внимание, что в операторе import из примера в предыдущем разделе указано имя файла без расширения .py и без пути к его каталогу: оператор выглядел как import b, а не что-нибудь вроде import c:\dir1\b.py. Сведения о пути и расширении опускаются намеренно; взамен для нахождения файла модуля, соответствующего оператору import, Python применяет стандартный путь поиска модулей и известные типы файлов¹.

¹ Включать путь и расширение в стандартный оператор import запрещено правилами синтаксиса. Однако импортирование пакетов, которое мы обсудим в главе 24, разрешает операторам import содержать часть пути к каталогу, ведущему к файлу, в виде комплекта имен, разделенных точками. Тем не менее, при нахождении самого левого каталога в пути к пакету импортирование пакетов по-прежнему полагается на нормальный путь поиска модулей (т.е. путь к пакету относителен к какому-то каталогу из пути поиска). Кроме того, в операторах import не допускается использовать синтаксис указания каталогов, специфичный для платформы; такой синтаксис работает только в пути поиска. Также имейте в виду, что вопросы, связанные с путем поиска файлов, неактуальны в случае запуска фиксированных двоичных файлов (обсуждаемых в главе 2), которые обычно встраивают байт-код в двоичный образ.