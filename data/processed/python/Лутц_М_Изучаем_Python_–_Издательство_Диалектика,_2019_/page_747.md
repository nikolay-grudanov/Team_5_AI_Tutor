---
source_image: page_747.png
page_number: 747
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.35
tokens: 7695
characters: 2221
timestamp: 2025-12-24T01:30:24.897773
finish_reason: stop
---

но, это не будет считаться дополнительным требованием. Большинство пакетов Python либо потребуют настройки пути поиска, либо обеспечат ее автоматически с помощью инструментов установки (таких как distutils, которые могут сохранять код пакета в каталоге, присутствующем в стандартном пути поиска модулей, наподобие site-packages; за деталями обращайтесь в главу 22):

# code\pkg\main.py
import spam

# code\pkg\spam.py
import pkg.eggs        # <= Полные пути пакетов работают во всех случаях, Python 2.x+3.x

# code\pkg\eggs.py
print('Eggs' * 4)

c:\code> set PYTHONPATH=C:\code
c:\code> python pkg\main.py    # Из главного сценария: одинаковые результаты в Python 2.x и 3.x
EggsEggsEggsEggs

c:\code> python            # Из какого-то другого места: одинаковые результаты в Python 2.x и 3.x
>>> import pkg.spam
EggsEggsEggsEggs

В отличие от исправления добавлением подкаталога абсолютное импортирование с полными путями вроде показанного также позволяет автономно запускать модули с целью тестирования:

c:\code> python pkg\spam.py    # Индивидуальные модули также допускают запуск в Python 2.x и 3.x
EggsEggsEggsEggs

Пример: приложение для самотестирования модуля (предварительный обзор)

Чтобы подвести итог, вот еще один типичный пример проблемы и ее решение посредством полных путей. Здесь используется распространенная методика, которую мы расширим в следующей главе, но идея достаточно проста для ее предварительного представления (правда, позже у вас может возникнуть желание возвратиться к этому предварительному обзору и снова пересмотреть его).

Рассмотрим приведенные ниже два модуля в каталоге пакета, из которых второй содержит код самотестирования. Выражаясь кратко, атрибут __name__ модуля представляет собой строку '__main__', когда запускается как сценарий верхнего уровня, но не когда импортируется, что позволяет его применять в качестве модуля и сценария:

# code\dualpkg\m1.py
def somefunc():
    print('m1.somefunc')

# code\dualpkg\m2.py
...импортировать здесь m1...    # Заменить реальным оператором импортирования

def somefunc():
    m1.somefunc()
    print('m2.somefunc')
if __name__ == '__main__':
    somefunc()    # Код самотестирования или режима использования как сценария верхнего уровня