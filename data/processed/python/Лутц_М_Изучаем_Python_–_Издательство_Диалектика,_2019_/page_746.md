---
source_image: page_746.png
page_number: 746
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.16
tokens: 7740
characters: 2275
timestamp: 2025-12-24T01:30:24.655892
finish_reason: stop
---

# code\pkg\spam.py
from . import eggs   # <== Не пакет, если здесь присутствует главный сценарий!
# code\pkg\eggs.py
print('Eggs' * 4)
c:\code> python      # Нормально как пакет, но не программа в Python 3.x и 2.x
>>> import pkg.spam
EggsEggsEggsEggs

c:\code> python pkg\main.py
SystemError: ... cannot perform relative import
Системная ошибка: не удается выполнить относительное импортирование
c:\code> python pkg\spam.py
SystemError: ... cannot perform relative import
Системная ошибка: не удается выполнить относительное импортирование

Исправление 1: подкаталоги пакета

В случае смешанного использования подобного рода одно из решений предусматривает изоляцию в подкаталоге всех файлов кроме главного сценария, применяемого только программой. Тогда внутрипакетные операции импортирования продолжают работать во всех версиях Python, вы можете использовать верхний каталог как автономную программу, а вложенный каталог по-прежнему служит пакетом для применения из других программ:

# code\pkg\main.py
import sub.spam

# code\pkg\sub\spam.py
from . import eggs

# code\pkg\sub\eggs.py
print('Eggs' * 4)
c:\code> python pkg\main.py
EggsEggsEggsEggs
c:\code> python
>>> import pkg.sub.spam
EggsEggsEggsEggs

# <= Работает, если переместить модули
#    в пакет ниже главного сценария
# Теперь относительное импортирование пакета
#    работает: в подкаталоге
# Из главного сценария: одинаковые результаты
#    в Python 2.x и 3.x
# Из какого-то другого места: одинаковые
#    результаты в Python 2.x и 3.x

Потенциальный недостаток такой схемы в том, что отсутствует возможность запуска модулей пакета напрямую, чтобы протестировать их посредством встроенного кода самотестирования, хотя взамен можно написать код тестов отдельно и поместить его в родительский каталог:

c:\code> py -3 pkg\sub\spam.py
# Но индивидуальные модули нельзя
#    запускать для тестирования
SystemError: ... cannot perform relative import
Системная ошибка: не удается выполнить относительное импортирование

Исправление 2: абсолютное импортирование с полными путями

В качестве альтернативы в данном случае подошел бы также синтаксис импортирования пакетов с полными путями — он требует наличия в пути поиска каталога, расположенного выше корня пакета, хотя в реалистичном программном пакете, вероят-