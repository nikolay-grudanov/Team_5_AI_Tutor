---
source_image: page_318.png
page_number: 318
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.80
tokens: 7762
characters: 2560
timestamp: 2025-12-24T01:17:10.971014
finish_reason: stop
---

Как вы знаете, функция int транслирует строку цифр в объект целого числа, а выражение спискового включения, представленное в главе 4, может применить ее к каждому элементу в списке за раз (списковые включения рассматриваются позже в книге). Обратите внимание, что мы не обязаны выполнять rstrip для удаления символа \n в конце последней части; int и ряд других преобразователей молча игнорируют пробельные символы вокруг цифр.

Наконец, чтобы преобразовать список и словарь, сохраненные в третьей строке файла, мы можем прогнать их через eval — встроенную функцию, которая трактует строку как порцию исполняемого программного кода (формально как строку, содержащую выражение Python):

```python
>>> line = F.readline()
>>> line
"[1, 2, 3]$('a': 1, 'b': 2)\n"
>>> parts = line.split('$')    # Разбиение (разбор) по $
>>> parts
['[1, 2, 3]', "'{'a': 1, 'b': 2}\n"]
>>> eval(parts[0])             # Преобразование в объект любого типа
[1, 2, 3]
>>> objects = [eval(P) for P in parts]   # То же самое для всего списка
>>> objects
[[1, 2, 3], {'a': 1, 'b': 2}]
```

Поскольку конечным результатом всего разбора и преобразования является список нормальных объектов Python, а не строк, теперь мы можем применять к ним списковые и словарные операции в своем сценарии.

Хранение собственных объектов Python: модуль pickle

Использование функции eval для преобразования строк в объекты, как демонстрировалось выше в коде, представляет собой мощный прием. Фактически временами он чрезчур мощный. Функция eval благополучно выполнит любое выражение Python — даже то, которое способно удалить все файлы на вашем компьютере, располагая необходимыми полномочиями! Если вы действительно хотите сохранять собственные объекты Python, но не можете доверять источнику данных в файле, тогда идеально подойдет стандартный библиотечный модуль Python по имени pickle.

Модуль pickle является более развитым инструментом, который позволяет сохранять почти любой объект Python в файл напрямую, не требуя с нашей стороны каких-либо преобразований в и из строки. Он похож на крайне универсальную утилиту форматирования и разбора данных. Скажем, вот как сохранить словарь в файл:

```python
>>> D = {'a': 1, 'b': 2}
>>> F = open('datafile.pkl', 'wb')
>>> import pickle
>>> pickle.dump(D, F)    # Сохранение любого объекта в файл с помощью pickle
>>> F.close()
```

Чтобы позже получить словарь обратно, мы просто снова применяем pickle для его воссоздания:

```python
>>> F = open('datafile.pkl', 'rb')
>>> E = pickle.load(F)    # Загрузка любого объекта из файла
>>> E
{'a': 1, 'b': 2}
```