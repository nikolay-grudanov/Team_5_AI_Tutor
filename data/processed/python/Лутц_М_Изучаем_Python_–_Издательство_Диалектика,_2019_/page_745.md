---
source_image: page_745.png
page_number: 745
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.67
tokens: 7763
characters: 2493
timestamp: 2025-12-24T01:30:24.422835
finish_reason: stop
---

Проблема

Например, в Python 2.x один и тот же каталог обычно используется и как программа, и как пакет в случае применения нормальных операторов импортирования без точек. Когда каталог используется как программа, то поиск модулей для операций импортирования производится в домашнем каталоге сценария, а когда как пакет, то поиск модулей для внутрипакетных операций импортирования полагается на правило Python 2.x относительного и затем абсолютного поиска. Тем не менее, в Python 3.x прием работает не полностью — в пакетном режиме простые операции импортирования больше не загружают модули из того же самого каталога, если только это не контейнер файла или текущий рабочий каталог (и потому присутствует в sys.path).

Ниже все демонстрируется в действии с минимальным объемом кода (ради краткости здесь также не показаны файлы __init__.py каталогов пакета, обязательные до версии Python 3.3, и для разнообразия применяется запускающий модуль Windows, появившийся в Python 3.3):

# code\pkg\main.py
import spam

# code\pkg\spam.py
import eggs

# code\pkg\eggs.py
print('Eggs' * 4)

c:\code> python pkg\main.py
EggsEggsEggsEggs
c:\code> python pkg\spam.py
EggsEggsEggsEggs
c:\code> py -2

>>> import pkg.spam
EggsEggsEggsEggs
C:\code> py -3
>>> import pkg.spam
ModuleNotFoundError: No module named 'eggs'
Ошибка отсутствия модуля: модуль по имени eggs не найден

# <== Работает, если находится в "."
# домашний каталог главного сценария

# Но не загружает этот файл, когда используется как пакет в Python 3.x!
# Нормально в случае применения как программы в Python 2.x и 3.x

# Нормально в случае использования как пакета в Python 2.x:
# относительный, затем абсолютный
# Python 2.x: при простых операциях импортирования поиск выполняется сначала в каталоге пакета

# Но в Python 3.x терпит неудачу с поиском файла здесь: только абсолютный
# Python 3.x: при простых операциях импортирования поиск выполняется только в текущем рабочем каталоге и sys.path

Следующим шагом могло бы стать добавление необходимого синтаксиса относительного импортирования для использования Python 3.x, но тут он не поможет. В приведенном далее решении сохраняется единственный каталог для главного сценария верхнего уровня и модулей пакета, а также добавляются требуемые точки. Теперь это работает в Python 2.x и 3.x, когда каталог импортируется как пакет, но терпит неудачу, когда он применяется как каталог программы (включая попытки запустить модуль напрямую в качестве сценария):

# code\pkg\main.py
import spam