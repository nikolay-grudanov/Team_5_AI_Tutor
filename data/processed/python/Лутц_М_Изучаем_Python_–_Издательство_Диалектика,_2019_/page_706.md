---
source_image: page_706.png
page_number: 706
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.19
tokens: 7770
characters: 2732
timestamp: 2025-12-24T01:29:18.769186
finish_reason: stop
---

В Python 3.x описанная здесь форма оператора from ...* может использоваться только на верхнем уровне файла модуля, но не внутри функции. В Python 2.x ее разрешено применять внутри функции, но в любом случае выдается предупреждение. На практике случаи использования оператора from ...* внутри функции встречаются редко; его присутствие внутри функции делает невозможным для Python статическое обнаружение переменных до запуска функции. Передовой опыт рекомендует во всех версиях Python перечислять все операции импортирования в начале файла модуля; это не требование, но когда они находятся в начале файла, их легче заметить.

Операции импортирования происходят только однократно

Когда новички начинают работать с модулями, то они по обыкновению задают один распространенный вопрос: почему мои операции импортирования перестали работать? Они часто сообщают о том, что первая операция импортирования отработала успешно, но последующие операции импортирования в интерактивном сеансе (или при запуске программы), похоже, не вызывали эффекта. На самом деле, какой-либо эффект и не предполагался. В этом разделе объясняется причина.

Модули загружаются и запускаются при выполнении первого оператора import или from и только первого. Так было задумано — поскольку импортирование является затратной операцией, по умолчанию Python делает его только один раз на файл и однократно на процесс. Более поздние операции импортирования просто извлекают объект уже загруженного модуля.

Код инициализации

В качестве одного последствия, из-за того, что код верхнего уровня в файле модуля обычно выполняется только один раз, вы можете применять его для инициализации переменных. Взгляните на содержимое файла simple.py:

print('hello')
spam = 1    # Инициализировать переменную

В приведенном примере операторы print и = выполняются, когда модуль импортируется в первый раз, и переменная spam инициализируется во время импортирования:

% python
>>> import simple    # Первая операция импортирования: загружает
# и выполняет код файла
hello
>>> simple.spam     # Присваивание создает атрибут
1

Вторая и последующие операции импортирования не выполняют код модуля повторно; они всего лишь извлекают уже созданный объект модуля из внутренней таблицы модулей Python. Таким образом, переменная spam не будет инициализироваться заново:

>>> simple.spam = 2   # Изменение атрибута в модуле
>>> import simple     # Просто извлекает объект уже загруженного модуля
>>> simple.spam       # Код модуля повторно не выполняется:
# атрибут остался неизменившимся

Разумеется, иногда вы действительно хотите, чтобы код модуля выполнился повторно при последующей операции импортирования. Позже в главе мы покажем, как это сделать с помощью функции reload в Python.