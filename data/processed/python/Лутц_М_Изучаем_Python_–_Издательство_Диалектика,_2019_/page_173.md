---
source_image: page_173.png
page_number: 173
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.33
tokens: 7907
characters: 3030
timestamp: 2025-12-24T01:12:20.800006
finish_reason: stop
---

Разнородные типы преобразуются

Помимо смешивания операций в выражениях допускается также смешивать числовые типы. Скажем, вы можете сложить целое число и число с плавающей точкой:

40 + 3.14

Но возникает еще один вопрос: какой тип будет у результата — целый или с плавающей точкой? Ответ прост, особенно если ранее вы использовали почти любой другой язык: в выражениях с разнородными числами типами Python сначала преобразует операнды к типу самого сложного операнда и затем выполняет операции над операндами того же самого типа. Такое поведение похоже на преобразования типов в языке C.

Вот как в Python оценивается сложность числовых типов: целые числа проще чисел с плавающей точкой, которые в свою очередь проще комплексных чисел. Таким образом, когда целое число смешивается с числом с плавающей точкой, как в предыдущем примере, то целое число преобразуется в значение с плавающей точкой и математика с плавающей точкой выдает результат с плавающей точкой:

>>> 40 + 3.14    # Преобразование целого в число с плавающей точкой,
# математика и результат с плавающей точкой
43.14

Точно так же любое выражение с разнородными типами, где один операнд является комплексным числом, приводит к преобразованию другого операнда в комплексное число и получению результата — комплексного числа. В Python 2.x нормальные целые числа также преобразуются в длинные целые всякий раз, когда их значения оказываются слишком большими, чтобы уместиться в нормальное целое; в Python 3.x все целые числа относятся к длинным целым.

Вызывая встроенные функции, типы можно преобразовывать вручную:

>>> int(3.1415)    # Сокращает число с плавающей точкой до целого
3
>>> float(3)      # Преобразует целое число в число с плавающей точкой
3.0

Тем не менее, как правило, в этом нет нужды: поскольку Python автоматически преобразовывает операнды в более сложный тип внутри выражения, результаты оказываются обычно теми, которые желательны.

Кроме того, имейте в виду, что все преобразования между разнородными типами применяются только при смешивании в выражении числовых типов (например, целого и с плавающей точкой), в том числе с использованием числовых операций и операций сравнения. В общем случае Python не выполняет автоматическое преобразование между другими типами. Скажем, добавление строки к целому числу приводит к ошибке, если только не преобразовать одно в другое вручную; дождитесь примера в главе 7, когда мы займемся строками.

В Python 2.x разнородные нечисловые типы могут сравниваться, но никаких преобразований не происходит — разнородные типы сравниваются в соответствии с правилом, которое выглядит детерминированным, но эстетически непривлекательным: оно предусматривает сравнение строковых имен типов объектов. В Python 3.x сравнения по абсолютной величине для разнородных нечисловых типов запрещены и вызывают исключения. Обратите внимание, что это применяется только к операциям сравнения, таким как >; использовать другие операции вроде + с разнородными нечисловыми типами не разрешено ни в Python 3.x, ни в Python 2.x.