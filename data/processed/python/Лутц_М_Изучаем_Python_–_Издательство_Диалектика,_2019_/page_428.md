---
source_image: page_428.png
page_number: 428
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.86
tokens: 7692
characters: 2339
timestamp: 2025-12-24T01:20:43.022518
finish_reason: stop
---

Однако вы можете делать ручную индексацию также и в цикле for, если примите функцию range с целью генерации списка индексов для прохода по ним. Процесс многошаговый, но его вполне достаточно для генерации смещений, а не элементов по этим смещениям:

```python
>>> X
'spam'
>>> len(X)                # Длина строки
4
>>> list(range(len(X)))    # Все допустимые смещения в X
[0, 1, 2, 3]
>>>
>>> for i in range(len(X)): print(X[i], end=' ')   # Ручная итерация
# посредством range/len
...
spam

Обратите внимание, что поскольку в примере производится проход по списку смещений в X, а не по действительным элементам X, внутри цикла для извлечения каждого элемента необходима индексация в X. Тем не менее, если это кажется излишним, то причина в том, что в данном примере настолько трудная работа попросту не нужна.

Хотя комбинации range/len в такой роли достаточно, вряд ли стоит считать ее лучшим вариантом. Код может выполняться медленнее и требует большего объема работы, нежели оправдано. Если только не существует специального требования индексации, то лучше использовать простую форму цикла for в Python:

>>> for item in X: print(item, end=' ')   # По возможности применяйте
# простую итерацию

В качестве общего правила запомните: всякий раз, когда это возможно, применяйте for вместо while, и не используйте вызовы range в циклах for кроме крайних случаев. Более простое решение практически всегда будет лучшим. Однако, как и в каждом хорошем правиле, есть масса исключений — что и демонстрируется в следующем разделе.

Тасование последовательностей: range и len

Хотя и не идеально для простого просмотра последовательностей, использованный в предыдущем примере кодовый шаблон позволяет реализовывать специализированные виды обхода, когда они необходимы. Скажем, некоторые алгоритмы могут за- действовать переупорядочение последовательностей — для генерации вариантов при поиске, для проверки эффекта от разного упорядочения значений и т.д. Такие случаи могут требовать смещения, чтобы разделять последовательности и снова собирать их вместе, как показано ниже; целые числа диапазона предоставляют счетчик повторений в первом и позицию для нарезания во втором:

>>> S = 'spam'
>>> for i in range(len(S)):
...     S = S[1:] + S[:1]      # Для счетчиков повторений 0..3
...     print(S, end=' ')
...
pams amsp mspa spam

>>> S
'spam'