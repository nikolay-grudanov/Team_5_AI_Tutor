---
source_image: page_573.png
page_number: 573
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.66
tokens: 7903
characters: 3209
timestamp: 2025-12-24T01:25:19.590378
finish_reason: stop
---

часто будут наилучшими способами изоляции внешних зависимостей небольшим количеством хорошо известных мест в коде.

• Связность: применяйте глобальные переменные, только когда они по-настоящему нужны. Глобальные переменные (т.е. имена во включающем модуле) обычно являются неудачным способом взаимодействия для функций. Они могут создать зависимости и проблемы синхронизации, которые затрудняют отладку, изменение и многократное использование программ.

• Связность: не модифицируйте изменяемые аргументы, если только такое изменение не ожидается вызывающим кодом. Функции могут модифицировать части передаваемых изменяемых объектов, но это (как и глобальные переменные) создает сильную связность между вызывающим и вызываемым кодом, которая может сделать функцию слишком специфичной и хрупкой.

• Сцепление: каждая функция должна иметь единственное унифицированное назначение. При надлежащем проектировании каждая функция должна делать что-то одно — то, что может быть резюмировано в простом повествовательном предложении. Если такое предложение оказывается слишком широким (например, "данная функция реализует всю мою программу") или содержит много союзов (скажем, "данная функция дает сотруднику повышение и отправляет заказ пиццы"), тогда имеет смысл подумать о разбиении функции на несколько отдельных более простых функций. В противном случае не удастся повторно применять код, который лежит в основе действий, смешанных в функции.

• Размер: каждая функция должна быть относительно небольшой. Цель естественным образом следует из предыдущей цели, но если ваши функции начали занимать несколько страниц на экране редактора, то видимо пришло время их разбить. Прежде всего, учитывая присущую коду Python лаконичность, длинная или глубоко вложенная функция зачастую служит признаком проблем с проектным решением. Сохраняйте функции простыми и короткими.

• Связность: избегайте прямого изменения переменных из другого файла модуля. Мы представляли эту концепцию в главе 17 и возвратимся к ней в следующей части книги, когда сосредоточим внимание на модулях. Тем не менее, для справки помните о том, что изменение переменных через границы файлов приводит к появлению связности между модулями подобно тому, как глобальные переменные связывают функции — модули становятся труднее понимать и многократно использовать. При любой возможности применяйте функции доступа вместо прямых операторов присваивания.

На рис. 19.1 иллюстрируются способы взаимодействия функций с внешним миром; входные данные могут поступать из элементов слева, а результаты отправляться в любой форме справа. Опытные проектировщики функций всякий раз, когда возможно, предпочитают использовать для входных данных только аргументы, а для выходных данных операторы return.

Конечно, существует масса исключений из перечисленных выше принципов проектирования, включая те, которые имеют отношение к поддержке объектно-ориентированного программирования в Python. Как вы увидите в части VI, классы Python полагаются на модификацию переданного изменяемого объекта — функции класса устанавливают атрибуты автоматически передаваемого аргумента по имени self, чтобы изменять информацию о состоянии для каждого объекта (например, self.name='bob').