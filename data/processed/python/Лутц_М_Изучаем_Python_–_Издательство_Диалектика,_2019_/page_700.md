---
source_image: page_700.png
page_number: 700
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.29
tokens: 7970
characters: 3196
timestamp: 2025-12-24T01:29:08.497682
finish_reason: stop
---

Приоритеты при выборе

При наличии файлов b.py и b.so в разных каталогах Python всегда будет загружать тот из них, который он найдет в первом (самом левом) каталоге внутри пути поиска модулей во время просмотра списка sys.path. Но что произойдет, если Python обнаружит файлы b.py и b.so в том же самом каталоге? В таком случае Python следует стандартному порядку выбора, хотя он и не гарантированно останется одинаковым с течением времени либо между реализациями. В целом вы не должны полагаться на то, какой тип файла Python выберет внутри заданного каталога — назначайте модулям несовпадающие имена или конфигурируйте путь поиска модулей так, чтобы сделать предпочтения выбора модулей явными.

Привязки импортирования и файлы ZIP

Обычно операции импортирования работают так, как описано в этом разделе — они ищут и загружают файлы на компьютере. Однако с применением привязок импортирования можно переопределять многое из того, что операции импортирования делают в Python. Привязки можно использовать для того, чтобы заставить операции импортирования предпринимать разную полезную работу, такую как загрузка файлов их архивов, выполнение расшифровки и т.д.

Фактически Python сам задействует такие привязки, чтобы разрешить импортирование файлов прямо из ZIP-архивов: архивированные файлы автоматически извлекаются на стадии импортирования, когда файл .zip выбирается из пути поиска импортируемых модулей. Скажем, в наши дни одним из каталогов в списке sys.path является файл .zip, как было показано выше. За дополнительными деталями обращайтесь к описанию встроенной функции __import__ в руководстве по стандартной библиотеке Python; функция __import__ представляет собой настраиваемый инструмент, который в действительности запускают операторы import.

Также ознакомьтесь с нововведениями, появившимися в Python 3.3 и последующих версиях, чтобы выяснить, что изменилось в плане импортирования. Вкратце, начиная с версии Python 3.3, функция __import__ реализована как importlib.__import__, отчасти для унификации и чтобы более четко показать ее реализацию.

Второй из двух вызовов также помещен внутрь importlib.import_module — инструмента, который согласно текущему руководству по Python в целом предпочтительнее, чем __import__, для прямых вызовов импортирования по строке с именем (прием, обсуждаемый в главе 25). В настоящее время работают оба вызова, хотя функция __import__ поддерживает настраиваемые операции импортирования за счет замены встроенной области видимости (см. главу 17), а другие методики поддерживают подобные роли. Дополнительные подробности ищите в руководстве по стандартной библиотеке Python.

Файлы оптимизированного байт-кода

Наконец, в Python поддерживается понятие файлов оптимизированного байт-кода .pyo, которые создаются и запускаются с помощью флага командной строки -O интерпретатора Python, а также автоматически генерируются рядом инструментов установки. Но поскольку файлы .pyo выполняются лишь слегка быстрее (обычно на 5%) нормальных файлов .pyc, они применяются нечасто. Например, система PyPy (см. главы 2 и 21) обеспечивает более существенное ускорение. Дополнительные детали о файлах .pyo приведены в приложении А второго тома и в главе 36 (том 2).