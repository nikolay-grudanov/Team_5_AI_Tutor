---
source_image: page_393.png
page_number: 393
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.65
tokens: 7808
characters: 2883
timestamp: 2025-12-24T01:19:51.023203
finish_reason: stop
---

import sys
sys.stdout = FileFaker()
print(someObjects) # Отправка методу write класса

Прием работает, потому что print — это то, что в следующей части книги мы будем называть полиморфной операцией; ее не заботит, чем является sys.stdout, а лишь то, имеется ли метод (т.е. интерфейс) по имени write. Такое перенаправление на объекты становится даже более простым в случае использования ключевого аргумента file в Python 3.X и расширенной посредством >> формы print в Python 2.X, потому что явно переустанавливать sys.stdout не требуется — нормальные операции print будут по-прежнему направляться потоку stdout:

myobj = FileFaker() # Python 3.X: перенаправление
print(someObjects, file=myobj) # на объект для одной операции print
# Не переустанавливает sys.stdout
myobj = FileFaker() # Python 2.X: тот же самый эффект
print >> myobj, someObjects # Не переустанавливает sys.stdout

Встроенная функция input в Python 3.X (называемая raw_input в Python 2.X) читает из файла sys.stdin, так что перехватывать запросы на чтение можно похожим образом, применяя классы, которые взамен реализуют методы, подобные файловому методу read. За дополнительными сведениями об этой функции обращайтесь к примерам использования input и while в главе 10.

Обратите внимание, что поскольку выводимый текст направляется в поток stdout, это также является способом вывода HTML-страниц ответов в CGI-сценариях, применяемых в веб-сети, и позволяет обычным образом перенаправлять ввод и вывод сценариев Python в командной оболочке операционной системы:

python script.py < inputfile > outputfile
python script.py | filterProgram

Инструменты перенаправления операций print в Python по существу представляют собой альтернативы таких синтаксических форм командной оболочки на чистом Python. Информацию о CGI-сценариях и синтаксических формах командной оболочки ищите на других ресурсах.

Резюме

В главе мы начали углубленное рассмотрение операторов Python с исследования присваиваний, выражений и операций вывода. Хотя эти операторы в целом просты в использовании, они имеют альтернативные формы, которые при своей необходимости часто удобны на практике — скажем, операторы дополненного присваивания и перенаправляющие формы операций print позволяют избежать написания определенного кода вручную. Попутно также проводились исследования синтаксиса именования переменных, методик перенаправления потоков и распространенных ошибок, которых следует избегать, таких как присваивание результата вызова метода append обратно переменной.

В следующей главе мы продолжим наш тур по операторам заполнением недостающих деталей, касающихся оператора if, который является главным инструментом выбора в Python; там мы также более глубоко рассмотрим синтаксическую модель Python и подробнее обсудим поведение булевых выражений. Однако прежде чем двигаться дальше, проверьте свои знания, ответив на контрольные вопросы главы.