---
source_image: page_517.png
page_number: 517
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.05
tokens: 8003
characters: 3570
timestamp: 2025-12-24T01:23:34.999458
finish_reason: stop
---

целиком. В таком случае вы не сможете использовать одну из функций без привлечения другой. Они зависят от глобальной переменной — т.е. связаны с ней. Именно так выглядит проблема с глобальными переменными: они обычно делают код более сложным для понимания и многократного применения, чем код, состоящий из само-достаточных функций, которые полагаются на локальные переменные.

С другой стороны, исключая инструменты вроде замыканий вложенных областей видимости или объектно-ориентированное программирование с помощью классов, глобальные переменные в Python предлагают наиболее прямолинейный способ сохранения разделяемой информации о состоянии — информации, которую функция должна запоминать для использования при вызове в следующий раз. После возвращения потока управления из функции локальные переменные исчезают, но глобальные переменные остаются. Как вы увидите позже, такой цели можно также достичь посредством других методик, которые допускают наличие множества копий сохраненной информации, но в целом они гораздо сложнее помещения значений в глобальную область видимости для сохранения в простых ситуациях, когда данный подход применим.

Более того, некоторые программы назначают отдельный модуль для сбора в нем глобальных переменных; так как это ожидается, оно не настолько вредно. Программы, использующие многопоточность для организации параллельной обработки в Python, также обычно полагаются на глобальные переменные — они становятся разделяемой памятью между функциями, выполняющимися в параллельных потоках, и потому действуют как коммуникационный механизм2.

Однако на данный момент, особенно если вы только начинаете изучать программирование, старайтесь избегать применения глобальных переменных везде, где только можно — они затрудняют понимание и многократное использование программ, а также не работают в ситуациях, когда одной копии сохраненных данных недостаточно. Попробуйте взамен обмениваться данными с помощью передаваемых аргументов и возвращаемых значений. Пройдет полгода, и вы с коллегами будете счастливы, что поступили так.

Проектирование программы:
минимизируйте количество межфайловых изменений

Существует еще одна проблема проектирования, касающаяся областей видимости: хотя мы можем изменять переменные в другом файле напрямую, обычно мы не должны это делать. Файлы модулей были представлены в главе 3 и более глубоко раскрываются в следующей части книги. В качестве иллюстрации их взаимосвязи с областями видимости рассмотрим приведенные ниже два файла модулей:

# first.py
X = 99    # Этому коду ничего не известно о second.py

2 Многопоточность обеспечивает выполнение вызовов функций параллельно с остальной программой и поддерживается в Python стандартными библиотечными модулями _thread, threading и queue (thread, threading и Queue в Python 2.x). Поскольку все потоковые функции выполняются в том же самом процессе, глобальные области видимости часто служат одной из форм разделяемой памяти между ними (потоки могут разделять имена в глобальных областях видимости, а также объекты в пространстве памяти процесса). Многопоточность обычно используется для длительно выполняющихся задач в графических пользовательских интерфейсах, чтобы реализовать неблокирующие операции и довести до максимума производительность центрального процессора. Многопоточность выходит за рамки тем, рассматриваемых в книге; за более подробными сведениями обращайтесь к руководству по библиотеке Python и материалам, перечисленным в предисловии (таким как книга Programming Python изданная O'Reilly (http://shop.oreilly.com/product/9780596158118.do)).