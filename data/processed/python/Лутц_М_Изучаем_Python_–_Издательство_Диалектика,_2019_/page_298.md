---
source_image: page_298.png
page_number: 298
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.92
tokens: 7840
characters: 2575
timestamp: 2025-12-24T01:16:33.158038
finish_reason: stop
---

Словарные представления и множества

Также в отличие от списковых результатов Python 2.x объекты представлений Python 3.x, возвращаемые методом keys, подобны множествам и поддерживают распространенные операции над множествами, такие как пересечение и объединение; представления values не подобны множествам, но результаты items подобны, если их пары (ключ, значение) уникальны и хешируемы (неизменяемы). Учитывая тот факт, что множества ведут себя очень похоже на словари без значений (и даже могут записываться в фигурных скобках как словари в Python 3.x/2.7), мы имеем дело с логической симметрией. Согласно главе 5 элементы множества неупорядочены, уникальны и неизменяемы в точности как ключи словаря.

Вот как выглядят представления ключей, когда используются в операциях над множествами (здесь продолжается сеанс из предыдущего раздела); представления значений словаря никогда не будут подобными множествам, потому что их элементы не обязательно уникальны или неизменяемы:

```python
>>> K, V
(dict_keys(['c', 'a']), dict_values([3, 1]))
>>> K | {'x': 4} # Представления ключей (и некоторых элементов) подобны множествам
{'c', 'x', 'a'}
>>> V & {'x': 4}
TypeError: unsupported operand type(s) for &: 'dict_values' and 'dict'
Ошибка типа: неподдерживаемые типы операндов для &: dict_values и dict
>>> V & {'x': 4}.values()
TypeError: unsupported operand type(s) for &: 'dict_values' and 'dict_values'
Ошибка типа: неподдерживаемые типы операндов для &: dict_values и dict_values
```

В операциях над множествами представления могут смешиваться с другими представлениями, множествами и словарями; в таком контексте словари трактуются также, как их представления ключей:

```python
>>> D = {'a': 1, 'b': 2, 'c': 3}
>>> D.keys() & D.keys()    # Пересечение представлений ключей
{'b', 'c', 'a'}
>>> D.keys() & {'b'}       # Пересечение представления ключей и множества
{'b'}
>>> D.keys() & {'b': 1}    # Пересечение представления ключей и словаря
{'b'}
>>> D.keys() | {'b', 'c', 'd'} # Объединение представления ключей и множества
{'b', 'c', 'a', 'd'}
```

Представления элементов тоже подобны множествам, если они хешируемы, т.е. если содержат только неизменяемые объекты:

```python
>>> D = {'a': 1}
>>> list(D.items()) # Представления элементов подобны множествам, если хешируемы
[('a', 1)]
>>> D.items() | D.keys()    # Объединение представления и представления
{('a', 1), 'a'}
>>> D.items() | D           # Словарь трактуется так же, как его ключи
{('a', 1), 'a'}
>>> D.items() | {('c', 3), ('d', 4)}   # Множество пар "ключ/значение"
{('d', 4), ('a', 1), ('c', 3)}
```