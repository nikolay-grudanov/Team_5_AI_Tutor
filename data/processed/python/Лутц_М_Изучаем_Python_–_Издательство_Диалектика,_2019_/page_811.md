---
source_image: page_811.png
page_number: 811
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.86
tokens: 7801
characters: 2203
timestamp: 2025-12-24T01:32:40.574193
finish_reason: stop
---

3 is prime
2 is prime
1 not prime
-3 not prime

Функция prime по-прежнему не слишком пригодна к многократному применению (она могла бы возвращать значения, а не выводить их), но для проведения экспериментов ее вполне достаточно. Она также не выдает математически строгое простое число (работает для чисел с плавающей точкой) и не особенно эффективна. Усовершенствования оставляются в качестве упражнений для математически подкованных читателей. (Подсказка: цикл for по range(y, 1, -1) может быть чуть быстрее, чем while, но настоящим узким местом здесь является алгоритм.) Для измерения времени выполнения альтернативных вариантов используйте любительский модуль timer или стандартный библиотечный модуль timeit и кодовые шаблоны, которые должны быть похожи на применяемые в разделах главы 21, посвященных измерению времени (просмотрите также решение упражнения 10).

9. Итерации и включения. Вот вариант кода, который вы должны написать; правда, я предпочитаю одно, но вы возможно другое:

>>> values = [2, 4, 9, 16, 25]
>>> import math
>>> res = []
>>> for x in values: res.append(math.sqrt(x))
...
>>> res
[1.4142135623730951, 2.0, 3.0, 4.0, 5.0]
>>> list(map(math.sqrt, values))
[1.4142135623730951, 2.0, 3.0, 4.0, 5.0]
>>> [math.sqrt(x) for x in values]
[1.4142135623730951, 2.0, 3.0, 4.0, 5.0]
>>> list(math.sqrt(x) for x in values)
[1.4142135623730951, 2.0, 3.0, 4.0, 5.0]

10. Измерение времени выполнения инструментов. Ниже показан код, который я написал для измерения времени выполнения трех реализаций, вычисляющих квадратный корень, наряду с результатами, полученными в CPython 3.7 и 2.7, а также PyPy 1.9 (реализует Python 2.7). Каждый тест выбирает лучшее время из трех запусков; каждый запуск берет суммарное время, требуемое для вызова тестовой функции 1 000 раз; и каждая тестовая функция выполняет 1 000 итераций. Последний результат каждой функции выводится для проверки, что все три делают ту же самую работу:

# Файл timer2.py (Python 2.x и 3.x)
...содержимое такое же, как было показано в главе 21...
# Файл timesqrt.py
import sys, timer2
reps = 10000
repslist = range(reps) # Для Python 2.x
from math import sqrt # Не math.sqrt: добавляет время извлечения атрибутов
def mathMod():