---
source_image: page_629.png
page_number: 629
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.79
tokens: 7805
characters: 2471
timestamp: 2025-12-24T01:26:55.213124
finish_reason: stop
---

Генераторные функции сохраняют состояние своих локальных областей видимости, пока активны, минимизируют требования относительно пространства памяти и разделяют работу на более короткие временные интервалы. Будучи полноценными функциями, они также весьма универсальны. Важно отметить, что циклы for и другие итерационные инструменты работают одинаково при проходе по реально существующему списку и генератору значений — функция может свободно выбирать одну из двух схем и даже изменять стратегию в будущем.

Генераторные выражения

Ранее уже было показано, что генераторные выражения (включения в круглых, а не в квадратных скобках) также генерируют значения по запросу и сохраняют свое локальное состояние. Они не настолько гибкие, как полные функции, но из-за автоматической выдачи своих значений выражения часто могут оказываться лаконичнее в специфических сценариях использования наподобие следующего:

```python
>>> S
'spam'
>>> G = (S[i:] + S[:i] for i in range(len(S)))    # Эквивалентное
#    генераторное выражение
>>> list(G)
['spam', 'pams', 'amsp', 'mspa']
```

Обратите внимание, что мы не можем здесь применять оператор присваивания из первой версии генераторной функции, т.к. операторы в генераторных выражениях не разрешены. В итоге их область действия несколько сужается, но во многих ситуациях выражения способны выполнять похожую работу, как иллюстрируется в настоящем разделе. Чтобы обобщить генераторное выражение для произвольного объекта, его понадобится поместить внутрь простой функции, принимающей аргумент и возвращающей генератор, который его использует:

```python
>>> F = lambda seq: (seq[i:] + seq[:i] for i in range(len(seq)))
>>> F(S)
<generator object <genexpr> at 0x0000000029883F0>
>>>
>>> list(F(S))
['spam', 'pams', 'amsp', 'mspa']
>>> list(F([1, 2, 3]))
[[1, 2, 3], [2, 3, 1], [3, 1, 2]]
>>> for x in F((1, 2, 3)):
    print(x, end=' ')
(1, 2, 3) (2, 3, 1) (3, 1, 2)
```

Клиент для тестирования

Наконец, мы можем применять генераторную функцию или ее эквивалент в виде выражения в функции tester из главы 18 для производства перетасованных аргументов — функция перемешивания последовательностей становится инструментом, который допускается использовать в других контекстах:

```python
# Файл scramble.py
def scramble(seq):
    for i in range(len(seq)):
        yield seq[i:] + seq[:i]    # Генераторная функция
        # Выдача по одному элементу на итерацию
scramble2 = lambda seq: (seq[i:] + seq[:i] for i in range(len(seq)))
```