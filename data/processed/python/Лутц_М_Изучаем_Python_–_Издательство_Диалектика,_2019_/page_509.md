---
source_image: page_509.png
page_number: 509
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.55
tokens: 7910
characters: 3002
timestamp: 2025-12-24T01:23:17.030292
finish_reason: stop
---

Поскольку имена должны быть присвоены, прежде чем их можно будет использовать (как объяснялось в главе 6), в данной модели ничего не происходит автоматически: присваивания всегда однозначно определяют области видимости.

На рис. 17.1 проиллюстрированы четыре области видимости Python. Обратите внимание, что уровню поиска второй области видимости (E — области видимости объемлющих def или lambda) формально может соответствовать сразу несколько уровней поиска. Такая ситуация возникает, когда одни функции вкладываютя внутрь других функций, и расширяется оператором nonlocal в Python 3.X¹.

Встроенная область видимости (Python)
Имена, предварительно присвоенные в модуле builtins: open, range, SyntaxError...

Глобальная область видимости (модуль)
Имена, присвоенные на верхнем уровне файла модуля или объявленные глобальными в операторе def внутри файла.

Локальные области видимости объемлющих функций
Имена в локальной области видимости любых объемлющих функций (def или lambda), от самой внутренней до наружной.

Локальная область видимости (функция)
Имена, так или иначе присвоенные внутри функции (def или lambda) и не объявленные глобальными в этой функции.

Рис. 17.1. Правило поиска в областях видимости LEGB. Когда производится ссылка на переменную, Python ищет ее в следующем порядке: в локальной области видимости, в локальных областях видимости объемлющих функций, в глобальной области видимости и во встроенной области видимости. Поиск прекращается при первом нахождении. Обычно область видимости переменной определяется местом в коде, где она присваивается. Объявления nonlocal в Python 3.X также способны принудительно отображать имена на области видимости объемлющих функций независимо от того, были имена присвоены или нет

Также имейте в виду, что приведенные правила применяются только к простым именам переменных (например, spam). В частях V и VI вы увидите, что уточненные имена атрибутов (скажем, объект.spam) существуют в индивидуальных объектах и следуют совершенно другому набору правил поиска, нежели тот, который был раскрыт здесь. Ссылки на имена атрибутов, указываемые после точек (.), приводят к поиску в одном или большем количестве объектов, а не в областях видимости, и фактически

¹ В первом издании книги правило поиска в областях видимости называлось "правилом LGB". Уровень E объемлющего оператора def появился в Python позже, чтобы избавиться от необходимости в явной передаче имен из объемлющей области видимости с помощью стандартных аргументов — тема, вызывающая обычно незначительный интерес у новичков в Python, которую мы рассмотрим позже в книге. Так как теперь для этой области видимости предназначен оператор nonlocal в Python 3.X, правило поиска в наши дни вероятно лучше было бы называть "LNGB", но обратная совместимость важна и в книгах. Нынешняя форма данной аббревиатуры также не учитывает более новые и малоизвестные области видимости ряда включений и обработчиков исключений, но аббревиатуры длиннее четырех букв сводят на нет их предназначение!