---
source_image: page_103.png
page_number: 103
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.47
tokens: 7853
characters: 2732
timestamp: 2025-12-24T01:10:13.084642
finish_reason: stop
---

Позже в книге мы углубимся в такие архитектурные детали. В настоящей главе нас больше всего интересует тот факт, что операции импорта в качестве финального шага выполняют код в загружаемом файле. Из-за этого импортирование файла является еще одним способом его запуска.

Например, если вы начнете интерактивный сеанс (из командной строки системы или как-то иначе), тогда сможете запустить созданный ранее файл script1.py с помощью простого импорта (сначала удалите строку с вызовом input, добавленную в предыдущем разделе, а то придется без веской причины нажимать <Enter>):

C:\code> C:\python33\python
>>> import script1
win32
1267650600228229401496703205376
Spam!Spam!Spam!Spam!Spam!Spam!Spam!Spam!

Сценарий работает, но по умолчанию только однократно на сеанс (в действительности на процесс — выполнение программы). После первого импорта дальнейшие операции импорта ничего не делают, даже если вы измените и сохраните файл исходного кода модуля в другом окне:

...Изменение script1.py в окне текстового редактора для вывода 2 ** 16...

>>> import script1
>>> import script1

Так было задумано; импорт — слишком затратная операция, чтобы повторять ее более одного раза в файле на выполнение программы. В главе 22 вы узнаете, что операции импорта обязаны искать файлы, компилировать их в байт-код и выполнять код.

Если на самом деле необходимо заставить Python выполнить файл снова в том же самом сеансе, не останавливая его и не перезапуская, то взамен понадобится вызвать функцию reload, доступную в стандартном библиотечном модуле imp (она является просто встроенной функцией в Python 2.X, но не в Python 3.X):

>>> from imp import reload # Должна загружаться из модуля в Python 3.X (только)
>>> reload(script1)
win32
65536
Spam!Spam!Spam!Spam!Spam!Spam!Spam!
<module 'script1' from '.\\script1.py'>
<модуль script1 из .\\script1.py>
>>>

Оператор from просто копирует имя из модуля (вскоре мы обсудим это подробнее). Сама функция reload загружает и выполняет текущую версию кода файла, подхватывая изменения, если он был модифицирован и сохранен в другом окне.

В итоге у вас появляется возможность редактировать и подхватывать новый код на лету внутри текущего интерактивного сеанса Python. Скажем, в данном сеансе между моментом выполнения первого оператора import и моментом вызова reload второй оператор print сценария script1.py был изменен в другом окне, чтобы выводить 2 ** 16 — отсюда и другой результат.

Функция reload ожидает передачи имени объекта уже загруженного модуля, а потому вам нужно иметь успешно импортированный модуль, прежде чем перезагружать его (если операция импорта сообщает об ошибке, то вы не сможете перезагрузить и должны импортировать модуль заново). Обратите внимание, что reload также ожи-