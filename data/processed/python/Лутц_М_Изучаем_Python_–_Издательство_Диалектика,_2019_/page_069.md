---
source_image: page_069.png
page_number: 69
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.52
tokens: 7980
characters: 3289
timestamp: 2025-12-24T01:09:12.972809
finish_reason: stop
---

• Изменения исходного кода. Python автоматически проверяет отметки времени последней модификации для файлов исходного кода и байт-кода, чтобы выяснить, когда они должны быть перекомпилированы — если вы отредактируете и повторно сохраните исходный код, то байт-код будет автоматически создан заново при следующем запуске программы.

• Версии Python. Импортирования также проверяются для выяснения, подлежит ли перекомпиляции файл из-за того, что он был создан другой версией Python, используя либо "магический" номер версии в самом файле байт-кода для Python 3.2 и предшествующих версий, либо информацию, присутствующую в имени файла байт-кода для Python 3.2 и последующих версий.

В результате внесение изменений в исходный код и применение отличающихся номеров версий Python будет инициировать создание нового файла байт-кода. Если Python не имеет возможности записывать файлы байт-кода на вашем компьютере, то программа все равно будет работать — байт-код генерируется в памяти и просто отбрасывается по завершении выполнения программы. Тем не менее, поскольку файлы .рус ускоряют загрузку, для крупных программ имеет смысл обеспечить возможность записывания файлов байт-кода. Файлы байт-кода представляют собой также один из способов поставки программ Python — они будут выполняться, даже если все, что удается найти — это файлы .рус, а файлы исходного кода .ру отсутствуют. (Еще один вариант поставки описан в разделе "Фиксированные двоичные файлы" далее в главе.)

Наконец, имейте в виду, что байт-код сохраняется лишь для тех файлов, которые импортируются, но не для файлов верхнего уровня программы, выполняемых только как сценарии (строго говоря, речь идет об оптимизации импорта). Мы исследуем основы импорта в главе 3, а более подробно рассмотрим его в части V. Кроме того, заданный файл импортируется (и возможно компилируется) лишь один раз на запуск программы, а байт-код никогда не сохраняется для кода, набираемого в строке интерактивной подсказки — режиме программирования, о котором вы узнаете в главе 3.

Виртуальная машина Python (PVM)

После того, как программа скомпилирована в байт-код (или байт-код был загружен из существующих файлов .рус), она отправляется на выполнение тому, что в общем случае известно как виртуальная машина Python (Python Virtual Machine — PVM). Машина PVM производит более глубокое впечатление, чем есть на самом деле; в действительности она не является отдельной программой и сама по себе не требует установки. По сути, машина PVM — всего лишь большой закодированный цикл, который проходит по инструкциям вашего байт-кода, друг за другом, чтобы выполнить их операции. Машина PVM — это исполняющий механизм Python; она всегда присутствует в виде части системы Python и представляет собой компонент, который по-настоящему выполняет ваши сценарии. Формально она является просто последним шагом того, что называется "интерпретатор Python".

На рис. 2.2 иллюстрируется структура описанного здесь исполняющего механизма. Имейте в виду, что вся эта сложность намеренно скрыта от программистов на Python. Компиляция в байт-код происходит автоматически, а машина PVM — лишь часть системы Python, установленной на компьютере. Опять-таки программисты просто набирают код и запускают файлы с операторами, а Python обеспечивает возможность их выполнения.