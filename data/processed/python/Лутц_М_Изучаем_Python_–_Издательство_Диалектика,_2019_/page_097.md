---
source_image: page_097.png
page_number: 97
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.45
tokens: 7849
characters: 2824
timestamp: 2025-12-24T01:09:56.638693
finish_reason: stop
---

C:\code> python brian
The Bright Side of Life...

В данном случае специальный комментарий #! в начале сценария не нужен (если он присутствует, то Python его проигнорирует) и файл не нуждается в правах на выполнение. На самом деле, когда вы хотите запускать файлы переносимым образом между Unix и Microsoft Windows, ваша жизнь наверняка упростится, если для запуска программ вы всегда будете применять базовый подход с командной строкой, а не сценарии в стиле Unix.

Однако если вы используете Python 3.3 или последующей версии, либо имеете отдельно установленный запускающий модуль для Windows, тогда окажется, что строки #! в стиле Unix кое-что значат и в Windows. Уминаяемый ранее в главе запускающий модуль для Windows помимо того, что предлагает описанную ранее команду py, пытается произвести разбор строк #! с целью выяснения версии Python, которую нужно запустить для выполнения кода вашего сценария. Вдобавок он позволяет указывать номер версии в полной или частичной форме и распознает распространенные шаблоны Unix для этой строки, в том числе форму /usr/bin/env.

Механизм разбора #! запускающего модуля применяется, когда вы запускаете сценарии в командной строке посредством py и когда дважды щелкаете на значках файлов Python (в случае чего py запускается неявно ассоциациями расширений файлов). В отличие от Unix, чтобы это работало в Windows, выдавать файлам права на выполнение не требуется, т.к. аналогичные результаты обеспечивают ассоциации расширений файлов.

Например, первый сценарий из показанных ниже выполняется версией Python 3.X, а второй — версией Python 2.X (если число не указано явно, то по умолчанию запускающий модуль выбирает версию Python 2.X, если только вы не установили переменную среды PY_PYTHON):

c:\code> type robin3.py
#!/usr/bin/python3
print('Run', 'away!...')    # Функция Python 3.x

c:\code> py robin3.py      # Выполнить файл согласно версии в строке #!
Run away!...

c:\code> type robin2.py
#!python2
print 'Run', 'away more!'... # Оператор Python 2.x

c:\code> py robin2.py      # Выполнить файл согласно версии в строке #!
Run away more!...

Прием работает в дополнение к передаче номера версии в командной строке, что кратко демонстрировалось ранее для запуска интерактивной подсказки, но применимо и к запуску файла сценария:

c:\code> py -3.1 robin3.py   # Выполнить согласно аргументу командной строки
Run away!...

Совокупный эффект заключается в том, что запускающий модуль позволяет указывать версии Python на основе файлов и на основе команд, используя соответственно строки #! и аргументы командной строки. Такова очень краткая история запускающего модуля. Если вы работаете с Python 3.3 или последующей версией в Windows либо планируете перейти на нее в будущем, тогда я рекомендую ознакомиться с полной историей запускающего модуля в приложении Б второго тома.