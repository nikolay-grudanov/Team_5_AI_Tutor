---
source_image: page_359.png
page_number: 359
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.31
tokens: 7662
characters: 2323
timestamp: 2025-12-24T01:18:25.501854
finish_reason: stop
---

вый уровень отступа). Оператор if простирается от слова if до начала оператора print в последней строке сценария. В свою очередь весь блок if является частью цикла while, поскольку он располагается с отступом под строкой заголовка цикла. Подобного рода вложение операторов станет выглядеть естественным, как только вы освоитесь с ним.

После запуска нового сценария его код перехватывает ошибки до того, как они произойдут, и выводит сообщение, прежде чем продолжить работу (которое вероятно имеет смысл улучшить в более позднем выпуске), но ввод stop по-прежнему приводит к завершению, а допустимые числа возводятся в квадрат:

Enter text:5
25
Enter text:xyz
Bad!Bad!Bad!Bad!Bad!Bad!Bad!
Enter text:10
100
Enter text:stop
Bye

Обработка ошибок с помощью оператора try

Предыдущее решение работает, но позже в книге вы увидите, что самый универсальный способ обработки ошибок в Python предусматривает перехват и полное восстановление после них с применением оператора try языка Python. Мы будем исследовать этот оператор в части VII книги, а сейчас отметим, что использование try здесь может в итоге дать код, который многие сочтут более простым, чем предыдущая версия:

while True:
    reply = input('Enter text:')
    if reply == 'stop': break
    try:
        num = int(reply)
    except:
        print('Bad!' * 8)
    else:
        print(num ** 2)
print('Bye')

Новая версия кода работает в точности как предыдущая, но явную проверку на предмет ошибки мы заменили кодом, который предполагает успешное выполнение преобразования, и поместили его внутрь обработчика исключений для случаев, когда это не так. Другими словами, вместо обнаружения ошибки мы просто реагируем, когда она возникает.

Оператор try является еще одним составным оператором и следует такому же шаблону, как if и while. Он состоит из слова try, за которым находится основной блок кода (действие, подлежащее выполнению), затем часть except с кодом обработчика исключений и часть else, выполняемая в случае, если никакие исключения в части try не генерировались. Python сначала выполняет часть try, после чего либо часть except (если исключение произошло), либо часть else (если исключений не было).

С точки зрения вложения операторов, поскольку слова try, except и else имеют отступы на том же самом уровне, они считаются частью одного оператора try.