---
source_image: page_424.png
page_number: 424
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.12
tokens: 7749
characters: 2529
timestamp: 2025-12-24T01:20:40.969649
finish_reason: stop
---

Представленный далее пример похож, но вместо вывода в нем строится список для использования в будущем. Он выполняет посредством for типичную задачу со структурами данных — сбор элементов, общих в двух последовательностях (строках), — и служит грубой реализацией процедуры пересечения множеств. После выполнения цикла res ссылается на список, который содержит все элементы, находящиеся и в seq1, и в seq2:

```python
>>> seq1 = "spam"
>>> seq2 = "scam"
>>>
>>> res = []                # Начать с пустого списка
>>> for x in seq1:
...     if x in seq2:      # Общий элемент?
...         res.append(x)   # Добавить в конец результирующего списка
...
>>> res
['s', 'a', 'm']
```

К сожалению, написанный код способен работать только с двумя специфически-ми переменными: seq1 и seq2. Было бы неплохо обобщить этот цикл, создав инструмент, который позволил бы применять его более одного раза. Вы увидите, что такая простая идея приводит нас к функциям, рассматриваемым в следующей части книги.

Код также демонстрирует классический шаблон спискового включения — сбор списка результатов с помощью итерации и необязательной фильтрующей проверки — и также может быть записан более лаконично:

```python
>>> [x for x in seq1 if x in seq2]    # Позволить Python собрать результаты
['s', 'a', 'm']
```

Но остаток истории будет описан в следующей главе.

Что потребует внимания: приемы просмотра файлов

Вообще говоря, циклы оказываются полезными везде, где необходимо повторять операцию или обработку чего-либо более одного раза. Поскольку файлы содержат множество символов и строк, они считаются одним из наиболее типичных сценариев использования для циклов. Для загрузки сразу всего содержимого файла в строку понадобится просто вызвать метод read файлового объекта:

```python
file = open('test.txt', 'r')        # Чтение содержимого в строку
print(file.read())
```

Но для загрузки файла меньшими порциями обычно пишется либо цикл while с выходом при обнаружении конца файла, либо цикл for. Для посимвольного чтения будет достаточно любого из показанных ниже двух циклов:

```python
file = open('test.txt')
while True:
    char = file.read(1)           # Посимвольное чтение
    if not char: break            # Пустая строка означает конец файла
    print(char)
for char in open('test.txt').read():
    print(char)
```

Цикл for здесь также обрабатывает каждый символ, но файл загружается в память целиком (и предполагается, что он умещается в памяти!). Чтобы взамен читать по строкам или блокам, можно применять цикл while такого вида: