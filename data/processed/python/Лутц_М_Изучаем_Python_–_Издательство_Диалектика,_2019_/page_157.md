---
source_image: page_157.png
page_number: 157
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.16
tokens: 7913
characters: 2743
timestamp: 2025-12-24T01:11:53.128770
finish_reason: stop
---

записывают содержимое строк в Python 2.x. Это не относится к используемым ранее простым данным ASCII, которые отображаются на байты в файле без изменений. Но для более развитых типов данных интерфейсы к файлам могут варьироваться в зависимости от содержимого и применяемой линейки Python.

Ранее при обсуждении строк было указано, что версия Python 3.x проводит четкое различие между текстовыми и двоичными данными в файлах. Текстовые файлы представляют содержимое в виде нормальных строк str, автоматически выполняя кодирование и декодирование Unicode при записывании и чтении данных, тогда как двоичные файлы представляют содержимое в виде специальных строк bytes и позволяют получать доступ к содержимому файла, не изменяя его. В Python 2.x поддерживается та же самая двойственность, но она не навязывается настолько жестко, и инструменты отличаются.

Скажем, двоичные файлы удобны для обработки медиаданных, доступа к данным, созданным программами C и т.д. В качестве иллюстрации Python-модуль struct способен создавать и распаковывать упакованные двоичные данные (неформатированные байты, фиксирующие значения, которые не являются объектами Python), подлежащие записи в двоичном режиме. Мы изучим эту методику позже в книге, но концепция проста: следующий код создает двоичный файл в Python 3.x (в Python 2.x двоичные файлы работают аналогично, но префикс b строкового литерала не требуется и не отображается):

```python
>>> import struct
>>> packed = struct.pack('>i4sh', 7, b'spam', 8) # Создать упакованные двоичные данные
# 10 байтов, не объекты и не текст
>>> packed
b'\x00\x00\x00\x07spam\x00\x08'
>>>
>>> file = open('data.bin', 'wb') # Открыть двоичный файл для записи
>>> file.write(packed) # Записать упакованные двоичные данные
10
>>> file.close()
```

Чтение двоичных данных по существу симметрично; не всем программам нужно настолько глубоко проникать в низкоуровневую область байтов, но двоичные файлы в Python облегчают задачу:

```python
>>> data = open('data.bin', 'rb').read() # Открыть/прочитать двоичный файл данных
# 10 байтов, неизмененные
>>> data
b'\x00\x00\x00\x07spam\x00\x08'
>>> data[4:8] # Нарезать байты в середине
b'spam'
>>> list(data) # Последовательность 8-битных байтов
[0, 0, 0, 7, 115, 112, 97, 109, 0, 8]
>>> struct.unpack('>i4sh', data) # Снова распаковать в объекты
(7, b'spam', 8)
```

Файлы с текстом Unicode

Текстовые файлы используются для обработки всевозможных текстовых данных, начиная с заметок и содержимого сообщений электронной почты и заканчивая документами JSON и XML. Но в современном более широко взаимосвязанном мире мы не можем говорить о тексте, не задавая вопрос о виде текста. Вы должны знать тип кодировки Unicode текста, если он отличается от принятого по умолчанию на вашей