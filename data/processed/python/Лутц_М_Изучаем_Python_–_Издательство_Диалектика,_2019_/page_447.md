---
source_image: page_447.png
page_number: 447
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.75
tokens: 7640
characters: 2162
timestamp: 2025-12-24T01:21:22.035199
finish_reason: stop
---

>>> next(I)
'c'
>>> next(I)
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
Трассировка (самый последний вызов указан последним):
    Файл <stdin>, строка 1, в <модуль>
StopIteration

Совокупный эффект состоит в том, что нам больше не нужно вызывать метод keys для прохода по ключам словаря — цикл for будет применять протокол итерации для захвата одного ключа на каждой итерации:

>>> for key in D:
...     print(key, D[key])
...
a 1
b 2
c 3

Мы не можем здесь углубляться в мельчайшие детали, но отметим, что объекты других типов Python также поддерживают протокол итерации и потому могут использоваться в циклах for. Например, хранилища, реализуемые посредством модуля shelve (файловая система с доступом по ключу для объектов Python), и результаты, получаемые из os.popen (инструмент для чтения вывода команд оболочки, который обсуждался в предыдущей главе), также представляют собой итерируемые объекты:

>>> import os
>>> P = os.popen('dir')
>>> P.__next__()
'Volume in drive C has no label.\n'
>>> P.__next__()
'Volume Serial Number is D093-D1F7\n'
>>> next(P)
TypeError: _wrap_close object is not an iterator
Ошибка типа: объект _wrap_close не является итератором

Обратите внимание, что в Python 2.x объекты popen сами поддерживают метод P.next(). В Python 3.x они поддерживают метод P.__next__(), но не встроенную функцию next(P). Поскольку функция next(P) определена для вызова метода P.__next__(), это может казаться необычным, хотя оба вызова работают корректно, если задействован полный протокол итерации, который автоматически применяется циклами for и другими итерационными контекстами, с его вызовом iter верхнего уровня (что выполняет внутренние шаги, требующиеся из-за поддержки также и вызовов next для данного объекта):

>>> P = os.popen('dir')
>>> I = iter(P)
>>> next(I)
'Volume in drive C has no label.\n'
>>> I.__next__()
'Volume Serial Number is D093-D1F7\n'

Кроме того, в области, связанной с системами, стандартный инструмент прохода по каталогам в Python, os.walk, похожим образом является итерируемым, но пример откладывается до главы 20, где будут раскрыты основы этого инструмента — генераторы и yield.