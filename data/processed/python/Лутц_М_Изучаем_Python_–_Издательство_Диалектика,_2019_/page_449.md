---
source_image: page_449.png
page_number: 449
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.85
tokens: 7766
characters: 2536
timestamp: 2025-12-24T01:21:29.587887
finish_reason: stop
---

>>> L = [1, 2, 3, 4, 5]
>>> for i in range(len(L)):
...     L[i] += 10
...
>>> L
[11, 12, 13, 14, 15]

Прием работает, но как там упоминалось, он может не быть оптимальным "рекомендуемым" подходом в Python. В наши дни выражение спискового включения переводит многие ранее применяемые кодовые шаблоны в категорию устаревших. Скажем, мы можем заменить приведенный выше цикл одиночным выражением, которое производит желаемый результирующий список:

>>> L = [x + 10 for x in L]
>>> L
[21, 22, 23, 24, 25]

Конечный результат аналогичен, но такой прием требует меньшего объема кодирования с нашей стороны и, вероятно, будет выполняться существенно быстрее. Версия со списковым включением не точно соответствует версии с оператором цикла for, т.к. она создает новый списоковый объект (что может иметь значение при наличии множества ссылок на исходный список), но она достаточно близка для большинства приложений и является распространенным и довольно удобным подходом, заслуживающим более детального рассмотрения.

Основы списковых включений

Мы кратко обсуждали списковые включения в главе 4. Их синтаксис происходит из конструкции в системе обозначений теории множеств, которая применяет операцию к каждому элементу внутри множества, но для использования данного инструмента знание теории множеств вовсе не требуется. В Python большинство людей находят, что списковое включение просто выглядит как цикл for, повернутый назад.

Чтобы понять синтаксис, разберем пример из предыдущего раздела более подробно:

L = [x + 10 for x in L]

Списковые включения записываются в квадратных скобках, потому что в конечном итоге представляют собой способ создания нового списка. Они начинаются с произвольно составленного выражения, в котором задействована введенная нами переменная цикла (x + 10). За выражением следует то, что теперь вы должны опознать как заголовок цикла for, в котором указана переменная цикла и итерируемый объект (for x in L).

Для запуска выражения Python выполняет итерацию по L внутри интерпретатора, присваивая переменной цикла x каждый элемент по очереди, и накапливает результаты прогона элементов через выражение с левой стороны. Получаемый обратно результирующий список является в точности тем, что определяет списковое включение — новый список, содержащий x + 10 для каждого x в L.

Говоря формально, списковые включения никогда не являются по-настоящему обязательными, т.к. мы всегда можем построить список результатов выполнения выражения вручную с помощью циклов for, дополняющих список результатов по мере продвижения: