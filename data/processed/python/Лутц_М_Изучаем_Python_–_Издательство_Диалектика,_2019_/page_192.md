---
source_image: page_192.png
page_number: 192
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.76
tokens: 7830
characters: 2483
timestamp: 2025-12-24T01:12:49.860632
finish_reason: stop
---

В Python 3.3 и последующих версиях модуль decimal был оптимизирован с целью радикального улучшения его производительности: сообщаемый выигрыш в скорости для новой версии составляет от 10 до 100 раз в зависимости от типа тестируемой программы.

Глобальная установка точности для десятичных чисел

С помощью других инструментов из модуля decimal можно устанавливать точность для всех десятичных чисел, организовывать обработку ошибок и делать многое другое. Например, объект контекста в этом модуле позволяет указывать точность (количество десятичных цифр) и режимы округления (вниз, вверх и т.д.). Точность применяется глобально ко всем десятичным объектам, создаваемым в вызывающем потоке:

```python
>>> import decimal
>>> decimal.Decimal(1) / decimal.Decimal(7)      # По умолчанию: 28 цифр
Decimal('0.1428571428571428571428571429')
>>> decimal.getcontext().prec = 4                # Фиксированная точность
>>> decimal.Decimal(1) / decimal.Decimal(7)
Decimal('0.1429')
>>> Decimal(0.1) + Decimal(0.1) + Decimal(0.1) - Decimal(0.3)   # Ближе к 0
Decimal('1.110E-17')
```

Формально значимость определяется за счет ввода цифр, а точность применяется при выполнении математических операций. Хотя это свойство более тонкое, чем мы можем выяснить в кратком обзоре, оно делает десятичные числа полезными в качестве основы для ряда финансовых приложений и временами может служить альтернативой ручному округлению и форматированию строк:

```python
>>> 1999 + 1.33    # Содержит больше цифр в памяти, чем отображается в 3.3
2000.33
>>>
>>> decimal.getcontext().prec = 2
>>> pay = decimal.Decimal(str(1999 + 1.33))
>>> pay
Decimal('2000.33')
```

Диспетчер контекста для десятичных чисел

В Python 2.6, 3.0 и последующих версиях допускается также временно сбрасывать точность с использованием оператора диспетчера контекста with. Когда происходит выход из оператора with, точность сбрасывается в свое первоначальное состояние. Введите в новом сеансе Python 3.3 (согласно материалам главы 3 здесь ... представляет собой интерактивное приглашение Python для строк продолжения в некоторых интерфейсах и требует ручных отступов; среда IDLE такое приглашение не отображает и делает отступы автоматически):

```python
C:\code> C:\Python33\python
>>> import decimal
>>> decimal.Decimal('1.00') / decimal.Decimal('3.00')
Decimal('0.33333333333333333333333333333333')
>>>
>>> with decimal.localcontext() as ctx:
...     ctx.prec = 2
...     decimal.Decimal('1.00') / decimal.Decimal('3.00')
... 
```