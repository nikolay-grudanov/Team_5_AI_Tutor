---
source_image: page_628.png
page_number: 628
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.39
tokens: 7688
characters: 2107
timestamp: 2025-12-24T01:26:46.566070
finish_reason: stop
---

Простые функции

В том виде, как есть, написанный код работает только с особым образом именованными переменными. С целью его обобщения мы можем превратить этот код в простую функцию, которая будет работать с любым объектом, переданным в аргументе, и возвращать результат. Так как в первой версии явно просматривалась классическая схема со списковым включением, мы проделаем определенную работу, чтобы сохранить ее во второй версии:

```python
>>> def scramble(seq):
    res = []
    for i in range(len(seq)):
        res.append(seq[i:] + seq[:i])
    return res

>>> scramble('spam')
['spam', 'pams', 'amsp', 'mspa']

>>> def scramble(seq):
    return [seq[i:] + seq[:i] for i in range(len(seq))]

>>> scramble('spam')
['spam', 'pams', 'amsp', 'mspa']

>>> for x in scramble((1, 2, 3)):
    print(x, end=' ')
(1, 2, 3) (2, 3, 1) (3, 1, 2)
```

Здесь можно было бы также использовать рекурсию, но в таком контексте она видимо оказалась бы излишней.

Генераторные функции

Простой подход в предыдущем разделе работает, но он требует построения в памяти всего результирующего списка (что не очень хорошо в плане расхода памяти, если список крупный) и заставляет вызывающий код ожидать до тех пор, пока полный список не будет готов (что также не идеально, когда построение занимает значительное время). Мы можем улучшить положение дел, превратив код в генераторную функцию, которая выдает по одному результату за раз, с применением одной из двух схем написания кода:

```python
>>> def scramble(seq):
    for i in range(len(seq)):
        seq = seq[1:] + seq[:1]
        yield seq

>>> def scramble(seq):
    for i in range(len(seq)):
        yield seq[i:] + seq[:i]

# Генераторная функция
# Здесь работают присваивания

# Генераторная функция
# Выдача по одному элементу на итерацию
# list() генерирует все результаты
# Подходит любой тип последовательности
# Цикл for генерирует результаты

>>> list(scramble('spam'))
['spam', 'pams', 'amsp', 'mspa']
>>> list(scramble((1, 2, 3)))
[(1, 2, 3), (2, 3, 1), (3, 1, 2)]
>>>
>>> for x in scramble((1, 2, 3)):
    print(x, end=' ')
(1, 2, 3) (2, 3, 1) (3, 1, 2)
```