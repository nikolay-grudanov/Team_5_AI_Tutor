---
source_image: page_239.png
page_number: 239
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.26
tokens: 7799
characters: 2643
timestamp: 2025-12-24T01:14:30.909819
finish_reason: stop
---

Изменение строк, часть I

Помните термин "неизменяемая последовательность"? Как вы видели, часть неизменяемая означает, что вы не можете изменять строку на месте — скажем, присваивая по индексу:

```python
>>> S = 'spam'
>>> S[0] = 'x'    # Возникает ошибка!
TypeError: 'str' object does not support item assignment
Ошибка типа: объект str не поддерживает присваивание в отношении элементов
```

Тогда каким же образом модифицировать текстовую информацию в Python? Чтобы изменить строку, обычно необходимо создать и присвоить новую строку с применением таких инструментов, как конкатенация и нарезание, и затем при желании присвоить результат первоначальному имени строки:

```python
>>> S = S + 'SPAM!'    # Чтобы изменить строку, нужно создать новую
>>> S
'spamSPAM!'
>>> S = S[:4] + 'Burger' + S[-1]
>>> S
'spamBurger!'
```

В первом примере подстрока добавляется в конец S посредством конкатенации. На самом деле здесь создается новая строка и присваивается переменной S, но вы можете думать об этом как об "изменении" исходной строки. Во втором примере четыре символа заменяются шестью с помощью нарезания, индексации и конкатенации. Как будет показано в следующем разделе, аналогичных результатов можно добиться, используя вызовы методов вроде replace:

```python
>>> S = 'splot'
>>> S = S.replace('pl', 'pamal')
>>> S
'spamalot'
```

Подобно любой операции, которая выдает новое строковое значение, строковые методы генерируют новые строковые объекты. Если вы хотите сохранить такие объекты, то можете присвоить их переменным. Генерация нового строкового объекта для каждого изменения строки не настолько неэффективна, как может казаться. Вспомните из предыдущей главы, что в ходе выполнения Python автоматически производит сборку мусора (освобождает пространство памяти) в отношении старых неиспользуемых строковых объектов, поэтому новые объекты повторно занимают пространство, где хранились предшествующие значения. Как правило, Python более эффективен, чем вы могли ожидать. Наконец, строить новые текстовые значения можно также с помощью выражений форматирования строк. Следующие два выражения заменяют объекты внутри строки, в некотором смысле преобразуя объекты в строки и изменяя исходную строку согласно спецификации формата:

```python
>>> 'That is %d %s bird!' % (1, 'dead')    # Выражение форматирования:
# все версии Python
That is 1 dead bird!
>>> 'That is {0} {1} bird!'.format(1, 'dead')    # Метод форматирования
# в Python 2.6, 2.7, 3.x
'That is 1 dead bird!'
```

Тем не менее, вопреки метафоре подстановки результатом форматирования будет новый строковый объект, а не модифицированный старый. Мы обсудим форматирова-