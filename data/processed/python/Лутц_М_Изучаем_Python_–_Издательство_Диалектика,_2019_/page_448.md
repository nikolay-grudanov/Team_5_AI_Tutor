---
source_image: page_448.png
page_number: 448
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.89
tokens: 7701
characters: 2346
timestamp: 2025-12-24T01:21:27.450118
finish_reason: stop
---

Протокол итерации также представляет собой причину помещения некоторых результатов внутрь вызова list для вывода одновременно всех их значений. Итерируемые объекты возвращают по одному результату за раз, а не физический список:

```python
>>> R = range(5)
>>> R  # В Python 3.x диапазоны являются итерируемыми объектами
range(0, 5)
>>> I = iter(R)  # Использование протокола итерации для выпуска результатов
>>> next(I)
0
>>> next(I)
1
>>> list(range(5))  # Или применение вызова list для сбора всех результатов
[0, 1, 2, 3, 4]
```

Обратите внимание, что в Python 2.x вызов list не требуется (там range строит реальный список), и в нем нет необходимости в Python 3.x для контекстов, где итерация происходит автоматически (таких как внутри циклов for). Тем не менее, он нужен здесь для отображения значений в Python 3.x и также может требоваться, когда необходимо поведение, подобное спискам, или множественные просмотры для объектов, которые производят результаты по запросу в Python 2.x или 3.x (дополнительные сведения будут даны позже).

Обладая лучшим пониманием протокола итерации, теперь вы должны быть в состоянии объяснить, почему представленный в предыдущей главе инструмент enumerate работает именно так, как он работает:

```python
>>> E = enumerate('spam')  # Инструмент enumerate также итерируемый
>>> E
<enumerate object at 0x00000000029B7678>
>>> I = iter(E)
>>> next(I)  # Генерировать результаты с помощью протокола итерации
(0, 's')
>>> next(I)  # Либо использовать вызов list
#    для принудительного запуска генерации
(1, 'p')
>>> list(enumerate('spam'))
[(0, 's'), (1, 'p'), (2, 'a'), (3, 'm')]
```

Обычно данный механизм для нас невидим, т.к. циклы for запускают его автоматически для прохода по результатам. На самом деле все, что в Python выполняет просмотр слева направо, задействует протокол итерации тем же самым способом — в том числе инструмент, рассматриваемый в следующем разделе.

Списковые включения: первый подробный взгляд

После выяснения, каким образом работает протокол итерации, давайте теперь перейдем к одному из его самых распространенных сценариев использования. Вместе с циклами for списковые включения входят в число наиболее известных контекстов, в которых применяется протокол итерации.

В предыдущей главе было показано, как использовать range для изменения списка по мере прохождения через него: