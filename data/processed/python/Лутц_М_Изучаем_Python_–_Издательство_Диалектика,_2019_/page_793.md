---
source_image: page_793.png
page_number: 793
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.75
tokens: 7900
characters: 3076
timestamp: 2025-12-24T01:32:00.900951
finish_reason: stop
---

Проверьте свои знания: упражнения для части V

Решения упражнений находятся в приложении.

1. Основы операций импортирования. Напишите программу, которая подсчитывает строки и символы в файле (в какой-то мере схожую по духу с утилитой wc в Unix). С помощью своего текстового редактора создайте модуль Python по имени mymod.py, который экспортирует три имени верхнего уровня.
   ○ Функция countLines(name) читает входной файл и подсчитывает количество строк в нем (подсказка: file.readlines выполняет большую часть работы, а len делает остаток, хотя вы могли бы подсчитывать посредством for и файловых итераторов, чтобы поддерживать также крупные файлы).
   ○ Функция countChars(name) читает входной файл и подсчитывает количество символов в нем (подсказка: file.read возвращает одиночную строку, которую можно использовать аналогичными способами).
   ○ Функция test(name) вызывает обе функции подсчета с заданным именем входного файла. Такое имя файла обычно может передаваться, быть жестко закодированным, вводиться с помощью встроенной функции input либо извлекаться из командной строки через список sys.argv, как было показано в примерах formats.py и reloadall.py этой главы; пока что можете принять, что имя файла передается как аргумент функции.

Все три функции модуля mymod должны ожидать передачи строки с именем файла. Если каждая функция занимает у вас более двух или трех строк, то вы делаете чрезмерную работу — воспользуйтесь предложенными мною подсказками!

Далее протестируйте модуль в интерактивном сеансе, применяя import и ссылки на атрибуты для обращения к экспортируемым именам. Должна ли переменная среды PYTHONPATH включать в себя каталог, где вы создали файл mymod.py? Попробуйте запустить модуль на самом себе: скажем, test("mymod.py"). Обратите внимание, что test открывает файл дважды; при должной целеустремленности вы можете суметь усовершенствовать это, передавая двум функциям подсчета объект открытого файла (подсказка: file.seek(0) обеспечивает возврат в начало файла).

2. from/from *. Протестируйте модуль mymod из упражнения 1 в интерактивном сеансе, используя from для загрузки экспортируемых имен напрямую — сначала по имени, а затем с помощью формы оператора from * для извлечения их всех.

3. __main__. Добавьте в модуль mymod строку, которая вызывает функцию test автоматически, когда модуль запускается как сценарий, но не в случае его импортирования. По всей видимости, в добавленной строке вы будете проверять значение __name__ на предмет равенства строке "__main__", как было показано в этой главе. Попробуйте запустить модуль из командной строки системы; затем импортируйте модуль и протестируйте его функции в интерактивном сеансе. Работает ли модуль в обоих режимах?

4. Вложенные операции импортирования. Создайте второй модуль, myclient.py, который импортирует модуль mymod и тестирует его функции; запустите myclient из командной строки системы. Если myclient применяет from для извлечения имен из mymod, то будут ли доступны функции mymod на верхнем уровне myclient? Что если взамен он будет импортировать посредством import?