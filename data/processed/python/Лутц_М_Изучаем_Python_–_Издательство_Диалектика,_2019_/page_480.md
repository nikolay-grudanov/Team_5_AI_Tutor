---
source_image: page_480.png
page_number: 480
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.05
tokens: 8312
characters: 4063
timestamp: 2025-12-24T01:22:36.656778
finish_reason: stop
---

### Изменение цветов PyDoc

После запуска инструмента PyDoc может выясниться, что выбранные в нем цвета по каким-то причинам вам не нравятся. К сожалению, в настоящее время нет простого способа настройки цветов PyDoc. Они жестко заданы глубоко в исходном коде; их нельзя передавать в аргументах функциям или командным строкам либо изменять в конфигурационных файлах или глобальных переменных в самом модуле.

Но в системе с открытым кодом вы всегда можете изменить код — PyDoc находится в файле pydoc.py, входящем в состав стандартной библиотеки Python, который в системе Windows расположен в каталоге C:\Python\Lib. Повсюду в коде цвета представлены в виде шестнадцатеричных строк со значениями RGB. Скажем, строка '#eeaa77' определяет 3-байтовое (24-битное) значение с 2 шестнадцатеричными цифрами, указывающими 1-байтовые (8-битные) красную, зеленую и синюю цветовые составляющие (десятичные 238, 170 и 119), что в результате дает оттенок оранжевого для заголовков функций. Строка '#ee77aa' визуализируется в темный розоватый цвет, применяемый в девяти местах, включая заголовки классов и индексной страницы.

В целях настройки найдите такие строки со значениями цвета и замените их предпочтаемыми вариантами. В среде IDLE для этого понадобится выбрать в меню Edit (Правка) пункт Find (Найти) и указать регулярное выражение #\w{6} (согласно синтаксису сопоставления с образцом модуля re в Python оно соответствует шести алфавитно-цифровым символам после #; за деталями обращайтесь в руководство по библиотеке).

Для подбора цветов большинство программ с диалоговыми окнами выбора цвета позволяют получать значения RGB; в состав примеров входит сценарий с графическим пользовательским интерфейсом setcolor.py, который делает то же самое. В своей копии PyDoc я заменил все значения #ee77aa значением #008080 (зеленовато-голубой), чтобы избавиться от темного розоватого цвета. Замена #ffc8d8 значением #c0c0c0 (серый) аналогично меняет светлый розоватый цвет фона, на котором отображаются строки документации классов. Такая работа явно не для слабонервных (файл PyDoc содержит свыше 2 600 строк), но будет хорошим упражнением по сопровождению кода. Будьте осторожны при замене цветов вроде #ffffff и #000000 (белый и черный) и обязательно заранее сделайте резервную копию pydoc.py, чтобы была возможность восстановления. В файле pydoc.py используются инструменты, которые нам еще не встречались, но при внесении тактических изменений подобного рода вы можете спокойно игнорировать остаток кода.

Обязательно следите за изменениями PyDoc в плане конфигурации, что выглядит главным кандидатом на улучшение. Фактически усилия в данном направлении уже предпринимаются: задача 10716 в списке разработчиков Python касается изменения PyDoc для поддержки таблиц стилей CSS, что усовершенствует возможности настройки со стороны пользователей. В случае успешного решения пользователи могут получить в свое распоряжение средства изменения цветов и других аспектов отображения во внешних CSS-файлах, а не в исходном коде PyDoc.

С другой стороны, в текущий момент это запланировано лишь в версии Python 3.8 и будет требовать от пользователей PyDoc также знания кода CSS. К сожалению, он сам по себе обладает нетривиальной структурой, которую многие программисты на Python могут понимать не настолько хорошо, чтобы вносить изменения. На момент написания главы предлагаемый CSS-файл PyDoc уже содержал 227 строк кода, которые вероятно мало что значат для людей, не знакомых с веб-разработкой (и вряд ли разумно предлагать им изучить какой-то инструмент веб-разработки, просто чтобы подстроить PyDoc!).

Начиная с версии Python 3.3, в PyDoc поддерживается таблица стилей CSS, которая предоставляет ряд вариантов настройки, но без особого энтузиазма, и поставляется пустой. До тех пор, пока ситуация не прояснится, внесение изменений в код PyDoc выглядит лучшим вариантом. Так или иначе, таблицы стилей CSS выходят далеко за рамки тематики настоящей книги — подробности ищите в веб-сети и просматривайте пояснительные записи к будущим выпускам Python на предмет разработки PyDoc.