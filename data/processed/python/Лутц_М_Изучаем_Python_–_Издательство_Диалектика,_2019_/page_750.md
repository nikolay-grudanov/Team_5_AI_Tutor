---
source_image: page_750.png
page_number: 750
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.45
tokens: 7964
characters: 3223
timestamp: 2025-12-24T01:30:37.601991
finish_reason: stop
---

По духу это похоже на противопоставление "традиционной" модели классов и модели классов "нового стиля", которые рассматриваются в следующей части книги, хотя новая модель — нечто большее, нежели просто дополнение старой. Исходная и новая модели пакетов не являются взаимно исключающими и могут совместно использоваться в одной и той же программе. Фактически новая модель пакетов пространств имен работает как что-то вроде запасного варианта, который вступает в игру, только если в пути поиска модулей отсутствуют нормальные модули и обычные пакеты с тем же самым именем.

Логическое обоснование пакетов пространств имен проистекает из целей установки пакетов, которые могут казаться неясными, если только вы не отвечаете за решение таких задач, и лучше всего описано в документе PEP данного средства. Выражаясь кратко, пакеты пространств имен устраняют возможность конфликта множества файлов __init__.py при объединении частей пакета, полностью устраняя такие файлы. Кроме того, за счет предоставления стандартной поддержки для пакетов, которые могут быть разнесены на множество каталогов и размещаться во множестве элементов sys.path, пакеты пространств имен повышают гибкость установки и предлагают общий механизм, заменяющий многие несовместимые решения, которые появлялись в попытке достигнуть этой цели.

Среднестатистические пользователи могут счесть пакеты пространств имен удобным альтернативным расширением модели обычных пакетов — они не требуют инициализационных файлов и позволяют использовать любой каталог кода как импортируемый пакет. Давайте перейдем к деталям.

Семантика пакетов пространств имен

Пакет пространства имен фундаментально не отличается от обычного пакета; он является лишь другим способом создания пакетов. Более того, они по-прежнему относительно sys.path на верхнем уровне: крайний слева компонент пути к пакету пространства имен с точками обязан находиться в элементе нормального пути поиска.

Однако с точки зрения физической структуры они могут существенно отличаться. Обычные пакеты должны иметь файл __init__.py, запускаемый автоматически, и размещаться в одном каталоге, как было ранее. По контрасту с ними пакеты пространств имен нового стиля не могут содержать файлы __init__.py и способны охватывать множество каталогов, которые объединяются на стадии импортирования. В действительности ни один из каталогов, составляющих пакет пространства имен, не может иметь файл __init__.py, но содержимое внутри них трактуется как единый пакет.

Алгоритм импортирования

Чтобы по-настоящему понять пакеты пространств имен, мы должны посмотреть на внутреннюю работу операции импортирования, начиная с версии Python 3.3. Во время импортирования Python по-прежнему проходит по всем каталогам в пути поиска модулей (который определяется sys.path для крайних слева компонентов операций абсолютного импортирования и местоположением пакета для операций относительного импортирования и компонентов, вложенных в пути пакета), как было в Python 3.2 и предшествующих версиях. Тем не менее, начиная с Python 3.3, во время поиска импортируемого модуля или пакета по имени spam для каждого каталога directory в пути поиска модулей Python проверяет более широкое многообразие критериев в следующем порядке.