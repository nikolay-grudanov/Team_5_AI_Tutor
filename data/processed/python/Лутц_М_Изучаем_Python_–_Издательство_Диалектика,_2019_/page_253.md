---
source_image: page_253.png
page_number: 253
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.33
tokens: 7804
characters: 2548
timestamp: 2025-12-24T01:14:54.675255
finish_reason: stop
---

>>> template = '{0}, {1} and {2}'      # По позициям
>>> template.format('spam', 'ham', 'eggs')
'spam, ham and eggs'

>>> template = '{motto}, {pork} and {food}'  # По ключевым словам
>>> template.format(motto='spam', pork='ham', food='eggs')
'spam, ham and eggs'

>>> template = '{motto}, {0} and {food}'    # По позициям и ключевым словам
>>> template.format('ham', motto='spam', food='eggs')
'spam, ham and eggs'

>>> template = '{}, {} and {}'              # По относительным позициям
>>> template.format('spam', 'ham', 'eggs')  # Нововведение Python 3.1 и 2.7
'spam, ham and eggs'

Для сравнения выражение форматирования из предыдущего раздела может быть более лаконичным, но в нем используются словари, а не ключевые аргументы, и оно не обеспечивает настолько высокую гибкость в отношении источников значений (что в зависимости от вашей точки зрения может считаться как ценным качеством, так и помехой); мы еще будем сравнивать эти две методики далее в главе:

>>> template = '%s, %s and %s'             # То же самое посредством выражения
>>> template % ('spam', 'ham', 'eggs')
'spam, ham and eggs'

>>> template = '%(motto)s, %(pork)s and %(food)s'
>>> template % dict(motto='spam', pork='ham', food='eggs')
'spam, ham and eggs'

Обратите внимание на применение здесь dict() для создания словаря из ключевых аргументов, представленного в главе 4 и подробно раскрываемого в главе 8; часто он оказывается менее громоздкой альтернативой литералу {...}. Естественно, строка, на которой вызывается метод format, также может быть литералом, создающим временную строку, а вместо целей могут подставляться объекты произвольных типов, что очень похоже на код %s выражения:

>>> '{motto}, {0} and {food}'.format(42, motto=3.14, food=[1, 2])
'3.14, 42 and [1, 2]'

Как и в случае с выражением % и другими строковыми методами, format создает и возвращает новый строковый объект, который можно немедленно вывести либо сохранить для дальнейшей работы (вспомните, что строки неизменяемы, поэтому метод format действительно обязан создать новый объект). Форматирование строк предназначено не только для отображения:

>>> x = '{motto}, {0} and {food}'.format(42, motto=3.14, food=[1, 2])
>>> x
'3.14, 42 and [1, 2]'
>>> x.split(' and ')
['3.14', '42', '[1, 2]']
>>> y = x.replace('and', 'but under no circumstances')
>>> y
'3.14, 42 but under no circumstances [1, 2]'

Добавление ключей, атрибутов и смещений

Подобно выражениям форматирования % при расширенном использовании вызовы метода format могут стать более сложными. Скажем, строки формата могут со-