---
source_image: page_252.png
page_number: 252
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.82
tokens: 7863
characters: 2876
timestamp: 2025-12-24T01:14:58.129341
finish_reason: stop
---

Подобный трюк также применяется в сочетании со встроенной функцией vars, возвращающей словарь, который содержит все переменные, существующие в месте ее вызова:

```python
>>> food = 'spam'
>>> qty = 10
>>> vars()
{'food': 'spam', 'qty': 10, ... плюс встроенные имена, установленные Python... }
```

При использовании в правой части операции % это позволяет строке формата ссылаться на переменные по именам — как на ключи словаря:

```python
>>> '%(qty)d more %(food)s' % vars()   # Переменные являются ключами в vars()
'10 more spam'
```

Словари более детально исследуются в главе 8. В главе 5 приводились примеры преобразования строк шестнадцатеричных и восьмеричных цифр посредством кодов %x и %o выражения форматирования, которые здесь не повторяются. Далее будут демонстрироваться дополнительные примеры выражений форматирования в сравнении с методами форматирования — последней темой в главе, касающейся строк.

Вызовы методов форматирования строк

Как упоминалось ранее, в версиях Python 2.6 и 3.0 появился новый способ форматирования строк, рассматриваемый некоторыми как более специфичный для Python. В отличие от выражений форматирования вызовы методов форматирования не так тесно связаны с моделью printf языка C и временами являются более явными в плане намерений. С другой стороны, новая методика по-прежнему опирается на основные концепции printf вроде кодов типов и спецификаций форматов. Более того, она в значительной степени пересекается с выражениями форматирования (а иногда требует написания чуть большего объема кода) и во многих практических ролях может быть столь же сложной. Из-за этого на сегодняшний день не существует рекомендаций относительно того, какую из методик лучше применять, и большинству программистов полезно бегло разбираться в обеих схемах. К счастью, они довольно похожи и многие концепции частично совпадают.

Основы методов форматирования

Метод format строкового объекта, доступный в Python 2.6, 2.7 и 3.x, базируется на обычном синтаксисе вызова функций, а не на выражении. В частности, он использует в качестве шаблона строку, на которой вызывается, и принимает любое количество аргументов, которые представляют значения, подлежащие подстановке согласно шаблону.

Применение метода format требует знания функций и вызовов, но в основном оно прямолинейно. Фигурные скобки внутри строки, на которой метод вызывается, обозначают цели подстановки и аргументы, вставляемые по позиции (например, {1}), по ключевому слову (скажем, {food}) или по относительной позиции в Python 2.7, 3.1 и более поздних версиях ({ }). Как вы узнаете во время подробного обсуждения передачи аргументов в главе 18, передавать аргументы функциям и методам можно по позициям или по ключевым словам, а способность Python накапливать произвольное количество позиционных и ключевых аргументов делает возможными такие обобщенные шаблоны вызова методов. Например: