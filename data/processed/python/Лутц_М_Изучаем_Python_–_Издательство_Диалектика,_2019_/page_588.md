---
source_image: page_588.png
page_number: 588
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.74
tokens: 7816
characters: 2852
timestamp: 2025-12-24T01:25:38.879221
finish_reason: stop
---

из областей видимости объемлющих функций, модуля и встроенной (через правило LEGB, обсуждавшееся в главе 17):

```python
>>> def knights():
    title = 'Sir'
    action = (lambda x: title + ' ' + x)    # title из области видимости
                                             # объемлющего def
    return action                           # Возвращение объекта функции

>>> act = knights()
>>> msg = act('robin')                     # 'robin' передается аргументу x
>>> msg
'Sir robin'

>>> act                                    # act: функция, а не ее результат
<function knights.<locals>.<lambda> at 0x0000000029CA488>
```

До выхода версии Python 2.2 в приведенном примере значение для имени title обычно взамен передавалось как стандартное значение аргумента; если вы подзабыли области видимости, тогда перечитайте главу 17.

Для чего используется выражение lambda?

Вообще говоря, выражение lambda полезно как своего рода краткое условное обозначение функции, которое позволяет встраивать определение функции внутрь кода, где оно применяется. Выражение lambda совершенно необязательно — вы всегда можете вместо него использовать оператор def и должны поступать так, если функция требует мощи полных операторов, которую выражение lambda не способно легко предоставить. Но в сценариях, где нужно всего лишь встраивать небольшие порции исполняемого кода в местах их применения, выражения lambda окажутся более простыми кодовыми конструкциями.

Скажем, позже мы выясним, что обработчики обратных вызовов часто записываются как внутристрочные выражения lambda, встроенные прямо в список аргументов регистрирующего вызова, взамен их определения с помощью def где-то в коде и ссылки по имени (см. врезку "Что потребует внимания: обратные вызовы lambda" далее в главе).

Выражения lambda также широко используются при реализации таблиц переходов, которые представляют собой списки или словари действий, подлежащих выполнению по запросу. Вот пример:

```python
L = [lambda x: x ** 2,      # Внутристрочное определение функции
     lambda x: x ** 3,
     lambda x: x ** 4]      # Список из трех вызываемых функций

for f in L:
    print(f(2))            # Выводит 4, 8, 16
print(L[0](3))              # Выводит 9
```

Выражение lambda наиболее полезно в качестве сокращения для def, когда необходимо размещать небольшие порции исполняемого кода там, где операторы запрещены синтаксисом. Например, в предыдущем фрагменте кода строится список из трех функций за счет встраивания выражений lambda в списковый литерал; внутри списковых литералов такого рода def не допускается, поскольку он является оператором, а не выражением. Эквивалентный код с def потребовал бы временных имен функций (они могли бы конфликтовать с остальными именами) и определений функций за пределами контекста их планируемого применения (который может находиться на сотни строк дальше):