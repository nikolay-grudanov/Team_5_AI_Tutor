---
source_image: page_181.png
page_number: 181
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.34
tokens: 7822
characters: 2669
timestamp: 2025-12-24T01:12:35.823229
finish_reason: stop
---

Поддержка обеих версий Python

Несмотря на то что операция / ведет себя по-разному в Python 2.x и 3.x, вы все равно можете поддерживать в своем коде обе версии. Если ваши программы полагаются на целочисленное деление с усечением, тогда используйте операцию // в Python 2.x и 3.x, как только что упоминалось. Если ваши программы требуют результатов с плавающей запятой с остатками для целых чисел, то применяйте float, чтобы во время выполнения в Python 2.x гарантировать то, что один из операндов операции / является числом с плавающей запятой:

X = Y // Z      # Всегда усекает, всегда возвращает целочисленный
                # результат для целых в Python 2.x и 3.x
X = Y / float(Z) # Гарантирует деление с плавающей точкой с остатком
                # в Python 2.x или Python 3.x

В качестве альтернативы с помощью импортирования __future__ вы можете сделать доступным в Python 2.x поведение операции / из версии Python 3.x вместо его принудительного обеспечения через преобразования float:

C:\code> C:\Python27\python
>>> from __future__ import division # Делает доступным поведение / из Python 3.x
>>> 10 / 4
2.5
>>> 10 // 4    # Целочисленное деление // одинаково в обеих версиях
2

Показанный выше специальный оператор from сохраняет актуальность до конца сеанса, когда вводится интерактивно, как здесь, и он должен быть первой исполняемой строкой при использовании в файле сценария (увы, в Python мы можем импортировать из будущего, но не из прошлого).

Округление в меньшую сторону или усечение

Следует отметить одну тонкость: операция // неофициально называется усекающим делением, но более точно говорить о ней как о делении с округлением в меньшую сторону — она усекает результат до ближайшего целого значения, которое меньше подлинного результата. Совокупным эффектом оказывается округление с понижением, а не строгое усечение, и это имеет значение при работе с отрицательными числами. Вы можете прояснить для себя указанное отличие с помощью Python-модуля math (модули должны импортироваться, прежде чем можно будет задействовать их содержимое; мы обсудим импортирование позже):

>>> import math
>>> math.floor(2.5)    # Ближайшее меньшее значение
2
>>> math.floor(-2.5)
-3
>>> math.trunc(2.5)    # Усечение дробной части (в сторону нуля)
2
>>> math.trunc(-2.5)
-2

При выполнении операций деления усечение в действительности происходит только для положительных результатов, т.к. оно совпадает с округлением в меньшую сторону; для отрицательных значений им будет округленный результат (на самом деле в обоих случаях производится округление в меньшую сторону, но для положительных чисел округление — то же самое, что и усечение). Вот код для Python 3.x: