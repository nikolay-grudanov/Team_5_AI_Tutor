---
source_image: page_751.png
page_number: 751
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.16
tokens: 7949
characters: 3177
timestamp: 2025-12-24T01:30:37.465030
finish_reason: stop
---

1. Если найден файл directory\spam\__init__.py, тогда импортируется и возвращается обычный пакет.

2. Если найден файл directory\spam.{py, rus или другое расширение модуля}, тогда импортируется и возвращается простой модуль.

3. Если найден каталог directory\spam, то он регистрируется и просмотр продолжается со следующего каталога в пути поиска.

4. Если ничего из перечисленного выше не найдено, тогда просмотр продолжается со следующего каталога в пути поиска.

Если просмотр пути поиска завершился без возвращения модуля или пакета на шаге 1 или 2 и без регистрации, по крайней мере, одного каталога на шаге 3, тогда создается пакет пространства имен.

Создание пакета пространства имен происходит немедленно и не откладывается до того, как встретится внутренняя операция импортирования. Новый пакет пространства имен имеет атрибут __path__, установленный в итерируемый объект со строками путей к каталогам, которые были обнаружены и зарегистрированы на шаге 3 просмотра, но не имеет атрибута __file__.

Атрибут __path__ затем применяется в дальнейших более глубоких обращениях для поиска во всех компонентах пакета — всякий раз, когда запрашиваются дополнительные вложенные элементы, производится поиск в каждой зарегистрированной записи внутри атрибута __path__ пакета пространства имен во многом подобно единственному каталогу обычного пакета.

Говоря по-другому, атрибут __path__ пакета пространства имен исполняет ту же самую роль для компонентов более низкого уровня, что и sys.path на верхнем уровне для крайнего слева компонента путей к импортируемым пакетам. Он становится "родительским путем" для доступа к элементам более низкого уровня с использованием описанной выше процедуры из четырех шагов.

Совокупный эффект в том, что пакет пространства имен является своего рода виртуальным сцеплением каталогов, находящихся через возможно многие элементы в пути поиска модулей. Однако после того как пакет пространства имен создан, функциональные отличия между ним и обычным пакетом отсутствуют; он поддерживает все, что присуще обычным пакетам, включая синтаксис импортирования относительно пакета.

Влияние на обычные пакеты:
необходимость __init__.py

Одно из последствий новой процедуры импортирования связано с тем, что начиная с версии Python 3.3, пакеты больше не требуют файлов __init__.py — если в пакете с единственным каталогом данный файл отсутствует, тогда пакет будет трактоваться как пакет пространства имен с единственным каталогом без выдачи предупреждений. Это серьезное ослабление предшествующих правил, но обычно запрашиваемое изменение; многие пакеты не требуют инициализационного кода, и необходимость в создании пустых инициализационных файлов в таких случаях представляется излишней. С выпуском Python 3.3 файлы __init__.py стали необязательными.

В то же время исходная модель обычных пакетов по-прежнему полноценно поддерживается и автоматически выполняет код в __init__.py в качестве привязки инициализации. Кроме того, когда известно, что пакет никогда не будет частью расщепленного пакета пространства имен, то его реализация в виде обычного пакета с файлом __init__.py обеспечивает преимущество в плане производительности. Создание и за-