---
source_image: page_331.png
page_number: 331
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.82
tokens: 7816
characters: 2307
timestamp: 2025-12-24T01:17:39.721383
finish_reason: stop
---

Сравнения и сортировка разнородных типов в Python 2.X и Python 3.X

Согласно последнему пункту списка из предыдущего раздела изменение в Python 3.X для сравнений нечисловых разнородных типов применяется к проверкам величин, а не равенства, но оно также опосредованно применяется к сортировке, которая внутренне выполняет проверки величин. В Python 2.X все это работает, хотя разнородные типы сравниваются путем произвольного упорядочения:

c:\code> c:\python27\python
>>> 11 == '11'      # Проверка равенства не преобразует нечисловые значения
False
>>> 11 >= '11'      # В Python 2.X сравниваются строки имен типов: int, str
False
>>> ['11', '22'].sort()   # То же самое в отношении сортировки
>>> [11, '11'].sort()

Но в Python 3.X проверка величин разнородных типов запрещена за исключением числовых и вручную преобразованных типов:

c:\code> c:\python33\python
>>> 11 == '11'      # Python 3.X: проверка равенства работает,
# но проверка величин - нет
False
>>> 11 >= '11'
TypeError: unorderable types: int() > str()
Ошибка типа: неупорядочиваемые типы: int() > str()
>>> ['11', '22'].sort()   # То же самое в отношении сортировки
>>> [11, '11'].sort()
TypeError: unorderable types: str() < int()
Ошибка типа: неупорядочиваемые типы: str() < int()
>>> 11 > 9.123   # Числа разнородных типов преобразуются в наибольший тип
True
>>> str(11) >= '11', 11 >= int('11')   # Проблему решают ручные преобразования
(True, True)

Сравнения словарей в Python 2.X и Python 3.X

Второй с конца пункт списка из предыдущего раздела также заслуживает иллюстрации. В Python 2.X словари поддерживают сравнения величин, как если бы сравнивались отсортированные списки пар "ключ/значение":

C:\code> c:\python27\python
>>> D1 = {'a':1, 'b':2}
>>> D2 = {'a':1, 'b':3}
>>> D1 == D2   # Равенство словарей: Python 2.X + Python 3.X
False
>>> D1 < D2   # Сравнение величин для словарей: только Python 2.X
True

Тем не менее, как кратко упоминалось в главе 8, сравнения величины для словарей были изъяты из Python 3.X, потому что они влекут за собой слишком высокие накладные расходы, когда необходимо лишь выяснить равенство (при проверке равенства в Python 3.X используется оптимизированная схема, которая не сравнивает буквально отсортированные списки пар "ключ/значение"):

C:\code> c:\python33\python
>>> D1 = {'a':1, 'b':2}