---
source_image: page_251.png
page_number: 251
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.50
tokens: 7814
characters: 2404
timestamp: 2025-12-24T01:14:50.900814
finish_reason: stop
---

>>> '%e | %f | %g' % (x, x, x)
'1.234568e+00 | 1.234568 | 1.23457'
>>> '%E' % x
'1.234568E+00'

Добиться дополнительных эффектов форматирования для чисел с плавающей точкой можно, указывая выравнивание влево, дополнение нулями, знак числа, общую ширину поля и количество цифр после десятичной точки. Для более простых задач можно обойтись простым преобразованием в строки с помощью выражения формата %s или показанной ранее встроенной функции str:

>>> '%-6.2f | %05.2f | %+06.1f' % (x, x, x)
'1.23 | 01.23 | +001.2'
>>> '%s' % x, str(x)
('1.23456789', '1.23456789')

Когда размеры не известны вплоть до времени выполнения, можно применять вычисляемые ширину и точность, указав для них * в строке формата, чтобы значения извлекались из следующего элемента во входных данных справа от операции % — в следующем кортеже 4 дает точность:

>>> '%f, .2f, .*f' % (1/3.0, 1/3.0, 4, 1/3.0)
'0.333333, 0.33, 0.3333'

Если вас заинтересовала такая возможность, то можете самостоятельно поэкспериментировать с некоторыми приведенными примерами и операциями для лучшего их понимания.

Выражения форматирования, основанные на словаре

В качестве более развитого расширения форматирование строк также разрешает целям преобразования в левой части ссылаться на ключи в словаре, записанном в правой части, и извлекать соответствующие значения. Это открывает возможность использовать форматирование как инструмент организации шаблона. До сих пор мы лишь кратко упоминали о словарях в главе 4, но вот пример, который демонстрирует основы:

>>> '%(qty)d more %(food)s' % {'qty': 1, 'food': 'spam'}
'1 more spam'

Здесь (qty) и (food) слева в строке формата ссылаются на ключи в литерале словаря справа и извлекают связанные с ними значения. Такой прием часто применяется в программах, генерирующих текст HTML или XML. Можно построить словарь значений и подставить их все сразу с помощью единственного выражения форматирования, которое использует ссылки на основе ключей (обратите внимание, что первый комментарий находится выше утроенной кавычки, а потому не добавляется в строку; кроме того, код набирался в IDLE без приглашения ... к продолжению ввода):

>>> # Шаблон с целями подстановки
>>> reply = """
Greetings...
Hello %(name)s!
Your age is %(age)s
"""
>>> values = {'name': 'Bob', 'age': 40} # Создание значений для подстановки
>>> print(reply % values) # Выполнение подстановок
Greetings...
Hello Bob!
Your age is 40