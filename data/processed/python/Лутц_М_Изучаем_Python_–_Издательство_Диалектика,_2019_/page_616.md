---
source_image: page_616.png
page_number: 616
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.20
tokens: 7830
characters: 2498
timestamp: 2025-12-24T01:26:28.329494
finish_reason: stop
---

StopIteration
>>> G
<generator object <genexpr> at 0x0000000029A8318>

Опять-таки обычно мы не видим внутренний итерационный механизм next генераторного выражения вроде показанного, т.к. циклы for запускают его автоматически:

>>> for num in (x ** 2 for x in range(4)):
    print('%s, %s' % (num, num / 2.0))
0, 0.0
1, 0.5
4, 2.0
9, 4.5

Как вам уже известно, так поступает каждый итерационный контекст: циклы for, встроенные функции sum, map и sorted, списковые включения и другие итерационные контексты, рассмотренные в главе 14, в том числе встроенные функции any, all и list. Будучи итерируемыми объектами, генераторные выражения могут появляться в любом итерационном контексте подобного рода в точности как результат вызова генераторной функции.

Например, в следующем коде генераторные выражения находятся в вызове строкового метода join и в присваивании кортежа, которые оба представляют собой итерационные контексты. В первом случае join запускает генератор и объединяет производимые им подстроки, ничего между ними не помещая — просто выполняет конкатенацию:

>>> ''.join(x.upper() for x in 'aaa,bbb,ccc'.split(','))
'AAABBBBCCC'

>>> a, b, c = (x + '\n' for x in 'aaa,bbb,ccc'.split(','))
>>> a, c
('aaa\n', 'ccc\n')

Обратите внимание, что вызов join в предыдущем коде не требует дополнительных круглых скобок вокруг генератора. Согласно синтаксису, когда генераторное выражение является единственным элементом, который уже заключен в круглые скобки, предназначенные для других целей, то помещать его в еще одну пару круглых скобок не требуется. Однако во всех остальных случаях круглые скобки обязательны, даже если они кажутся излишними, как во втором вызове sorted:

>>> sum(x ** 2 for x in range(4))      # Круглые скобки необязательны
14
>>> sorted(x ** 2 for x in range(4))   # Круглые скобки необязательны
[0, 1, 4, 9]
>>> sorted((x ** 2 for x in range(4)), reverse=True)   # Круглые скобки обязательны
[9, 4, 1, 0]

Подобно часто необязательным круглым скобкам в кортежах здесь нет широко принято правила, хотя генераторное выражение не исполняет такой четкой роли, как фиксированная коллекция других объектов вроде кортежа, поэтому добавочные круглые скобки, вероятно, выглядят в нем паразитными.

Для чего используются генераторные выражения?

В точности как генераторные функции генераторные выражения обеспечивают оптимизацию расхода памяти — они не требуют создания сразу всего результирующего списка, что происходит в случае спискового включения в квадратных скобках. Также