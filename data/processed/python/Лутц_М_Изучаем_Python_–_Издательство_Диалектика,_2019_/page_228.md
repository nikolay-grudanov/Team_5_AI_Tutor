---
source_image: page_228.png
page_number: 228
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.11
tokens: 7849
characters: 2870
timestamp: 2025-12-24T01:14:09.058601
finish_reason: stop
---

Неформатированные строки подавляют управляющие последовательности

Как уже выяснилось, управляющие последовательности удобны для внедрения кодов специальных символов внутрь строк. Тем не менее, иногда специальная трактовка обратной косой черты для введения управляющей последовательности может вызывать затруднения. Скажем, удивительно часто новички в Python пытаются открыть файл, передавая в качестве аргумента имя файла, которое выглядит примерно так:

myfile = open('C:\\new\\text.dat', 'w')

Они полагают, что откроют файл по имени text.dat в каталоге C:\new. Проблема здесь в том, что \n обозначает символ новой строки, а \t заменяется табуляцией. В действительности такой вызов open пытается открыть файл с именем C:(новая строка)ew(табуляция)ext.dat, приводя к не особенно выдающимся результатам.

Как раз в таких ситуациях становятся полезными неформатированные строки. Если прямо перед открывающей кавычкой строки указать букву r (в нижнем или верхнем регистре), тогда механизм отмены отключается. В итоге Python сохраняет символы обратной косой черты буквально, в точности как они набраны. Следовательно, для устранения проблемы с именем файла в Windows нужно просто не забыть добавить букву r:

myfile = open(r'C:\new\text.dat', 'w')

В качестве альтернативы, поскольку две обратные косые черты на самом деле представляют собой управляющую последовательность для одной обратной косой черты, предохранить обратные косые черты в имени файла можно, просто продублировав их:

myfile = open('C:\\\\new\\\\text.dat', 'w')

Фактически сам Python временами использует такую схему дублирования, когда выводит строки с внедренными обратными косыми чертами:

>>> path = r'C:\new\text.dat'
>>> path        # Отображает в формате, как в коде Python
'C:\\new\\text.dat'
>>> print(path)   # Отображает в формате, дружественном к пользователю
C:\new\text.dat
>>> len(path)     # Длина строки
15

Как и в случае числового представления, стандартный формат в интерактивной подсказке предусматривает отображение результатов в виде, который они имели бы, находясь в коде, а потому отменяет обратные косые черты в выводе. Оператор print поддерживает более дружественный к пользователю формат, отображающий по одной обратной косой черте в каждом месте. Чтобы убедиться в этом, можете проверить результат встроенной функции len, которая возвращает количество символов в строке независимо от форматов отображения. Если вы подсчитаете символы в выводе print(path), то заметите, что на каждую обратную косую черту приходится по одному символу, а всего в строке 15 символов.

Кроме путей к каталогам в Windows неформатированные строки также обычно применяются в регулярных выражениях (сопоставление текста с образцом, поддерживаемое модулем re из глав 4 и 37). Также имейте в виду, что сценарии Python, как правило, могут использовать прямые косые черты в путях к каталогам в Windows и