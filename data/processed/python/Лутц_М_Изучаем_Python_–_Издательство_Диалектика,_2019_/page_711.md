---
source_image: page_711.png
page_number: 711
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.61
tokens: 7811
characters: 2753
timestamp: 2025-12-24T01:29:24.185314
finish_reason: stop
---

• Операторы модуля выполняются при его первом импортировании. Когда модуль впервые импортируется в любом месте системы, Python создает пустой объект модуля и выполняет операторы из файла модуля друг за другом от начала до конца файла.

• Присваивания на верхнем уровне модуля создают его атрибуты. Во время выполнения операции импортирования не вложенные в def или class операторы на верхнем уровне файла, которые присваивают значения именам (например, =, def), создают атрибуты объекта модуля; присвоенные имена сохраняются в пространстве имен модуля.

• Доступ к пространству имен модуля можно получить через атрибут __dict__ или посредством dir(M). Пространства имен модулей, созданные операциями импортирования, представляют собой словари; к ним можно обращаться через встроенный атрибут __dict__, ассоциированный с объектами модулей, и инспектировать с помощью функции dir. Функция dir является приближительным эквивалентом отсортированного списка ключей атрибута __dict__ объекта модуля, но содержит унаследованные имена для классов, может возвращать неполный список, а также предрасположена к изменениям от выпуска к выпуску.

• Модуль представляет собой одиночную область видимости (локальная является глобальной). Как выяснилось в главе 17, имена на верхнем уровне модуля следуют таким же правилам ссылки/присваивания, как имена в функции, но локальная и глобальная области видимости совпадают. Выражаясь более формально, они следуют правилу поиска в областях видимости LEGB, с которым мы встречались в главе 17, но без уровней просмотра L и E.

Тем не менее, важно понимать, что после того, как модуль был загружен, глобальная область видимости модуля становится словарем атрибутов объекта модуля. В отличие от области видимости функции, где локальное пространство имен существует только во время выполнения функции, область видимости файла модуля становится пространством имен атрибутов объекта модуля и продолжает существовать после окончания операции импортирования, предоставляя источник инструментов импортерам.

Ниже показана демонстрация описанных идей. Предположим, что мы создали в текстовом редакторе следующий файл модуля и назвали его module2.py:

print('starting to load...')    # начало загрузки...
import sys
name = 42
def func(): pass
class klass: pass
print('done loading.')    # загрузка окончена.

Когда этот модуль импортируется (или запускается как программа) в первый раз, Python выполняет его операторы от начала до конца. Одни операторы в качестве подобного эффекта создают имена в пространстве имен модуля, но другие делают фактическую работу, пока длится операция импортирования. Например, во время импортирования выполняются два оператора print из данного файла:

>>> import module2
starting to load...
done loading.