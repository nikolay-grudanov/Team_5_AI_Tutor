---
source_image: page_519.png
page_number: 519
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.37
tokens: 7652
characters: 2132
timestamp: 2025-12-24T01:23:30.841846
finish_reason: stop
---

функцию, он будет знать, что она входит в состав интерфейса, и ожидать изменения X. Другими словами, функция доступа устраняет элемент неожиданности, который редко считается чем-то хорошим в программных проектах. Несмотря на то что мы не в состоянии вообще предотвратить межфайловые изменения, здравый смысл подсказывает, что они должны быть сведены к минимуму, если только не являются широко принятыми в программе.

Когда мы встретимся с классами в части VI, то увидим похожие методики для написания кода средств доступа к атрибутам. В отличие от модулей классы также способны автоматически перехватывать извлечения атрибутов с помощью перегрузки операций, даже если их клиенты не применяют средства доступа.

Другие способы доступа к глобальным переменным

Интересно отметить, что по причине превращения переменных из глобальной области видимости в атрибуты объекта загруженного модуля мы можем эмулировать оператор global, импортируя включающий модуль и выполняя присваивание его атрибутам, как показано в следующем примере файла модуля. Код в этом файле импортирует включающий модуль сначала по имени, а затем путем индексации таблицы загруженных модулей sys.modules (которая обсуждается в главах 22 и 25):

# thismod.py
var = 99
def local():
    var = 0
def glob1():
    global var
    var += 1
def glob2():
    var = 0
    import thismod
    thismod.var += 1
def glob3():
    var = 0
    import sys
    glob = sys.modules['thismod']
    glob.var += 1
def test():
    print(var)
    local(); glob1(); glob2(); glob3()
    print(var)

# Глобальная переменная == атрибут модуля
# Изменение локальной переменной
# Объявление глобальной переменной
# (нормальное)
# Изменение глобальной переменной
# Изменение локальной переменной
# Импортирование самого себя
# Изменение глобальной переменной
# Изменение локальной переменной
# Импортирование системной таблицы
# Получение объекта модуля
# (либо использовать __name__)
# Изменение глобальной переменной

Выполнение приводит к добавлению 3 к глобальной переменной (на нее не оказывает влияния только первая функция):

>>> import thismod
>>> thismod.test()
99
102
>>> thismod.var
102