---
source_image: page_600.png
page_number: 600
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 34.04
tokens: 7819
characters: 2764
timestamp: 2025-12-24T01:26:01.127040
finish_reason: stop
---

дача настолько распространена при написании кода Python, в языке Python в итоге появилось новое выражение — *спиковое включение*, которое обладает даже большей гибкостью, чем только что изученные инструменты.

Согласно истории Python вдохновением для ввода списковых включений поначалу послужил похожий инструмент в языке функционального программирования Haskell, что было примерно во времена версии Python 2.0. Вкратце списковые включения применяют к элементам в итерируемом объекте произвольное *выражение* вместо функции. Соответственно они могут быть более универсальными инструментами. В последних выпусках включения были расширены для исполнения других ролей — для множеств, словарей и даже выражений генераторов значений, которые мы исследуем в настоящей главе. Они больше не предназначены только для списков.

Впервые мы встретили списковые включения в предварительном обзоре в главе 4 и дополнительно обсуждали их в главе 14 в сочетании с операторами циклов. Тем не менее, поскольку они также относятся к инструментам функционального программирования вроде map и filter, мы еще раз возвращаемся к данной теме. Формально это средство не завязано на функции — мы увидим, что списковые включения способны быть более универсальным инструментом, чем map и filter, но иногда их проще понять по аналогии с альтернативами на базе функций.

**Списковые включения или map**

Давайте проработаем пример, который демонстрирует основы. Как было показано в главе 7, встроенная функция ord в Python возвращает целочисленную кодовую точку одиночного символа (встроенная функция chr делает обратное — возвращает символ для целочисленной кодовой точки). Если символы попадают в диапазон 7-битных кодовых точек набора символов ASCII, тогда они будут кодами ASCII:

```python
>>> ord('s')
115
```

Теперь предположим, что нужно собрать коды ASCII всех символов в единой строке. Возможно, наиболее прямолинейный подход предусматривает использование простого цикла for и добавление результатов в список:

```python
>>> res = []
>>> for x in 'spam':
    res.append(ord(x))      # Сбор результатов вручную
>>> res
[115, 112, 97, 109]
```

Однако, располагая сведениями о map, мы можем достичь похожих результатов без необходимости в управлении построением списка внутри кода:

```python
>>> res = list(map(ord, 'spam'))   # Применение функции к последовательности
# (или другому объекту)
>>> res
[115, 112, 97, 109]
```

Тем не менее, такие же результаты можно получить из выражения спискового включения — в то время как map отображает функцию на итерируемый объект, списковые включения отображают выражение на последовательность или другой итерируемый объект:

```python
>>> res = [ord(x) for x in 'spam']  # Применение выражения к последовательности
# (или другому объекту)
```