---
source_image: page_316.png
page_number: 316
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.54
tokens: 7844
characters: 2783
timestamp: 2025-12-24T01:17:03.755157
finish_reason: stop
---

стовые файлы реализуют кодировки Unicode, вы не должны открывать файл двоичных данных в текстовом режиме — декодирование его содержимого в текст Unicode, скорее всего, потерпит неудачу.

Рассмотрим пример. Когда вы читаете файл двоичных данных, то получаете обратно объект bytes — последовательность небольших целых чисел, представляющих абсолютные байтовые значения (соответствующие или не соответствующие символам), которая выглядит почти как нормальная строка. Вот код для Python 3.x, исходя из предположения, что двоичный файл существует:

```python
>>> data = open('data.bin', 'rb').read() # Открытие двоичного файла:
#    rb = чтение двоичный
>>> data
b'\x00\x00\x00\x07spam\x00\x08'
>>> data[4:8] # Действует подобно строкам
b'spam'
>>> data[4:8][0] # Но на самом деле является 8-битными
# целыми числами
115
>>> bin(data[4:8][0]) # Функция bin() из Python 3.x/2.6+
'0b1110011'
```

Кроме того, двоичные файлы не производят трансляцию символов конца строки в данных; текстовые файлы по умолчанию отображают все их формы в \n и обратно во время записи и чтения, а также реализуют кодировки Unicode при передачах в Python 3.x. Двоичные файлы вроде показанного выше работают в Python 2.x точно так же, но байтовые строки представляют собой просто нормальные строки и при выводе не имеют ведущих символов b, а текстовые файлы для добавления обработки Unicode обязаны применять модуль codecs.

Тем не менее, согласно примечанию в начале главы, это все, что мы собирались здесь обсудить о тексте Unicode и файлах двоичных данных, и его вполне достаточно для понимания предстоящих примеров в главе. Так как различие представляет лишь незначительный интерес для многих программистов на Python, мы предлагаем обзор файлов в главе 4, а более подробные исследования — в главе 37. А теперь перейдем к более существенным примерам работы с файлами, чтобы продемонстрировать несколько распространенных сценариев использования.

Хранение объектов Python в файлах: преобразования

В следующем примере производится запись разнообразных объектов Python в текстовый файл во множество строк. Обратите внимание, что объекты должны быть преобразованы в строки с применением инструментов преобразования. Опять-таки данные файла всегда являются строками в наших сценариях, и методы записи не делают никакого автоматического форматирования строк (ради экономии места счетчики байтов, выводимые вызовами write, здесь не показаны):

```python
>>> X, Y, Z = 43, 44, 45 # Собственные объекты Python
>>> S = 'Spam' # Для сохранения в файле обязаны быть строками
>>> D = {'a': 1, 'b': 2}
>>> L = [1, 2, 3]
>>>
>>> F = open('datafile.txt', 'w') # Создание выходного текстового файла
>>> F.write(S + '\n') # Завершение строк символом \n
>>> F.write('%s,%s,%s\n' % (X, Y, Z)) # Преобразование чисел в строки
```