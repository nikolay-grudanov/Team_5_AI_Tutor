---
source_image: page_456.png
page_number: 456
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.78
tokens: 11905
characters: 2050
timestamp: 2025-12-24T01:56:06.429611
finish_reason: stop
---

Глава 14. Итерируемые объекты, итераторы и генераторы

Генератор cycle создает внутреннюю копию входного итерируемого объекта и в бесконечном цикле отдает его элементы снова и снова.

Пример 14.19. Функции count, cycle и repeat

```python
>>> ct = itertools.count() # ①
>>> next(ct) # ②
0
>>> next(ct), next(ct), next(ct) # ③
(1, 2, 3)
>>> list(itertools.islice(itertools.count(1, .3), 3)) # ④
[1, 1.3, 1.6]
>>> cy = itertools.cycle('ABC') # ⑤
>>> next(cy)
'A'
>>> list(itertools.islice(cy, 7)) # ⑥
['B', 'C', 'A', 'B', 'C', 'A', 'B']
>>> rp = itertools.repeat(7) # ⑦
>>> next(rp), next(rp)
(7, 7)
>>> list(itertools.repeat(8, 4)) # ⑧
[8, 8, 8, 8]
>>> list(map(operator.mul, range(11), itertools.repeat(5))) # ⑨
[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]
```

1. count создает генератор ct.
2. Получить от ct первый элемент.
3. Построить из ct список невозможно, т. к. ct никогда не останавливается, поэтому я просто получаю следующие три элемента.
4. Построить список с помощью генератора count можно, если он ограничен с помощью функции islice или takewhile.
5. Строим генератор cycle из 'ABC' и получаем от него первый элемент — 'A'.
6. Список можно построить, только если наложить ограничение с помощью islice; здесь извлекаются следующие семь элементов.
7. Строим генератор repeat, который вечно отдает число 7.
8. Генератор repeat можно ограничить, передав аргумент times: данном случае число 8 отдается 4 раза.
9. Типичное применение repeat: подстановка фиксированного аргумента в функцию map: в данном случае подставляется множитель 5.

Генераторные функции combinations, combinations_with_replacement и permutations — вместе с product — в документации itertools называются комбинаторными генераторами (http://bit.ly/py-itertools). Существует тесная связь между itertools.product и остальными комбинаторными функциями (см. пример 14.20).

Пример 14.20. Комбинаторные генераторные функции отдают несколько значений для каждого входного элемента

```python
>>> list(itertools.combinations('ABC', 2)) # ①
[('A', 'B'), ('A', 'C'), ('B', 'C')]
```