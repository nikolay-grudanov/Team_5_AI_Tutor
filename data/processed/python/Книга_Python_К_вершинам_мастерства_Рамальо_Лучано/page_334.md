---
source_image: page_334.png
page_number: 334
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.72
tokens: 11761
characters: 1890
timestamp: 2025-12-24T01:50:04.289575
finish_reason: stop
---

return (i for i in (self.x, self.y))

# прочие методы опущены

В примере 9.7 мы преобразовали x и y в свойства, доступные только для чтения (пример 11.2). Это существенный рефакторинг, но обращенный к пользователю интерфейс Vector2d не изменился: нотация my_vector.x и my_vector.y по-прежнему допустима.

Пример 11.2. vector2d_v3.py: x и y преобразованы в свойства (полный код см. в примере 9.9)

class Vector2d:
    typecode = 'd'

    def __init__(self, x, y):
        self.__x = float(x)
        self.__y = float(y)

    @property
    def x(self):
        return self.__x

    @property
    def y(self):
        return self.__y

    def __iter__(self):
        return (i for i in (self.x, self.y))

    # прочие методы опущены

Дадим полезное дополнительное определение интерфейса: подмножество открытых методов объекта, которое позволяет ему играть определенную роль в системе. Именно это имеется в виду в таких встречающихся в документации по Python выражениях, как «объект, похожий на файл» или «итерируемый объект», без упоминания конкретного класса. Интерфейс, рассматриваемый как набор методов, позволяющих играть какую-то роль, в языке Smalltalk называется протоколом, и этот термин позаимствовали сообщества других динамических языков. Протоколы никак не связаны с наследованием. Класс может реализовывать несколько протоколов, т. е. играть несколько разных ролей.

Протоколы — это интерфейсы, но поскольку они неформальны — определены лишь путем документирования и соглашений — то не могут быть строго поддержанны, как формальные интерфейсы (ниже в этой главе мы увидим, как ABC проверяют согласованность с интерфейсом). Протокол можно реализовать в некотором классе лишь частично, и это вполне допустимо. Иногда все, что требуется от «похожего на файл объекта», — иметь метод .read(), который возвращает байты. Все прочие методы файла в данном контексте могут и не требоваться.