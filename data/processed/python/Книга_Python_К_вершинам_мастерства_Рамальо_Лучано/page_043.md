---
source_image: page_043.png
page_number: 43
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.16
tokens: 11676
characters: 1589
timestamp: 2025-12-24T01:36:18.601054
finish_reason: stop
---

Списковое включение и генераторные выражения

Раньше я думал, что композиция map и filter быстрее эквивалентного спискового включения, но Алекс Мартелли показал, что это не так, по крайней мере, в примере выше. В репозитории кода для этой книги (https://github.com/fluentpython/example-code) имеется скрипт 02-array-seq/listcomp_speed.py (http://bit.ly/1Vm6R3n) для сравнения времени работы listcomp и filter/map.

В главе 5 я еще вернусь к функциям map и filter. А пока займемся использованием спискового включения для вычисления декартова произведения: списка, содержащего все кортежи, включающие по одному элементу из каждого списка-сомножителя.

Декартовы произведения

С помощью спискового включения можно сгенерировать список элементов декартова произведения двух и более итерируемых объектов. Декартово произведение — это множество кортежей, включающих по одному элементу из каждого объекта-сомножителя. Длина результирующего списка равна произведению длин входных объектов (рис. 2.2).

![Декартово произведение](../images/ch2_2.png)

Рис. 2.2. Декартово произведение последовательности трех достоинств карт и последовательности четырех мастей дает последовательность, состоящую из двенадцати пар

Пример 2.4. Построение декартова произведения с помощью спискового включения

```python
>>> colors = ['black', 'white']
>>> sizes = ['S', 'M', 'L']
>>> tshirts = [(color, size) for color in colors for size in sizes] ①
>>> tshirts
[('black', 'S'), ('black', 'M'), ('black', 'L'), ('white', 'S'), ('white', 'M'), ('white', 'L')]
>>> for color in colors: ②
...     for size in sizes:
```