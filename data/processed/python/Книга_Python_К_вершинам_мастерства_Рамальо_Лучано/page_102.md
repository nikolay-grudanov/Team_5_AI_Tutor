---
source_image: page_102.png
page_number: 102
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.06
tokens: 11772
characters: 1844
timestamp: 2025-12-24T01:39:15.381263
finish_reason: stop
---

Теория множеств

Множества — сравнительно недавнее добавление к Python, которое используется недостаточно широко. Тип set и его неизменяемый вариант frozenset впервые появились в виде модуля в Python 2.3, а в Python 2.6 были «повышены» до встроенных типов.

Множество — это набор уникальных объектов. Поэтому один из основных способов его использования — устранение дубликатов:

```python
>>> l = ['spam', 'spam', 'eggs', 'spam']
>>> set(l)
{'eggs', 'spam'}
>>> list(set(l))
['eggs', 'spam']
```

В этой книге словом «множество» обозначается как set, так и frozenset.

Элементы множества должны быть хэшируемыми. Сам тип set хэшируемым не является, но тип frozenset хэшируемый, поэтому элементами множества могут быть объекты типа frozenset.

Помимо гарантии уникальности, типы множества предоставляют набор теоретико-множественных операций, в частности, инфиксные операции: если a и b — множества, то a | b — их объединение, a & b — пересечение, a - b — разность. Умелое пользование теоретико-множественными операциями помогает уменьшить как объем, так и время работы Python-программ и одновременно сделать код более удобным для восприятия и осмысления — за счет устранения циклов и условных конструкций.

Пусть, например, у нас есть большой набор почтовых адресов (haystack) и меньший набор адресов (needles), а наша задача — подсчитать, сколько раз элементы needles встречаются в haystack. Благодаря операции пересечения множеств (оператор & ) для ее решения достаточно одной строки (пример 3.10).

Пример 3.10. Подсчет количества вхождений needles в haystack, оба объекта имеют тип set

found = len(needles & haystack)

Без оператора пересечения эту программу пришлось бы написать, как показано в примере 3.11.

Пример 3.11. Подсчет количество вхождений needles в haystack (результат тот же, что в примере 3.10)

found = 0
for n in needles: