---
source_image: page_630.png
page_number: 630
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.25
tokens: 11720
characters: 1836
timestamp: 2025-12-24T02:03:53.844947
finish_reason: stop
---

Глава 19. Динамические атрибуты и свойства

Правильный взгляд на свойства

Встроенная сущность property часто используется как декоратор, но в действительности она является классом. В Python функции и классы нередко взаимозаменяемы, поскольку являются вызываемыми объектами и не существует оператора new для создания объекта, поэтому вызов конструктора ничем не отличается от вызова фабричной функции. Как функцию, так и класс можно использовать в качестве декоратора при условии, что они возвращают новый вызываемый объект, являющийся подходящей заменой декорированной функции.

Вот полная сигнатура конструктора класса property:

property(fget=None, fset=None, fdel=None, doc=None)

Все аргументы необязательны; если для какого-то из них не указана функция, то результирующий объект свойства не поддерживает соответствующую операцию.

Тип property появился в версии Python 2.2, но синтаксис декоратора был добавлен только в версии Python 2.4, т. е. на протяжении нескольких лет свойства нужно было определять, передавая функции-акцессоры в первых двух аргументах.

«Классический» синтаксис определения свойств без декораторов показан в примере 19.18.

Пример 19.18. bulkfood_v2b.py: то же, что пример 19.17, но без декораторов

class LineItem:

    def __init__(self, description, weight, price):
        self.description = description
        self.weight = weight
        self.price = price

    def subtotal(self):
        return self.weight * self.price

    def get_weight(self): ①
        return self.__weight

    def set_weight(self, value): ②
        if value > 0:
            self.__weight = value
        else:
            raise ValueError('value must be > 0')

    weight = property(get_weight, set_weight) ③

① Простой метод чтения.
② Простой метод установки.
③ Строим свойство и присваиваем его открытому атрибуту класса.