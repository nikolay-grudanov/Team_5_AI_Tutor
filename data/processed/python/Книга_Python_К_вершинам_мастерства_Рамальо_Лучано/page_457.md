---
source_image: page_457.png
page_number: 457
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 58.44
tokens: 12115
characters: 2713
timestamp: 2025-12-24T01:56:18.247869
finish_reason: stop
---

Генераторные функции в стандартной библиотеке

>>> list(itertools.combinations_with_replacement('ABC', 2)) # ②
[('A', 'A'), ('A', 'B'), ('A', 'C'), ('B', 'B'), ('B', 'C'), ('C', 'C')]
>>> list(itertools.permutations('ABC', 2)) # ③
[('A', 'B'), ('A', 'C'), ('B', 'A'), ('B', 'C'), ('C', 'A'), ('C', 'B')]
>>> list(itertools.product('ABC', repeat=2)) # ④
[('A', 'A'), ('A', 'B'), ('A', 'C'), ('B', 'A'), ('B', 'B'), ('B', 'C'), ('C', 'A'), ('C', 'B'), ('C', 'C')]

① Все комбинации длины len() == 2 из элементов строки 'ABC'; порядок элементов в сгенерированных кортежах неважен (они могли бы быть и множествами).
② Все комбинации длины len() == 2 из элементов строки 'ABC', включая комбинации с повторяющимися элементами.
③ Все перестановки длины len() == 2 из элементов строки 'ABC'; порядок элементов в сгенерированных кортежах важен.
④ Декартово произведение 'ABC' и 'ABC' (это результат задания параметра repeat=2).

Последняя рассматриваемая в этом разделе группа генераторных функций предназначена для того, чтобы отдавать все элементы входных итерируемых объектов, но в каком-то другом порядке. Следующие две функции возвращают несколько генераторов: itertools.groupby и itertools.tee. Другая генераторная функция из этой группы, встроенная функция reversed, — единственная из описанных в этом разделе, которая принимает не произвольный итерируемый объект, а только последовательности. Это и понятно, ведь reversed отдает элементы в обратном порядке, а это возможно только для последовательности известной длины. Но накладных расходов на создание инвертированной копии последовательности эта функция не несет — она возвращает элементы по запросу. Я поместили функцию itertools.product в одну группу с объединяющими генераторами в табл. 14.3, потому что все они обходят более одного итерируемого объекта, тогда как генераторы, перечисленные в табл. 14.5, принимают не больше одного такого объекта.

Таблица 14.4. Генераторные функции, расширяющие каждый входной элемент в несколько выходных

<table>
  <tr>
    <th>Модуль</th>
    <th>Функция</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>itertools</td>
    <td>groupby(it, key=None)</td>
    <td>Порождает 2-кортежи вида (key, group), где key — критерий группировки, а group — генератор, отдающий элементы группы</td>
  </tr>
  <tr>
    <td>встроенная</td>
    <td>reversed(seq)</td>
    <td>Отдает элементы seq в обратном порядке, от последнего к первому; аргумент seq должен быть последовательностью или реализовывать специальный метод __reversed__</td>
  </tr>
  <tr>
    <td>itertools</td>
    <td>tee(it, n=2)</td>
    <td>Отдает кортеж n генераторов, каждый из которых независимо отдает элементы входного итерируемого объекта</td>
  </tr>
</table>