---
source_image: page_440.png
page_number: 440
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 45.20
tokens: 11838
characters: 2056
timestamp: 2025-12-24T01:55:15.101796
finish_reason: stop
---

Глава 14. Итерируемые объекты, итераторы и генераторы

не «возвращает» значение в обычном смысле слова: предложение return в теле генераторной функции приводит к тому, что объект-генератор возбуждает исключение StopIteration.7

В примере 14.6 во всех подробностях описано взаимодействие между циклом for и телом функции.

Пример 14.6. Генераторная функция, печатающая сообщения во время выполнения

```python
>>> def gen_AB(): # ①
...     print('start')
...     yield 'A' # ②
...     print('continue')
...     yield 'B' # ③
...     print('end.') # ④
...
>>> for c in gen_AB(): # ⑤
...     print('-->', c) # ⑥
...
start    ⑦
--> A    ⑧
continue ⑨
--> B    ⑩
end.     ⑪
>>>      ⑫
```

1 Генераторная функция определяется, как любая другая, но в теле встречается ключевое слово yield.
2 Первый неявный вызов next() в цикле for приводит к печати 'start' и приостановке после первого yield, порождающего значение 'A'.
3 Второй неявный вызов next() в цикле for приводит к печати 'continue' и приостановке после второго yield, порождающего значение 'B'.
4 Третий неявный вызов next() приводит к печати 'end' и возврату из функции, в результате чего объект-генератор возбуждает исключение StopIteration.
5 Для итерирования цикл for выполняет эквивалент предложения g = iter(gen_AB()), чтобы получить объект-генератор а затем на каждой итерации вызывает next(g).
6 В теле цикла печатается --> и значение, полученное от next(g). Но результат этой печати мы увидим только после строки, напечатанной функцией print внутри генераторной функции.
7 Строка 'start' появляется в результате работы функции print('start') в теле генераторной функции.

7 До версии Python 3.3 наличие значения в предложении return внутри генераторной функции считалось ошибкой. Теперь это допускается, но return все равно возбуждает исключение StopIteration. Вызывающая сторона может получить значение из объекта-исключения. Однако это имеет смысл, только когда генераторная функция используется в качестве сопрограммы, о чем будет рассказано в разделе «Возврат значения из сопрограммы» ниже.