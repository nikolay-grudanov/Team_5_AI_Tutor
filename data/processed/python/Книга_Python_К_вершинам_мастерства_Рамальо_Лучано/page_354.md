---
source_image: page_354.png
page_number: 354
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 40.18
tokens: 11788
characters: 2019
timestamp: 2025-12-24T01:51:02.064165
finish_reason: stop
---

Глава 11. Интерфейсы: от протоколов до абстрактных базовых...

Именованный аргумент metaclass= был введен в Python 3. В Python 2 нужно было использовать атрибут класса __metaclass__:

class Tombola(object): # это для Python 2!!!
    __metaclass__ = abc.ABCMeta
    # ...

Метаклассы мы будем обсуждать в главе 21. А пока примем, что метакласс — это особый вид класса, и согласимся, что ABC — тоже особый вид класса; например, «обычные» классы не проверяют свои подклассы, так что это специальное поведение ABC.

Помимо @abstractmethod, в модуле abc определены декораторы @abstractclassmethod, @abstractstaticmethod и @abstractproperty. Однако последние три объявлены нерекомендованными в версии Python 3.3, после того как стало возможно указывать другие декораторы поверх @abstractmethod, так что все прочие оказались избыточными. Например, вот как рекомендуется объявлять абстрактный метод класса:

class MyABC(abc.ABC):
    @classmethod
    @abc.abstractmethod
    def an_abstract_classmethod(cls, ...):
        pass

Порядок декораторов функции в композиции обычно важен, а в случае abstractmethod, документация не оставляет никаких сомнений:

Если abstractmethod() применяется в сочетании с другими дескрипторами метода, он должен быть самым внутренним декоратором...12

Иными словами, между @abstractmethod и предложением def не должно быть никаких других декораторов.

Обсудив синтаксические детали ABC, опробуем Tombola на практике, реализовав несколько его конкретных подклассов.

Создание подклассов ABC Tombola

Имея ABC Tombola, мы теперь разработаем два конкретных подкласса, согласованных с его интерфейсом. Они были изображены на рис. 11.4 вместе с виртуальными подклассами, которые будут рассмотрены в следующем разделе.

Класс BingoCage в примере 11.12 — это вариант примера 5.8 с более качественным рандомизатором. В нем реализованы абстрактные методы load и pick, унас-

12 Раздел @abc.abstractmethod (http://bit.ly/1QOFpGB) в документации по модулю abc (https://docs.python.org/dev/library/abc.html).