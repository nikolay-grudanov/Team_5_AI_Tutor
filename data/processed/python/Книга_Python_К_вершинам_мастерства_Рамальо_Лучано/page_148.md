---
source_image: page_148.png
page_number: 148
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.17
tokens: 11842
characters: 1963
timestamp: 2025-12-24T01:41:39.321529
finish_reason: stop
---

7 Применить нормализацию NFKC для композиции символов с их кодовыми позициями совместимости.

В примере 4.18 показана функция asciize в действии.

Пример 4.18. Два применения функции asciize из примера 4.17

>>> order = '"Herr Voß: • ½ cup of Etker™ caffè latte • bowl of açai."'
>>> dewinize(order)
'"Herr Voß: - ½ cup of OEtker(TM) caffè latte - bowl of açai."' ①
>>> asciize(order)
'"Herr Voss: - 1/2 cup of OEtker(TM) caffe latte - bowl of acai."' ②

① dewinize заменяет фигурные кавычки, маркеры списка и знак торговой марки ™.
② asciize вызывает dewinize, затем удаляет диакритические знаки и заменяет 'ß'.

В разных языках правила удаления диакритических знаков различны. Например, немцы заменяют 'ü' на 'ue'. Наша функция asciize не настолько рафинирована, поэтому может статься, что к вашему языку она неприменима. Впрочем, для португальского работает отлично.

Итак, функции из модуля sanitize.py не ограничиваются стандартной нормализацией, а подвергают текст серьезной хирургической операции, которая вполне может изменить его смысл. Лишь обладая знаниями о целевом языке, потенциальных пользователях и способах использования преобразованного текста, можно решить, стоит ли заходить так далеко. А кому все это знать, как не вам?

На этом мы подводим черту под обсуждением нормализации Unicode-текстов. Далее нам предстоит заняться проблемой сортировки.

Сортировка Unicode-текстов

Python сортирует последовательности любого типа, сравнивая элементы один за другим. Для строк это означает сравнение кодовых позиций. Увы, результат получится никуда не годным, если только вы не ограничиваетесь символами ASCII.

Рассмотрим сортировку списка фруктов, произрастающих в Бразилии.

>>> fruits = ['caju', 'atemoia', 'cajá', 'açai', 'acerola']
>>> sorted(fruits)
['acerola', 'atemoia', 'açai', 'caju', 'cajá']

Правила сортировка зависят от локали, но в португальском и многих других языках, основанных на латинице, акценты и седили редко учитываются при со-