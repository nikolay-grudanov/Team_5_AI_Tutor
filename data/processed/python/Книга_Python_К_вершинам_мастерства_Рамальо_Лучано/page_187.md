---
source_image: page_187.png
page_number: 187
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.27
tokens: 11917
characters: 2398
timestamp: 2025-12-24T01:43:25.843826
finish_reason: stop
---

Резюме

>>> picture = partial(tag, 'img', cls='pic-frame') ②
>>> picture(src='wumpus.jpeg')
'<img class="pic-frame" src="wumpus.jpeg" />' ③
>>> picture
functools.partial(<function tag at 0x10206d1e0>, 'img', cls='pic-frame') ④
>>> picture.func ⑤
<function tag at 0x10206d1e0>
>>> picture.args
('img',)
>>> picture.keywords
{'cls': 'pic-frame'}

① Импортируем функцию tag из примера 5.10 и показываем ее идентификатор.
② Создаем функцию picture из tag, зафиксировав значение первого позиционного аргумента — 'img' и значение именованного параметра cls — 'pic-frame'.
③ Функция picture работает, как и ожидалось.
④ partial() возвращает объект functools.partial².
⑤ У объекта functools.partial есть атрибуты, дающие доступ к исходной функции и фиксированным аргументам.

Функция functools.partialmethod (появилась в Python 3.4) делает то же, что partial, но предназначена для работы с методами.

Из функций, входящих в модуль functools, упомянем также впечатляющую функцию lru_cache, которая производит «запоминание» (memoization) — один из способов автоматической оптимизации, при котором результаты вызова функции сохраняются, чтобы не повторять дорогостоящие вычисления. Мы рассмотрим ее в главе 7, где обсуждаются декораторы, наряду с другими функциями высшего порядка, рассчитанными на использование в качестве декораторов: singledispatch и wraps.

Резюме

Целью этой главы было исследование функций как полноценных объектов Python. Идея в том, что функции можно присваивать переменным, передавать другим функциям, сохранять в структурах данных, а также получать атрибуты функций, что позволяет каркасам и инструментальным средствам принимать те или иные решения. Функции высшего порядка, основа функционального программирования, часто используются в программах на Python — несмотря на то, что map, filter и reduce употребляются реже, чем в былые времена, — благодаря списковому включению и аналогичным конструкциям, например генераторным выражениям, и наличию встроенных редуцирующих функций типа sum, all и any. Встроенные функции sorted, min, max и functools.partial — примеры распространённых функций высшего порядка.

² Из исходного кода (http://bit.ly/1Vm8cqQ) в скрипте functools.py становится ясно, что класс functools.partial реализован на C и используется по умолчанию. Если он недоступен, то, начиная с версии Python 3.4, в модуле functools имеется реализация partial на чистом Python.