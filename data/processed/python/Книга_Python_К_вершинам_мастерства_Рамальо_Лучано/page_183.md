---
source_image: page_183.png
page_number: 183
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 55.90
tokens: 12007
characters: 2048
timestamp: 2025-12-24T01:43:20.721758
finish_reason: stop
---

Пакеты для функционального программирования

Что lambda fields: fields[1]: создает функцию, которая получает коллекцию и возвращает элемент с индексом 1.

Пример 5.23. Результат применения itemgetter для сортировки списка кортежей (данные взяты из примера 2.8)

>>> metro_data = [
...   ('Tokyo', 'JP', 36.933, (35.689722, 139.691667)),
...   ('Delhi NCR', 'IN', 21.935, (28.613889, 77.208889)),
...   ('Mexico City', 'MX', 20.142, (19.433333, -99.133333)),
...   ('New York-Newark', 'US', 20.104, (40.808611, -74.020386)),
...   ('Sao Paulo', 'BR', 19.649, (-23.547778, -46.635833)),
... ]
>>>
>>> from operator import itemgetter
>>> for city in sorted(metro_data, key=itemgetter(1)):
...     print(city)
...
('Sao Paulo', 'BR', 19.649, (-23.547778, -46.635833))
('Delhi NCR', 'IN', 21.935, (28.613889, 77.208889))
('Tokyo', 'JP', 36.933, (35.689722, 139.691667))
('Mexico City', 'MX', 20.142, (19.433333, -99.133333))
('New York-Newark', 'US', 20.104, (40.808611, -74.020386))

Если передать функции itemgetter несколько индексов, то она построит функцию, которая возвращает кортеж, содержащий выбранные значения:

>>> cc_name = itemgetter(1, 0)
>>> for city in metro_data:
...     print(cc_name(city))
...
('JP', 'Tokyo')
('IN', 'Delhi NCR')
('MX', 'Mexico City')
('US', 'New York-Newark')
('BR', 'Sao Paulo')

Поскольку itemgetter пользуется оператором [], то поддерживает не только последовательности, но и отображения, да и вообще любой класс, в котором реализован метод __getitem__.

Близким родственником itemgetter является функция attrgetter, которая создает функции для извлечения атрибутов объекта по имени. Если передать attrgetter несколько имен атрибутов, то она также создаст функцию, возвращающую кортеж значений. Кроме того, если имя аргумента содержит точки, то attrgetter обойдет вложенные объекты для извлечения атрибута. Описанные возможности продемонстрированы в примере 5.24. Сеанс оболочки получился довольно длинным, потому что нам пришлось построить вложенную структуру для демонстрации обработки имен атрибутов с точкой.