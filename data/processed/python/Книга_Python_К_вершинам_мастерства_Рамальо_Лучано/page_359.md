---
source_image: page_359.png
page_number: 359
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 23.48
tokens: 11560
characters: 1268
timestamp: 2025-12-24T01:50:55.813610
finish_reason: stop
---

Как тестировались подклассы Tombola

![UML-диаграмма классов для TomboList, настоящего подкласса list и виртуального подкласса Tombola](../images/uml_tombola.png)

Рис. 11.5. UML-диаграмма классов для TomboList, настоящего подкласса list и виртуального подкласса Tombola

Класса Tombola в списке TomboList.__mro__ нет, поэтому TomboList не наследует ни одного метода от Tombola.

Когда я писал различные классы, реализующие один и тот же интерфейс, я хотел, чтобы их можно было протестировать одним и тем же набором doctest-скриптов. В следующем разделе показано, как я использовал API обычных классов и ABC для достижения этой цели.

Как тестировались подклассы Tombola

В скрипте для тестирования Tombola я воспользовался двумя атрибутами класса, предназначенными для интроспекции иерархии классов:

__subclasses__()
Метод возвращает список непосредственных подклассов данного класса.
В этот список не входят виртуальные подклассы.

_abc_registry
Атрибут, имеющийся только у ABC, который связан с объектом WeakSet, содержащим слабые ссылки на зарегистрированные виртуальные подклассы данного абстрактного класса.

Для тестирования всех подклассов Tombola я написал скрипт, который обходит список, построенный на основе результатов Tombola.__subclasses__() и Tombola.