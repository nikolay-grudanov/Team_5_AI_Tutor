---
source_image: page_329.png
page_number: 329
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.81
tokens: 11913
characters: 2222
timestamp: 2025-12-24T01:49:43.652489
finish_reason: stop
---

Поговорим

говорю, что это означает «идиоматичный Python», однако такой ответ не вполне годится, потому что слово «идиоматичный» для меня и для вас может означать разные вещи. Но одно я знаю точно: «идиоматичность» не означает, что нужно использовать средства языка, спрятанные в самых потаенных закоулках. В списке рассылки Python (https://mail.python.org/mailman/listinfo/python-list) есть ветка, датированная апрелем 2003, под названием «Pythonic Way to Sum n-th List Element?» (http://bit.ly/1QOv5y5). Она примыкает к обсуждению функции reduce в этой главе.

Начавший ее Гай Миддлтон (Guy Middleton) просил улучшить следующее решение, оговорившись, что ему не нравятся лямбда-выражения9:

```python
>>> my_list = [[1, 2, 3], [40, 50, 60], [9, 8, 7]]
>>> import functools
>>> functools.reduce(lambda a, b: a+b, [sub[1] for sub in my_list])
60
```

В этом коде идиом хватает: lambda, reduce и списковое включение. Наверное, он занял бы последнее место на конкурсе популярности, потому что равно оскорбляет чувства тех, кто ненавидит lambda, и тех, кто презирает списковое включение, — а это чуть ли не вся публика. Если вы собираетесь использовать lambda, то, пожалуй, нет причин прибегать к списковому включению, разве что для фильтрации, но здесь у нас не тот случай.

Вот мое решение, которое должно понравиться любителям lambda:

```python
>>> functools.reduce(lambda a, b: a + b[1], my_list, 0)
60
```

Я не участвовал в этой ветке и не стал бы использовать этот код в реальной программе, потому что сам не большой поклонник lambda, но хотел показать, как можно решить эту задачу без спискового включения.

Первым ответил Фернандо Перес (Fernando Perez), создатель IPython, который привлек внимание к тому, что NumPy поддерживает n-мерные массивы и n-мерные срезы:

```python
>>> import numpy as np
>>> my_array = np.array(my_list)
>>> np.sum(my_array[:, 1])
60
```

Мне кажется, что решение Переса очень изящное, но Гай Миддлтон выбрал другое, принадлежащее Полу Рубину (Paul Rubin) и Скипу Монтанаро (Skip Montanaro):

9 Я немного изменил код для включения в книгу: в 2003 году функция reduce была встроенной, но в Python 3 ее нужно импортировать. Кроме того, я заменил имена x и y на my_list и sub (от sub-list).