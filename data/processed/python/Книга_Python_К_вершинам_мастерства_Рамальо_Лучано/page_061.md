---
source_image: page_061.png
page_number: 61
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.89
tokens: 11658
characters: 1314
timestamp: 2025-12-24T01:37:01.782850
finish_reason: stop
---

Составное присваивание последовательностей

снимка экрана, демонстрирующие начальное и конечное состояние кортежа t после выполнения кода из примера 2.15.

Пример 2.16. Байт-код вычисления выражения s[a] += b

>>> dis.dis('s[a] += b')
   1           0 LOAD_NAME      0 (s)
   3           3 LOAD_NAME      1 (a)
   6           6 DUP_TOP_TWO
   7           7 BINARY_SUBSCR
   8           8 LOAD_NAME      2 (b)
  11          11 INPLACE_ADD    ②
  12          12 ROT_THREE
  13          13 STORE_SUBSCR   ③
  14          14 LOAD_CONST     0 (None)
  17          17 RETURN_VALUE

① Поместить значение s[a] на вершину стека (tos).
② Выполнить tos += b. Эта операция завершается успешно, если tos ссылается на изменяемый объект (в примере 2.15 это список).
③ Выполнить присваивание s[a] = tos. Эта операция завершается неудачно, если s — неизменяемый объект (в примере 2.15 это кортеж t).

Рис. 2.3. Начальное и конечное состояние кортежа в задаче о присваивании (диаграммы сгенерированы на сайте Online Python Tutor)

Изучение байт-кода, который Python генерирует для выражения s[a] += b (пример 2.16), показывает, что происходит на самом деле.
Это патологический случай — за 15 лет, что я пишу на Python, я ни разу не слышал, чтобы кто-то нарвался на такое поведение на практике.
Но из этого примера я вынес три урока.