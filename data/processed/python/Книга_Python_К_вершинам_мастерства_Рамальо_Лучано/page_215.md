---
source_image: page_215.png
page_number: 215
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 40.01
tokens: 11712
characters: 1587
timestamp: 2025-12-24T01:44:39.076687
finish_reason: stop
---

Правила видимости переменных

ременную a, но при попытке получить значение локальной переменной b обнаруживает, что b не связана.

Это не ошибка, а осознанный выбор: Python не заставляет нас объявлять переменные, но предполагает, что всякая переменная, которой присваивается значение в теле функции, локальна. Это гораздо лучше поведения JavaScript, который тоже не требует объявлять переменные, но если вы сделаете переменную локальной (с помощью зарезервированного слова var), то можете случайно затереть однотипную глобальную переменную.

Если нам нужно, чтобы интерпретатор считал переменную b глобальной, несмотря на присваивание внутри функции, то придется добавить объявление global:

```python
>>> def f3(a):
...     global b
...     print(a)
...     print(b)
...     b = 9
...
>>> f3(3)
3
6
>>> b
9
>>> f3(3)
a = 3
b = 8
b = 30
>>> b
30
>>>
```

После этого краткого знакомства с принципом работы областей видимости в Python, мы можем приступить к замыканиям. А вниманию тех, кому интересно посмотреть, чем отличается байт-код функций из примеров 7.4 и 7.5, предлагается следующая врезка.

Сравнение байт-кода

Модуль dis позволяет без труда дизассемблировать байт-код функций Python. В примерах 7.6 и 7.7 показан байт-код функций f1 и f2 из примеров 7.4 и 7.5.

Пример 7.6. Дизассемблированная функция f1 из примера 7.4

```python
>>> from dis import dis
>>> dis(f1)
2   LOAD_GLOBAL                0 (print)    ①
3   LOAD_FAST                  0 (a)        ②
6   CALL_FUNCTION 1            (1 positional, 0 keyword pair)
9   POP_TOP
3   LOAD_GLOBAL                0 (print)
```