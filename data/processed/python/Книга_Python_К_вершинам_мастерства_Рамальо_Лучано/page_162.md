---
source_image: page_162.png
page_number: 162
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 21.47
tokens: 11505
characters: 1078
timestamp: 2025-12-24T01:41:51.725513
finish_reason: stop
---

но она потребляет много памяти: 4 байта на символ, хотя большинство кодовых позиций для китайских иероглифов умещается в 2 байта. Ни тот, ни другой вариант не идеален; какой выбрать, зависит от конкретных потребностей.

Начиная с версии Python 3.3, интерпретатор, создавая объект str, проверяет, из каких символов он состоит, и выбирает наиболее экономичное размещение в памяти данного объекта. Если имеются только символы из диапазона latin1, то каждая кодовая позиция str будет представлена всего одним байтом. В противном случае для представления кодовой позиции может понадобиться 2 или 4 байта — все зависит от str. Это упрощенное изложение, детали см. в документе «PEP 393 — Flexible String Representation» (https://www.python.org/dev/peps/pep-0393/).

Гибкое представление строки похоже на представление типа int в Python 3: если целое число умещается в машинном слове, то оно и хранится как одно машинное слово. В противном случае интерпретатор переходит на представление переменной длины, как для типа long в Python 2. Приятно видеть, как распространяются хорошие идеи.