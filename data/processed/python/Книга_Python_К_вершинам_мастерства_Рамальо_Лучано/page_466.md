---
source_image: page_466.png
page_number: 466
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 67.96
tokens: 12032
characters: 2666
timestamp: 2025-12-24T01:56:58.418255
finish_reason: stop
---

Глава 14. Итерируемые объекты, итераторы и генераторы

Я последую совету Дэйва и закончу эту главу — которая все-таки посвящена приемам итерирования, — не касаясь метода send и других средств, благодаря которым генераторы можно использовать как сопрограммы. Сопрограммы мы будем рассматривать в главе 16.

Резюме

Итерирование так глубоко укоренилось в языке, что я часто говорю, что Python пропитан итераторами13. Интеграция паттерна Итератор в семантику Python — яркий пример того, что паттерны проектирования не в одинаковой степени применимы во всех языках. В Python классический итератор, реализованный «вручную», как в примере 14.4, не имеет никакой практической ценности, кроме разве что педагогической.

В этой главе мы написали несколько вариантов класса для обхода слов в текстовом файле, возможно, очень длинном. Благодаря генераторам каждая последующая версия класса Sentence становилась короче и понятнее — если знать, как она работает.

Затем мы написали генератор арифметических прогрессий и показали, как с помощью модуля itertools упростить его. Далее мы познакомились с 24 генераторными функциями общего назначения из стандартной библиотеки.

После этого мы занялись встроенной функцией iter: во-первых, увидели, что она возвращает итератор при обращении вида iter(o), а затем поняли, как с ее помощью превратить любую функцию в итератор, если обратиться так: iter(func, sentinel).

В качестве практического примера я описал реализацию утилиты преобразования базы данных, в которой генераторы позволили разделить логику чтения и записи и тем самым эффективно обработать данные очень большого объема, а заодно поддержать дополнительные форматы входных данных.

В этой главе я упомянул также синтаксическую конструкцию yield from, появившуюся в версии Python 3.3, и сопрограммы. Обе темы были лишь слегка затронуты, подробнее мы рассмотрим их позже.

Дополнительная литература

Детальное техническое описание генераторов можно найти в разделе 6.2.9 «Выражения yield» справочного руководства по языку Python (http://bit.ly/1MM5Xb5). Генераторные функции были впервые определены в документе «PEP 255 – Simple Generators» (https://www.python.org/dev/peps/pep-0255/).

Документация по модулю itertools (https://docs.python.org/3/library/itertools.html) — отличный источник информации, благодаря включенными примерам. Хотя функции из этого модуля написаны на C, в документации показано, что многие из

13 В оригинале употреблено слово «grok» и приводится такое пояснение: согласно справочнику жаргона (http://catb.org/~esr/jargon/html/G/grok.html), grok означает не просто «выучить что-то», а впитать, так что «это становится частью тебя, твоей личности».