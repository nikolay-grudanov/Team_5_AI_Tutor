---
source_image: page_181.png
page_number: 181
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 47.33
tokens: 11864
characters: 2349
timestamp: 2025-12-24T01:43:11.338349
finish_reason: stop
---

Аннотации функций

```python
>>> from clip_annot import clip
>>> clip.__annotations__
{'text': <class 'str'>, 'max_len': 'int > 0', 'return': <class 'str'>}
```

Элемент с ключом 'return' содержит аннотацию возвращаемого значения, помеченную стрелкой -> в объявлении функции из примера 5.19.

Python только сохраняет аннотации в атрибуте __annotations__ — и ничего больше: никаких проверок, контроля или еще чего-либо. Иными словами, для интерпретатора Python аннотации ничего не значат. Это просто метаданные, которые могут использовать инструментальные средства: IDE, каркасы или декораторы. На момент написания этой книги в стандартной библиотеке не было средств, пользующихся аннотациями, за исключением функции inspect.signature(), которая знает, как извлечь аннотации.

Пример 5.20. Извлечение аннотаций из сигнатуры функции.

```python
>>> from clip_annot import clip
>>> from inspect import signature
>>> sig = signature(clip)
>>> sig.return_annotation
<class 'str'>
>>> for param in sig.parameters.values():
...     note = repr(param.annotation).ljust(13)
...     print(note, ':', param.name, '=', param.default)
<class 'str'> : text = <class 'inspect._empty'>
'int > 0'    : max_len = 80
```

Функция signature возвращает объект Signature, имеющий атрибут return_annotation и словарь parameters, который отображает имена параметров на объекты Parameter. У каждого объекта Parameter имеется свой атрибут annotation. Все это продемонстрировано в примере 5.20.

В будущем каркасы типа Bobo, возможно, поддержат аннотации для более полной автоматизации обработки запросов. Например, если аргумент аннотирован как price:float, то его можно было бы автоматически преобразовать из строки в тип float, ожидаемый функцией. А строковую аннотацию вида quantity:'int > 0' можно было бы разобрать для выполнения преобразования и проверки значения параметра.

Но наибольшую пользу аннотации, скорее всего, принесут не для динамических операций, как в Bobo, а для предоставления facultativной информации о типах, которой можно было бы воспользоваться для статической проверки типов в таких инструментах, как IDE и средства поиска типичных ошибок в коде.

Разобравшись с анатомией функций, мы посвятим оставшуюся часть главы рассмотрению наиболее полезных пакетов, включенных в стандартную библиотеку ради поддержки функционального стиля программирования.