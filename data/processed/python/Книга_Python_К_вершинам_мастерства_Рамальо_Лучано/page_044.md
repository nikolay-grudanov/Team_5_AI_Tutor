---
source_image: page_044.png
page_number: 44
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 43.29
tokens: 11755
characters: 1877
timestamp: 2025-12-24T01:36:27.139220
finish_reason: stop
---

...
print((color, size))
...
('black', 'S')
('black', 'M')
('black', 'L')
('white', 'S')
('white', 'M')
('white', 'L')
>>> tshirts = [(color, size) for size in sizes ③
...                                 for color in colors]
>>> tshirts
[('black', 'S'), ('white', 'S'), ('black', 'M'), ('white', 'M'),
('black', 'L'), ('white', 'L')]

① Генерирует список кортежей, упорядоченный сначала по цвету, а затем по размеру.
② Обратите внимание, что результирующий список упорядочен так, как если бы циклы были вложены именно в том порядке, в котором указаны в списковом включении.
③ Чтобы расположить элементы сначала по размеру, а затем по цвету, нужно просто поменять местами предложения for; после переноса второго предложения for на другую строку стало понятнее, как будет упорядочен результат.

В примере 1.1 (глава 1) показанное ниже выражение использовалось для инициализации колоды карт списком, состоящим из 52 карт четырех мастей по 13 карт в каждой:

self._cards = [Card(rank, suit) for suit in self.suits
for rank in self.ranks]

Списковые включения умеют делать всего одну вещь: строить списки. Для порождения последовательностей других типов придется обратиться к генераторным выражениям. В следующем разделе кратко описывается применение генераторных выражений для построения последовательностей, отличных от списков.

Генераторные выражения

Инициализацию кортежей, массивов и других последовательностей тоже можно начать с использования спискового включения, но genexp экономит память, т. к. отдает элементы по одному, применяя протокол итератора, вместо того чтобы сразу строить целым списком для передачи другому конструктору.

Синтаксически генераторное выражение выглядит так же, как списковое включение, только заключается не в квадратные скобки, а в круглые.

Ниже приведены простые примеры использования генераторных выражений для построения кортежа и массива.