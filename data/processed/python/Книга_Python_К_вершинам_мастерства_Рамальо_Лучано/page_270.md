---
source_image: page_270.png
page_number: 270
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 32.88
tokens: 11644
characters: 1585
timestamp: 2025-12-24T01:46:55.101590
finish_reason: stop
---

ГЛАВА 9.
Объект в духе Python

Ни в коем случае не используйте два подчерка в начале. Это приватно до безобразия¹.

— Ян Байкинг,
автор pip, virtualenv, Paste и многих других проектов

Благодаря модели данных в Python пользовательские типы могут вести себя также естественно, как встроенные. И это достигается безо всячего наследования, в духе динамической типизации: достаточно просто реализовать методы, необходимые для того, чтобы объект вел себя ожидаемым образом.

В предыдущих главах мы рассказали о структуре и поведении многих встроенных объектов. А теперь займемся созданием собственных классов, которые ведут себя, как настоящие объекты в Python.

Эта глава начинается с места, где закончилась глава 1 — мы покажем, как реализовать несколько специальных методов, которые обычно встречаются в объектах Python разных типов.

В этой главе мы узнаем, как:

• поддержать встроенные функции, которые порождают альтернативные представления объекта (repr(), bytes() и другие);
• реализовать альтернативный конструктор в виде метода класса;
• расширить миниязык, используемый во встроенной функции format() и в методе str.format();
• предоставить доступ к атрибутам только для чтения;
• сделать объект хэшируемым, чтобы он мог быть элементом множества и ключом словаря;
• сэкономить память за счет использования __slots__.

Все это мы сделаем по мере разработки простого типа двумерного евклидова вектора. По ходу дела мы дважды прервемся, чтобы обсудить два концептуально важных вопроса:

¹ Из «Руководства по стилю программирования в Paste» (http://pythonpaste.org/StyleGuide.html).