---
source_image: page_055.png
page_number: 55
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 57.80
tokens: 12024
characters: 2738
timestamp: 2025-12-24T01:37:19.936353
finish_reason: stop
---

Получение среза

Мы еще вернемся к объектам slice, когда дойдем до создания собственных коллекций в разделе «Vector, попытка № 2: последовательность, допускающая срезку» на стр. 310. А пока отметим, что с точки зрения пользователя у операции срезки есть ряд дополнительных возможностей, в частности многомерные срезы и нотация многоточия (...). Читайте дальше.

Многомерные срезы и многоточие

Оператор [ ] может принимать несколько индексов или срезов, разделенных запятыми. Это используется, например, в стороннем пакете NumPy, где для получения одного элемента двумерного массива numpy.ndarray применяется нотация a[i, j], а для получения двумерного среза — нотация a[m:n, k:l]. В примере 2.22 ниже будет продемонстрировано использование этой нотации. Специальные методы __getitem__ и __setitem__, на которых основан оператор [], просто принимают индексы, заданные в выражении a[i, j], в виде кортежа. Иначе говоря, для вычисления a[i, j] Python вызывает a.__getitem__((i, j)).

В Python встроены только одномерные типы последовательностей, поэтому они поддерживают лишь один индекс или диапазон, а не кортеж.

Многоточие — записывается в виде трех отдельных точек, а не одного символа ... (Unicode U+2026) — распознается анализатором Python как лексема. Это псевдоним объекта Ellipsis, единственного экземпляра класса ellipsis². А раз так, то многоточие можно передавать в качестве аргумента функциям и использовать в качестве части спецификации среза, например: f(a, ..., z) или a[i:...].

В NumPy ... используется для сокращенного задания среза многомерного массива; например, если x — четырехмерный массив, то x[i, ...] — то же самое, что x[i, :, :, :]. Дополнительные сведения по этому вопросу можно найти в «Пособии по NumPy для начинающих» (http://wiki.scipy.org/Tentative_NumPy_Tutorial).

На момент написания этой книги мне не было известно о применении объекта Ellipsis или многомерных индексов в стандартной библиотеке Python. Если найдете, дайте мне знать. Эти синтаксические средства существуют для поддержки пользовательских типов и таких расширений, как NumPy.

Срезы полезны не только для выборки частей последовательности; они позволяют также модифицировать изменяемые последовательности на месте, т. е. не перестраивая с нуля.

Присваивание срезу

Изменяемую последовательность можно расширять, схлопывать и иными способами модифицировать на месте, применяя нотацию среза в левой части оператора присваивания или в качестве аргумента оператора del. Следующие примеры дают представление о возможностях этой нотации:

² Нет, я ничего не перепутал: имя класса ellipsis записывается строчными буквами, а его экземпляр — встроенный объект Ellipsis. Точно так же обстоит дело с классом bool и его экземплярами True и False.