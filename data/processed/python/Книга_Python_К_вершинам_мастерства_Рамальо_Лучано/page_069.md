---
source_image: page_069.png
page_number: 69
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 43.84
tokens: 11925
characters: 2418
timestamp: 2025-12-24T01:37:45.721818
finish_reason: stop
---

Когда список не подходит

```python
>>> fp = open('floats.bin', 'rb')
>>> floats2.fromfile(fp, 10**7)   # Создать массив чисел с плавающей точкой двойной точности (код типа 'd') из любого итерируемого объекта — в данном случае генераторного выражения.
>>> fp.close()
>>> floats2[-1]                   # Прочитать последнее число в массиве.
0.07802343889111107
>>> floats2 == floats              # Проверить, что содержимое обоих массивов совпадает.
True
```

1. Импортировать тип array.
2. Создать массив чисел с плавающей точкой двойной точности (код типа 'd') из любого итерируемого объекта — в данном случае генераторного выражения.
3. Прочитать последнее число в массиве.
4. Сохранить массив в двоичном файле.
5. Создать пустой массив чисел с плавающей точкой двойной точности.
6. Прочитать 10 миллионов чисел из двоичного файла.
7. Прочитать последнее число в массиве.
8. Проверить, что содержимое обоих массивов совпадает.

Как видим, пользоваться методами array.tofile и array.fromfile легко. Выполнив этот пример, вы убедитесь, что и работают они очень быстро. Несложный эксперимент показывает, что для загрузки методом array.fromfile 10 миллионов чисел с плавающей точкой двойной точности из двоичного файла, созданного методом array.tofile, требуется примерно 0,1 с. Это почти в 60 раз быстрее чтения из текстового файла, когда требуется разбирать каждую строку встроенной функцией float. Метод array.tofile работает примерно в 7 раз быстрее, чем запись чисел с плавающей точкой в текстовый файл по одному на строку. Кроме того, размер двоичного файла с 10 миллионами чисел двойной точности составляет 80 000 000 байтов (по 8 байтов на число, с нулевыми накладными расходами), а текстового файла с теми же данными — 181 515 739 байтов.

Еще один быстрый и более гибкий способ сохранения числовых данных дает модуль pickle (http://bit.ly/ru-pickle), предназначенный для сериализации объектов. Сохранение массива чисел с плавающей точкой методом pickle.dump производится почти так же быстро, как методом array.tofile, однако pickle при этом работает почти для всех встроенных типов, в том числе для типа комплексных чисел complex, вложенных коллекций и даже объектов пользовательских классов (если их реализация не слишком запутанна).

Для частных случаев числовых массивов, представляющих такие двоичные данные, как растровые изображения, в Python имеются типы bytes и bytearray, которые мы обсудим в главе 4.