---
source_image: page_335.png
page_number: 335
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.76
tokens: 11871
characters: 2062
timestamp: 2025-12-24T01:50:10.364247
finish_reason: stop
---

Python в поисках следов последовательностей

Когда я пишу эти строки, в документации по классу memoryview (http://bit.ly/1QOxU2e) говорится, что он работает с объектами, которые «поддерживают протокол буфера», документированный только на уровне С API. Конструктор bytearray (http://bit.ly/1MDR1Lw) принимает «объект, согласованный с интерфейсом буфера». Сейчас наметилась тенденция к использованию более дружественного термина «объект, похожий на bytes»². Я это говорю, чтобы подчеркнуть: «похожий на X объект», «протокол X» и «интерфейс X», на взгляд питонистов, являются синонимами.

Один из самых фундаментальных интерфейсов в Python — протокол последовательности. Интерпретатор из кожи вон лезет, стремясь обработать объекты, предоставляющие даже минимальную реализацию этого протокола. Это демонстрируется в следующем разделе.

Python в поисках следов последовательностей

Философия модели данных Python заключается в том, чтобы всемерно взаимодействовать с важнейшими протоколами. А уж если речь идет о последовательностях, то Python прилагает все усилия, соглашаясь работать даже с самыми простыми реализациями.

На рис. 11.1 показано формальное определение интерфейса Sequence в виде ABC.

![UML-диаграмма абстрактного базового класса Sequence и связанных с ним классов из модуля collections.abc](../images/11_1.png)

Рис. 11.1. UML-диаграмма абстрактного базового класса Sequence и связанных с ним классов из модуля collections.abc. Стрелки направлены от подклассов к суперклассам. Курсивом набраны имена абстрактных методов.

Теперь взгляните на класс Foo в примере 11.3. Он не наследует классу abc.Sequence, а лишь реализует один метод протокола последовательности: __getitem__ (метод __len__ отсутствует).

² Проблема 16518: «добавить протокол буфера в глоссарий» (http://bugs.python.org/issue16518) была разрешена путем замены многочисленных упоминаний «объекта, который поддерживает протокол/интерфейс/API буфера» «объектом, похожим на bytes»; но за ней последовала проблема «Другие упоминания протокола буфера» (http://bugs.python.org/issue22581).