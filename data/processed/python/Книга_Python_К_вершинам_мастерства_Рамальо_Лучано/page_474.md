---
source_image: page_474.png
page_number: 474
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.08
tokens: 11765
characters: 1946
timestamp: 2025-12-24T01:56:49.270765
finish_reason: stop
---

Делай то, потом это: блоки else вне if

Это не секрет, а недооцененное средство языка: часть else может встречаться не только в предложениях if, но также в for, while и try.

Семантика for/else, while/else и try/else похожа, но резко отличается от семантики if/else. Поначалу слово else мешало мне по-настоящему понять смысл этих средств, но в конце концов я их освоил.

Правила таковы:

for
Блок else выполняется, только если цикл for дошел до конца (т. е. не было преждевременного выхода с помощью break).

while
Блок else выполняется, только если цикл while завершился вследствие того, что условие приняло ложное значение (а не в результате выхода с помощью break).

try
Блок else выполняется, только если в блоке try не возникало исключение. В официальной документации (http://bit.ly/1MMa1YB) также сказано: «Исключения, возникшие в части else, не обрабатываются в предшествующих частях except».

В любом случае часть else не выполняется и тогда, когда исключение либо одно из предложений return, break или continue приводят к передаче управления вовне главного блока составного предложения.

Я считаю, что выбор ключевого слова else крайне неудачен во всех случаях, кроме if. Оно подразумевает взаимно исключающие альтернативы, например: «Выполни этот цикл, иначе сделай то-то», однако семантика else в циклах прямо противоположна: «Выполни этот цикл, а затем сделай то-то». Таким образом, более подходящим словом было бы then — оно, кстати, имеет смысл и в контексте try: «Попробуй это, а затем сделай то». Однако добавление нового ключевого слова означало бы несовместимое изменение языка, а Гвидо бежит от этого, как от чумы.

Использование else в этих предложениях часто упрощает чтение кода и позволяет отказаться от установки всяких флагов и добавления предложений if.
Применение else обычно выглядит так:

for item in my_list:
    if item.flavor == 'banana':
        break
    else:
        raise ValueError('No banana flavor found!')