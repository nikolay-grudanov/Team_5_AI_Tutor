---
source_image: page_154.png
page_number: 154
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.93
tokens: 11800
characters: 1952
timestamp: 2025-12-24T01:41:43.873467
finish_reason: stop
---

6 Образец r'\d+' типа str сопоставляется с тамильскими цифрами и цифрами ASCII.
7 Образец rb'\d+' типа bytes сопоставляется только с цифрами ASCII.
8 Образец r'\w+' типа str сопоставляется с буквами, надстрочными индексами, тамильскими цифрами и цифрами ASCII.
9 Образец rb'\w+' типа str сопоставляется только с ASCII-байтами букв и цифр.

![Результат выполнения скрипта ramanujan.py](https://i.imgur.com/3Q5z5QG.png)

Рис. 4.4. Результат выполнения скрипта ramanujan.py из примера 4.22

Это тривиальный пример, призванный подчеркнуть одну мысль: в регулярных выражениях можно употреблять как str, так и bytes, но во втором случае байты, не принадлежащие диапазону ASCII, не считаются ни цифрами, ни символами, являющимися частью слова.

Для регулярных выражений типа str существует флаг re.ASCII, при задании которого \w, \W, \b, \B, \d, \D, \s и \S производят сопоставление только с байтами ASCII. Подробнее см. документацию по модулю re (https://docs.python.org/3/library/re.html).

Еще один важный двухрежимный модуль — это os.

str и bytes в функциях из модуля os

Ядро GNU/Linux ничего не знает о Unicode, поэтому на практике можно встретить имена файлов, представляющие собой последовательности байтов, которые не являются допустимыми ни в какой разумной кодировке и которые нельзя декодировать в тип str. Особенно чувствительны к этой проблеме файловые серверы, имеющие клиентов для разных ОС.

Чтобы обойти эту проблему, все функции из модуля os, принимающие имена файлов или пути, могут работать с аргументами типа str или bytes. Если такая функция вызывается с аргументом типа str, то он автоматически преобразуется кодеком, определяемым функцией sys.getfilesystemencoding(), а ответ ОС декодируется тем же кодеком. Почти всегда это именно то, что нужно, и согласуется с сэндвичем Unicode.

Но если приходится иметь дело с именами, которые так обрабатывать нельзя (или исправлять такие имена), то можно передавать функциям из модуля os аргу-