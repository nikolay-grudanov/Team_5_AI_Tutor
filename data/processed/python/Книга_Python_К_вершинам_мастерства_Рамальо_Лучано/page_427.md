---
source_image: page_427.png
page_number: 427
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.69
tokens: 11775
characters: 2032
timestamp: 2025-12-24T01:54:29.622854
finish_reason: stop
---

Класс Sentence, попытка № 1: последовательность слов

В Python 3 генераторы используются во многих местах. Даже встроенная функция range() теперь возвращает похожий на генератор объект, а не обычный список, как раньше. Если необходимо построить list из range, то придется делать это явно (например, list(range(100))).

Любая коллекция в Python является итерируемым объектом, а, кроме того, итераторы используются для поддержки:

• циклов for;
• конструирования и пополнения коллекций;
• построчного просмотра текстовых файлов;
• списковых, словарных и множественных включений;
• распаковки кортежей;
• распаковки фактических параметров с помощью * в вызовах функций.

В этой главе рассматриваются следующие темы:

• как встроенная функция iter(...) используется интерпретатором для обработки итерируемых объектов;
• как реализовать классический паттерн Итератор в Python;
• подробности работы генераторной функции, с описанием каждой строки;
• как можно заменить классический Итератор генераторной функцией или генераторным выражением;
• использование генераторных функций общего назначения в стандартной библиотеке;
• использование нового предложения yield from для комбинирования генераторов;
• пример: применение генераторных функций в утилите преобразования базы данных, спроектированной для работы с очень большими наборами данных;
• почему генераторы и сопрограммы, несмотря на внешнюю схожесть, по существу сильно различаются.

Начнем с вопроса о том, как функция iter(...) делает последовательность итерируемой.

Класс Sentence, попытка № 1: последовательность слов

Исследование итерируемых объектов мы начнем с реализации класса Sentence: его конструктору передается текстовая строка, после чего ее можно перебирать слово за словом. В первой версии мы реализуем протокол последовательности, итерируемость будет достигнута за счет того, что все последовательности — итерируемые объекты, но теперь мы точно узнаем, почему.

В примере 14.1 приведен класс Sentence, который умеет извлекать из текста слово с заданным индексом.