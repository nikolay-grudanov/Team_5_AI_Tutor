---
source_image: page_473.png
page_number: 473
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 31.87
tokens: 11724
characters: 1740
timestamp: 2025-12-24T01:56:39.076480
finish_reason: stop
---

ГЛАВА 15.
Контекстные менеджеры и блоки else

Не исключено, что контекстные менеджеры окажутся почти такими же важными, как сами подпрограммы. Мы затронули лишь самую верхушку айсберга [...]. В языке Basic есть предложение with, как и во многих других языках. Но все они делают совсем не то — они всего лишь экономят время на повторяющемся поиске атрибутов с точкой, не производя ни инициализации, ни очистки. Не нужно думать, что раз названия одинаковы, то одинаковы и функции. Предложение with — очень мощная штука.¹

— Раймонд Хэттингер,
страстный проповедник Python

В этой главе мы обсудим средства управления потоком выполнения, которые не так часто встречаются в других языках и потому остаются малоизвестными программистам на Python или используются ими недостаточно эффективно. Вот эти средства:

• предложение with и контекстные менеджеры;
• часть else в предложениях for, while и try.

Предложение with организует временный контекст и гарантированно очищает его под контролем объекта контекстного менеджера. Это позволяет предотвратить ошибки и уменьшить объем стереотипного кода, одновременно сделав API безопаснее и проще в использовании. Программисты на Python находят много применений блокам with помимо автоматического закрытия файлов.

Материал, касающийся else, никак не связан с предложением with. Но это уже часть V, а мне так не удалось найти никакого другого места для рассмотрения else, а заводить для этого специальную часть из одной странички не хотелось.

Рассмотрим сначала вопрос попроще, чтобы понять, в чем суть этой главы.

¹ Тезисы доклада на конференции PyCon US 2013 «What Makes Python Awesome» (http://pyvideo.org/video/1669/keynote-3); часть, относящаяся к with, начинается в 23:00 и заканчивается 26:15.