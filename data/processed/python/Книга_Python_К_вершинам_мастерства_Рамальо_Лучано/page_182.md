---
source_image: page_182.png
page_number: 182
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.29
tokens: 11734
characters: 1920
timestamp: 2025-12-24T01:43:04.046762
finish_reason: stop
---

Пакеты для функционального программирования

Хотя Гвидо ясно дал понять, что Python не задумывался как язык функционального программирования, в нем, тем не менее, можно применять функциональный стиль кодирования — благодаря таким пакетам, как operator и functools, которые мы рассмотрим ниже.

Модуль operator

В функциональном программировании часто бывает удобно использовать арифметический оператор как функцию. Пусть, например, требуется перемножить последовательность чисел для нерекурсивного вычисления факториала. Для суммирования можно воспользоваться функцией sum, но аналогичной функции для умножения не существует. Можно было бы применить функцию reduce, как было показано в разделе «Современные альтернативы функциям map, filter и reduce» выше, но для этого необходима функция умножения двух элементов последовательности. В примере 5.21 показано, как решить эту задачу с помощью lambda.

Пример 5.21. Вычисление факториала с помощью reduce и анонимной функции

from functools import reduce

def fact(n):
    return reduce(lambda a, b: a*b, range(1, n+1))

Чтобы избавить нас от необходимости писать тривиальные анонимные функции вида lambda a, b: a*b, модуль operator предоставляет функции, эквивалентные многим арифметическим операторам. С его помощью пример 5.21 можно переписать следующим образом.

Пример 5.22. Вычисление факториала с помощью reduce и operator.mul

from functools import reduce
from operator import mul

def fact(n):
    return reduce(mul, range(1, n+1))

Модуль operator включает также функции для выборки элементов из последовательностей и чтения атрибутов объектов: itemgetter и attrgetter строят специализированные функции для выполнения этих действий.

В примере 5.23 показано типичное применение itemgetter: сортировка списка кортежей по значению одного поля. В этом примере печатаются города, отсортированные по коду страны (поле 1). По существу, itemgetter(1) делает то же самое,