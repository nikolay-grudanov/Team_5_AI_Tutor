---
source_image: page_700.png
page_number: 700
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 86.64
tokens: 12221
characters: 3174
timestamp: 2025-12-24T02:07:48.085258
finish_reason: stop
---

Декораторы классов были формально определены в документе «PEP 3129 – Class Decorators» (http://bit.ly/1HGwIvW), который написал Коллин Уинтер (Collin Winter), а эталонную реализацию предложил Джек Дидерих (Jack Diederich). Доклад Джека Дидериха на конференции PyCon 2009 «Class Decorators: Radically Simple» (видео — по адресу http://bit.ly/1HGwJ2Y) содержит краткое введение в эту функциональность.

Книга Алекса Мартелли «Python in a Nutshell», издание 2, содержит блистательное описание метаклассов, в том числе и метакласса metaMetaBunch, решающего ту же задачу, что и наша простая функция record_factory из примера 21.2, но гораздо более изощренного. Мартелли не рассматривает декораторы классов, потому что они появились после того, как книга вышла из печати. Бизли и Джонс приводят великолепные примеры декораторов классов и метаклассов в своей книге «Python Cookbook», издание 3 (O'Reilly). Михаэль Фоорд (Michael Foord) написал статью с интригующим названием «Meta-classes Made Easy: Eliminating self with Metaclasses» (Метаклассы — это просто: устранение self с помощью метаклассов) (http://bit.ly/1HGwMux). Все сказано в подзаголовке.

Основной справочный материал по метаклассам — документ «PEP 3115 — Metaclasses in Python 3000» (https://www.python.org/dev/peps/pep-3115/), в котором вводится специальный метод __prepare__, и документ «Unifying types and classes in Python 2.2» (http://bit.ly/1HGwN2D), написанный Гвидо ван Россумом. Этот документ относится в равной мере и к Python 3 и охватывает то, что в то время называлось семантикой классов «нового стиля», в том числе дескрипторы и метаклассы. Его обязательно нужно прочитать. Гвидо ссылается, в частности, на книгу Ira R. Forman, Scott H. Danforth «Putting Metaclasses to Work: a New Dimension in Object-Oriented Programming» (Addison-Wesley, 1998), которой он поставил 5 звезд на сайте Amazon.com, сопроводив таким комментарием:

Эта книга внесла вклад в дизайн метаклассов в Python 2.2

Жаль, что она больше не переиздается; я продолжаю считать ее лучшей из известных мне работ на трудную тему кооперативного множественного наследования, поддерживаемого в Python с помощью функции super().

Что касается Python 3.5 — на момент написания этой книги вышла только альфа-версия — то в документе «PEP 487 — Simpler customization of class creation» (https://www.python.org/dev/peps/pep-0487/) выдвинута идея нового специального метода, __init_subclass__, который позволит регулярному классу (т. е. не метаклассу) настраивать инициализацию своих подклассов. Как и декораторы классов, метод __init_subclass__ призван сделать метапрограммирование классов более доступным, а заодно уменьшить количество доводов в пользу применения базового механизма, на котором он основан, — метаклассов.

Если вы увлеклись метапрограммированием, то, возможно, хотели бы, чтобы в Python был реализован механизм, являющийся королем всех средств метапрограммирования: синтаксические макросы, имеющиеся в Elixir и семействе языков

6 Страница каталога, посвященная книге «Putting Metaclasses to Work» (http://amzn.to/1HGwKDO).
Еще можно купить подержанные экземпляры. Я купил. Это трудный текст, но я надеюсь к нему еще вернуться.