---
source_image: page_064.png
page_number: 64
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 43.80
tokens: 11841
characters: 1919
timestamp: 2025-12-24T01:37:28.587839
finish_reason: stop
---

bisect из стандартной библиотеки Python. В следующем разделе мы обсудим его основные возможности, включая вспомогательную функцию bisect.insort, которая гарантирует, что отсортированная последовательность такой и останется после вставки новых элементов.

Средства работы с упорядоченными последовательностями в модуле bisect
В модуле bisect есть две основные функции — bisect и insort, — которые применяют алгоритм двоичной сортировки для быстрого поиска и вставки элементов в отсортированную последовательность.

Поиск средствами bisect
Функция bisect(haystack, needle) производит двоичный поиск иголки needle в стоге сена haystack. Последовательность haystack должна быть отсортирована. Результатом является позиция, в которую нужно было бы вставить needle, чтобы haystack осталась отсортирована в порядке возрастания. Иначе говоря, все элементы до этой позиции меньше или равны needle. Результат вызова bisect(haystack, needle) можно передать в качестве аргумента index методу haystack.insert(index, needle), однако функция insort выполняет сразу оба шага и делает это быстрее.

Раймонд Хэттингер — плодовитый разработчик на Python — опубликовал рецепт «Отсортированная коллекция» (http://bit.ly/1Vmt6WEa), который основан на модуле bisect, но проще в использовании, чем автономные функции.

В примере 2.17 на тщательно подобранном наборе «иголок» демонстрируется, какие позиции вставки возвращает bisect. Результат показан на рис. 2.4.

Пример 2.17. bisect находит точки вставки элементов в отсортированную последовательность

import bisect
import sys

HAYSTACK = [1, 4, 5, 6, 8, 12, 15, 20, 21, 23, 23, 26, 29, 30]
NEEDLES = [0, 1, 2, 5, 8, 10, 22, 23, 29, 30, 31]

ROW_FMT = '{0:2d} @ {1:2d} {2}{0:<2d}'

def demo(bisect_fn):
    for needle in reversed(NEEDLES):
        position = bisect_fn(HAYSTACK, needle)  # 1
        offset = position * ' |'  # 2
        print(ROW_FMT.format(needle, position, offset))  # 3