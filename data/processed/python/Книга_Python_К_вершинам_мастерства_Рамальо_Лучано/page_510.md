---
source_image: page_510.png
page_number: 510
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 45.89
tokens: 11804
characters: 1884
timestamp: 2025-12-24T01:58:34.394766
finish_reason: stop
---

ратор не возбуждает исключений до момента завершения, когда сам интерпретатор возбуждает исключение StopIteration.

В скрипте из примера 16.17 эти упрощающие предположения верны. Да и в реальном коде обычно ожидается, что делегирующий генератор выполняется до естественного завершения. Итак, посмотрим, как yield from работает в этом простом и счастливом мире.

Взгляните на пример 16.18, где развернуто одно-единственное предложение в теле делегирующего генератора:

RESULT = yield from EXPR

Попробуйте проследить логику.

Пример 16.18. Упрощенный псевдокод, эквивалентный предложению
RESULT = yield from EXPR в делегирующем генераторе (этот код охватывает только простейший случай: методы .throw(...) и .close() не поддерживаются, а единственное обрабатываемое исключение — StopIteration)

_i = iter(EXPR) ①
try:
    _y = next(_i) ②
except StopIteration as _e:
    _r = _e.value ③
else:
    while 1: ④
        _s = yield _y ⑤
        try:
            _y = _i.send(_s) ⑥
        except StopIteration as _e: ⑦,
            _r = _e.value
            break
RESULT = _r ⑧

① EXPR может быть произвольным итерируемым объектом, поскольку для получения итератора _i (субгенератора) применяется метод iter().
② Субгенератор инициализирован, результат сохраняется, чтобы потом стать первым отданым значением _y.
③ Если было возбуждено исключение StopIteration, то извлечь его атрибут value и присвоить его переменной _r; в простейшем случае это будет результат RESULT.
④ Пока этот цикл работает, делегирующий генератор блокирован и действует просто как канал между вызывающей стороной и субгенератором.
⑤ Отдаем текущий элемент, порожденный субгенератором; ждем, когда вызывающая сторона отправит значение _s. Отметим, что это единственный раз, когда в листинге встречается слово yield.
⑥ Пытаемся сдвинуть с места субгенератор, переправляя ему значение _s, отправленное вызывающей стороной.