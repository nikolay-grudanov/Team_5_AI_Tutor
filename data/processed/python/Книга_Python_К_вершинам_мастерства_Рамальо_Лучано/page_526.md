---
source_image: page_526.png
page_number: 526
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 61.32
tokens: 12135
characters: 3034
timestamp: 2025-12-24T01:59:35.833412
finish_reason: stop
---

В книге Brett Slatkin «Effective Python» (http://www.effectivepython.com) (Addison-Wesley) есть прекрасная короткая глава «Consider Coroutines to Run Many Functions Concurrently» (Об использовании сопрограмм для параллельного выполнения нескольких функций) (опубликована в качестве демонстрационной главы по адресу http://bit.ly/1JIqNcZ). Там имеется лучший из встречавшихся мне примеров управления генераторами с помощью yield from: реализация игры «Жизнь» Джона Конвея (http://bit.ly/1HGskDw), в которой сопрограммы используются для управления состоянием каждой клетки. Пример кода из книги «Effective Python» имеется в репозитории на GitHub (https://github.com/bslatkin/effectivepython). Я переработал код примера игры «Жизнь» — отделил функции и классы, реализующие игру, от тестового кода из книги Слаткина (оригинальный код см. по адресу http://bit.ly/1JIqO0l). Я также переписал тесты в виде doctest-скриптов, чтобы можно было видеть результаты различных сопрограмм и классов, не прогоняя скрипт. Переработанный код (http://bit.ly/1HGso6j) опубликован в виде gist-пакета на GitHub (http://bit.ly/coro_life).

Другие интересные примеры yield from, не связанные с asyncio, приведены в сообщении Петера Оттена (Peter Otten) в списке рассылки Python Tutor «Comparing two CSV files using Python» (http://bit.ly/1JIqSxf) и в реализации игры «камень, ножницы, бумага» в пособии Яна Уорда (Ian Ward) «Iterables, Iterators, and Generators» (http://bit.ly/1JIqQ8x), опубликованном в виде блокнота iPython.

Гвидо ван Россум отправил в группу Google python-tulip длинное сообщение под названием «The difference between yield and yield-from» (http://bit.ly/1JIqT44), которое стоит прочитать. Ник Кофлин опубликовал псевдокод yield from, снабдив его подробными комментариями в списке рассылки Python-Dev 21 марта 2009 (http://bit.ly/1JIqRcv); в этом сообщении он пишет:

Насколько трудным для понимания тот или иной человек находит код, содержащий yield from, зависит в большей степени от того, насколько хорошо он усвоил общие идеи невытесняющей многозадачности, чем от знания хитроумных трюков, необходимых для реализации вложенных генераторов.

В документе «PEP 492 – Coroutines with async and await syntax» (https://www.python.org/dev/peps/pep-0492/) Юрий Селиванов предлагает включить в Python два новых ключевых слова: async и await. Первое предлагается использовать совместно с уже имеющимися ключевыми словами для определения новых языковых конструкций. Например, async def — для определения сопрограммы и async for — для обхода асинхронных итерируемых объектов с помощью асинхронных итераторов (реализующих специальные методы __aiter__ и __anext__ — версии __iter__ и __next__ для сопрограмм). Чтобы избежать конфликтов с новым ключевым словом async, важную функцию asyncio.async() предлагается переименовать в asyncio.ensure_future() в Python 3.4.4. Ключевое слово await делает нечто подобное yield from, но допускается только в сопрограммах, определенных с помощью async def — в которых использование yield и yield from предлага-