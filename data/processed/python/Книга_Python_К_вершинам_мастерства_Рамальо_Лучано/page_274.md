---
source_image: page_274.png
page_number: 274
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.03
tokens: 11833
characters: 2068
timestamp: 2025-12-24T01:47:22.134973
finish_reason: stop
---

7 ... с объектом bytes, полученным преобразованием массива, который построен путем обхода экземпляра.
8 Для быстрого сравнения всех компонентов мы строим кортежи из операндов. Это работает, когда операнды являются экземплярами класса Vector2d, но не без проблем. См. предупреждение ниже.
9 Модулем вектора называется длина гипотенузы прямоугольного треугольника с катетами x и y.
10 Метод __bool__ вызывает abs(self) для вычисления модуля, а затем преобразует полученное значение в тип bool, так что 0.0 преобразуется в False, а любое число, отличное от нуля, — в True.

Метод __eq__ в примере 9.2 работает для операндов типа Vector2d, но возвращает True и в случае, когда экземпляр Vector2d сравнивается с другими итерируемыми объектами, содержащими точно такие же числовые значения (например, Vector(3, 4) == [3, 4]). Считать ли это ошибкой, зависит от точки зрения. Мы отложим дальнейшее обсуждение этого вопроса до главы 13, где рассматривается перегрузка операторов.

У нас имеется довольно полный набор базовых методов, но одного, очевидно, не хватает: восстановления объекта Vector2d из двоичного представления, порожденного функцией bytes().

Альтернативный конструктор

Поскольку мы можем экспорттировать Vector2d в виде последовательности байтов, хотелось бы иметь метод, который производит обратную операцию — конструирование Vector2d из двоичной последовательности. Заглянув в стандартную библиотеку в поисках источника вдохновения, мы обнаружим, что в классе array.array есть метод класса .frombytes, который нас вполне устраивает — мы видели его применение в разделе «Массивы» главы 2. Позаимствуем как имя, так и функциональность при написании метода класса Vector2d в файле vector2d_v1.py (пример 9.3).

Пример 9.3. Часть файла vector2d_v1.py: здесь показан только метод класса frombytes, добавленный в определение Vector2d из файла vector2d_v0.py (пример 9.2)

@classmethod
def frombytes(cls, octets):
    typecode = chr(octets[0])
    memv = memoryview(octets[1:]).cast(typecode)
    return cls(*memv)

1 Метод класса снабжен декоратором classmethod.