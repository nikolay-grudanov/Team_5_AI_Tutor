---
source_image: page_426.png
page_number: 426
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.26
tokens: 11790
characters: 1889
timestamp: 2025-12-24T01:54:29.797559
finish_reason: stop
---

ГЛАВА 14.
Итерируемые объекты, итераторы и генераторы

Видя в своих программах повторяющиеся структуры, я расцениваю их как знак беды. Форма программы должна отражать задачу, которую она призвана решить, и только ее. Любые другие регулярности в коде означают, по крайней мере для меня, что я использую недостаточно выразительные абстракции — зачастую из-за того, что вручную расширяю макросы, которые должен был бы написать¹.

— Пол Грэхем,
знамок Lisp и венчурный инвестор

Итерирование — одна из важнейших операций обработки данных. А если просматривается набор данных, не помещающийся целиком в память, то нужен способ выполнять ее отложенно, т. е. по одному элементу и по запросу. Именно в этом смысл паттерна Итератор. В этой главе мы покажем, что паттерн Итератор встречен в язык Python, поэтому реализовывать его вручную вам никогда не придется.

В Python нет макросов, как в Lisp (любимом языке Пола Грэхема), поэтому для абстрагирования паттерна Итератор понадобилось внести изменения в язык: ключевое слово yield было добавлено только в версии Python 2.2 (2001)². Ключевое слово yield позволяет конструировать генераторы, которые работают как итераторы.

Любой генератор является итератором: генераторы реализуют весь интерфейс итератора. Но итератор — в том виде, как он определен в книге «банда четырех», — извлекает элементы из коллекции, тогда как генератор может порождать элементы «из воздуха». Типичным примером является генератор чисел Фибоначчи — бесконечной последовательности, которую нельзя сохранить в коллекции. Однако имейте в виду, что в сообществе Python слова итератор и генератор обычно употребляются как синонимы.

¹ Из статьи в блоге «Revenge of the Nerds» (http://www.paulgraham.com/icad.html).
² Пользователи Python 2.2 могли использовать yield только вместе с импортом from __future__ import generators; в Python 2.3 это слово стало доступно по умолчанию.