---
source_image: page_301.png
page_number: 301
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.12
tokens: 11724
characters: 1731
timestamp: 2025-12-24T01:48:27.151693
finish_reason: stop
---

Vector, попытка № 1: совместимость с Vector2d

разрешив задавать произвольное число аргументов с помощью конструкции *args в методе __init__, но обычно конструктор последовательности принимает данные в виде итерируемого объекта — как все встроенные типы последовательностей. В примере 10.1 показано несколько способов создания объектов класса Vector.

Пример 10.1. Тесты методов Vector.__init__ и Vector.__repr__

>>> Vector([3.1, 4.2])
Vector([3.1, 4.2])
>>> Vector((3, 4, 5))
Vector([3.0, 4.0, 5.0])
>>> Vector(range(10))
Vector([0.0, 1.0, 2.0, 3.0, 4.0, ...])

Помимо сигнатуры конструктора, я включил тесты, которые проходили для Vector2d (например, Vector2d(3, 4)). Они должны проходить и для Vector и давать такие же результаты.

Если у вектора больше шести компонент, то вместо окончания строки, порожденной методом repr(), выводится ..., как в последней строчке примера 10.1. Это существенно для любого типа коллекции, в котором может быть много элементов, потому что repr применяется для отладки (и вряд ли вам понравится, когда один объект занимает тысячи строк на консоли или в журнале). Для создания укороченных представлений используйте модуль reprlib, как в примере 10.2.

В Python 2 модуль reprlib называется repr. Программа 2to3 автоматически подменяет предложения импорта repr.

В примере 10.2 приведена реализация первой версии класса Vector (она основана на коде из примеров 9.2 и 9.3).

Пример 10.2. vector_v1.py: основана на vector2d_v1.py

from array import array
import reprlib
import math

class Vector:
    typecode = 'd'

    def __init__(self, components):
        self._components = array(self.typecode, components)

    def __iter__(self):
        return iter(self._components)

    def __repr__(self):