---
source_image: page_076.png
page_number: 76
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.85
tokens: 11978
characters: 2021
timestamp: 2025-12-24T01:38:02.132499
finish_reason: stop
---

Глава 2. Массив последовательностей

ную длину), и тогда по заполнении добавление новых элементов приводит к удалению элементов с другого конца. В примере 2.23 показаны типичные операции со структурой deque.

Пример 2.23. Работа с очередью

```python
>>> from collections import deque
>>> dq = deque(range(10), maxlen=10) ①
>>> dq
deque([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)
>>> dq.rotate(3) ②
>>> dq
deque([7, 8, 9, 0, 1, 2, 3, 4, 5, 6], maxlen=10)
>>> dq.rotate(-4)
>>> dq
deque([1, 2, 3, 4, 5, 6, 7, 8, 9, 0], maxlen=10)
>>> dq.appendleft(-1) ③
>>> dq
deque([-1, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)
>>> dq.extend([11, 22, 33]) ④
>>> dq
deque([3, 4, 5, 6, 7, 8, 9, 11, 22, 33], maxlen=10)
>>> dq.extendleft([10, 20, 30, 40]) ⑤
>>> dq
deque([40, 30, 20, 10, 3, 4, 5, 6, 7, 8], maxlen=10)
```

① Необязательный аргумент maxlen задает максимальное число элементов в этом экземпляре deque, при этом устанавливается допускающий только чтение атрибут экземпляра maxlen.
② В результате циклического сдвига с n > 0 элементы удаляются с правого конца и добавляются с левого; при n < 0 удаление производится с левого конца, а добавление — с правого.
③ При добавлении элемента в заполненную очередь (len(d) == d.maxlen) происходит удаление с другого конца; обратите внимание, что в следующей строке элемент 0 отсутствует.
④ При добавлении трех элементов справа удаляются три элемента слева: -1, 1 и 2.
⑤ Отметим, что функция extendleft(iter) добавляет последовательные элементы из объекта iter в левый конец очереди, т. е. в итоге элементы будут размещены в порядке, противоположном исходному.

В табл. 2.3 сравниваются методы классов list и deque (унаследованные от object не показаны).

Отметим, что deque реализует большинство методов list и добавляет несколько новых, связанных с ее назначением, например popleft и rotate. Но существует и скрытая неэффективность: удаление элементов из середины deque производится медленно. Эта структура данных оптимизирована для добавления и удаления элементов только с любого конца.