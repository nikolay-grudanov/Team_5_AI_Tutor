---
source_image: page_468.png
page_number: 468
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.18
tokens: 11835
characters: 2039
timestamp: 2025-12-24T01:56:39.300853
finish_reason: stop
---

Глава 14. Итерируемые объекты, итераторы и генераторы

Предложение «yield» так глубоко зарыто в теле функции, что не может служить достаточным предупреждением о кардинальном различии в семантике.

Но Гвидо терпеть не может вводить новые ключевые слова и не счел этот аргумент убедительным, поэтому мы так и живем с def.

Использование синтаксиса функций для генераторов имеет и другие неприятные последствия. В статье и в экспериментальное работе «Python, the Full Monty: A Tested Semantics for the Python Programming Language» Полиц (Politz)14 с соавторами демонстрирует следующий тривиальный пример генераторной функции (в разделе 4.1):

def f(): x=0
    while True:
        x += 1
        yield x

Затем авторы замечают, что невозможно абстрагировать процесс отдачи значения с помощью вызова функции (пример 14.24).

Пример 14.24. «На первый взгляд это выглядит как простая абстракция процесса отдачи значения» (Politz et al.)

def f():
    def do_yield(n):
        yield n
    x = 0
    while True:
        x += 1
        do_yield(x)

Если в этом примере вызвать f(), то мы получим бесконечный цикл, а не генератор, потому что ключевое слово yield делает генераторной только непосредственно объемлющую функцию. Хотя генераторные функции выглядят как обычные функции, мы не можем делегировать работу другой генераторной функции с помощью простого вызова. Кстати, в языке Lua такого ограничения нет. Сопрограмма в Lua может вызывать другие функции, и любая из них может отдать значение вызванной сопрограмме.

Новая синтаксическая конструкция yield from была введена, чтобы генератор или сопрограмма в Python могли делегировать работу другому генератору или сопрограмме без обходного приема в виде внутреннего цикла for. Пример 14.24 можно «исправить», поставив перед вызовом функции yield from, как показано ниже.

14 Joe Gibbs Politz, Alejandro Martinez, Matthew Milano, Sumner Warren, Daniel Patterson, Junsong Li, Anand Chitipothu, and Shriram Krishnamurthi, "Python: The Full Monty," SIGPLAN Not. 48, 10 (October 2013), стр. 217-232