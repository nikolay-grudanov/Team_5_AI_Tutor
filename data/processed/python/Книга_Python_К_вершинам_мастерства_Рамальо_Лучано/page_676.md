---
source_image: page_676.png
page_number: 676
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.53
tokens: 11690
characters: 1641
timestamp: 2025-12-24T02:05:55.350685
finish_reason: stop
---

ГЛАВА 21.
Метапрограммирование классов

Магия метаклассов не интересна 99 % пользователей. Если вы задаетесь вопросом, нужны ли они вам, значит, не нужны (люди, которым они нужны, точно знают, что нуждаются в них, и не нуждаются в объяснениях)¹.

— Тим Питерс,
изобретатель алгоритма timsort и плодовитый программист на Python

Метапрограммирование классов — это искусство создания или настройки классов во время выполнения. Классы в Python — полноправные объекты, поэтому функция может в любой момент создать новый класс, не используя ключевое слово class. Декораторы классов — также функции, которые дополнительно умеют инспектировать и изменять декорированный класс и даже заменять его другим. Наконец, метаклассы — самое продвинутое средство метапрограммирования классов: они позволяют создавать целые категории классов со специальными характеристиками, например, уже встречавшиеся нам абстрактные базовые классы.

Метаклассы — мощный механизм, но правильно пользоваться ими трудно. Декораторы классов часто решают те же проблемы проще. На самом деле, сейчас оправдать применение метаклассов в реальном коде настолько трудно, что мой любимый пояснительный пример в значительной мере утратил притягательность после появления декораторов классов в Python 3.

Здесь же обсуждается различие между этапом импорта и этапом выполнения: без его понимания нечего и думать об эффективном метапрограммировании в Python.

¹ Сообщение в группе comp.lang.python, озаглавленное: «Acrimony in c.l.p». (http://bit.ly/1e8iABS). Это вторая часть сообщения от 23 декабря 2002, процитированного в предисловии. В тот день на TimBot, видно, напало вдохновение.