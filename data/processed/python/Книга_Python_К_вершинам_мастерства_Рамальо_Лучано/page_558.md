---
source_image: page_558.png
page_number: 558
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 60.84
tokens: 11985
characters: 2524
timestamp: 2025-12-24T02:01:08.567052
finish_reason: stop
---

Глава 17. Параллелизм и будущие объекты

GIL — вполне реальная проблема, которая в обозримом будущем никуда не денется, поэтому Джесси Ноллер и Ричард Оудкерк (Richard Oudkerk) написали библиотеку, с помощью которой ее проще обойти в счетных задачах: пакет multiprocessing, который имитирует для процессов API библиотеки threading и добавляет вспомогательную инфраструктуру в виде блокировок, очередей, каналов, разделяемой памяти и т. д. Этот пакет описан в документе «PEP 371 — Addition of the multiprocessing package to the standard library» (https://www.python.org/dev/peps/pep-0371/). Официальная документация содержится в rst-файле, насчитывающем 63 страницы, объемом 93 КБ (http://bit.ly/multi-docs) — пожалуй, это одна из самых длинных глав в описании стандартной библиотеки Python. Многопроцессное программирование — основа класса concurrent.futures.ProcessPoolExecutor.

Для распараллеливания счетных задач и программ, работающих с большими объемами данных, появилась новая технология, собравшая вокруг себя обширное сообщество, — Apache Spark (https://spark.apache.org), механизм распределенных вычислений, предлагающий удобный Python API и поддержку работы с объектами Python, как с данными. Примеры можно найти на странице https://spark.apache.org/examples.html.

Существуют две элегантные и очень простые для использования библиотеки распараллеливания задач между процессами: lelo (https://pypi.python.org/pypi/lelo) Жоао С. О. Буэно (Joao S. O. Bueno) и python-parallelize (http://bit.ly/1HGtF6Q) Ната Прайса (Nat Pryce). В пакете lelo определен декоратор @parallel; если применить его к любой функции, то она, как по волшебству, становится неблокирующей, поскольку выполняется в отдельном процессе. Пакет Ната Прайса python-parallelize предоставляет генератор parallelize, который можно использовать для выполнения цикла for на нескольких процессорах. В основе обоих пакетов лежит модуль multiprocessing.

Поговорим

Держаться подальше от потоков

Параллелизм — один из самых трудных вопросов информатики (лучше держаться от него подальше)¹⁰.

— Дэвид Бизли,
преподаватель Python и безумный ученый

Я согласен с, казалось бы, противоречащими друг другу высказываниями Дэвида Бизли (см. выше) и Мишеля Симионато (взято в качестве эпиграфа к этой главе). Прослушав в университете курс, в котором словосочетание «параллельное программирование» считалось сино-

¹⁰ Slide 9 из пособия «A Curious Course on Coroutines and Concurrency» (http://www.dabeaz.com/coroutines/), представленного на конференции PyCon 2009.