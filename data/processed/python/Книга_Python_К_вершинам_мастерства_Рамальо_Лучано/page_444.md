---
source_image: page_444.png
page_number: 444
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.53
tokens: 11839
characters: 2254
timestamp: 2025-12-24T01:55:19.690029
finish_reason: stop
---

def __init__(self, text):
    self.text = text

def __repr__(self):
    return 'Sentence(%s)' % reprlib.repr(self.text)

def __iter__(self):
    return (match.group() for match in RE_WORD.finditer(self.text))

От примера 14.7 отличается только метод __iter__, который здесь не является генераторной функцией (в нем нет слова yield), а использует генераторное выражение для построения генератора, который потом и возвращает. Конечный результат не меняется: код, вызывающий __iter__, получает объект-генератор.

Генераторные выражения — не более чем синтаксическая глазурь: их всегда можно заменить генераторными функциями, но иногда выражения удобнее. Следующий раздел посвящен использованию генераторных выражений.

Генераторные выражения: когда использовать

В реализации класса Vector из примера 10.16 я несколько раз пользовался генераторными выражениями. В каждом из методов __eq__, __hash__, __abs__, angle, angles, format, __add__, __mul__ встречается генераторное выражение. Во всех них можно было бы обойтись и списковым включением, но ценой расхода памяти на хранение промежуточных списков.

В примере 14.9 мы видели, что генераторное выражение — синтаксически более короткий способ создать генератор, не определяя и не вызывая функцию. С другой стороны, генераторные функции обладают большей гибкостью: в них можно закодировать сложную логику, включающую несколько предложений, и даже использовать их в качестве сопрограмм (глава 16).

В простых случаях генераторного выражения достаточно, и оно легче воспринимается на взгляд, как показывает пример класса Vector.

Я придерживаюсь такого эвристического правила: если генераторное выражение занимает больше двух строк, я предпочитаю генераторную функцию — код получается понятнее. Кроме того, поскольку у генераторной функции есть имя, ее можно использовать повторно. Конечно, всегда можно поименовать генераторное выражение, присвоив его переменной, но это, пожалуй, идет вразрез с заложенной в них идеей односторочного генератора.

Синтаксический совет

Когда генераторное выражение передается в качестве единственного аргумента функции или конструктору, нет необходимости указывать одну пару скобок для вызова функции и другую для обрамления генераторного выражения. Хватит и одной пары, как