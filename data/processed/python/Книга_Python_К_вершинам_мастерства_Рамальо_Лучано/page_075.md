---
source_image: page_075.png
page_number: 75
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 44.58
tokens: 11967
characters: 2550
timestamp: 2025-12-24T01:37:56.512150
finish_reason: stop
---

Когда список не подходит

4 Импортировать таймер высокого разрешения (включен в стандартную библиотеку, начиная с версии Python 3.3).
5 Разделить каждый элемент на 3; для 10 миллионов чисел с плавающей точкой это заняло менее 40 миллисекунд.
6 Сохранить массив в двоичном файле с расширением .pru.
7 Загрузить данные в виде спроектированного на память файла в другой массив; это позволяет эффективно обрабатывать срезы массивы, хотя он и не находится целиком в памяти.
8 Умножить все элементы на 6 и распечатать последние три.

Сборка NumPy и SciPy из исходного кода — занятие не для слабых духом. На странице «The Installing the SciPy Stack» сайта SciPy.org (http://www.scipy.org/install.html) рекомендуется брать специальные дистрибутивы Python для научных приложений, в том числе Anaconda, Enthought Canopy и WinPython. Это довольно большие файлы, зато готовые к немедленному применению. Пользователи стандартных дистрибутивов GNU/Linux обычно могут найти NumPy и SciPy в репозиториях пакетов. Например, для установки в системе Debian или Ubuntu достаточно выполнить команду:

$ sudo apt-get install python-numpy python-scipy

Этот код приведен, только чтобы разжечь ваш аппетит. NumPy и SciPy — потрясающие библиотеки, лежащие в основе не менее замечательных библиотек для анализа данных, в т. ч. Pandas (http://pandas.pydata.org) и Blaze (http://blaze.pydata.org/en/latest/), которые предоставляют эффективные типы массивов для хранения нечисловых данных, а также функции импорта-экспорта, совместимые с различными форматами (например, CSV, XLS, дамп SQL, HDF5 и т. д.). Эти пакеты заслуживают отдельной книги, правда, не этой. Однако любой обзор последовательностей в Python был бы неполным без упоминания о массивах, хотя бы беглого.

Познакомившись с плоскими последовательностями — стандартными массивами и массивами NumPy, — обратимся совершенно к другой альтернативе старого доброго списка list: очередям.

Двусторонние и другие очереди

Методы .append и .pop позволяют использовать список list как стек или очередь (если вызывать только .append и .pop(0), то получится дисциплина обслуживания LIFO). Однако вставка и удаление элемента из левого конца списка (с индексом 0) обходится дорого, потому что приходится сдвигать весь список.

Класс collections.deque — это потокобезопасная двусторонняя очередь, предназначенная для быстрой вставки и удаления из любого конца. Эта структура удобна и для хранения списка «последних виденных элементов» и прочего в том же духе, т. к. deque можно сделать ограниченной (при создании задать максималь-