---
source_image: page_460.png
page_number: 460
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 51.27
tokens: 11966
characters: 2459
timestamp: 2025-12-24T01:56:20.530317
finish_reason: stop
---

Глава 14. Итерируемые объекты, итераторы и генераторы

Генераторная функция chain дает шанс поработать каждому полученному итерируемому объекту по очереди. В документе «PEP 380 – Syntax for Delegating to a Subgenerator» (http://bit.ly/1wpQv0i) описан новый синтаксис для решения этой задачи, он показан в распечатке сеанса ниже:

```python
>>> def chain(*iterables):
...     for i in iterables:
...         yield from i
...
>>> list(chain(s, t))
['A', 'B', 'C', 0, 1, 2]
```

Как видим, yield from i полностью заменяет внутренний цикл for. Конструкция yield from здесь используется правильно, и код действительно смотрится лучше, но в таком виде это всего лишь синтаксическая глазурь. Помимо замены цикла, yield from создает прямой канал между внутренним генератором и клиентом внешнего генератора. И этот канал становится по-настоящему важен, когда генераторы используются в роли сопрограмм и не только порождают, но и потребляют значения из клиентского кода. Сопрограммы подробно рассматриваются в главе 16, где на нескольких страницах объясняется, почему yield from гораздо больше, чем синтаксическая глазурь.

Познакомившись с yield from, вернется к обзору имеющихся в стандартной библиотеке функций для работы с итераторами.

Функции редуцирования итерируемого объекта

Все функции, перечисленные в табл. 14.6, принимают итерируемый объект и возвращают единственный результат. Их называют «редуцирующими», «сворачивающими» или «аккумулирующими». На самом деле, все эти функции можно было бы реализовать с помощью functools.reduce, но они сделаны встроенными, чтобы было проще решать часто встречающиеся задачи. Кроме того, для all и any проведена важная оптимизация, которая при использовании reduce была бы невозможна: эти функции закорочены (т. е. прекращают обход итератора, как только результат становится известен). См. последний тест функции any в примере 14.23.

Таблица 14.6. Встроенные функции, которые читают итерируемый объект и возвращают одиночное значение

<table>
  <tr>
    <th>Модуль</th>
    <th>Функция</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>встроенная</td>
    <td>all(it)</td>
    <td>Возвращает True, если все элементы it принимают истинное значение, в противном случае False; all([]) возвращает True</td>
  </tr>
  <tr>
    <td>встроенная</td>
    <td>any(it)</td>
    <td>Возвращает True, если хотя бы один элемент it принимает истинное значение, в противном случае False; any([]) возвращает False</td>
  </tr>
</table>