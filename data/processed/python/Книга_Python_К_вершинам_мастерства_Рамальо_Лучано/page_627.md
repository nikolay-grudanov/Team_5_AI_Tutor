---
source_image: page_627.png
page_number: 627
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.20
tokens: 11717
characters: 1916
timestamp: 2025-12-24T02:03:53.534465
finish_reason: stop
---

Использование свойств для контроля атрибутов

8 ... объект, сохраняемый в базе данных, конструируется функцией factory, которая может быть конструктором класса DbRecord или его подкласса — в зависимости от значения record_type.

Отметим, что единственное значение record_type, для которого существует специальный класс, — это Event, но если бы мы написали классы с именами Speaker или Venue, то load_db автоматически использовала бы при построении и сохранении записей их, а не подразумеваемый по умолчанию класс DbRecord.

Примеры, которые мы видели в этой главе до сих пор, предназначались для демонстрации различных способов реализации динамических атрибутов с помощью таких базовых средств, как __getattr__, hasattr, getattr, @property и __dict__.

Свойства часто применяются для реализации обязательных бизнес-правил. С этой целью открытый атрибут заменяется атрибутом, управляемым методами чтения и установки, без изменения клиентского кода, как показано в следующем разделе.

Использование свойств для контроля атрибутов

До сих пор мы видели лишь декоратор @property, используемый для реализации свойств, допускающих только чтение. В этом разделе мы создадим свойство, допускающее чтение и запись.

LineItem, попытка № 1: класс строки заказа

Представим себе приложение для магазина, который продает натуральные пищевые продукты вразвес, т. е. клиенты могут заказывать орехи, сухофрукты или хлопья по весу. В такой системе заказ состоит из последовательности строк, а каждую строку можно представить классом, показанным в примере 19.15.

Пример 19.15. bulkfood_v1.py: простейший класс LineItem

class LineItem:
    def __init__(self, description, weight, price):
        self.description = description
        self.weight = weight
        self.price = price

    def subtotal(self):
        return self.weight * self.price

Красиво и просто. Пожалуй, слишком просто. В примере 19.16 показано, в чем проблема.