---
source_image: page_101.png
page_number: 101
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.70
tokens: 11817
characters: 2177
timestamp: 2025-12-24T01:39:14.646285
finish_reason: stop
---

Неизменяемые отображения

зические контакты GPIO на плате. Поэтому было бы желательно предотвратить непреднамеренное изменение board.pins, потому что нельзя же изменять оборудование с помощью программы, т. е. любая такая модификация оказалась бы несогласованной с физическим устройством.

Начиная с версии Python 3.3, модуль types содержит класс-обертку MappingProxyType, который получает отображение и возвращает объект mappingproxy, допускающий только чтение, но при этом являющийся динамическим представлением исходного отображения. Это означает, что любые изменения исходного отображения будут видны и в mappingproxy, но через него такие изменения сделать нельзя. Демонстрация приведена в примере 3.9.

Пример 3.9. Класс MappingProxyType строит по словарю объект mappingproxy, допускающий только чтение

```python
>>> from types import MappingProxyType
>>> d = {1: 'A'}
>>> d_proxy = MappingProxyType(d)
>>> d_proxy
mappingproxy({1: 'A'})
>>> d_proxy[1]  # Элементы d можно видеть через d_proxy.
'A'
>>> d_proxy[2] = 'x'  # Произвести изменения через d_proxy невозможно.
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: 'mappingproxy' object does not support item assignment
>>> d[2] = 'B'  # Представление d_proxy динамическое: любое изменение сразу же отражается.
>>> d_proxy
mappingproxy({1: 'A', 2: 'B'})
>>> d_proxy[2]
'B'
```

1 Элементы d можно видеть через d_proxy.
2 Произвести изменения через d_proxy невозможно.
3 Представление d_proxy динамическое: любое изменение сразу же отражается.

Вот как этим можно воспользоваться в случае Pingo.io: конструктор конкретного подкласса Board инициализирует закрытое отображение объектами, представляющими контакты, и раскрывает его клиентам API с помощью открытого атрибута .pins, реализованного как mappingproxy. Таким образом, клиент не сможет по ошибке добавлять, удалять и изменять контакты4.

Рассмотрев большинство имеющихся в стандартной библиотеке типов отображений, мы можем перейти к типам множеств.

4 На самом деле, мы не используем класс MappingProxyType в Pingo.io, потому что он появился только в Python 3.3, а мы должны поддерживать совместимость с версиями, начиная с 2.7.