---
source_image: page_530.png
page_number: 530
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.53
tokens: 11796
characters: 1889
timestamp: 2025-12-24T01:59:19.667520
finish_reason: stop
---

ГЛАВА 17.
Параллелизм и будущие объекты

Потоки критикуют в основном системные программисты, имея в виду такие ситуации, с которыми типичный прикладной программист никогда не сталкивается. [...] В 99 % случаев, с которыми имеет дело прикладной программист, достаточно знать, как запустить группу независимых потоков и собрать результаты¹.

— Мишель Симионато,
вдумчивый пользователь Python

Эта глава посвящена библиотеке concurrent.futures, впервые реализованной в версии Python 3.2, но доступной также для Python 2.5 и более поздних версий в виде пакета futures (https://pypi.python.org/pypi/futures/) на сайте PyPI. Эта библиотека инкапсулирует паттерн, описанный Мишелем Симионато в абзаце, взятом в качестве эпиграфа, делая его использование почти тривиальным делом.

Здесь же я введу понятие «будущего объекта» — объекта, представляющего асинхронное выполнение операции. Эта плодотворная идея лежит в основе не только библиотеки concurrent.futures, но и пакета asyncio, рассматриваемого в главе 18.

Начнем с поясняющего примера.

Пример: три способа загрузки из веба

Эффективное программирование сетевого ввода-вывода невозможно без параллелизма из-за наличия высоких сетевых задержек — чем впустую растрачивать процессорное время на ожидание, лучше заняться чем-то полезным, пока из сети не пришел ответ.

Для иллюстрации этого положения я написал три простых программы загрузки изображений флагов 20 стран из веба. Первая программа, flags.py, работает

¹ Из статьи Мишеля Симионато «Threads, processes and concurrency in Python; some thoughts» (http://bit.ly/1JlrYZQ), имеющей подзаголовок «Removing the hype around the multicore (non) revolution and some (hopefully) sensible comment about threads and other forms of concurrency» (Развенчание рекламной чепухи по поводу многоядерной (не) революции и некоторые (надеюсь) полезные замечания о потоках и других видах параллелизма).