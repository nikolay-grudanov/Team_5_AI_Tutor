---
source_image: page_707.png
page_number: 707
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.33
tokens: 11670
characters: 1523
timestamp: 2025-12-24T02:07:15.660939
finish_reason: stop
---

ПРИЛОЖЕНИЕ А.
Листинги скриптов

Ниже приведены полные листинги некоторых скриптов, настолько длинные, что им не нашлось место в основном тексте. Включены также скрипты, с помощью которых генерировались некоторые таблицы и фикстуры, использованные в этой книге.

Все эти скрипты доступны также в репозитории кода к книге (http://bit.ly/1e8s1Bd), как и почти все остальные фрагменты кода.

Глава 3: тест производительности оператора in

Пример А.1 содержит код, с помощью которого я получил данные хронометража, приведенные в табл. 3.6, с применением модуля timeit. Скрипт, в основном, подготавливает данные haystack и needles и форматирует результаты.

Программируя пример А.1, я обнаружил нечто, позволяющее взглянуть на производительность dict в более широком контексте. Если запустить скрипт в режиме подробной информации (с флагом -v), то получаются цифры, почти в два раза превышающие те, что приведены в табл. 3.5. Но заметим, что в этом скрипте «режим подробной информации» означает лишь четыре обращения к print на этапе настройки теста и еще одно обращение для показа количества найденных иголок по завершении каждого теста. Внутри цикла, где ищутся иголки в стоге сена, ничего не печатается, но эти пять обращений к print занимают почти столько же времени, сколько поиск 1000 иголок.

Пример А.1. container_perftest.py: запускать с указанием имени встроенного типа коллекции в аргументе командной строки (например, container_perftest.py dict)

"""
Тест производительности оператора контейнера 'in'
"""

import sys