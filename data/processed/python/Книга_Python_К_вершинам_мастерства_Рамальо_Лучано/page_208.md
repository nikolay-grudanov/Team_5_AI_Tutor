---
source_image: page_208.png
page_number: 208
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.58
tokens: 11716
characters: 1726
timestamp: 2025-12-24T01:44:17.297063
finish_reason: stop
---

ГЛАВА 7.
Декораторы функций и замыкания

Многие были недовольны выбором названия «декоратор» для этого средства. И главная причина — несогласованность с использованием термина в книге «Банды четырех». Название декоратор, пожалуй, в большей степени связано с употреблением в области разработки компиляторов — обход и аннотирование синтаксического дерева.

— Ральф Джонсон,
PEP 318 — Decorators for Functions and Methods

Декораторы функций дают возможность «помечать» функции в исходном коде, тем или иным способом дополняя их поведение. Это мощное средство, но для овладения им нужно понимать, что такое замыкание.

Одно из самых недавних зарезервированных слов в Python — nonlocal, оно появилось в версии Python 3.0. Программист на Python может безбедно существовать, и не используя его, если будет строго придерживаться объектно-ориентированной диеты, основанной на классах. Но если вы захотите реализовать собственные декораторы функций, то должны досконально разбираться в замыканиях, а тогда потребность в слове nonlocal становится очевидной.

Помимо применения при реализации декораторов, замыкания важны также для эффективного асинхронного программирования без обратных вызовов и для кодирования в функциональном стиле там, где это имеет смысл.

Конечная цель этой главы — точно объяснить, как работают декораторы — от простейших регистрационных до более сложных параметризованных. Но прежде нам предстоит рассмотреть следующие вопросы:

• как интерпретатор Python разбирает синтаксис декораторов;
• как Python решает, является ли переменная локальной;
• зачем нужны замыкания и как они работают;
• какие проблемы решает ключевое слово nonlocal.

Заложив этот фундамент, мы сможем перейти непосредственно к декораторам: