---
source_image: page_628.png
page_number: 628
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 52.00
tokens: 11818
characters: 1944
timestamp: 2025-12-24T02:04:03.394650
finish_reason: stop
---

Пример 19.16. Если вес отрицателен, то и промежуточный итог отрицателен

```python
>>> raisins = LineItem('Golden raisins', 10, 6.95)
>>> raisins.subtotal()
69.5
>>> raisins.weight = -20 # мусор на входе...
>>> raisins.subtotal()   # мусор на выходе...
-139.0
```

Пример, конечно, игрушечный, но не такой надуманный, как можно было бы предположить. Вот правдивая история, случившаяся, когда сайт Amazon.com только зарождался:

Мы обнаружили, что покупатель мог заказать отрицательное количество книг! И мы бы перечислили на его кредитную карту соответствующую сумму и, надо полагать, ждали бы, когда он отгрузит книги¹³.

— Джейф Безос,
основатель и генеральный директор Amazon.com

Как это исправить? Можно было бы изменить интерфейс класса LineItem, добавив методы чтения и установки атрибута weight. Так поступают в Java, и ничего плохого в этом нет.

С другой стороны, было бы естественно устанавливать атрибут weight элемента заказа, просто присваивая ему значение, да и не исключено, что в других частях эксплуатируемой системы уже встречается прямой доступ к атрибуту вида item.weight. В таком случае следовало бы заменить атрибут-данные свойством — это было бы в духе Python.

LineItem, попытка № 2: контролирующее свойство

Реализовав свойство, мы сможем использовать методы чтения и установки, но интерфейс класса LineItem при этом не изменится (т. е. для установки атрибута weight объекта LineItem по-прежнему нужно будет написать raisins.weight = 12).

В примере 19.17 приведен код свойства weight, допускающего чтение и запись.

Пример 19.17. bulkfood_v2.py: класс LineItem со свойством weight

```python
class LineItem:
    def __init__(self, description, weight, price):
        self.description = description
        self.weight = weight
        self.price = price

    def subtotal(self):
```

¹³ Цитата из статьи «Рождение продавца» Джейфра Безоса в журнале «Уолл-стрит джорнал» (http://on.wsj.com/1ECI8DI) (15 октября 2011).