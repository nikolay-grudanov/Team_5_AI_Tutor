---
source_image: page_031.png
page_number: 31
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 50.66
tokens: 11769
characters: 2114
timestamp: 2025-12-24T01:36:09.771208
finish_reason: stop
---

Булево значение пользовательского типа

Хотя в Python есть тип bool, интерпретатор принимает любой объект в булевом контексте, например в условии if, в управляющем выражении цикла while или в качестве операнда операторов and, or и not. Чтобы определить, является ли выражение истинным или ложным, применяется функция bool(x), которая возвращает True или False.

По умолчанию любой объект пользовательского класса считается истинным, но положение меняется, если реализован хотя бы один из методов __bool__ или __len__. Функция bool(x), по существу, вызывает x.__bool__() и использует полученный результат. Если метод __bool__ не реализован, то Python пытается вызвать x.__len__() и при получении нуля функция bool возвращает False. В противном случае bool возвращает True.

Наша реализация __bool__ концептуально проста: метод возвращает False, если модуль вектора равен 0, и True в противном случае. Для преобразования модуля в булеву величину мы вызываем bool(abs(self)), поскольку ожидается, что метод __bool__ возвращает булево значение.

Обратите внимание на то, как специальный метод __bool__ обеспечивает согласованность пользовательских объектов с правилами проверки значения истинности, определенными в главе «Встроенные типы» (http://docs.python.org/3/library/stdtypes.html#truth) документации по стандартной библиотеке Python.

Можно было бы написать более быструю реализацию метода Vector.__bool__:

def __bool__(self):
    return bool(self.x or self.y)

Она сложнее воспринимается, зато позволяет избежать обращений к abs и __abs__, возведения в квадрат и извлечения корня. Явное преобразование в тип bool необходимо, потому что метод __bool__ должен возвращать булево значение, а оператор or возвращает один из двух операндов: результат вычисления x or y равен x, если x истинно, иначе равен y вне зависимости от его значения.

Сводка специальных методов

В главе «Модель данных» (http://docs.python.org/3/reference/datamodel.html) справочного руководства по языку Python перечислены 83 специальных метода, из которых 47 используются для реализации операторов: арифметических, поразрядных и сравнения.