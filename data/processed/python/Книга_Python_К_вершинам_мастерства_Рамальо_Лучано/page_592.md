---
source_image: page_592.png
page_number: 592
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 38.67
tokens: 11652
characters: 1619
timestamp: 2025-12-24T02:02:18.493079
finish_reason: stop
---

Глава 18. Применение пакета asyncio для организации...

прашивать символы Unicode, в канонических именах которых встречаются заданные слова. Для этой цели мы воспользуемся модулем unicodedata, обсуждавшимся в разделе «База данных Unicode» на стр. 157. На рис. 18.2 показан telnet-сеанс работы с TCP-сервером поиска символов, в котором мы ищем символы шахматных фигур и символы, в именах которых встречается слово «sun».

![Telnet-сеанс с сервером tcp_charfinder.py server](https://i.imgur.com/3Q5z5QG.png)

Рис. 18.2. Telnet-сеанс с сервером tcp_charfinder.py server: запрос символов, в именах которых встречаются слова «chess black» и «sun»

Обратимся к реализации.

TCP-сервер на основе asyncio

Основная часть кода этих примеров находится в модуле charfinder.py, который не имеет никакого отношения к конкурентности. Скрипт charfinder.py можно использовать для поиска символов из командной строки, но проектировался он главным образом как вспомогательное средство для серверов на основе asyncio. Файл charfinder.py находится в репозитории кода к данной книге (https://github.com/fluentpython/example-code).

Модуль charfinder индексирует все слова, встречающиеся в именах символов из базы данных Unicode, которая входит в дистрибутив Python, и создает инвертированный индекс в виде словаря dict. Например, ключу 'SUN' в инвертированном индексе соответствует множество из 10 символов Unicode, в именах которых встречается это слово. Инвертированный индекс сохраняется в файле charfinder_index.pickle. Если запрос состоит из нескольких слов, то charfinder вычисляет пересечение множеств, соответствующих каждому слову.