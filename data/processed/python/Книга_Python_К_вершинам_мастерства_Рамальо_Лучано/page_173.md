---
source_image: page_173.png
page_number: 173
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 48.43
tokens: 11995
characters: 2213
timestamp: 2025-12-24T01:42:47.935658
finish_reason: stop
---

Интроспекция функций

def upper_case_name(obj):
    return ("%s %s" % (obj.first_name, obj.last_name)).upper()
upper_case_name.short_description = 'Customer name'

Теперь обратимся к атрибутам, специфичным для функций, т. е. отсутствующим у пользовательских объектов общего вида. Чтобы получить список таких атрибутов, достаточно вычислить разность двух множеств (см. пример 5.9).

Пример 5.9. Перечисление атрибутов функций, отсутствующих у обычных объектов

>>> class C: pass # 1
>>> obj = C() # 2
>>> def func(): pass # 3
>>> sorted(set(dir(func)) - set(dir(obj))) # 4
['__annotations__', '__call__', '__closure__', '__code__', '__defaults__',
'__get__', '__globals__', '__kwdefaults__', '__name__', '__qualname__']

1 Создаем тривиальный пользовательский класс.
2 Создаем его экземпляр.
3 Создаем тривиальную функцию.
4 Вычислив разность множеств, получаем отсортированный список атрибутов, имеющихся у функции, но отсутствующих у экземпляра обычного класса.

В табл. 5.1 описаны атрибуты, вошедшие в список из примера 5.9.

Таблица 5.1. Атрибуты пользовательских функций

<table>
  <tr>
    <th>Имя</th>
    <th>Тип</th>
    <th>Описание</th>
  </tr>
  <tr>
    <td>__annotations__</td>
    <td>code</td>
    <td>Аннотации параметров и возвращаемого значения</td>
  </tr>
  <tr>
    <td>__call__</td>
    <td>method-wrapper</td>
    <td>Реализация оператора (), т. е. протокола вызываемых объектов</td>
  </tr>
  <tr>
    <td>__closure__</td>
    <td>tuple</td>
    <td>Замыкание функции, т. е. привязки свободных переменных (часто None)</td>
  </tr>
  <tr>
    <td>__code__</td>
    <td>code</td>
    <td>Метаданные и тело функции, откомпилированные в виде байт-кода</td>
  </tr>
  <tr>
    <td>__defaults__</td>
    <td>tuple</td>
    <td>Значения формальных параметров по умолчанию</td>
  </tr>
  <tr>
    <td>__get__</td>
    <td>method-wrapper</td>
    <td>Реализация протокола дескриптора для чтения (см. главу 20)</td>
  </tr>
  <tr>
    <td>__globals__</td>
    <td>code</td>
    <td>Глобальные переменные модуля, в котором определена функция</td>
  </tr>
  <tr>
    <td>__kwdefaults__</td>
    <td>code</td>
    <td>Значения по умолчанию формальных чисто именованных параметров</td>
  </tr>
</table>