---
source_image: page_475.png
page_number: 475
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.21
tokens: 11779
characters: 2108
timestamp: 2025-12-24T01:56:49.768897
finish_reason: stop
---

Делай то, потом это: блоки else вне if

Что касается блоков try/except, то на первый взгляд else может показаться лишним. Ведь after_call() в следующем фрагменте и так будет выполняться, только если dangerous_call() не возбудил исключения, верно?

try:
    dangerous_call()
    after_call()
except OSError:
    log('OSError...')

Однако здесь вызов after_call() помещен в блок try безо всякой причины. Чтобы код оставался ясным и корректным, в теле блока try должны быть только предложения, которые могут возбуждать ожидаемые исключения. Такой код намного лучше:

try:
    dangerous_call()
except OSError:
    log('OSError...')
else:
    after_call()

Теперь понятно, что блок try защищает от возможных ошибок внутри dangerous_call(), но не внутри after_call(). Кроме того, очевидно, что after_call() выполняется, только если внутри блока try не было исключений.

В Python блок try/except часто используется для управления потоком выполнения, а не только для обработки ошибок. В официальном глоссарии Python для этого даже есть специальный акроним (https://docs.python.org/3/glossary.html#term-eafp):

EAFP
Проще попросить прощения, чем испрашивать разрешение (Easier to ask for forgiveness than permission). Этот принятый в Python стиль программирования означает следующее: лучше предположить, что ключ или атрибут существует и перехватить исключение, если предположение окажется неверным. Характерной особенностью этого чистого и быстрого стиля является изобилие предложений try и except. Эта техника противоположна принятому во многих других языках, включая C, стилю LBYL.

Далее в глоссарии определяется акроним LBYL:

LBYL
Не зная броду, не суйся в воду (Look before you leap). Этот стиль программирования подразумевает проверку предусловий до вызова или поиска. Он противоположен стилю EAFP и характеризуется наличием многочисленных предложений if. В многопоточной программе стиль LBYL чреват состоянием гонки между проверкой и выполнением. Например, код if key in mapping: return mapping[key] может привести к ошибке, если другой поток удалит ключ из отображения после проверки, но перед выборкой. Эту