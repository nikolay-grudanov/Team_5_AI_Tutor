---
source_image: page_379.png
page_number: 379
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 42.05
tokens: 11868
characters: 2133
timestamp: 2025-12-24T01:52:13.101408
finish_reason: stop
---

Множественное наследование и порядок разрешения методов

self.ping()
super().ping()
self.pong()
super().pong()
C.pong(self)

Отметим, что оба класса B и C реализуют метод pong. Единственное различие заключается в том, что C.pong выводит слово PONG, написанное заглавными буквами.

Если вызвать метод d.pong() от имени экземпляра D, то какой метод pong выполнится? В C++ программист должен явно квалифицировать вызовы методов именами классов для разрешения неоднозначности. В Python это тоже возможно.

Пример 12.5. Два способа вызвать метод pong от имени экземпляра класса D

>>> from diamond import *
>>> d = D()
>>> d.pong() # 1
pong: <diamond.D object at 0x10066c278>
>>> C.pong(d) # 2
PONG: <diamond.D object at 0x10066c278>

1 Если просто вызвать d.pong(), то выполнится метод из класса B.
2 Но всегда можно вызвать метод от имени самого суперкласса, передав экземпляр в качестве явного аргумента.

Неоднозначность вызовов вида d.pong() разрешается, потому что Python обходит граф наследования в определенном порядке. Этот порядок называется MRO: порядок разрешения методов. В каждом классе есть атрибут __mro__, в котором хранится кортеж ссылок на суперклассы в порядке MRO, начиная от текущего класса и вверх по иерархии до класса object. Для класса D атрибут __mro__ выглядит так (см. рис. 12.1):

>>> D.__mro__
(<class 'diamond.D'>, <class 'diamond.B'>, <class 'diamond.C'>, <class 'diamond.A'>, <class 'object'>)

Рекомендуемый способ делегировать вызовы методов суперклассам — воспользоваться встроенной функцией super(), которая в Python 3 стала проще¹, как показывает метод pingpong из класса D в примере 12.4. Однако можно также — и иногда это удобно — игнорировать MRO и вызвать метод суперкласса напрямую. Например, метод D.ping можно было бы написать и так:

def ping(self):
    A.ping(self)  # вместо super().ping()
    print('post-ping:', self)

Отметим, что при вызове метода экземпляра от имени класса аргумент self необходимо передавать явно, потому что вы обращаетесь к несвязанному методу.

¹ В Python 2 первую строчку метода D.pingpong следовало бы записать в виде super(D, self).ping(), а не super().ping().