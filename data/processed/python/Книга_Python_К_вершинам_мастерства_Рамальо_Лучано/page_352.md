---
source_image: page_352.png
page_number: 352
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 44.56
tokens: 11800
characters: 2168
timestamp: 2025-12-24T01:51:01.139509
finish_reason: stop
---

Метод .inspect() в примере 11.9, пожалуй, надуманный, но он показывает, что, имея всего лишь методы .pick() и .load(...), мы можем узнать, что находится внутри Tombola: для этого сначала нужно извлечь все элементы по одному, а затем загрузить их обратно. Мы хотели этим подчеркнуть, что в предоставлении конкретных методов ABC нет ничего плохого при условии, что они зависят только от других методов интерфейса. Конкретные подклассы Tombola, знающие о своих внутренних структурах данных, всегда могут подменить .inspect() более эффективной реализацией, но не обязаны это делать.

Метод .loaded() в примере 11.9 не такой дурацкий, но накладный: он строит отсортированный кортеж с помощью .inspect() только для того, чтобы применить к нему функцию bool(). Этот способ работает, но конкретный класс может поступить гораздо лучше, как мы вскоре увидим.

Отметим, что в нашей «карусельной» реализации .inspect() обязательно перехватывать исключение LookupError, которое возбуждает метод self.pick(). Тот факт, что self.pick() может возбуждать исключение LookupError, составляет часть его интерфейса, но объявить это в Python можно только в документации (см. строку документации абстрактного метода pick в примере 11.9.)

Я выбрал исключение LookupError из-за его места в иерархии исключений в Python по отношению к IndexError и KeyError — исключениям, которые, скорее всего, будут возбуждать операции со структурами данных в конкретных подклассах Tombola. Таким образом, согласованная реализация может возбуждать исключение LookupError, IndexError или KeyError. См пример 11.10 (полное дерево приведено в разделе 5.4 «Иерархия исключений» справочного руководства по стандартной библиотеке Python).

Пример 11.10. Часть иерархии классов Exception

BaseException
├── SystemExit
├── KeyboardInterrupt
├── GeneratorExit
└── Exception
    ├── StopIteration
    ├── ArithmeticError
    │   ├── FloatingPointError
    │   └── OverflowError
    │       └── ZeroDivisionError
    ├── AssertionError
    ├── AttributeError
    ├── BufferError
    ├── EOFError
    ├── ImportError
    ├── LookupError
    │   ├── IndexError
    │   └── KeyError
    └── MemoryError
        ... и т. д.