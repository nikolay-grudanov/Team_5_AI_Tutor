---
source_image: page_172.png
page_number: 172
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 46.21
tokens: 11823
characters: 2265
timestamp: 2025-12-24T01:42:42.419724
finish_reason: stop
---

Класс, в котором реализован метод __call__, — простой способ создать похожий на функцию объект, обладающий внутренним состоянием, которое должно сохраняться между вызовами, как, например, остающиеся элементы в BingoCage. Примером может служить декоратор. Декораторы должны быть функциями, но иногда удобно иметь возможность «запоминать» что-то между вызовами декоратора (например, в случае кэширования результатов длительных вычислений для последующего использования).

Совершенно другой подход к созданию функций, имеющих внутреннее состояние, дают замыкания. Замыкания, как и декораторы, рассматриваются в главе 7.

Перейдем теперь к другому аспекту обращения с функциями как с объектами: интроспекция во время выполнения.

Интроспекция функций

У объектов-функций есть много других атрибутов, помимо __doc__. Вот что функция dir сообщает о нашей функции factorial:

```python
>>> dir(factorial)
['__annotations__', '__call__', '__class__', '__closure__', '__code__',
 '__defaults__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__',
 '__format__', '__ge__', '__get__', '__getattribute__', '__globals__',
 '__gt__', '__hash__', '__init__', '__kwdefaults__', '__le__', '__lt__',
 '__module__', '__name__', '__ne__', '__new__', '__qualname__', '__reduce__',
 '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__',
 '__subclasshook__']
```

Многие из этих атрибутов имеются у любого объекта Python. В этом разделе мы рассмотрим лишь те, которые имеют непосредственное отношение к обращению с функциями как с объектами, и начнем с атрибута __dict__.

Как и экземпляры обычного пользовательского класса, функция использует атрибут __dict__ для хранения ассоциированных с ней пользовательских данных. Это можно считать примитивной формой аннотации. Вообще говоря, ассоцирование произвольных атрибутов с функцией — не очень распространенная практика, но в Django активно применяется. См., например, атрибуты short_description, boolean и allow_tags, описанные в документации на административном сайте Django (https://docs.djangoproject.com/en/1.5/ref/contrib/admin). Следующий код, взятый из документации по Django, показывает, как присоединить атрибут short_description к методу, чтобы его описание появлялось в журналах Django при вызове метода: