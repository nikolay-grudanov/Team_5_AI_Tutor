---
source_image: page_065.png
page_number: 65
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 231.34
tokens: 12040
characters: 2182
timestamp: 2025-12-24T01:40:39.647142
finish_reason: stop
---

Средства работы с упорядоченными последовательностями...

if __name__ == '__main__':
    if sys.argv[-1] == 'left': ①
        bisect_fn = bisect.bisect_left
    else:
        bisect_fn = bisect.bisect

print('DEMO:', bisect_fn.__name__) ⑤
print('haystack ->', ' '.join('%2d' % n for n in HAYSTACK))
demo(bisect_fn)

① С помощью одной из функций из модуля bisect получить точку вставки.
② Построить «забор» из вертикальных черточек.
③ Напечатать отформатированную строку, показывающую «иголку» и точку вставки.
④ Выбрать функцию из модуля bisect в соответствии с последним аргументом в командной строке.
⑤ Напечатать заголовок, содержащий имя выбранной функции.

02-array-seq/ $ python3 bisect_demo.py
DEMO: bisect
haystack ->  1   4   5   6   8  12  15  20  21  23  23  26  29  30
31 @ 14      |   |   |   |   |   |   |   |   |   |   |   |   |   |
30 @ 14      |   |   |   |   |   |   |   |   |   |   |   |   |   |
29 @ 13      |   |   |   |   |   |   |   |   |   |   |   |   |   |
23 @ 11      |   |   |   |   |   |   |   |   |   |   |   |   |   |
22 @ 9       |   |   |   |   |   |   |   |   |   |   |   |   |   |
10 @ 5       |   |   |   |   |   |   |   |   |   |   |   |   |   |
8 @ 5        |   |   |   |   |   |   |   |   |   |   |   |   |   |
5 @ 3        |   |   |   |   |   |   |   |   |   |   |   |   |   |
2 @ 1        |   |   |   |   |   |   |   |   |   |   |   |   |   |
1 @ 1        |   |   |   |   |   |   |   |   |   |   |   |   |   |
0 @ 0        |   |   |   |   |   |   |   |   |   |   |   |   |   |

Рис. 2.4. Результат работы программы из примера 2.17 в случае, когда используется функция bisect, — в начале каждой строки печатаются данные в формате needle @ position, а значение needle показано под соответствующей точкой вставки в haystack

Поведение bisect настраивается двумя способами.
Во-первых, два необязательных аргумента, lo и hi, позволяют сузить область последовательности, в которой производится поиск. По умолчанию lo равно 0, а hi — длине последовательности (результат, возвращаемый функцией len()).
Во-вторых, bisect — на самом деле, псевдоним функции bisect_right, и существует парная функция bisect_left. Различие между ними проявляется, только