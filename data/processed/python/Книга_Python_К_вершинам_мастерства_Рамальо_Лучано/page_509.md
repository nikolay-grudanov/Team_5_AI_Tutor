---
source_image: page_509.png
page_number: 509
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 57.63
tokens: 11984
characters: 2571
timestamp: 2025-12-24T01:58:46.024655
finish_reason: stop
---

Семантика yield from

нозначное слово «итератор» на «субгенератор» и добавил несколько пояснений. В примере 16.17 продемонстрированы четыре из шести пунктов.

• Все значения, отдаваемые субгенератором, передаются напрямую вызывающей стороне делегирующего генератора (т. е. клиентскому коду).
• Все значения, отправляемые делегирующему генератору методом send(), передаются напрямую субгенератору. Если отправлено значение None, то вызывается метод __next__() субгенератора. Если отправлено значение, отличное от None, то вызывается метод send() субгенератора. Если вызов возбуждает исключение StopIteration, выполнение делегирующего генератора возобновляется. Любое другое исключение распространяется делегирующему генератору.
• Выполнение return expr в генераторе (или субгенераторе) приводит к возбуждению исключения StopIteration(expr) по выходе из генератора.
• Значение выражения yield from является первым аргументом исключения StopIteration, возбуждаемого субгенератором при завершении.

Еще два свойства yield from касаются исключений и завершения.

• Исключения, отличные от GeneratorExit, возбуждаемые методом throw() в делегирующем генераторе, передаются методу throw() субгенератора. Если вызов возбуждает исключение StopIteration, то выполнение делегирующего генератора возобновляется. Любое другое исключение распространяется делегирующему генератору.
• Если в делегирующем генераторе методом throw() возбуждено исключение GeneratorExit или вызван метод close() делегирующего генератора, то вызывается метод close() субгенератора, если такой метод имеется. Если этот вызов приводит к исключению, то оно распространяется делегирующему генератору. В противном случае в делегирующем генераторе возбуждается исключение GeneratorExit.

Детальная семантика yield from довольно сложна, особенно аспекты, касающиеся исключений. Грэгу Ивингу пришлось немало потрудиться, чтобы изложить ее английским языком в документе PEP 380.

Ивинг также документировал поведение yield from с помощью псевдокода (с синтаксисом Python). Лично я считаю полезным потратить некоторое время на изучение этого псевдокода в PEP 380. Однако он занимает 40 строк, и с налету его не поймешь.

Но можно сначала рассмотреть самый простой и распространенный случай использования yield from.

Допустим, что yield from встречается в делегирующем генераторе. Клиентский код управляет делегирующим генератором, а тот — субгенератором. Поэтому, чтобы упростить логику, представим, что клиент никогда не вызывает методы .throw(...) и .close() делегирующего генератора. Представим также, что субгене-