---
source_image: page_213.png
page_number: 213
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.47
tokens: 7328
characters: 1425
timestamp: 2025-12-24T02:32:14.607919
finish_reason: stop
---

Я свяжу все примеры с вопросом о цикле for-in, с которого мы начали этот раздел. И в его конце мы пробежимся по некоторым различиям, существующим между Python 2 и Python 3 относительно итераторов.

Готовы? Тогда, поехали!

Бесконечное повторение

Начнем с того, что напишем класс, который демонстрирует скелетный протокол итератора. Используемый здесь пример, возможно, по виду отличается от примеров, которые вы видели в других пособиях по итераторам, но наберитесь терпения. Считаю, что в таком виде он предоставит вам более компетентное понимание того, как итераторы работают в Python.

В последующих нескольких абзацах мы собираемся реализовать класс, который мы назовем повторителем Repeater, итерации по которому можно выполнять в цикле for-in следующим образом:

repeater = Repeater('Привет')
for item in repeater:
    print(item)

Как следует из его имени, экземпляры класса Repeater при его итеративном обходе будут неизменно возвращать единственное значение. Поэтому приведенный выше пример кода будет бесконечно печатать в консоли строковый литерал 'Привет'.

Начиная реализацию, мы, прежде всего, определим и конкретизируем класс Repeater:

class Repeater:
    def __init__(self, value):
        self.value = value

    def __iter__(self):
        return RepeaterIterator(self)

При первоначальном осмотре класс Repeater похож на заурядный класс Python. Но обратите внимание, что он также включает метод __iter__.