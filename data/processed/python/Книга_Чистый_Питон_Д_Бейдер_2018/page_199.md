---
source_image: page_199.png
page_number: 199
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.69
tokens: 7343
characters: 1444
timestamp: 2025-12-24T02:31:56.160277
finish_reason: stop
---

Этот модуль — хороший выбор для реализации очередей с приоритетом в Python. Поскольку двоичная куча heapq технически обеспечивает только реализацию min-heap (то есть кучи, где значение в любой вершине не больше, чем значения ее потомков), должны быть предприняты дополнительные шаги, которые обеспечат стабильность сортировки и другие функциональные возможности, которые, как правило, ожидаю от «практической версии» очереди с приоритетом¹.

import heapq

q = []

heapq.heappush(q, (2, 'программировать'))
heapq.heappush(q, (1, 'есть'))
heapq.heappush(q, (3, 'спать'))

while q:
    next_item = heapq.heappop(q)
    print(next_item)

# Результат:
#   (1, 'есть')
#   (2, 'программировать')
#   (3, 'спать')

queue.PriorityQueue — красивые очереди с приоритетом

Данная реализация очереди с приоритетом во внутреннем представлении использует двоичную кучу heapq и имеет одинаковую временную и пространственную вычислительную сложность².

Разница состоит в том, что очередь с приоритетом PriorityQueue синхронизирована и обеспечивает семантику блокирования с целью поддержки многочисленных параллельных производителей и потребителей.

В зависимости от вашего варианта использования она либо станет полезной, либо слегка замедлит вашу программу. В любом случае вы мо-

¹ См. документацию Python «Примечания к реализации очереди с приоритетом»: там же.
² См. документацию Python «queue.PriorityQueue»: https://docs.python.org/3.6/library/queue.html