---
source_image: page_244.png
page_number: 244
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 27.81
tokens: 7372
characters: 1601
timestamp: 2025-12-24T02:33:07.053700
finish_reason: stop
---

и чистой, ее все еще можно улучшить. К этому подходу у меня есть несколько претензий:

□ он неэффективен, потому что он опрашивает словарь дважды;

□ он многословен, поскольку, например, часть строки с приветствием повторяется;

□ он не является питоновским — официальная документация Python, в частности, для таких ситуаций рекомендует использовать стиль программирования «легче попросить прощения, чем разрешения» (EAFP):

Этот общепринятый стиль программирования на Python исходно предполагает существование допустимых ключей или атрибутов и отлавливает исключения, если предположение оказывается ложным¹.

Более эффективная реализация, которая следует принципам EAFP, могла бы вместо выполнения явной проверки на принадлежность ключа словарю задействовать блок try...except, чтобы поймать исключение KeyError:

def greeting(userid):
    try:
        return 'Привет, %s!' % name_for_userid[userid]
    except KeyError:
        return 'Привет всем'

Эта реализация по-прежнему верна в том, что касается наших первоначальных требований, и теперь мы устранили необходимость опрашивать словарь дважды.

Но мы до сих пор можем улучшить ее и предложить более чистое решение. В словаре Python есть метод get(), поддерживающий параметр «по умолчанию», который можно использовать в качестве запасного значения²:

def greeting(userid):
    return 'Привет, %s!' % name_for_userid.get(
        userid, 'всем')

¹ См. глоссарий Python «EAFP»: https://docs.python.org/3.6/glossary.html?highlight=glossary
² См. документацию Python «dict.get()»: https://docs.python.org/3/tutorial/datastructures.html#dictionaries