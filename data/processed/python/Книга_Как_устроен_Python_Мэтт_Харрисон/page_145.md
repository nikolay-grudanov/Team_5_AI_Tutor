---
source_image: page_145.png
page_number: 145
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 19.30
tokens: 7316
characters: 1431
timestamp: 2025-12-24T02:37:34.620093
finish_reason: stop
---

if __name__ == '__main__':
    # выполнение
    sys.exit(main(sys.argv[1:]) or 0)

Эта простая команда запускает функцию main, когда файл выполняется. И наоборот, если файл используется в качестве модуля, функция main автоматически выполняться не будет. Функция sys.exit вызывается с возвращаемым значением main (или 0, если main не возвращает значение), как делают все добропорядочные программы в мире UNIX.

Функция main получает параметры командной строки в списке sys.argv. В самом начале sys.argv находится элемент python3, поэтому нам приходится создать срез sys.argv, чтобы исключить этот элемент перед тем, как передавать параметры main.

СОВЕТ

Некоторые разработчики размещают логику выполнения (код, расположенный внутри функции main) прямо под проверкой if __name__ == '__main__'::
Несколько причин для хранения логики в функции:

• Функция main может вызываться из других мест.

• Функцию main можно легко тестировать с разными аргументами.

• Сокращение объема кода, выполняемого на глобальном уровне.

26.14. Итоги

В этой главе был проанализирован код Python в сценариях командного интерпретатора. Мы рассмотрели некоторые полезные практические приемы и стандартные соглашения программирования.

Если вы будете структурировать свой код так, как описано в этой главе, то будете следовать лучшим практикам программирования на языке Python. Описанная структура также упростит чтение вашего кода другими разработчиками.