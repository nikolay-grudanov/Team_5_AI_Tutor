---
source_image: page_501.png
page_number: 501
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.30
tokens: 7657
characters: 2055
timestamp: 2025-12-24T02:54:13.498124
finish_reason: stop
---

Поиск в истории команд и повторное выполнение

IPython позволяет искать и повторно выполнять предыдущий код или другие команды. Это полезно, поскольку мы часто повторяем одни и те же команды, например %run. Допустим, вы выполнили такую команду:

In[7]: %run first/second/third/data_script.py

и, ознакомившись с результатами работы скрипта (в предположении, что он завершился успешно), обнаружили ошибку в вычислениях. Разобравшись, в чем проблема, и исправив скрипт data_script.py, вы можете набрать несколько первых букв команды %run и нажать Ctrl-P или клавишу <стрелка вверх>. В ответ IPython найдет в истории команд первую из предшествующих команд, начинающуюся введенными буквами. При повторном нажатии <Ctrl-P> или <стрелки вверх> поиск будет продолжен. Если вы проскочили мимо нужной команды, ничего страшного. По истории команд можно перемещаться и вперед с помощью клавиш <Ctrl-N> или <стрелка вниз>. Стоит только попробовать, и вы начнете нажимать эти клавиши, не задумываясь.

Комбинация клавиш <Ctrl-R> дает ту же возможность частичного инкрементного поиска, что подсистема readline, применяемая в оболочках UNIX, например bash. В Windows функциональность readline реализуется самим IPython. Чтобы воспользоваться ей, нажмите <Ctrl-R>, а затем введите несколько символов, встречающихся в искомой строке ввода:

In [1]: a_command = foo(x, y, z)

(reverse-i-search)`com': a_command = foo(x, y, z)

Нажатие <Ctrl-R> приводит к циклическому просмотру истории в поисках строк, соответствующих введенным символам.

Входные и выходные переменные

Забыв присвоить результат вызова функции, вы можете горько пожалеть об этом. По счастью, IPython сохраняет ссылки как на входные команды (набранный вами текст), так и на выходные объекты в специальных переменных. Последний и предпоследний выходные объекты хранятся соответственно в переменных _ (один подчерк) и __ (два подчерка):

In [18]: 'input1'
Out[18]: 'input1'

In [19]: 'input2'
Out[19]: 'input2'

In [20]: __
Out[20]: 'input1'

In [21]: 'input3'
Out[21]: 'input3'

In [22]: _
Out[22]: 'input3'