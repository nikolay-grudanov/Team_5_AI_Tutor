---
source_image: page_393.png
page_number: 393
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.00
tokens: 7696
characters: 1308
timestamp: 2025-12-24T02:51:07.619252
finish_reason: stop
---

Рис. 11.6. Скользящее среднее котировок акций за 60 дней (по оси y отложен логарифм)

Функция rolling принимает также строку, содержащую фиксированное временное смещение, а не количество периодов. Такой вариант может быть полезен для нерегулярных временных рядов. Точно такие же строки передаются resample. Например, вот как можно было бы вычислить скользящее среднее за 20 дней:

In [263]: close_px.rolling("20D").mean()
Out[263]:
          AAPL    MSFT    XOM
2003-01-02  7.400000  21.110000  29.220000
2003-01-03  7.425000  21.125000  29.230000
2003-01-06  7.433333  21.256667  29.473333
2003-01-07  7.432500  21.425000  29.342500
2003-01-08  7.402000  21.402000  29.240000
...
2011-10-10  389.351429  25.602143  72.527857
2011-10-11  388.505000  25.674286  72.835000
2011-10-12  388.531429  25.810000  73.400714
2011-10-13  388.826429  25.961429  73.905000
2011-10-14  391.038000  26.048667  74.185333
[2292 rows x 3 columns]

Экспоненциально взвешенные функции
Вместо использования окна постоянного размера, когда веса всех наблюдений одинаковы, можно задать постоянный коэффициент затухания, чтобы повысить вес последних наблюдений. Есть два способа задать коэффициент затухания, самый популярный — использовать промежуток (span), потому что результаты в этом случае получаются сравнимыми с применением