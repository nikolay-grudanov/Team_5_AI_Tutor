---
source_image: page_391.png
page_number: 391
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 17.68
tokens: 7398
characters: 985
timestamp: 2025-12-24T02:50:50.678749
finish_reason: stop
---

Рис. 11.4. Скользящее среднее котировок акций Apple за 250 дней

Выражение rolling(250) ведет себя как groupby, но вместо группировки создает объект, который допускает группировку по скользящему окну шириной 250 дней. Таким образом, здесь мы имеем средние котировки акций Apple в скользящем окне шириной 250 дней.

По умолчанию функции создания скользящих окон требуют, чтобы все значения в окне были отличны от NA. Это поведение можно изменить, чтобы учесть возможность отсутствия данных и, в частности, тот факт, что в начале временного ряда количество периодов данных меньше window (см. рис. 11.5):

In [255]: plt.figure()
Out[255]: <Figure size 1000x600 with 0 Axes>
In [256]: std250 = close_px["AAPL"].pct_change().rolling(250, min_periods=10).std()

In [257]: std250[5:12]
Out[257]:
2003-01-09    NaN
2003-01-10    NaN
2003-01-13    NaN
2003-01-14    NaN
2003-01-15    NaN
2003-01-16    0.009628
2003-01-17    0.013818
Freq: B, Name: AAPL, dtype: float64

In [258]: std250.plot()