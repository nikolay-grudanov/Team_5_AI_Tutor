---
source_image: page_473.png
page_number: 473
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.08
tokens: 7898
characters: 2217
timestamp: 2025-12-24T02:53:33.372140
finish_reason: stop
---

аггай([[1.6042, 2.3751, 0.633],
      [0.7081, -1.202, -1.3538],
      [-1.5329, 0.2985, 0.6076],
      [-0.7793, -1.4717, 0.1132]])

In [88]: demeaned.mean(0)
Out[88]: аггай([0., -0., 0.])

Эта операция показана на рис. А.4. Для приведения к нулю средних по строкам с помощью укладывания требуется проявить осторожность. К счастью, укладывание значений меньшей размерности вдоль любого измерения массива (например, вычитание средних по строкам из каждого столбца двумерного массива) возможно при соблюдении следующего правила:

Правило укладывания
Два массива совместимы по укладыванию, если для обоих последних измерений (т. е. отсчитываемых с конца) длины осей совпадают или хотя бы одна длина равна 1. Тогда укладывание производится по отсутствующим измерениям или по измерениям длины 1.

<table>
  <tr>
    <th>(4,3)</th>
    <th>(3, )</th>
    <th>(4,3)</th>
  </tr>
  <tr>
    <td>
      <table>
        <tr><th>0</th><th>0</th><th>0</th></tr>
        <tr><th>1</th><th>1</th><th>1</th></tr>
        <tr><th>2</th><th>2</th><th>2</th></tr>
        <tr><th>3</th><th>3</th><th>3</th></tr>
      </table>
    </td>
    <td>
      <table>
        <tr><th>1</th><th>2</th><th>3</th></tr>
        <tr><th>1</th><th>2</th><th>3</th></tr>
        <tr><th>1</th><th>2</th><th>3</th></tr>
        <tr><th>1</th><th>2</th><th>3</th></tr>
      </table>
    </td>
    <td>
      <table>
        <tr><th>1</th><th>2</th><th>3</th></tr>
        <tr><th>2</th><th>3</th><th>4</th></tr>
        <tr><th>3</th><th>4</th><th>5</th></tr>
        <tr><th>4</th><th>5</th><th>6</th></tr>
      </table>
    </td>
  </tr>
</table>

Рис. А.4. Укладывание одномерного массива по оси 0

Даже я, опытный пользователь NumPy, иногда вынужден рисовать картинки, чтобы понять, как будет применяться правило укладывания. Вернемся к последнему примеру и предположим, что мы хотим вычесть среднее значение из каждой строки, а не из каждого столбца. Поскольку длина массива агг. mean(0) равна 3, он совместим по укладыванию вдоль оси 0, т. к. по последнему измерению длины осей (три) совпадают. Согласно правилу, чтобы произвести вычитание по оси 1 (т. е. вычесть среднее по строкам из каждой строки), меньший массив должен иметь форму (4, 1):