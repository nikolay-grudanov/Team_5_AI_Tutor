---
source_image: page_462.png
page_number: 462
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 22.06
tokens: 7528
characters: 1798
timestamp: 2025-12-24T02:52:52.242002
finish_reason: stop
---

Приложение А

Дополнительные сведения о библиотеке NumPy

В этом приложении мы глубже рассмотрим библиотеку NumPy, предназначенную для вычислений с массивами. Мы разберемся во внутренних деталях типа ndarray и поговорим о дополнительных операциях над массивами и алгоритмах.

Приложение содержит разнородные темы, поэтому читать его последовательно не обязательно. В основных главах я генерирую случайные данные в различных примерах с помощью подразумеваемого по умолчанию генератора случайных чисел из модуля numpy.random:

In [11]: rng = np.random.default_rng(seed=12345)

A.1. Внутреннее устройство объекта ndarray

Объект ndarray из библиотеки NumPy позволяет интерпретировать блок однородных данных (непрерывный или с шагом, подробнее об этом ниже) как многомерный массив. Мы уже видели, что тип данных, или dtype, определяет, как именно интерпретируются данные: как числа с плавающей точкой, целые, булевы или еще как-то.

Своей эффективностью ndarray отчасти обязан тому, что любой объект массива является шаговым (strided) представлением блока данных. Может возникнуть вопрос, как удается построить представление массива arr[::2, ::-1] без копирования данных. Дело в том, что объект ndarray — не просто блок памяти, дополненный знанием о типе в виде dtype; в нем еще хранится информация, позволяющая перемещаться по массиву шагами разного размера. Точнее, в реализации ndarray имеется:

○ указатель на данные, т. е. на блок полученной от системы памяти;
○ тип данных, или dtype, описывающий значения элементов массива фиксированного размера;
○ кортеж, описывающий форму массива;
○ кортеж шагов, т. е. целых чисел, показывающих, на сколько байтов нужно сместиться, чтобы перейти к следующему элементу по некоторому измерению.

На рис. A.1 схематически показано внутреннее устройство ndarray.