---
source_image: page_228.png
page_number: 228
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 40.20
tokens: 8009
characters: 1800
timestamp: 2025-12-24T02:46:23.393375
finish_reason: stop
---

In [100]: data[data.abs() > 3] = np.sign(data) * 3

In [101]: data.describe()
Out[101]:
          0         1         2         3
count   1000.000000  1000.000000  1000.000000  1000.000000
mean    0.050286    0.025567    -0.001399    -0.051765
std     0.992920    1.004214    0.991414    0.995761
min     -3.000000   -3.000000   -3.000000   -3.000000
25%     -0.599807   -0.612162   -0.687373   -0.747478
50%     0.047101    -0.013609   -0.022158   -0.088274
75%     0.756646    0.695298    0.699046    0.623331
max     2.653656    3.000000    2.735527    3.000000

Выражение np.sign(data) равно 1 или −1 в зависимости от того, является значение data положительным или отрицательным:

In [102]: np.sign(data).head()
Out[102]:
      0   1   2   3
0  -1.0  1.0 -1.0  1.0
1   1.0 -1.0  1.0 -1.0
2   1.0  1.0  1.0 -1.0
3  -1.0 -1.0  1.0 -1.0
4  -1.0  1.0 -1.0 -1.0

Перестановки и случайная выборка
Переставить (случайным образом переупорядочить) объект Series или строки объекта DataFrame легко с помощью функции numpy.random.permutation. Если передать функции permutation длину оси, для которой производится перестановка, то будет возвращен массив целых чисел, описывающий новый порядок:

In [103]: df = pd.DataFrame(np.arange(5 * 7).reshape((5, 7)))

In [104]: df
Out[104]:
      0   1   2   3   4   5   6
0   0   1   2   3   4   5   6
1   7   8   9  10  11  12  13
2  14  15  16  17  18  19  20
3  21  22  23  24  25  26  27
4  28  29  30  31  32  33  34

In [105]: sampler = np.random.permutation(5)

In [106]: sampler
Out[106]: array([3, 1, 4, 2, 0])

Этот массив затем можно использовать для индексирования на основе iloc или, что эквивалентно, передать функции take:

In [107]: df.take(sampler)
Out[107]:
      0   1   2   3   4   5   6
3  21  22  23  24  25  26  27
1   7   8   9  10  11  12  13