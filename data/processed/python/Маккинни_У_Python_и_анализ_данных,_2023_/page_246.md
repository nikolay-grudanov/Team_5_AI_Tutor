---
source_image: page_246.png
page_number: 246
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 28.24
tokens: 7501
characters: 1840
timestamp: 2025-12-24T02:46:44.539186
finish_reason: stop
---

0    apple
1    orange
dtype: object

Метод take позволяет восстановить исходный объект Series, содержащий строки:

In [207]: dim.take(values)
Out[207]:
0    apple
1    orange
0    apple
0    apple
0    apple
1    orange
0    apple
0    apple
dtype: object

Это представление целыми числами называется категориальным, или словарным. Массив различных значений может называться категориями, словарем или уровнями данных. В этой книге употребляются термины категориальное и категории. Целые значения, ссылающиеся на категории, будем называть кодами категорий, или просто кодами.

Категориальное представление может дать заметное повышение производительности в аналитических приложениях. Мы также можем преобразовывать категории, не меняя их коды. Вот два примера преобразований, выполнение которых обходится сравнительно дешево:
○ переименование категорий;
○ добавление новой категории без изменения порядка или положения существующих.

Расширенный тип Categorical в pandas

В pandas имеется расширенный тип Categorical, специально предназначенный для хранения данных, представленных целочисленными категориями, т. е. в некоторой кодировке. Это популярная техника сжатия, применяемая, когда данные содержат много одинаковых значений. Она может дать значительный прирост производительности и одновременно снизить потребление памяти, особенно в случае строковых данных.

Рассмотрим уже встречавшийся ранее объект Series:

In [208]: fruits = ['apple', 'orange', 'apple', 'apple'] * 2

In [209]: N = len(fruits)

In [210]: rng = np.random.default_rng(seed=12345)

In [211]: df = pd.DataFrame({'fruit': fruits,
   ....:                 'basket_id': np.arange(N),
   ....:                 'count': rng.integers(3, 15, size=N),
   ....:                 'weight': rng.uniform(0, 4, size=N)},
   ....: columns=['basket_id', 'fruit', 'count', 'weight'])