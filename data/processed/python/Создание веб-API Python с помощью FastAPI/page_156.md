---
source_image: page_156.png
page_number: 156
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 35.72
tokens: 8395
characters: 1516
timestamp: 2025-12-24T02:20:08.061534
finish_reason: stop
---

Мы успешно защитили наше приложение и его маршруты. Давайте завершим эту главу, настроив промежуточное ПО Cross-Origin Resource Sharing (CORS) в следующем разделе.

Настойка CORS

Совместное использование ресурсов между источниками (CORS) служит правилом, которое предотвращает доступ незарегистрированных клиентов к ресурсу.

Когда наш веб-API используется внешним приложением, браузер не разрешает HTTP-запросы из разных источников. Это означает, что доступ к ресурсам возможен только из точного источника, как API или источников, разрешенных API.

FastAPI предоставляет CORS middleware, CORSMiddleware, которое позволяет нам регистрировать домены, которые могут получить доступ к нашему API. Middleware принимает массив источников, которым будет разрешен доступ к ресурсам на сервере.

Что такое middleware?
Middleware — это функция, выступающая посредником между операциями. В веб-API middleware служит посредником в операции запрос-ответ.

Например, чтобы разрешить доступ к нашему API только Packt, мы определяем URL-адреса в исходном массиве:

origins = [
    "http://packtpub.com",
    "https://packtpub.com"
]

Чтобы разрешить запросы от любого клиента, массив origins будет содержать только одно значение — звездочку (*). Звездочка — это подстановочный знак, который указывает нашему API разрешать запросы из любого места.

В main.py настроим приложение так, чтобы оно принимало запросы отовсюду:

from fastapi.middleware.cors import CORSMiddleware

# register origins

origins = ["*"]

app.add_middleware(