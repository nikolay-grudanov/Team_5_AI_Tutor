---
source_image: page_193.png
page_number: 193
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 16.86
tokens: 8331
characters: 1199
timestamp: 2025-12-24T02:20:47.462808
finish_reason: stop
---

• Файл среды имеет значение .env.prod. Кроме того, переменные среды могут быть установлены в этом формате:

    environment:
      - DATABASE_URL=mongodb://database:27017/planner
      - SECRET_KEY=secretkey

Этот формат в основном используется, когда переменные среды должны вводиться из службы развертывания. Рекомендуется использовать файл окружения.

В службе database применяется следующий набор инструкций:

• Служба database использует образ mongo, который мы получили ранее.
• Порт 27017 определен, но не доступен извне. Порт доступен только внутри службы api.
• К службе подключен постоянный том для хранения наших данных. Для этого выделена папка /data/db.
• Наконец, том для этого развертывания создается с именем data.

Теперь, когда мы поняли содержимое манифеста компоновки, давайте создадим файл среды, .env.prod:

.env.prod

DATABASE_URL=mongodb://database:27017/planner
SECRET_KEY=NOTSTRONGENOUGH!

В файле среды DATABASE_URL задается именем службы MongoDB, созданной манифестом компоновки.

Запускаем приложение

Мы настроены на развертывание и запуск приложения из манифеста docker-compose. Давайте запустим сервисы с помощью инструмента компоновки:

(venv) $ docker-compose up -d