---
source_image: page_140.png
page_number: 140
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 26.11
tokens: 8292
characters: 1102
timestamp: 2025-12-24T02:19:32.494342
finish_reason: stop
---

Рисунок 7.3 – Результат запроса найти всех пользователей

Предыдущая команда возвращает список пользователей, и теперь мы можем подтвердить, что пароль пользователя был хеширован до того, как он был сохранен в базе данных. Теперь, когда мы успешно создали компоненты для безопасного хранения паролей пользователей, давайте создадим компоненты для создания и проверки JWTs.

Создание и проверка токенов доступа

Создание JWT делает нас на шаг ближе к защите нашего приложения. Полезная нагрузка токена будет содержать идентификатор пользователя и время истечения срока действия перед кодированием в длинную строку, как показано здесь:

![Анатомия JWT](../images/chapter7/7-4.png)

Рисунок 7.4 – Анатомия JWT

Ранее мы узнали, почему JWT подписаны. JWT подписываются секретным ключом, известным только отправителю и получателю. Давайте обновим класс Settings в модуле database/database.py, а также файл среды, .env, включив в него переменную SECRET_KEY, которая будет использоваться для подписи JWTs:

database/database.py

```python
class Settings(BaseSettings):
    SECRET_KEY: Optional[str] = None
```