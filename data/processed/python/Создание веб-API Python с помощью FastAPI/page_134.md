---
source_image: page_134.png
page_number: 134
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.55
tokens: 8506
characters: 2019
timestamp: 2025-12-24T02:19:32.797211
finish_reason: stop
---

Методы аутентификации внедряются в приложения FastAPI в виде зависимостей, которые вызываются во время выполнения. Это просто означает, что, когда методы аутентификации определены, они бездействуют до тех пор, пока не будут внедрены в место их использования. Это действие называется внедрением зависимостей.

Внедрение зависимостей

Внедрение зависимостей — это шаблон, в котором объект — в данном случае функция — получает переменную экземпляра, необходимую для дальнейшего выполнения функции.

В FastAPI зависимости внедряются путем объявления их в аргументах функции операции пути. Мы использовали внедрение зависимостей в предыдущих главах. Вот пример из предыдущей главы, где мы извлекаем поле электронной почты из пользовательской модели, переданной в функцию:

```python
@user_router.post("/signup")
async def sign_user_up(user: User) -> dict:
    user_exist = await User.find_one(User.email == user.email)
```

В этом блоке кода определенная зависимость — это класс модели User, который вводится в функцию sign_user_up(). Внедрив модель User в аргумент пользовательской функции, мы можем легко получить атрибуты объекта.

Создание и использование зависимости

В FastAPI зависимость может быть определена либо как функция, либо как класс. Созданная зависимость дает нам доступ к ее базовым значениям или методам, избавляя от необходимости создавать эти объекты в наследующих их функциях. Внедрение зависимостей помогает уменьшить повторение кода в некоторых случаях, например, при принудительной проверке подлинности и авторизации.

Пример зависимости определяется следующим образом:

```python
async def get_user(token: str):
    user = decode_token(token)
    return user
```

Эта зависимость представляет собой функцию, которая принимает token в качестве аргумента и возвращает user параметр из внешней функции, decode_token. Чтобы использовать эту зависимость, объявленный аргумент зависимой функции должен иметь параметр Depends, например:

```python
from fastapi import Depends

@router.get("/user/me")
```