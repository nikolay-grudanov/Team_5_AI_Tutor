---
source_image: page_136.png
page_number: 136
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 41.93
tokens: 8502
characters: 1802
timestamp: 2025-12-24T02:19:40.843060
finish_reason: stop
---

Теперь, когда у нас есть представление о том, как работает процесс аутентификации, давайте создадим необходимую папку и файлы, необходимые для настройки системы аутентификации в нашем приложении:

1. В папке проекта сначала создайте папку auth:

    (venv) $ mkdir auth

2. Далее создайте следующие файлы в папке auth:

    (venv) $ cd auth && touch {__init__,jwt_handler,authenticate,hash_password}.py

Предыдущая команда создает четыре файла:

• jwt_handler.py: Этот модуль будет содержать функции, необходимые для кодирования и декодирования строк JWT.

• authenticate.py: Этот модуль будет содержать зависимость аутентификации, которая будет внедрена в наши маршруты для принудительной аутентификации и авторизации.

• hash_password.py: Этот модуль будет содержать функции, которые будут использоваться для шифрования пароля пользователя при регистрации и сравнения паролей при входе.

• __init__.py: Этот файл указывает содержимое папки как пакет.

Теперь, когда файлы созданы, давайте создадим отдельные компоненты. Начнем с создания компонентов для хеширования паролей пользователей.

Хэширование паролей

В предыдущей главе мы хранили пароли пользователей в виде обычного текста. Это очень небезопасная и запрещенная практика при создании API. Пароли должны быть зашифрованы или хешированы с использованием соответствующих библиотек. Мы будем шифровать пароли пользователей с помощью bcrypt.

Давайте установим библиотеку passlib. В этой библиотеке находится алгоритм хеширования bcrypt, который мы будем использовать для хеширования паролей пользователей:

(venv) $ pip install passlib[bcrypt]

Теперь, когда мы установили библиотеку, давайте создадим функции для хеширования паролей в hash_password.py:

from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"],