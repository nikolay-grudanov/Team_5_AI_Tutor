---
source_image: page_258.png
page_number: 258
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 44.16
tokens: 7820
characters: 1633
timestamp: 2025-12-24T00:58:20.660459
finish_reason: stop
---

Присваивание в методе DataFrame.eval()

Метод DataFrame.eval() позволяет выполнять присваивание значения любому из столбцов. Воспользуемся предыдущим объектом DataFrame со столбцами 'A', 'B' и 'C':

In[19]: df.head()

Out[19]:
      A      B      C
0  0.375506  0.406939  0.069938
1  0.069087  0.235615  0.154374
2  0.677945  0.433839  0.652324
3  0.264038  0.808055  0.347197
4  0.589161  0.252418  0.557789

Метод DataFrame.eval() можно использовать, например, для создания нового столбца 'D' и присваивания ему значения, вычисленного на основе других столбцов:

In[20]: df.eval('D = (A + B) / C', inplace=True)
    df.head()
Out[20]:
      A      B      C      D
0  0.375506  0.406939  0.069938  11.187620
1  0.069087  0.235615  0.154374   1.973796
2  0.677945  0.433839  0.652324   1.704344
3  0.264038  0.808055  0.347197   3.087857
4  0.589161  0.252418  0.557789   1.508776

Аналогично можно модифицировать значения любого уже существующего столбца:

In[21]: df.eval('D = (A - B) / C', inplace=True)
    df.head()

Out[21]:
      A      B      C      D
0  0.375506  0.406939  0.069938  -0.449425
1  0.069087  0.235615  0.154374  -1.078728
2  0.677945  0.433839  0.652324   0.374209
3  0.264038  0.808055  0.347197  -1.566886
4  0.589161  0.252418  0.557789   0.603708

Локальные переменные в методе DataFrame.eval()

Метод DataFrame.eval() поддерживает дополнительный синтаксис для работы с локальными переменными языка Python. Взгляните на следующий фрагмент кода:

In[22]: column_mean = df.mean(1)
    result1 = df['A'] + column_mean
    result2 = df.eval('A + @column_mean')
    np.allclose(result1, result2)

Out[22]: True