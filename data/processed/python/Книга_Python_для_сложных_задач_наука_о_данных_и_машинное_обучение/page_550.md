---
source_image: page_550.png
page_number: 550
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.39
tokens: 7484
characters: 1613
timestamp: 2025-12-24T01:05:30.625275
finish_reason: stop
---

![Гистограмма как «стопки» блоков](https://i.imgur.com/3Q5z5QG.png)

Рис. 5.142. Гистограмма как «стопки» блоков

В основе проблемы с нашими двумя разбиениями по интервалам лежит тот факт, что высота «стопки» блоков часто отражает не фактическую плотность близлежащих точек, а случайные стечения обстоятельств, выражающиеся в выравнивании интервалов по точкам данных. Это рассогласование точек и их блоков может приводить к наблюдаемым здесь неудовлетворительным результатам гистограмм. Но что, если вместо складывания в «стопки» блоков, выровненных по интервалам, мы складывали бы блоки, выровненные по точкам, которым они соответствуют? В этом случае блоки не были бы выровненными, но получить требуемый результат можно было бы, сложив их вклады в значение в каждом месте на оси X. Давайте это проделаем (рис. 5.143):

In[8]: x_d = np.linspace(-4, 8, 2000)
    density = sum((abs(xi - x_d) < 0.5) for xi in x)

    plt.fill_between(x_d, density, alpha=0.5)
    plt.plot(x, np.full_like(x, -0.1), '|k', markeredgewidth=1)

    plt.axis([-4, 8, -0.2, 8]);

Результат выглядит немного неряшливо, но отражает подлинные характеристики данных гораздо надежнее, чем стандартная гистограмма. Тем не менее неровные края не слишком приятны для глаз, да и не отражают никаких фактических свойств данных. Для их сглаживания можно попытаться заменить блоки в каждой точке гладкой функцией, например Гауссовой. Мы будем использовать вместо блока в каждой точке стандартную нормальную кривую (рис. 5.144):

In[9]: from scipy.stats import norm
    x_d = np.linspace(-4, 8, 1000)
    density = sum(norm(xi).pdf(x_d) for xi in x)