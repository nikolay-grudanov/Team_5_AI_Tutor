---
source_image: page_213.png
page_number: 213
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 33.09
tokens: 7716
characters: 2159
timestamp: 2025-12-24T00:56:57.173034
finish_reason: stop
---

fare      (14.454, 512.329]
class        First   Second   Third
sex    age
female (0, 18]   0.909091   1.000000   0.318182
         (18, 80]   0.972973   0.914286   0.391304
male   (0, 18]   0.800000   0.818182   0.178571
         (18, 80]   0.391304   0.030303   0.192308

Результат представляет собой четырехмерную сводную таблицу с иерархическими индексами (см. раздел «Иерархическая индексация» данной главы), выведенную в демонстрирующей отношения между значениями сетке.

Дополнительные параметры сводных таблиц

Полная сигнатура вызова метода pivot_table объектов DataFrame выглядит следующим образом:

# сигнатура вызова в версии 0.18¹ библиотеки Pandas
DataFrame.pivot_table(data, values=None, index=None, columns=None,
                      aggfunc='mean', fill_value=None, margins=False,
                      dropna=True, margins_name='All')

Мы уже видели примеры первых трех аргументов, в данном подразделе рассмотрим остальные. Два из параметров, fill_value и dropna, относятся к пропущенным значениям и интуитивно понятны, примеры их использования мы приводить не будем.

Ключевое слово aggfunc управляет тем, какой тип агрегирования применяется, по умолчанию это среднее значение. Как и в GroupBy, спецификация агрегирующей функции может быть строкой с одним из нескольких обычных вариантов ('sum', 'mean', 'count', 'min', 'max' и т. д.) или функцией, реализующей агрегирование (np.sum(), min(), sum() и т. п.). Кроме того, агрегирование может быть задано в виде словаря, связывающего столбец с любым из вышеперечисленных вариантов:

In[8]: titanic.pivot_table(index='sex', columns='class',
                          aggfunc={'survived':sum, 'fare':'mean'})
Out[8]: fare
         class First  Second  Third
         sex
         female  106.125798  21.970121  16.118810
         male    67.226127   19.741782  12.661633
         fare
         class First  Second  Third
         sex
         female  91.0   70.0   72.0
         male    45.0   17.0   47.0

Обратите внимание, что мы опустили ключевое слово values, при задании aggfunc происходит автоматическое определение.

¹ На момент выпуска версии 0.19.2 данная сигнатура осталась прежней.