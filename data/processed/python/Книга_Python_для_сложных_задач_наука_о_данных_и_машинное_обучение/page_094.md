---
source_image: page_094.png
page_number: 94
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.19
tokens: 7424
characters: 1480
timestamp: 2025-12-24T00:53:52.792734
finish_reason: stop
---

Полупрозрачные кубики представляют собой транслируемые значения: соответствующая дополнительная память фактически не выделяется в ходе операции, но мысленно удобно представлять себе, что так и происходит.

Правила транслирования

Транслирование в библиотеке NumPy следует строгому набору правил, определяющему взаимодействие двух массивов.

Правило 1: если размерность двух массивов отличается, форма массива с меньшей размерностью дополняется единицами с ведущей (левой) стороны.
Правило 2: если форма двух массивов не совпадает в каком-то измерении, массив с формой, равной 1 в данном измерении, растягивается вплоть до соответствия форме другого массива.
Правило 3: если в каком-либо измерении размеры массивов различаются и ни один не равен 1, генерируется ошибка.

Для разъяснения этих правил рассмотрим несколько примеров.

Транслирование. Пример 1

Рассмотрим сложение двумерного массива с одномерным:

In[8]: M = np.ones((2, 3))
       a = np.arange(3)

Рассмотрим эту операцию подробнее. Формы массивов следующие:

M.shape = (2, 3)
a.shape = (3,)

По правилу 1, поскольку размерность массива a меньше, мы дополняем его измерениями слева:

M.shape -> (2, 3)
a.shape -> (1, 3)

По правилу 2 мы видим, что первое измерение массивов различается, так что мы растягиваем его вплоть до совпадения:

M.shape -> (2, 3)
a.shape -> (2, 3)

Формы совпадают, и мы видим, что итоговая форма будет (2, 3):

In[9]: M + a

Out[9]: array([[ 1.,  2.,  3.],
                [ 1.,  2.,  3.]])