---
source_image: page_104.png
page_number: 104
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.78
tokens: 7617
characters: 2024
timestamp: 2025-12-24T00:54:20.516814
finish_reason: stop
---

Обратите внимание, что скобки здесь важны в силу правил приоритета операторов, без скобок это выражение вычислялось бы следующим образом, что привело бы к ошибке:

inches > (0.5 & inches) < 1

Воспользовавшись эквивалентностью выражений А И В и НЕ(А ИЛИ В), о которой вы, возможно, помните из вводного курса математической логики, можно вычислить тот же результат и другим образом:

In[24]: np.sum(~( (inches <= 0.5) | (inches >= 1) ))

Out[24]: 29

Объединив операторы сравнения и булевы операторы при работе с массивами, можно получить целый диапазон эффективных логических операций (табл. 2.5).

Таблица 2.5. Побитовые булевые операторы и эквивалентные им универсальные функции

<table>
  <tr>
    <th>Оператор</th>
    <th>Эквивалентная универсальная функция</th>
  </tr>
  <tr>
    <td>&</td>
    <td>np.bitwise_and</td>
  </tr>
  <tr>
    <td>|</td>
    <td>np.bitwise_or</td>
  </tr>
  <tr>
    <td>^</td>
    <td>np.bitwise_xor</td>
  </tr>
  <tr>
    <td>~</td>
    <td>np.bitwise_not</td>
  </tr>
</table>

С помощью этих инструментов можно начать отвечать на различные типы вопросов относительно наших данных по осадкам. Вот примеры результатов, которые можно вычислить путем сочетания маскирования с агрегированием:

In[25]: print("Number days without rain: ", np.sum(inches == 0))
        print("Number days with rain: ", np.sum(inches != 0))
        print("Days with more than 0.5 inches:", np.sum(inches > 0.5))
        print("Rainy days with < 0.1 inches :", np.sum((inches > 0) & (inches < 0.2)))

Number days without rain:      215
Number days with rain:         150
Days with more than 0.5 inches: 37
Rainy days with < 0.1 inches :  75

Булевые массивы как маски

В предыдущем разделе мы рассматривали сводные показатели, вычисленные непосредственно из булевых массивов. Гораздо больше возможностей дает использование булевых массивов в качестве масок, для выбора нужных подмножеств самих данных. Вернемся к массиву x и допустим, что нам необходим массив всех значений из массива x, меньше чем, скажем, 5: