---
source_image: page_164.png
page_number: 164
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.66
tokens: 7567
characters: 2004
timestamp: 2025-12-24T00:55:33.481865
finish_reason: stop
---

Иерархическая индексация

До сих пор мы рассматривали главным образом одномерные и двумерные данные, находящиеся в объектах Series и DataFrame библиотеки Pandas. Часто бывает удобно выйти за пределы двух измерений и хранить многомерные данные, то есть данные, индексированные по более чем двум ключам. Хотя библиотека Pandas предоставляет объекты Panel и Panel4D, позволяющие нативным образом хранить трехмерные и четырехмерные данные (см. врезку «Данные объектов Panel» на с. 178), на практике намного чаще используется иерархическая индексация (hierarchical indexing), или мультииндексация (multi-indexing), для включения в один индекс нескольких уровней. При этом многомерные данные могут быть компактно представлены в уже привычных нам одномерных объектах Series и двумерных объектах DataFrame.

В этом разделе мы рассмотрим создание объектов MultiIndex напрямую, приведем соображения относительно индексации, срезов и вычисления статистических показателей по мультииндексированным данным, а также полезные методы для преобразования между простым и иерархически индексированным представлением данных.

Начнем с обычных импортов:

In[1]: import pandas as pd
       import numpy as np

Мультииндексированный объект Series

Рассмотрим, как можно представить двумерные данные в одномерном объекте Series. Для конкретики изучим ряд данных, в котором у каждой точки имеются символьный и числовой ключи.

Плохой способ

Пускай нам требуется проанализировать данные о штатах за два разных года. Вам может показаться соблазнительным, воспользовавшись утилитами библиотеки Pandas, применить в качестве ключей кортежи языка Python:

In[2]: index = [('California', 2000), ('California', 2010),
                ('New York', 2000), ('New York', 2010),
                ('Texas', 2000), ('Texas', 2010)]
    populations = [33871648, 37253956,
                    18976457, 19378102,
                    20851820, 25145561]
    pop = pd.Series(populations, index=index)
    pop

Out[2]: (California, 2000)    33871648