---
source_image: page_214.png
page_number: 214
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 30.89
tokens: 7641
characters: 1954
timestamp: 2025-12-24T00:56:57.016512
finish_reason: stop
---

Иногда бывает полезно вычислять итоги по каждой группе. Это можно сделать с помощью ключевого слова margins:

In[9]: titanic.pivot_table('survived', index='sex', columns='class', margins=True)

Out[9]: class    First    Second    Third    All
         sex
female   0.968085  0.921053  0.500000  0.742038
male     0.368852  0.157407  0.135447  0.188908
All      0.629630  0.472826  0.242363  0.383838

Такие итоги автоматически дают нам информацию о выживаемости вне зависимости от класса, коэффициенте выживаемости по классу вне зависимости от пола и общем коэффициенте выживаемости 38%. Метки для этих итогов можно задать с помощью ключевого слова margins_name, по умолчанию имеющего значение "All".

Пример: данные о рождаемости

В качестве примера взглянем на находящиеся в открытом доступе данные о рождаемости в США, предоставляемые центрами по контролю заболеваний (Centers for Disease Control, CDC). Данные можно найти по адресу https://raw.githubusercontent.com/jakevdp/data-CDCbirths/master/births.csv (этот набор данных довольно широко исследовался Эндрю Гелманом и его группой (см., например, сообщение в блоге http://bit.ly/2fZzW8K)):

In[10]:
# Инструкция системного командного процессора для скачивания данных:
# !curl -O https://raw.githubusercontent.com/jakevdp/data-CDCbirths/
# master/births.csv

In[11]: births = pd.read_csv('births.csv')

Посмотрев на эти данные, мы обнаружим их относительную простоту — они содержат количество новорожденных, сгруппированных по дате и полу:

In[12]: births.head()

Out[12]:    year  month  day  gender  births
0   1969      1     1      F       4046
1   1969      1     1      M       4440
2   1969      1     2      F       4454
3   1969      1     2      M       4548
4   1969      1     3      F       4548

Мы начнем понимать эти данные немного лучше, воспользовавшись сводной таблицей. Добавим в них столбец для десятилетия и взглянем на рождения девочек и мальчиков как функцию от десятилетия: