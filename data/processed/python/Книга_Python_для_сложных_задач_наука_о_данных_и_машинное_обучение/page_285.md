---
source_image: page_285.png
page_number: 285
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 43.28
tokens: 7678
characters: 2334
timestamp: 2025-12-24T00:59:03.562480
finish_reason: stop
---

В дополнение к этим опциям можно также создавать горизонтальные планки погрешностей (xerr), односторонние планки погрешностей и много других вариантов. Чтобы узнать больше об имеющихся опциях, обратитесь к docstring функции plt.errorbar.

Непрерывные погрешности

В некоторых случаях желательно отображать планки погрешностей для непрерывных величин. Хотя в библиотеке Matplotlib отсутствует встроенная удобная утилита для решения данной задачи, не составит особого труда скомбинировать такие примитивы, как plt.plot и plt.fill_between, для получения искомого результата.

Выполним с помощью API пакета Scikit-Learn (см. подробности в разделе «Знакомство с библиотекой Scikit-Learn» главы 5) простую регрессию на основе Гауссова процесса (Gaussian process regression, GPR). Она представляет собой метод подбора по имеющимся данным очень гибкой непараметрической функции с непрерывной мерой неопределенности измерения. Мы не будем углубляться в детали регрессии на основе Гауссова процесса, а сконцентрируемся на визуализации подобной непрерывной погрешности измерения:

In[4]: from sklearn.gaussian_process import GaussianProcess

    # Описываем модель и отрисовываем некоторые данные
    model = lambda x: x * np.sin(x)
    xdata = np.array([1, 3, 5, 6, 8])
    ydata = model(xdata)

    # Выполняем подгонку Гауссова процесса
    gp = GaussianProcess1(corr='cubic', theta0=1e-2, thetaL=1e-4,
                          thetaU=1E-1, random_start=100)
    gp.fit(xdata[:, np.newaxis], ydata)

    xfit = np.linspace(0, 10, 1000)
    yfit, MSE = gp.predict(xfit[:, np.newaxis], eval_MSE=True)
    dyfit = 2 * np.sqrt(MSE)  # 2*сигма ~ область с уровнем доверия 95%

Теперь у нас имеются значения xfit, yfit и dyfit, представляющие выборку непрерывных приближений к нашим данным. Мы можем передать их, как и выше, функции plt.errorbar, но рисовать 1000 точек с помощью 1000 планок погрешностей не хотелось бы. Вместо этого можно воспользоваться функцией plt.fill_between и визуализировать эту непрерывную погрешность с помощью светлого цвета (рис. 4.29):

In[5]: # Визуализируем результат
    plt.plot(xdata, ydata, 'or')
    plt.plot(xfit, yfit, '-', color='gray')

1 Этот класс является устаревшим и планируется к удалению в версии 0.20 библиотеки SciKit-Learn. Вместо него рекомендуется использовать класс Gaussian Process Regressor.