---
source_image: page_034.png
page_number: 34
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 29.62
tokens: 7434
characters: 1669
timestamp: 2025-12-24T00:52:25.404985
finish_reason: stop
---

Существует два вида «магических» команд: строчные «магические» команды, обозначаемые одним знаком % и работающие с одной строкой ввода, и блочные «магические» команды, обозначаемые удвоенным префиксом (%%) и работающие с несколькими строками ввода. Мы обсудим несколько коротких примеров и вернемся к более подробному обсуждению некоторых «магических» команд далее в данной главе.

Вставка блоков кода: %paste и %cpaste

При работе с интерпретатором IPython одна из распространенных проблем заключается в том, что вставка многострочных блоков кода может привести к неожиданным ошибкам, особенно при использовании отступов и меток интерпретатора. Довольно часто случается, что вы находите пример кода на сайте и хотите вставить его в интерпретатор. Рассмотрим следующую простую функцию:

```python
>>> def donothing(x):
...     return x
```

Код отформатирован так, как он будет отображаться в интерпретаторе языка Python, и если вы скопируете и вставите его непосредственно в оболочку IPython, то вам будет возвращена ошибка:

In [2]: >>> def donothing(x):
...     ...     return x
...
File "<ipython-input-20-5a66c8964687>", line 2
    ...     return x
        ^
SyntaxError: invalid syntax

При такой непосредственной вставке интерпретатор сбивает с толку лишние символы приглашения к вводу. Но не волнуйтесь: «магическая» функция оболочки IPython %paste разработана специально для корректной обработки данного типа многострочного ввода:

In [3]: %paste
>>> def donothing(x):
...     return x
## -- Конец вставленного текста --

Команда %paste не только вводит, но и выполняет код, так что теперь наша функция готова к использованию:

In [4]: donothing(10)
Out[4]: 10