---
source_image: page_119.png
page_number: 119
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 36.08
tokens: 7596
characters: 1952
timestamp: 2025-12-24T00:54:43.883565
finish_reason: stop
---

In[12]: x = np.array([7, 2, 3, 1, 6, 5, 4])
    np.partition(x, 3)

Out[12]: array([2, 1, 3, 4, 6, 5, 7])

Первые три значения в итоговом массиве — три наименьших значения в нем, а на остальных позициях массива располагаются все прочие значения. Внутри каждой из двух секций элементы располагаются в произвольном порядке.

Аналогично сортировке можно секционировать по произвольной оси многомерного массива:

In[13]: np.partition(X, 2, axis=1)

Out[13]: array([[3, 4, 6, 7, 6, 9],
                [2, 3, 4, 7, 6, 7],
                [1, 2, 4, 5, 7, 7],
                [0, 1, 4, 5, 9, 5]])

Результат представляет собой массив, в котором на первых двух позициях в каждой строке находятся наименьшие значения из этой строки, а остальные значения заполняют прочие места.

Наконец, аналогично функции np.argsort, вычисляющей индексы для сортировки, существует функция np.argpartition, вычисляющая индексы для секции. Мы увидим ее в действии в следующем разделе.

Пример: К ближайших соседей

Давайте вкратце рассмотрим, как можно использовать функцию np.argpartition по нескольким осям для поиска ближайших соседей каждой точки из определенного набора. Начнем с создания случайного набора из десяти точек на двумерной плоскости. По стандартным соглашениям образуем из них массив \(10 \times 2\):

In[14]: X = rand.rand(10, 2)

Чтобы наглядно представить себе расположение этих точек, нарисуем для них диаграмму рассеяния (рис. 2.10):

In[15]: %matplotlib inline
    import matplotlib.pyplot as plt
    import seaborn; seaborn.set() # Plot styling
    plt.scatter(X[:, 0], X[:, 1], s=100);

Теперь можно вычислить расстояние между всеми парами точек. Вспоминаем, что квадрат расстояния между двумя точками равен сумме квадратов расстояний между ними по каждой из координат. Воспользовавшись возможностями эффективного транслирования (см. «Операции над массивами. Транслирование» этой главы) и агрегирования (см. «Агрегирование: минимум, максимум и все, что