---
source_image: page_317.png
page_number: 317
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 37.82
tokens: 7633
characters: 2285
timestamp: 2025-12-24T00:59:42.923303
finish_reason: stop
---

Преобразования и координаты текста

В предыдущем примере мы привязали наши текстовые пояснения к конкретным значениям данных. Иногда бывает удобнее привязать текст к координатам на осях рисунка, независимо от данных. В библиотеке Matplotlib это осуществляется путем модификации преобразования (transform).

Всем фреймворкам отображения графики необходимы схемы преобразования между разными системами координат. Например, точку данных с координатами \((x, y) = (1, 1)\) следует представить в виде точки в определенном месте на рисунке, который, в свою очередь, необходимо представить в виде пикселов на экране. С математической точки зрения подобные преобразования несложны, и сама библиотека Matplotlib внутри использует для их выполнения имеющийся в ней набор инструментов (эти инструменты можно найти в подмодуле matplotlib.transforms).

Среднестатистический пользователь редко задумывается о деталях этих преобразований, но если речь идет о размещении текста на рисунке, не помешает иметь о них определенное представление. Существует три предопределенные преобразования, которые могут оказаться полезными в подобной ситуации:

- ax.transData — преобразование из системы координат данных;
- ax.transAxes — преобразование из системы координат объекта Axes (в единицах размеров рисунка);
- fig.transFigure — преобразование из системы координат объекта Figure (в единицах размеров рисунка)

Рассмотрим пример вывода текста в различных местах рисунка с помощью этих преобразований (рис. 4.69):

In[5]: fig, ax = plt.subplots(facecolor='lightgray')
    ax.axis([0, 10, 0, 10])

    # transform=ax.transData - значение по умолчанию,
    # но мы все равно указываем его
    ax.text(1, 5, ". Data: (1, 5)", transform=ax.transData)
    ax.text(0.5, 0.1, ". Axes: (0.5, 0.1)", transform=ax.transAxes)
    ax.text(0.2, 0.2, ". Figure: (0.2, 0.2)", transform=fig.transFigure);

Обратите внимание, что по умолчанию текст выравнивается по базовой линии и левому краю указанных координат, поэтому "." в начале каждой строки приблизительно отмечает здесь заданные координаты.

Координаты transData задают обычные координаты данных, соответствующие меткам на осях X и Y. Координаты transAxes задают местоположение, считая от нижнего левого угла системы координат (здесь — белый прямоугольник), в виде