---
source_image: page_249.png
page_number: 249
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 24.02
tokens: 7392
characters: 1392
timestamp: 2025-12-24T00:57:47.213274
finish_reason: stop
---

Это демонстрирует нам некоторые интересные сезонные тренды: как и следовало ожидать, летом люди ездят на велосипедах больше, чем зимой, и даже в пределах каждого из сезонов велосипеды используются с разной интенсивностью в разные недели (вероятно, в зависимости от погоды; см. раздел «Заглянем глубже: линейная регрессия» главы 5, в котором будем рассматривать этот вопрос).

Еще один удобный способ агрегирования данных — вычисление скользящего среднего с помощью функции pd.rolling_mean(). Здесь мы вычисляем для наших данных скользящее среднее за 30 дней, центрируя при этом окно (рис. 3.13):

In[41]: daily = data.resample('D').sum()
daily.rolling(30, center=True).sum().plot(style=[':', '--', '-'])
plt.ylabel('mean hourly count'); # Среднее количество по часам

![Скользящее среднее значение еженедельного количества велосипедов](../images/3.13.png)

Рис. 3.13. Скользящее среднее значение еженедельного количества велосипедов

Причина зубчатости получившего изображения — в резкой границе окна. Более гладкую версию скользящего среднего можно получить, воспользовавшись оконной функцией, например Гауссовым окном. Следующий код (визуализированный на рис. 3.14) задает как ширину окна (в нашем случае 50 дней), так и ширину Гауссовой функции внутри окна (в нашем случае 10 дней):

In[42]:
daily.rolling(50, center=True,
    win_type='gaussian').sum(std=10).plot(style=[':', '--', '-']);