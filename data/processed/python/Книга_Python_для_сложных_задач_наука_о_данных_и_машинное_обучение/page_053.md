---
source_image: page_053.png
page_number: 53
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 39.50
tokens: 7644
characters: 2175
timestamp: 2025-12-24T00:53:04.885794
finish_reason: stop
---

5   0.599   0.120   0.599   0.120 <ipython-input-19>:4(<listcomp>)
5   0.064   0.013   0.064   0.013 {built-in method sum}
1   0.036   0.036   0.699   0.699 <ipython-input-19>:1(sum_of_lists)
1   0.014   0.014   0.714   0.714 <string>:1(<module>)
1   0.000   0.000   0.714   0.714 {built-in method exec}

Результат представляет собой таблицу, указывающую в порядке общего затраченного на каждый вызов функции времени, в каких местах выполнение занимает больше всего времени. В данном случае большую часть времени занимает списочное включение внутри функции sum_of_lists. Зная это, можно начинать обдумывать возможные изменения в алгоритме для улучшения производительности.

Для получения дополнительной информации по «магической» функции %prun, а также доступным для нее параметрам воспользуйтесь справочной функциональностью оболочки IPython (то есть наберите %prun? В командной строке IPython).

Пошаговое профилирование с помощью %lprun

Профилирование по функциям с помощью функции %prun довольно удобно, но иногда больше пользы может принести построчный отчет профилировщика. Такая функциональность не встроена в язык Python или оболочку IPython, но можно установить пакет line_profiler, обладающий такой возможностью. Начнем с использования утилиты языка Python для работы с пакетами, pip, для установки пакета line_profiler:

$ pip install line_profiler

Далее можно воспользоваться IPython для загрузки расширения line_profiler оболочки IPython, предоставляемой в виде части указанного пакета:

In[9]: %load_ext line_profiler

Теперь команда %lprun может выполнить построчное профилирование любой функции. В нашем случае необходимо указать ей явным образом, какие функции мы хотели быть профилировать:

In[10]: %lprun -f sum_of_lists sum_of_lists(5000)

Как и ранее, блокнот отправляет результаты в пейджер, но выглядят они так:

Timer unit: 1e-06 s

Total time: 0.009382 s File: <ipython-input-19-fa2be176cc3e>
Function: sum_of_lists at line 1

Line #    Hits    Time  Per Hit   % Time  Line Contents
========================================================
   1                                 def sum_of_lists(N):
   2        1      2     2.0      0.0    total = 0