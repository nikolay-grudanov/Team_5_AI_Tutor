---
source_image: page_035.png
page_number: 35
model: model-run-olm-ocr
prompt_type: olmocr_technical
processing_time: 25.81
tokens: 7345
characters: 1459
timestamp: 2025-12-24T00:52:21.975937
finish_reason: stop
---

Аналогично назначение команды %cpaste, открывающей интерактивную многострочную командную строку, в которую можно вставлять один или несколько фрагментов кода для пакетного выполнения:

In [5]: %cpaste
Pasting code; enter '--' alone on the line to stop or use Ctrl-D.
>>> def donothing(x):
...     return x
---

Эти «магические» команды, подобно другим, предоставляют функциональность, которая была бы сложна или вообще невозможна при использовании обычного интерпретатора языка Python.

Выполнение внешнего кода: %run

Начав писать более обширный код, вы, вероятно, будете работать как в оболочке IPython для интерактивного исследования, так и в текстовом редакторе для сохранения кода, который вам хотелось бы использовать неоднократно. Будет удобно выполнять этот код не в отдельном окне, а непосредственно в сеансе оболочки IPython. Для этого можно применять «магическую» функцию %run.

Например, допустим, что вы создали файл myscript.py, содержащий:

#---------------------------------------------
# Файл: myscript.py

def square(x):
    """square a number"""
    return x ** 2

for N in range(1, 4):
    print(N, "squared is", square(N))

Выполнить это в сеансе IPython можно следующим образом:

In [6]: %run myscript.py
1 squared is 1
2 squared is 4
3 squared is 9

Обратите внимание, что после выполнения этого сценария все описанные в нем функции становятся доступными для использования в данном сеансе оболочки IPython:

In [7]: square(5)
Out[7]: 25