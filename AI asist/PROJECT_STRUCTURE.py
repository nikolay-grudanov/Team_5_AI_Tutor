"""
СТРУКТУРА ПРОЕКТА AI-РЕПЕТИТОРА
================================

Полное описание всех файлов и их назначения.
"""

PROJECT_STRUCTURE = """
AI-Репетитор/
│
├── 📄 ОСНОВНЫЕ ФАЙЛЫ
│   ├── run.py                    ⭐ ГЛАВНЫЙ ФАЙЛ - запуск приложения
│   │   └── Режимы: web, test, demo, debug
│   │
│   ├── quickstart.py             ⭐ БЫСТРЫЙ СТАРТ
│   │   └── Автоматическая установка и запуск
│   │
│   ├── app.py                    🌐 Flask веб-приложение
│   │   ├── REST API эндпоинты
│   │   ├── Управление сессиями
│   │   └── Инициализация системы
│   │
│   └── init.py                   🔧 Инициализация системы
│       ├── Проверка зависимостей
│       ├── Тестирование компонентов
│       └── Демонстрация
│
├── 🧠 ЯДРО СИСТЕМЫ
│   ├── config.py                 ⚙️ Конфигурация
│   │   ├── Параметры моделей
│   │   ├── Пути к файлам
│   │   ├── Параметры RAG
│   │   └── Примеры учебных материалов
│   │
│   ├── document_processor.py      📚 Обработка документов
│   │   ├── DocumentProcessor класс
│   │   ├── Загрузка документов
│   │   ├── Очистка текста
│   │   ├── Разбиение на чанки
│   │   └── Полный пайплайн обработки
│   │
│   ├── vector_store.py           🔍 Векторное хранилище
│   │   ├── EmbeddingModel класс
│   │   │   ├── Создание эмбеддингов
│   │   │   └── Батч-обработка
│   │   ├── VectorStore класс
│   │   │   ├── Добавление чанков
│   │   │   ├── Поиск по сходству
│   │   │   ├── Сохранение/загрузка
│   │   │   └── Статистика
│   │   └── Косинусное сходство
│   │
│   ├── rag_pipeline.py           🎯 RAG-пайплайн
│   │   ├── RAGPipeline класс
│   │   ├── Поиск документов (retrieve)
│   │   ├── Форматирование контекста
│   │   ├── Построение промпта
│   │   └── Полный пайплайн генерации
│   │
│   └── llm_generator.py          🤖 Генерация ответов
│       ├── LLMGenerator класс
│       │   ├── Загрузка модели
│       │   ├── Генерация текста
│       │   └── GPU/CPU поддержка
│       └── ResponseRefiner класс
│           ├── Улучшение ответа
│           ├── Добавление источников
│           └── Форматирование
│
├── 🎨 ВЕБЛІНТЕРФЕЙС
│   ├── templates/                📁 HTML шаблоны
│   │   └── index.html            💻 Основной интерфейс
│   │       ├── Заголовок
│   │       ├── Область чата
│   │       ├── Ввод вопроса
│   │       ├── Боковая панель
│   │       ├── JavaScript функции
│   │       └── CSS стили
│   │
│   └── (static/ опционально)    📁 Статические файлы
│       ├── css/
│       ├── js/
│       └── images/
│
├── 🧪 ТЕСТИРОВАНИЕ И ПРИМЕРЫ
│   ├── tests.py                  ✅ Модульные тесты
│   │   ├── TestDocumentProcessor
│   │   ├── TestVectorStore
│   │   ├── TestRAGPipeline
│   │   ├── TestResponseRefiner
│   │   ├── TestCosineSimilarity
│   │   └── Функция run_tests()
│   │
│   └── examples.py               📖 Примеры использования
│       ├── example_basic_usage()
│       ├── example_custom_documents()
│       ├── example_search_similarity()
│       ├── example_session_management()
│       ├── example_integration_with_flask()
│       ├── example_error_handling()
│       └── APIDocumentation класс
│
├── 🛠️ УТИЛИТЫ
│   └── utils.py                  🔨 Вспомогательные функции
│       ├── Logger класс
│       ├── ProgressTracker класс
│       ├── ConfigManager класс
│       ├── SystemStats класс
│       ├── TimerContext класс
│       ├── get_logger()
│       ├── print_banner()
│       ├── debug_info()
│       └── Функции поддержки
│
├── 📦 КОНФИГУРАЦИЯ
│   ├── requirements.txt           📋 Зависимости Python
│   │   ├── flask==2.3.0
│   │   ├── torch==2.0.0
│   │   ├── transformers==4.30.0
│   │   ├── sentence-transformers==2.2.2
│   │   └── numpy==1.24.0
│   │
│   └── .env (опционально)       🔐 Переменные окружения
│       ├── FLASK_ENV
│       ├── DEBUG
│       ├── OPENAI_API_KEY
│       └── Другие параметры
│
├── 📚 ДОКУМЕНТАЦИЯ
│   ├── README.md                 📖 Основная документация
│   │   ├── Описание проекта
│   │   ├── Архитектура
│   │   ├── Описание модулей
│   │   ├── Установка и запуск
│   │   ├── Использование
│   │   ├── Тестирование
│   │   ├── Примеры
│   │   ├── Производительность
│   │   └── Troubleshooting
│   │
│   ├── DEPLOYMENT.md             🚀 Развертывание
│   │   ├── Быстрый старт
│   │   ├── Gunicorn
│   │   ├── Docker
│   │   ├── Docker Compose
│   │   ├── Nginx конфигурация
│   │   ├── Systemd service
│   │   ├── Мониторинг
│   │   ├── Масштабирование
│   │   ├── Backup
│   │   └── Health checks
│   │
│   └── STRUCTURE.txt             📋 Этот файл
│
└── 📁 ДАННЫЕ
    ├── data/                     📂 Директория данных
    │   ├── documents/            📝 Учебные материалы
    │   │   └── (загруженные файлы)
    │   │
    │   ├── vector_store/         🔍 Сохраненные эмбеддинги
    │   │   ├── embeddings.npy
    │   │   └── chunks_metadata.json
    │   │
    │   ├── models/               🤖 Кэш моделей
    │   │   └── (загруженные модели)
    │   │
    │   ├── app.log               📋 Логи приложения
    │   └── config.json           ⚙️ Сохраненная конфигурация
    │
    └── venv/                     🐍 Виртуальное окружение
        ├── bin/ (или Scripts/ на Windows)
        ├── lib/
        └── include/

════════════════════════════════════════════════════════════════════

ПОТОКИ ДАННЫХ
═════════════

1. ЗАГРУЗКА ДОКУМЕНТОВ:
   user_files/ → document_processor.py → chunks[] → vector_store.py

2. СОЗДАНИЕ ЭМБЕДДИНГОВ:
   chunks[] → embedding_model.encode() → embeddings[] → vector_store.save()

3. ОБРАБОТКА ВОПРОСА:
   question → rag_pipeline.retrieve() → context → llm_generator.generate()
   → refined_answer → response_refiner.refine() → user

4. ВЕБЛЙНТЕРФЕЙС:
   user_input → app.py/ask → rag_pipeline → llm_generator → JSON response
   → templates/index.html → JavaScript обновление UI

════════════════════════════════════════════════════════════════════

ГЛАВНЫЕ КОМПОНЕНТЫ СИСТЕМЫ
═══════════════════════════

┌─────────────────────────────────────────────────────────────────┐
│                    ВЕБЛИНТЕРФЕЙС (HTML/JS)                      │
│                   templates/index.html                          │
└──────────────────┬──────────────────────────────────────────────┘
                   │ HTTP Request/Response
                   ▼
┌─────────────────────────────────────────────────────────────────┐
│                   FLASK ПРИЛОЖЕНИЕ                              │
│                  app.py                                         │
│  - /api/ask, /api/status, /api/history, /api/session-info      │
└────────┬────────────────────┬────────────────────┬──────────────┘
         │                    │                    │
         ▼                    ▼                    ▼
    ┌────────────┐    ┌──────────────┐   ┌────────────────┐
    │ RAG        │    │ LLM          │   │ Session        │
    │ Pipeline   │    │ Generator    │   │ Management     │
    │ rag_..py   │    │ llm_...py    │   │                │
    └────────────┘    └──────────────┘   └────────────────┘
         │
         ▼
    ┌────────────────────────────┐
    │  Vector Store              │
    │  vector_store.py           │
    └──────────┬─────────────────┘
               │
               ▼
    ┌────────────────────────────┐
    │  Embedding Model           │
    │  sentence-transformers     │
    └────────────────────────────┘

════════════════════════════════════════════════════════════════════

КАК ДОБАВИТЬ СВОИ ДОКУМЕНТЫ
═══════════════════════════

1. Создайте файл в data/documents/
   Поддерживаемые форматы: .txt, .md, .pdf

2. Содержимое файла:
   ```
   ТЕМА: Описание
   
   Абзац 1...
   Абзац 2...
   ```

3. При запуске приложения документ автоматически:
   - Загружается
   - Обрабатывается
   - Разбивается на чанки
   - Индексируется в vector_store

4. Система готова ответить на вопросы по вашему материалу!

════════════════════════════════════════════════════════════════════

КОМАНДЫ ДЛЯ БЫСТРОГО ЗАПУСКА
════════════════════════════

# Активация окружения
source venv/bin/activate  # Linux/Mac
.\\venv\\Scripts\\activate  # Windows

# Основные команды
python quickstart.py           # Автоматический старт
python run.py                  # Веб-интерфейс
python run.py --mode test      # Тестирование
python run.py --mode demo      # Демонстрация
python tests.py                # Запуск тестов
python examples.py             # Примеры использования

# Проверка компонентов
python init.py                 # Полная инициализация

════════════════════════════════════════════════════════════════════

API ЭНДПОИНТЫ
═════════════

GET /                          Главная страница
GET /api/status                Статус системы
POST /api/ask                  Обработка вопроса
GET /api/history               История вопросов
GET /api/session-info          Информация о сессии
POST /api/clear-history        Очистка истории

════════════════════════════════════════════════════════════════════

НАСТРОЙКИ В config.py
═════════════════════

LLM_MODEL                  Модель генерации (gpt-2)
EMBEDDING_MODEL            Модель эмбеддингов
TOP_K_DOCUMENTS           Количество релевантных документов (5)
SIMILARITY_THRESHOLD      Порог сходства (0.3)
MAX_CONTEXT_LENGTH        Макс. длина контекста (2000)
MAX_RESPONSE_LENGTH       Макс. длина ответа (500)
BATCH_SIZE                Размер батча обработки (32)
HOST                      Хост сервера (0.0.0.0)
PORT                      Порт сервера (5000)

════════════════════════════════════════════════════════════════════

ТРЕБОВАНИЯ К СИСТЕМЕ
═══════════════════

Минимум:
  - Python 3.8+
  - 2 ГБ RAM
  - 500 МБ свободного места

Рекомендуется:
  - Python 3.10+
  - 8+ ГБ RAM
  - NVIDIA GPU с CUDA
  - 2 ГБ для моделей

════════════════════════════════════════════════════════════════════

ЛИЦЕНЗИЯ И КОНТРИБЬЮТИНГ
════════════════════════

Этот проект создан как MVP для образовательных целей.
Используйте и модифицируйте как требуется!

════════════════════════════════════════════════════════════════════
"""

def print_structure():
    """Вывести структуру проекта."""
    print(PROJECT_STRUCTURE)


def save_structure(filename="PROJECT_STRUCTURE.txt"):
    """Сохранить структуру в файл."""
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(PROJECT_STRUCTURE)
    print(f"✓ Структура проекта сохранена в {filename}")


if __name__ == '__main__':
    print_structure()
    # save_structure()
